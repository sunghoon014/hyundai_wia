[
    {
        "id": "10000",
        "original": "10000\nBMA 공정 AMR의 [10000] RFID 감지 안됨(RFID not detected) 경고는 주행 경로상의 RFID 태그 인식이 불가능한 상태를 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 AMR의 정지 위치를 확인하고 RFID 리더기와 태그의 정렬 상태를 점검해야 한다.\n\nBMA 공정 AMR의 [10001] 리프트 미션 실패(Lift mission fail) 경고는 팔레트 상하강 동작이 지정된 시간 내에 완료되지 않았음을 나타낸다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 리프트 구동부의 기계적 간섭 여부를 확인한 후 HMI를 통해 리프트 위치를 초기화해야 한다.\n\nBMA 공정 AMR의 [10002] 턴테이블 미션 실패(Turntable mission fail) 경고는 상단 턴테이블의 회전 동작이 정상 범위 내에서 종료되지 않았을 때 발생한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 턴테이블의 회전 반경 내 이물질을 제거하고 수동 모드에서 원점 복귀를 수행해야 한다.\n\nBMA 공정 AMR의 [10003] 도킹 중 장애물 감지(Obstacle detected during docking) 경고는 설비 진입 및 도킹 과정에서 안전 센서가 물체를 감지하여 주행이 중단된 상태를 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 도킹 경로상의 장애물을 제거한 후 주행 재개 버튼을 조작해야 한다.\n\nBMA 공정 AMR의 [10004] 거치대 도킹 실패(Wing docking fail) 경고는 AMR이 윙(Wing) 타입 거치대와의 물리적 결합 위치 정밀도 확보에 실패했음을 나타낸다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 거치대의 정위치 이탈 여부를 확인하고 AMR을 후진시킨 후 재도킹을 시도해야 한다.\nBMA 공정 AMR의 [10005] 충전 도킹 실패(Charge docking fail) 알람은 로봇이 충전 스테이션과의 물리적 결합에 실패했음을 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 로봇의 위치를 재조정하고 충전 단자의 정렬 상태를 확인해야 한다.\n\nBMA 공정 AMR의 [10006] 도킹아웃 중 충돌 방지 대기중(Waiting for collision protection during docking out) 상태는 로봇이 도킹 해제 후 이동 경로 상의 장애물을 감지하여 일시 정지한 상황을 나타낸다.\n\nBMA 공정 AMR의 [10007] 도킹 비정상 완료 감지됨(Docking completion WARN) 알람은 도킹 프로세스는 종료되었으나 센서 데이터가 정상 범위를 벗어난 불완전한 결합 상태임을 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 로봇과 스테이션의 도킹 상태를 육안으로 점검하고 재도킹을 수행해야 한다.\n\nBMA 공정 AMR의 [10008] 설비 인터락으로 인한 정지 상태(Stop-state due to facility interlocks)는 상위 제어 시스템이나 주변 설비로부터 정지 신호를 수신하여 로봇의 구동이 차단된 상태이다.\n\nBMA 공정 AMR의 [10009] 도킹 인지 실패(Docking shape recognition fail) 알람은 로봇의 비전 센서나 레이저 스캐너가 도킹 스테이션의 형상을 식별하지 못할 때 발생한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 도킹 스테이션 마커의 오염 상태를 확인하고 센서의 이물질을 제거해야 한다.\nBMA 공정 AMR의 [10010] 알람은 도킹 프로세스 중 장애물 감지를 위한 3D 카메라와의 통신 연결이 실패했음을 의미한다.\n\nBMA 공정 AMR의 [10011] 알람은 도킹 시작 지점의 위치 오차가 허용 범위를 초과하여 발생한 경고 상태를 나타낸다.\n\nBMA 공정 AMR의 [10012] 알람은 도킹용 IR 센서가 감지되지 않아 시스템이 자동으로 도킹을 재시도하고 있는 상태를 의미한다.\n\nBMA 공정 AMR의 [10013] 알람은 설정된 제한 시간 내에 도킹 완료 신호가 수신되지 않아 도킹 시간 초과가 발생했음을 의미한다.\n\nBMA 공정 AMR의 [10014] 알람은 도킹 경로 상에서 장애물이 감지되어 주행이 일시 정지된 상태를 나타낸다.\nBMA 공정 AMR의 [10015] 에러는 도킹 과정에서 IR 센서가 감지되지 않아 최종적으로 도킹에 실패했음을 의미한다.\n\nBMA 공정 AMR의 [10016] 경고는 충전 도킹 중 충전 센서가 감지되지 않아 도킹을 재시도하고 있는 상태를 나타낸다.\n\nBMA 공정 AMR의 [10017] 에러는 PLC(Programmable Logic Controller)가 리셋되었으나 진행 중인 작업(Job)이 정상적으로 취소되지 않았을 때 발생한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 제어 시스템을 통해 잔여 작업을 강제로 종료하거나 초기화해야 한다.\n\nBMA 공정 AMR의 [10018] 정보는 설정된 충전 허용 시간을 초과하여 충전 타임아웃이 발생했음을 알린다.\n\nBMA 공정 AMR의 [20000] 정보는 주행 중 장애물 발생이나 경로 이탈로 인해 시스템이 주행 경로를 재생성하고 있는 상태를 의미한다.",
        "preprocessed": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n## AMR 자율주행 및 미션 제어의 논리적 아키텍처와 예외 처리 메커니즘\n\n**작성자:** 수석 아키텍트 (Chief Architect)\n**배포 대상:** 시스템 엔지니어, 유지보수 담당자, 공정 제어 연구원\n\n---\n\n### 1. 서론 (Introduction)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 고중량의 배터리 모듈을 다루는 환경 특성상, AMR(Autonomous Mobile Robot)의 정밀한 제어와 안전 무결성(Safety Integrity)이 최우선으로 요구된다. 본 챕터에서는 AMR 운용 중 발생하는 다양한 이벤트 코드(Event Code)를 단순한 '에러'가 아닌, **시스템 아키텍처(System Architecture) 관점에서의 상태 변화(State Transition)**로 재해석한다.\n\n우리는 센서 퓨전(Sensor Fusion), 키네마틱스(Kinematics), 그리고 PLC 로직 간의 상호작용을 분석하여, 각 알람이 발생하는 공학적 원인과 시스템의 대응 논리를 심층적으로 기술한다.\n\n---\n\n### 2. 측위 및 주행 제어 시스템 (Localization & Navigation Control)\n\nAMR이 공장 내에서 자신의 위치를 인식하고 목적지까지 이동하는 과정은 **추측 항법(Dead Reckoning)**과 **절대 위치 보정(Absolute Positioning)**의 끊임없는 상호작용이다.\n\n#### 2.1. 절대 위치 보정 실패와 시스템 락 (RFID Anomalies)\n*   **관련 코드:** `[10000]`\n*   **메커니즘 분석:**\n    AMR은 휠 엔코더(Wheel Encoder)와 IMU(관성측정장치)를 통해 자신의 위치를 추정하지만, 주행 거리가 누적될수록 슬립(Slip) 등에 의해 오차(Drift)가 발생한다. 이를 보정하기 위해 바닥에 매설된 RFID 태그를 읽어 'Ground Truth(절대 좌표)'를 획득한다.\n    *   **논리적 인과관계:** `[10000] RFID 감지 안됨`은 단순한 센서 고장이 아니다. 이는 **\"추정 위치와 실제 위치 간의 오차를 더 이상 신뢰할 수 없는 임계점\"**에 도달했음을 의미한다. 시스템은 위치 불확실성(Uncertainty)이 허용 범위를 초과했다고 판단하여, 안전을 위해 주행을 즉시 차단(Fail-safe Stop)한다.\n    *   **복구 로직:** 운영자의 개입은 단순한 확인이 아니라, 로봇에게 현재의 물리적 좌표를 강제로 재할당(Relocalization)하여 네비게이션 스택(Stack)을 리셋하는 과정이다.\n\n#### 2.2. 동적 경로 계획과 알고리즘 (Dynamic Path Planning)\n*   **관련 코드:** `[20000]`\n*   **메커니즘 분석:**\n    ACS(AMR Control System)는 전역 경로(Global Path)를 생성하지만, AMR 내부의 로컬 플래너(Local Planner)는 실시간 장애물을 회피하기 위해 경로를 수정한다.\n    *   **데이터 흐름:** `[20000] 주행 경로 재생성` 정보는 에러가 아니라, **Lidar/Camera 센서 데이터가 기존 경로상의 점유(Occupancy)를 감지 -> 비용 지도(Costmap) 업데이트 -> A* 또는 Dijkstra 알고리즘 재수행**으로 이어지는 연산 상태를 나타낸다. 이는 시스템이 환경 변화에 적응하고 있음을 보여주는 정상적인 피드백 루프이다.\n\n---\n\n### 3. 키네마틱 액추에이션 및 미션 수행 (Kinematic Actuation & Mission Execution)\n\nAMR이 위치 이동뿐만 아니라, 리프트나 턴테이블을 통해 물류를 이재(Transfer)하는 과정은 정밀한 모터 제어와 피드백 루프에 의존한다.\n\n#### 3.1. 수직/회전 구동의 폐루프 제어 실패 (Actuator Feedback Failures)\n*   **관련 코드:** `[10001]`, `[10002]`\n*   **메커니즘 분석:**\n    리프트와 턴테이블은 목표 위치(Target Position)에 도달할 때까지 모터를 구동하며, 엔코더 펄스를 통해 현재 위치를 피드백 받는다(Closed-loop Control).\n    *   **[10001] 리프트 미션 실패:** 유압 또는 전동 리프트가 $t$초(Time Threshold) 내에 목표 높이(Limit Switch 또는 Encoder Value)에 도달하지 못한 경우다. 이는 과부하로 인한 모터 토크 부족, 혹은 기구적 끼임(Jamming)으로 인한 물리적 교착 상태를 의미한다.\n    *   **[10002] 턴테이블 미션 실패:** 회전체의 관성 모멘트(Moment of Inertia) 제어 실패 혹은 이물질로 인한 마찰력 증가가 원인이다. 지정된 각도 오차 범위(Tolerance) 내에 안착하지 못하면, 상위 설비와의 핸드쉐이킹(Handshaking)이 불가능해지므로 시스템은 작업을 중단한다.\n\n---\n\n### 4. 정밀 도킹 및 센서 퓨전 아키텍처 (Precision Docking & Sensor Fusion)\n\n도킹(Docking)은 일반 주행(Navigation) 모드에서 정밀 접근(Approach) 모드로 전환되는 임계 과정이다. 이 단계에서는 cm 단위의 오차도 허용되지 않으므로 다중 센서 퓨전이 수행된다.\n\n#### 4.1. 안전 센서와 감속 제어 (Safety & Obstacle Detection)\n*   **관련 코드:** `[10003]`, `[10006]`, `[10014]`\n*   **메커니즘 분석:**\n    도킹 진입/이탈 시 AMR은 안전 등급(Safety Rated)이 부여된 Lidar 영역(Field of View)을 좁혀가며 감시한다.\n    *   **작동 원리:** `[10003]`, `[10014]`는 도킹 궤적(Trajectory) 상에 동적/정적 장애물이 감지되었을 때 발생한다. 시스템은 충돌 방지를 위해 모터의 역기전력을 이용한 급제동(E-Stop) 혹은 감속 프로파일을 적용하여 정지한다. `[10006]`은 도킹 해제(Docking Out) 시퀀스 중 후방 안전을 확보하기 위한 대기 상태로, 센서 데이터가 클리어될 때까지 로직을 홀딩(Holding)한다.\n\n#### 4.2. 형상 인식 및 비전 처리 (Shape Recognition & Vision Processing)\n*   **관련 코드:** `[10009]`, `[10010]`, `[10011]`\n*   **메커니즘 분석:**\n    정밀 도킹을 위해 AMR은 2D Lidar의 스캔 데이터 매칭 혹은 3D 카메라의 포인트 클라우드(Point Cloud) 분석을 수행한다.\n    *   **[10009] 도킹 인지 실패:** 센서가 수신한 데이터 패턴이 사전에 학습된 도킹 스테이션의 기하학적 형상(V-Marker 등)과 일치하지 않는 경우다. 이는 마커의 오염(반사율 저하)이나 센서 노이즈로 인해 신뢰도(Confidence Score)가 임계치 미만으로 떨어졌음을 의미한다.\n    *   **[10010] 3D 카메라 통신 실패:** USB/GigE 인터페이스의 대역폭 문제나 하드웨어 연결 끊김으로 인해, 심도(Depth) 정보를 처리하는 프로세서가 데이터를 수신하지 못하는 하드웨어 레벨의 오류다.\n\n#### 4.3. IR 유도 및 정렬 알고리즘 (IR Guidance & Alignment)\n*   **관련 코드:** `[10012]`, `[10015]`, `[10016]`\n*   **메커니즘 분석:**\n    최종 접근 단계에서는 IR(적외선) 송수신기를 이용한 빔 라이딩(Beam Riding) 기술이 사용된다.\n    *   **논리적 흐름:** `[10012]` 및 `[10016]`은 IR 신호가 일시적으로 소실(Line of Sight 차단)되었을 때, 즉시 에러를 띄우지 않고 **재시도(Retry) 루프**에 진입한 상태다. 이는 시스템의 강건성(Robustness)을 위한 설계이다. 그러나 재시도 횟수(Count)가 초과되면 `[10015]`와 같은 최종 실패(Fatal Error)로 천이(Transition)하여 운영자 호출을 트리거한다.\n\n#### 4.4. 물리적 결합 및 공차 관리 (Physical Coupling & Tolerance)\n*   **관련 코드:** `[10004]`, `[10005]`, `[10007]`, `[10013]`\n*   **메커니즘 분석:**\n    *   **[10004] 윙 도킹 / [10005] 충전 도킹 실패:** AMR의 커넥터와 스테이션의 포트가 기계적으로 결합되지 않은 상태다. 이는 기구적 공차(Tolerance) 설계 범위를 벗어난 위치 오차나, 바닥 평탄도 문제로 인한 Z축 정렬 불량이 원인일 수 있다.\n    *   **[10007] 도킹 비정상 완료 (WARN):** 도킹 완료 신호(Limit Switch 등)는 들어왔으나, 전류 센서나 압력 센서의 값이 정상 범위(Normal Range)를 벗어난 경우다. 이는 \"결합은 되었으나 불안정한 상태(예: 접촉 저항 과다)\"를 의미하며, 화재나 낙하 사고 방지를 위해 경고를 발생시킨다.\n    *   **[10013] 도킹 시간 초과:** 도킹 시퀀스 시작 후 $T_{limit}$ 내에 완료 플래그가 True가 되지 않은 경우, 워치독 타이머(Watchdog Timer)에 의해 프로세스가 강제 종료된다.\n\n---\n\n### 5. 시스템 통합 제어 및 안전 인터락 (System Integration & Safety Interlock)\n\nAMR은 단독으로 존재하지 않으며, 전체 공정 제어 시스템(MCS/ACS) 및 PLC와 유기적으로 연결되어 있다.\n\n#### 5.1. 설비 간 인터락 및 교착 상태 방지 (Interlocks)\n*   **관련 코드:** `[10008]`\n*   **메커니즘 분석:**\n    BMA 공정은 컨베이어, 로봇 팔, AMR이 협업한다. `[10008]`은 상위 제어기(PLC)가 AMR에게 **\"진입 금지(Not Clear to Enter)\"** 신호를 보낸 상태다. 이는 전방 설비가 아직 작업을 마치지 않았거나, 비상 정지(EMG)가 눌린 상태 등 외부 요인에 의한 논리적 차단(Logical Block)이다. 이는 물리적 충돌을 방지하기 위한 최상위 안전 프로토콜이다.\n\n#### 5.2. PLC 상태 불일치 및 잔여 작업 처리 (PLC State Mismatch)\n*   **관련 코드:** `[10017]`\n*   **메커니즘 분석:**\n    PLC가 전원 재인가 혹은 워치독에 의해 리셋되었을 때, AMR 내부의 메모리에는 이전 작업(Job) 정보가 남아있을 수 있다.\n    *   **데이터 흐름:** 상위 시스템(PLC)은 초기화(Idle)되었으나 하위 시스템(AMR)은 작업 중(Busy)인 **상태 불일치(State Mismatch)**가 발생한다. 이 경우 `[10017]` 에러를 통해 좀비 프로세스(Zombie Process)가 실행되는 것을 방지하며, 운영자가 강제로 작업 큐(Queue)를 플러시(Flush)해야 시스템 동기화가 복구된다.\n\n#### 5.3. 배터리 충전 로직 및 열폭주 방지 (Battery Management)\n*   **관련 코드:** `[10018]`\n*   **메커니즘 분석:**\n    리튬이온 배터리의 충전은 CC(Constant Current) / CV(Constant Voltage) 모드로 제어된다.\n    *   **안전 로직:** `[10018] 충전 타임아웃`은 예상된 시간 내에 배터리 전압이 목표치에 도달하지 못했거나, 충전 전류가 차단되지 않음을 의미한다. 이는 배터리 셀의 내부 저항 증가나 BMS(Battery Management System)의 이상 징후일 수 있으므로, 시스템은 열폭주(Thermal Runaway) 방지를 위해 전력 공급을 물리적으로 차단한다.\n\n---\n\n### 6. 결론 (Conclusion)\n\nBMA 공정의 AMR 시스템에서 발생하는 각 알람 코드는 단순한 고장 신호가 아니라, **물리적 현상(센서 노이즈, 마찰, 관성)과 논리적 제약(타임아웃, 인터락, 상태 불일치) 사이의 충돌을 해결하기 위한 방어 기제**이다. 엔지니어는 이 백서에 기술된 인과관계를 바탕으로, 현상을 단편적으로 해결하는 것을 넘어 시스템의 근본적인 안정성을 확보하는 방향으로 유지보수를 수행해야 한다.",
        "source": "acs_alarm.md"
    },
    {
        "id": "20000",
        "original": "20000\nBMA 공정 AMR의 주행 시스템에서 발생하는 [20001] 에러는 현재 위치에서 목적지까지의 주행 경로 생성이 불가능한 상태를 의미한다.\n\nBMA 공정 AMR의 주행 시스템에서 발생하는 [20002] 에러는 일시적인 주행 제한이 설정되어 로봇의 이동이 차단된 상태를 나타낸다.\n\nBMA 공정 AMR의 주행 시스템에서 발생하는 [20003] 에러는 구동부 바퀴의 슬립(Slip) 현상이 감지되어 정상적인 주행 토크 전달이 어려운 상태를 의미한다.\n\nBMA 공정 AMR의 주행 시스템에서 발생하는 [20004] 상태는 주행 경로 상에 장애물이 감지되어 로봇이 안전을 위해 대기 중인 정보성 알림이다.\n\nBMA 공정 AMR의 주행 시스템에서 발생하는 [20005] 에러는 주행 제어 시스템 내부의 일반적인 경고(WARN) 상황이 발생했음을 의미한다.\nBMA 공정 AMR의 주행 중 비상 정지(Emergency) 스위치 또는 범퍼 센서가 물리적 접촉을 감지하면 20006 경고가 발생한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 기구적 간섭 요인을 제거한 후 제어반의 복귀 스위치를 조작해야 한다.\n\nBMA 공정 AMR이 주행 경로상의 장애물이나 복잡한 지형으로 인해 경로 계산(Cost handling) 처리를 지연할 경우 20007 경고가 발생한다.\n\nBMA 공정 AMR의 주행 중 상단 턴테이블의 정렬 상태가 허용 범위를 벗어나 틀어지면 20008 경고가 발생한다.\n\nBMA 공정 AMR의 턴테이블 정렬 상태를 복구하기 위한 자동 보정 시퀀스가 정상적으로 완료되지 않으면 20009 경고가 발생한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 HMI의 수동 조작 모드에서 턴테이블을 원점으로 복귀시켜야 한다.\n\nBMA 공정 AMR의 주행 중 장애물 감지를 담당하는 3D 카메라와의 통신 연결이 끊기거나 활성화에 실패하면 20010 경고가 발생한다.\nBMA 공정 AMR의 주행 중 후쿠요(Hokuyo) 장애물 감지 센서가 물체를 감지하면 시스템은 안전을 위해 주행 속도를 즉시 감속한다.\n\nBMA 공정 AMR이 주행하는 경로 상에 장애물이 후쿠요(Hokuyo) 센서의 정지 영역 내에서 감지될 경우, AMR은 즉각적으로 주행을 중단하고 정지 상태를 유지한다.\n\nBMA 공정 AMR이 특정 구간 진입을 위한 사전 통행 허가(Pass Approval)를 획득하지 못한 상태에서 주행을 시도할 경우, 관제 시스템과의 충돌 방지를 위해 일시 정지 상태로 전환된다.\n\nBMA 공정 AMR에 장착된 후쿠요(Hokuyo) 센서로부터 규격 외의 정의되지 않은 데이터 값이 수신될 경우, 주행 안전성을 확보하기 위해 시스템은 기동을 일시 정지한다.\n\nBMA 공정 AMR 내부의 메인 제어부와 Unicon 통신 보드 간의 데이터 연결이 단절되면 하드웨어 통신 오류가 발생하며 모든 구동이 제한된다.",
        "preprocessed": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n\n**문서 번호:** HMG-BMA-AMR-ARCH-04\n**주제:** AMR 주행 제어 및 안전 메커니즘의 논리적 구조 (Navigation & Safety Logic Architecture)\n**작성자:** 수석 아키텍트 (Chief Architect)\n**대상:** 시스템 엔지니어, 제어 로직 설계자, 유지보수 전문가\n\n---\n\n## 1. 개요 (Overview)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 효율성은 AMR(Autonomous Mobile Robot)의 정밀한 주행 능력과 다층적인 안전 시스템에 의존합니다. 본 챕터에서는 AMR의 주행 제어 시스템에서 발생하는 **20000번대 상태 코드**를 중심으로, 로봇이 환경을 인지하고 경로를 생성하며 물리적 제어를 수행하는 내부 메커니즘을 심층 분석합니다. 단순한 에러 정의를 넘어, 센서 퓨전(Sensor Fusion), 키네마틱스(Kinematics), 그리고 상위 관제 시스템(ACS) 간의 상호작용을 공학적 관점에서 서술합니다.\n\n---\n\n## 2. 주행 경로 계획 및 트래픽 제어 알고리즘 (Path Planning & Traffic Control)\n\nAMR의 자율 주행은 현재 위치에서 목표 지점까지의 최적 경로를 계산하는 **전역 경로 계획(Global Path Planning)**과, 실시간 장애물을 회피하는 **지역 경로 계획(Local Path Planning)**의 유기적 결합으로 이루어집니다.\n\n### 2.1. 경로 생성 실패와 비용 함수 (Cost Function)의 한계\n*   **[20001] 경로 생성 불가 (Path Generation Failure):**\n    *   **메커니즘:** AMR의 네비게이션 알고리즘(예: A* 또는 Dijkstra)이 시작 노드와 목표 노드 사이의 연결성을 수학적으로 증명하지 못할 때 발생합니다. 이는 맵(Map) 상의 모든 가능한 경로가 '점유됨(Occupied)' 상태이거나, 가상의 벽(Virtual Wall)으로 차단되어 그래프 탐색이 실패했음을 의미합니다.\n    *   **논리적 인과:** [목표 좌표 수신] → [경로 탐색 알고리즘 수행] → [모든 인접 노드의 Cost가 무한대($\\infty$)] → **[20001 에러 트리거]**\n\n*   **[20007] 경로 비용 계산 지연 (Cost Handling Latency):**\n    *   **메커니즘:** 주행 중 동적 장애물이나 복잡한 지형이 감지되면, 로봇은 실시간으로 로컬 코스트맵(Local Costmap)을 업데이트합니다. 장애물 밀도가 급격히 높아져 연산 부하가 임계치를 초과하면, 정해진 제어 주기(Cycle Time) 내에 최적 경로를 도출하지 못하는 '계산 지연'이 발생합니다.\n    *   **공학적 의미:** 이는 프로세서의 연산 능력 부족보다는, 환경의 복잡도가 일시적으로 알고리즘의 수렴 속도를 저하시키는 현상입니다.\n\n### 2.2. 관제 시스템(ACS)과의 동기화 및 교착 상태 방지\n*   **[20002] 주행 제한 및 [Pass Approval] 미승인:**\n    *   **작동 원리:** 다수의 로봇이 협업하는 BMA 공정에서는 물리적 충돌과 교착 상태(Deadlock)를 방지하기 위해 구역(Zone) 단위의 점유 권한을 관리합니다.\n    *   **Pass Approval 로직:** AMR이 교차로 등 특정 임계 구역(Critical Section)에 진입하기 전, 상위 관제 시스템에 진입 권한을 요청합니다. 승인(ACK) 신호를 받지 못한 상태에서 진입을 시도하면, 로봇은 즉시 **일시 정지(Pause)** 상태로 전환되어 물리적 충돌을 예방합니다. [20002] 에러는 이러한 외부적 요인에 의해 주행이 강제로 차단된 상태를 나타냅니다.\n\n---\n\n## 3. 동역학 제어 및 물리적 상호작용 (Kinematics & Physical Interaction)\n\nAMR은 소프트웨어 명령을 물리적 움직임으로 변환하는 과정에서 마찰, 관성, 기구적 정렬 등 다양한 물리 법칙의 지배를 받습니다.\n\n### 3.1. 구동 효율과 마찰 계수\n*   **[20003] 슬립 감지 (Wheel Slip Detection):**\n    *   **현상 분석:** 모터에 인가된 전류량(Torque Command)과 엔코더(Encoder)를 통해 측정된 실제 회전수, 그리고 IMU(관성측정장치)의 가속도 데이터 간에 불일치가 발생할 때 트리거됩니다.\n    *   **공학적 배경:** 바닥면의 오일 오염이나 이물질로 인해 타이어와 지면 사이의 마찰 계수($\\mu$)가 급격히 감소하면, 휠은 회전하지만 로봇은 전진하지 못하는 슬립 현상이 발생합니다. 제어기는 이를 감지하여 휠의 과도한 회전을 막고 궤적 이탈을 방지하기 위해 구동을 차단합니다.\n\n### 3.2. 기구적 정렬 및 보정 시스템\n*   **[20008] 턴테이블 정렬 오차 (Turntable Misalignment):**\n    *   **메커니즘:** 배터리 모듈을 적재하는 상단 턴테이블은 주행 방향과 일치하거나 특정 각도를 유지해야 합니다. 위치 피드백 센서가 허용 공차(Tolerance)를 벗어난 각도를 감지하면, 무게 중심(Center of Gravity)의 불안정으로 인한 전복 사고를 방지하기 위해 경고를 발생시킵니다.\n*   **[20009] 자동 보정 실패 (Auto-Calibration Failure):**\n    *   **복구 로직:** 시스템은 1차적으로 턴테이블을 원점으로 복귀시키는 자동 시퀀스를 수행합니다. 그러나 기구적 끼임(Jamming)이나 센서 노이즈로 인해 이 시퀀스가 타임아웃되거나 실패할 경우, 시스템은 안전을 위해 **수동 조작(Manual Operation)**을 요구합니다.\n    *   **운영자 개입:** HMI를 통한 수동 원점 복귀는 단순한 조작이 아니라, 자동 제어 루프(Closed-loop)가 해결하지 못한 기구적 구속 상태를 인간의 판단하에 해제하는 절차입니다.\n\n---\n\n## 4. 인지 시스템 및 센서 퓨전 (Perception & Sensor Fusion)\n\nAMR은 Lidar(Hokuyo)와 3D 카메라 등 다양한 센서를 통해 주변 환경을 인지합니다. 이 데이터는 안전 등급(Safety Integrity Level)에 따라 처리됩니다.\n\n### 4.1. 다층적 장애물 감지 (Multi-Layered Obstacle Detection)\n*   **Hokuyo 센서의 영역(Zone) 기반 제어:**\n    *   **감속 영역 (Warning Zone):** 센서가 원거리의 물체를 감지하면, 시스템은 충돌까지의 시간(TTC: Time-to-Collision)을 계산하여 주행 속도를 선형적으로 감속합니다.\n    *   **정지 영역 (Stop Zone):** 물체가 로봇의 물리적 제동 거리 내(Stop Zone)에 진입하면, 모터의 전원을 차단하고 브레이크를 체결하여 즉각적인 정지 상태를 유지합니다.\n    *   **[20004] 대기 상태:** 이는 에러가 아닌 정보성 알림으로, 장애물이 제거되면 즉시 주행을 재개할 준비가 된 'Active Waiting' 상태를 의미합니다.\n\n### 4.2. 센서 데이터 무결성 및 통신\n*   **[20010] 3D 카메라 통신 오류:**\n    *   **데이터 흐름:** 3D 카메라는 방대한 양의 포인트 클라우드(Point Cloud) 데이터를 메인 프로세서로 전송합니다. USB 또는 이더넷 인터페이스의 대역폭 문제나 연결 단절이 발생하면, 로봇은 '눈'을 잃은 것으로 간주하여 즉시 주행을 중단합니다.\n*   **Hokuyo 데이터 규격 오류:**\n    *   **Fail-Safe 설계:** 센서로부터 노이즈나 프로토콜에 정의되지 않은 비정상적인 패킷이 수신될 경우, 시스템은 이를 '장애물 없음'으로 오판하지 않고, **'신뢰할 수 없는 상태'**로 규정하여 기동을 일시 정지합니다. 이는 안전을 최우선으로 하는 설계 철학(Fail-Safe)의 반영입니다.\n\n---\n\n## 5. 하드웨어 인터페이스 및 비상 제어 (Hardware Interface & Emergency Control)\n\n### 5.1. 임베디드 통신 아키텍처\n*   **Unicon 통신 보드 오류:**\n    *   **구조:** AMR의 메인 PC(두뇌)와 모터 드라이버/센서(근육/신경) 사이에는 **Unicon**과 같은 하드웨어 인터페이스 보드가 중계 역할을 수행합니다.\n    *   **치명적 오류:** 메인 제어부와 Unicon 간의 데이터 링크가 단절되면, 상위 명령을 하위 구동부로 전달할 수 없게 됩니다. 이는 척수 신경이 끊어진 것과 유사한 상태로, 모든 구동이 물리적으로 제한되는 하드웨어 레벨의 오류입니다.\n\n### 5.2. 비상 정지 및 물리적 인터록 (Emergency Stop & Interlock)\n*   **[20006] 비상 정지/범퍼 센서 작동:**\n    *   **하드웨어 인터럽트:** E-Stop 스위치나 범퍼 센서는 소프트웨어 로직을 거치지 않고 전원 회로를 직접 차단(Hard-wired Safety)하는 경우가 많습니다.\n    *   **복구 메커니즘:** 물리적 충돌이나 비상 정지가 발생하면, 단순한 소프트웨어 리셋으로는 불충분합니다.\n        1.  **원인 제거:** 운영자가 기구적 간섭 요인을 물리적으로 제거.\n        2.  **하드웨어 리셋:** 제어반의 복귀 스위치를 조작하여 안전 릴레이(Safety Relay)를 복구.\n        3.  **소프트웨어 복귀:** 이후 시스템이 정상 상태임을 인지하고 에러를 소거.\n    *   이러한 다단계 절차는 우발적인 재가동으로 인한 2차 사고를 방지하기 위한 필수적인 안전 프로토콜입니다.\n\n---\n\n## 6. 결론 (Conclusion)\n\nBMA 공정 AMR의 20000번대 에러 코드는 단순한 고장 신호가 아닙니다. 이는 로봇이 복잡한 물리적 환경과 상호작용하며 발생하는 **경로 계획의 난제, 동역학적 한계, 센서 데이터의 불확실성, 그리고 하드웨어 통신의 무결성**을 실시간으로 관리하는 과정에서 도출되는 시스템의 상태 메시지입니다. 엔지니어는 이 코드를 통해 시스템의 어느 레이어(Layer)에서 병목이나 결함이 발생했는지를 구조적으로 파악하고 대처해야 합니다.",
        "source": "acs_alarm.md"
    },
    {
        "id": "30000",
        "original": "30000\nBMA 공정 AMR의 배터리 잔량이 20% 이하로 저하될 경우 30001(Battery Low) 알람이 발생한다.\n\nBMA 공정 AMR의 비상 정지(EMG) 버튼이 물리적으로 눌린 상태에서는 30002(EMG Button pressed) 알람이 활성화된다.\n\nBMA 공정 AMR의 제어 시스템이 BMS(Battery Management System)로부터 배터리 상태 데이터를 수신하지 못할 경우 30003(Battery status not received from BMS) 경고가 발생한다.\n\nBMA 공정 AMR 구동 모터의 회전 방향이 설정된 명령과 일치하지 않는 역방향으로 구동될 경우 30004(Wrong motor direction) 경고가 발생한다.\n\nBMA 공정 AMR의 Unicon 통신 과정에서 CRC(Cyclic Redundancy Check) 오류가 검출되면 30005(Unicon crc WARN) 경고가 발생한다.\nBMA 공정 AMR의 [30006] 알람은 모터 드라이브의 리셋 조치가 완료되었음을 의미한다.\n\nBMA 공정 AMR의 [30007] 알람은 시스템이 배터리 관리 시스템(BMS)과 통신 연결을 수행 중인 상태임을 나타낸다.\n\nBMA 공정 AMR의 [30008] 알람은 통합 제어기인 Unicon과의 통신 연결을 시도 중인 상태를 의미한다.\n\nBMA 공정 AMR의 [30009] 알람은 장비 전방에 위치한 1번 라이다(LiDAR) 센서가 시스템과 연결되지 않은 상태임을 나타낸다.\n\nBMA 공정 AMR의 [30010] 알람은 장비 후방에 위치한 2번 라이다(LiDAR) 센서가 시스템과 연결되지 않은 상태임을 나타낸다.\nBMA 공정 AMR의 30011 에러는 1번 카메라와 제어 시스템 간의 통신 연결이 단절된 상태를 의미한다.\n\nBMA 공정 AMR의 30012 에러는 2번 카메라와 제어 시스템 간의 통신 연결이 이루어지지 않은 상태를 나타낸다.\n\nBMA 공정 AMR의 30013 에러는 메인 제어기와 PLC(Programmable Logic Controller) 간의 데이터 통신이 불가능한 상태이다.\n\nBMA 공정 AMR의 30014 에러는 관성 측정 장치인 IMU(Inertial Measurement Unit) 센서의 연결이 해제되어 기체의 자세 및 방향 정보를 수신할 수 없는 상태를 의미한다.\n\nBMA 공정 AMR의 30015 에러는 라이다(LiDAR) 센서로부터 수신되는 거리 측정 데이터가 비정상적이거나 유효하지 않은 범위 내에 있음을 나타낸다.\nBMA 공정 AMR의 [30017] 모터드라이브 CAN통신 에러(Motor drive CAN communication WARN)는 제어기와 모터 드라이브 간의 CAN 통신 네트워크에 이상이 발생했음을 의미한다.\n\nBMA 공정 AMR의 [30018] MQTT 서버 통신 끊김(MQTT server communication disconnected)은 로봇과 상위 관제 시스템 간의 데이터 송수신을 담당하는 MQTT 브로커와의 연결이 해제된 상태를 나타낸다.\n\nBMA 공정 AMR의 [30019] ACS 통신 끊김(ACS communication disconnected)은 로봇 제어 시스템(ACS, Autonomous Control System)과 AMR 간의 무선 또는 유선 통신이 중단된 상태이다.\n\nBMA 공정 AMR의 [30020] OSSD 발생(OSSD signal)은 안전 센서의 출력 신호 전환 장치(OSSD)가 작동하여 로봇의 안전 회로가 활성화되었음을 알리는 정보성 신호이다.\n\nBMA 공정 AMR의 [30021] 충전 신호 해제로 인한 릴레이 해제 시도(Attempting to turn off relay because the charge signal is off)는 외부 충전 신호가 차단됨에 따라 시스템이 내부 충전 릴레이의 전원을 차단하기 위해 물리적 접점 해제를 시도하는 상태를 의미한다.\nBMA 공정 AMR(0.3T/1T) 시스템의 H/W 알람 코드 30030은 내부 저장 장치의 디스크 사용량이 전체 용량의 70%를 초과했음을 나타내는 정보(Info) 단계의 상태이다.\n\nBMA 공정 AMR(0.3T/1T) 시스템의 H/W 알람 코드 30031은 내부 저장 장치의 디스크 사용량이 전체 용량의 80%를 초과하여 주의가 필요한 경고(Warn) 단계의 상태이다.\n\nBMA 공정 AMR(0.3T/1T) 시스템의 H/W 알람 코드 30032는 내부 저장 장치의 디스크 사용량이 전체 용량의 90%를 초과하여 즉각적인 조치가 필요한 오류(Error) 단계의 상태이다.\n\nBMA 공정 AMR(0.3T/1T) 시스템의 H/W 알람 코드 30033은 제어 PC의 메모리(RAM) 사용량이 전체 용량의 70%를 초과했음을 나타내는 정보(Info) 단계의 상태이다.\n\nBMA 공정 AMR(0.3T/1T) 시스템의 H/W 알람 코드 30034는 제어 PC의 메모리(RAM) 사용량이 전체 용량의 80%를 초과하여 주의가 필요한 경고(Warn) 단계의 상태이다.\nBMA 공정 AMR의 제어 PC 메모리 점유율이 90%를 초과할 경우, 시스템은 [30035] Memory usage exceeds 90 percent 에러를 발생시킨다.\n\nBMA 공정 AMR의 주행용 라이다(LIDAR) 센서에서 하드웨어 결함이나 데이터 수신 불량이 감지되면 [30036] LIDAR ERROR Occurred 에러가 발생한다.\n\nBMA 공정 AMR의 라이다(LIDAR) 센서 렌즈 오염이나 일시적인 신호 감쇄가 발생할 경우, 시스템은 [30037] LIDAR WARN Occurred 경고를 출력한다.\n\nBMA 공정 AMR의 배터리 관리 시스템(BMS)에서 측정된 배터리 온도가 허용 임계치를 초과하면 [30038] BMS Battery Over Temperature 에러가 발생한다.\n\nBMA 공정 AMR의 배터리 관리 시스템(BMS)에서 측정된 전압이 정격 범위를 벗어나 과전압 상태가 되면 [30039] BMS Battery Over Voltage 에러가 발생한다.\nBMA 공정 AMR의 [30040] BMS Battery Communication Error (Charging) 에러는 충전 프로세스 중 배터리 관리 시스템(BMS)과 제어기 간의 통신이 단절되었음을 의미한다.\n\nBMA 공정 AMR의 [30041] BMS Battery High Temperature (Driving) 에러는 주행 중 배터리 팩의 내부 온도가 설정된 정상 범위를 초과하여 상승했음을 나타낸다.\n\nBMA 공정 AMR 주행모터 드라이버의 [40000] Over Heat 경고는 구동 모터 드라이버의 내부 온도가 임계치를 초과하여 과열된 상태를 의미한다.\n\nBMA 공정 AMR 주행모터 드라이버의 [40001] Over Voltage 경고는 드라이버에 입력되는 전압이 허용 범위를 초과하여 공급되고 있음을 나타낸다.\n\nBMA 공정 AMR 주행모터 드라이버의 [40002] Under Voltage 경고는 드라이버 입력 전압이 기준치 미만으로 하락했음을 의미하며, 기구의 비상정지(Emergency Stop) 버튼이 눌린 경우에도 해당 경고가 발생한다.",
        "preprocessed": "# 현대자동차그룹 BMA 공정 자동화 시스템 기술 백서\n## AMR 시스템 아키텍처: 센서 퓨전, 전력 제어 및 통신 무결성 분석\n\n**작성자:** 수석 아키텍트 (Chief Architect)\n**문서 등급:** 대외비 (Confidential) / 엔지니어링 교육용\n**버전:** 2.0\n\n---\n\n### 1. 서론 (Introduction)\n\nBMA(Battery Module Assembly) 공정은 고중량의 배터리 모듈을 다루는 환경 특성상, AMR(Autonomous Mobile Robot)의 정밀한 제어와 안전성이 최우선으로 요구된다. 본 챕터에서는 AMR 시스템에서 발생하는 상태 코드(Status Code)와 알람(Alarm)을 단순한 '오류 메시지'가 아닌, **시스템의 항상성(Homeostasis)을 유지하기 위한 피드백 루프** 관점에서 분석한다.\n\n우리는 이 데이터를 통해 하드웨어(Physical Layer), 제어 로직(Control Layer), 그리고 상위 관제(Application Layer) 간의 유기적인 상호작용과 인과관계를 규명할 것이다.\n\n---\n\n### 2. 전력 관리 시스템 (Power Management System)의 열역학적/전기적 제어 로직\n\nAMR의 동력원은 리튬이온 배터리 기반으로 작동하며, BMS(Battery Management System)는 단순한 잔량 표시를 넘어 셀(Cell) 단위의 전기화학적 안정성을 보장하는 핵심 컨트롤러이다.\n\n#### 2.1. 전압 강하와 방전 심도(DoD) 관리\n리튬이온 배터리는 방전 말기에 급격한 전압 강하(Voltage Sag) 특성을 보인다. **[30000]** 알람은 배터리 잔량(SoC)이 20% 이하로 떨어졌을 때 발생하는데, 이는 단순한 충전 요구가 아니다. SoC 20% 미만 영역에서는 내부 저항 증가로 인해 모터 구동 시 순간적인 전압 강하가 발생하여 제어 시스템(PC, Sensor)의 브라운아웃(Brown-out)을 유발할 수 있다. 따라서 시스템은 이 시점을 '안전 운행 한계점'으로 정의하고 충전 복귀 로직을 트리거한다.\n\n#### 2.2. 열폭주 방지 및 과전압 보호 메커니즘\nBMA 공정은 고부하 작업이 연속되므로 배터리의 열적 특성 관리가 필수적이다.\n*   **[30041] BMS Battery High Temperature (Driving):** 주행 중 발생하는 고전류 방전은 줄 발열(Joule Heating, $H=I^2Rt$)을 유발한다. BMS가 설정된 임계치 이상의 온도를 감지하면, 전해질의 기화나 분리막 손상을 방지하기 위해 즉시 주행을 제한하는 인터락(Interlock)을 건다.\n*   **[30038] BMS Battery Over Temperature:** 이는 주행/충전 여부와 무관하게 배터리 팩 자체의 열적 평형이 깨진 상태를 의미하며, 즉각적인 쿨링 다운이 요구된다.\n*   **[30039] BMS Battery Over Voltage:** 회생 제동(Regenerative Braking)이나 충전기 오작동으로 인해 셀 전압이 정격 범위를 초과할 경우, BMS는 과충전으로 인한 화재 위험을 차단하기 위해 메인 컨택터를 개방한다.\n\n#### 2.3. 충전 시퀀스와 릴레이 제어\n충전 프로세스는 물리적 연결과 논리적 통신이 동시에 이루어져야 한다.\n*   **[30040] BMS Battery Communication Error (Charging):** 충전 중 BMS와 제어기 간의 Heartbeat 신호가 소실되면, 과충전 보호 로직이 작동하지 않을 위험이 있으므로 즉시 충전을 중단한다.\n*   **[30021] Attempting to turn off relay:** 외부 충전 신호가 차단(Off)되었음에도 내부 릴레이가 융착(Welding) 등의 이유로 붙어있을 가능성을 배제하기 위해, 시스템은 능동적으로 릴레이 해제 시퀀스를 수행하여 아크(Arc) 발생을 억제하고 회로를 물리적으로 분리한다.\n\n---\n\n### 3. 센서 퓨전(Sensor Fusion)과 공간 인지 무결성\n\nAMR은 라이다(LiDAR), 카메라, IMU 등 이종 센서 데이터를 융합하여 자기 위치를 추정(Localization)한다. 이 과정에서 발생하는 에러는 '인지 불능' 상태를 의미한다.\n\n#### 3.1. LiDAR 기반의 SLAM 및 장애물 감지\nLiDAR는 ToF(Time of Flight) 방식으로 거리를 측정한다.\n*   **[30009] & [30010] LiDAR Disconnected:** 전방(1번) 및 후방(2번) 라이다의 물리적 연결(Ethernet/USB)이 끊긴 경우다. 이는 AMR의 '시각'을 상실한 것과 같으므로 즉시 비상 정지(Emergency Stop)가 수행된다.\n*   **[30015] & [30036] LiDAR Data Invalid/Error:** 센서는 연결되어 있으나, 수신된 Point Cloud 데이터가 비정상적인 경우다. 예를 들어, 난반사가 심한 재질이나 직사광선 간섭으로 인해 거리 값이 `NaN`이나 `Inf`로 들어오는 경우, 네비게이션 알고리즘은 이를 신뢰할 수 없는 데이터로 판단하여 에러를 송출한다.\n*   **[30037] LiDAR WARN:** 렌즈 표면의 오염(먼지, 지문)으로 인해 신호 강도(RSSI)가 약해질 때 발생한다. 이는 당장의 주행은 가능하나 정밀도가 떨어질 수 있음을 예고하는 예지 보전(Predictive Maintenance) 신호이다.\n\n#### 3.2. 비전 센서와 관성 항법의 보완\n*   **[30011] & [30012] Camera Disconnected:** 카메라는 V-Marker 인식이나 시각적 SLAM(V-SLAM)에 사용된다. 1번 또는 2번 카메라의 통신 단절은 정밀 도킹(Docking) 능력의 상실을 의미한다.\n*   **[30014] IMU Disconnected:** 라이다나 카메라가 특징점을 찾지 못하는 환경(예: 긴 복도)에서는 IMU(관성 측정 장치)의 가속도 및 자이로 데이터를 적분하여 위치를 추정(Dead Reckoning)한다. IMU 연결 해제는 이러한 추측 항법의 백업 시스템이 사라짐을 의미하므로 주행 신뢰도에 치명적이다.\n\n---\n\n### 4. 구동 제어(Kinematics) 및 안전 회로(Safety Circuit)\n\nAMR의 움직임은 모터 드라이버와 안전 PLC의 엄격한 통제 하에 이루어진다.\n\n#### 4.1. 모터 드라이브의 전기적 특성\n모터 드라이버는 DC 전력을 3상 교류로 변환하여 모터를 제어한다.\n*   **[40000] Over Heat:** 고부하 연속 운전으로 드라이버 내부 IGBT 소자의 온도가 임계치를 넘으면 소손 방지를 위해 출력을 차단한다.\n*   **[40001] Over Voltage:** 감속 시 모터가 발전기로 동작하며 생성하는 역기전력(Back-EMF)이 회생 저항 용량을 초과하여 DC Link 전압을 상승시킬 때 발생한다.\n*   **[40002] Under Voltage:** 입력 전압이 부족한 경우다. 흥미로운 점은 **[30002] EMG Button pressed** 상황에서도 이 경고가 발생한다는 것이다. 비상 정지 버튼(EMG)은 하드웨어적으로 모터 드라이버의 주 전원 라인을 차단(STO: Safe Torque Off)하도록 설계되어 있기 때문에, EMG가 눌리면 드라이버 입장에서는 전압 부족(Under Voltage)으로 인식하게 된다. 이는 안전 회로가 소프트웨어를 거치지 않고 물리적으로 작동함을 증명한다.\n\n#### 4.2. 제어 정합성 및 안전 신호\n*   **[30004] Wrong motor direction:** 엔코더 피드백을 통해 실제 회전 방향이 지령(Command)과 반대임이 감지되면, 배선 오류나 제어 루프의 발산(Runaway)을 의심하고 즉시 정지한다.\n*   **[30020] OSSD signal:** 안전 레이저 스캐너 등이 물체를 감지하여 OSSD(Output Signal Switching Device) 신호를 Low로 떨어뜨리면, 안전 PLC는 이를 감지하고 모터 전원을 차단한다. 이는 정보성 신호이지만, 시스템이 안전하게 '정지 상태'로 전환되었음을 알리는 중요한 지표다.\n\n---\n\n### 5. 컴퓨팅 리소스 및 네트워크 토폴로지 (Network Topology)\n\nAMR은 엣지 컴퓨팅 디바이스로서, 내부 리소스 관리와 외부 통신이 원활해야 한다.\n\n#### 5.1. 시스템 리소스 모니터링 (Health Check)\n제어 PC의 안정성은 공정의 연속성을 담보한다.\n*   **[30030]~[30032] Disk Usage:** 로그 데이터나 맵 파일이 누적되어 디스크가 가득 차면 OS가 멈출 수 있다. 70%(Info) -> 80%(Warn) -> 90%(Error)의 단계적 알람은 운영자가 사전에 로그를 정리(Log Rotation)할 시간을 부여한다.\n*   **[30033]~[30035] Memory Usage:** RAM 점유율이 90%를 초과([30035])하면 스와핑(Swapping) 현상으로 인해 실시간 제어 주기(Real-time Cycle)를 맞추지 못해 제어 지연(Latency)이 발생할 수 있다. 이는 충돌 사고로 이어질 수 있는 위험한 상태다.\n\n#### 5.2. 다계층 통신 프로토콜\nAMR은 내부적으로는 CAN/Serial, 외부적으로는 Ethernet/Wi-Fi를 사용한다.\n*   **[30005] Unicon crc WARN:** 통합 제어기(Unicon)와의 통신 패킷에서 CRC(Cyclic Redundancy Check) 오류가 발생했다는 것은, 공장 내 노이즈(EMI)로 인해 데이터 비트가 깨졌음을 의미한다.\n*   **[30013] PLC Communication Error:** 상위 PLC와의 통신 두절은 공정 시퀀스(Sequence) 동기화 실패를 야기한다.\n*   **[30017] Motor drive CAN communication WARN:** 실시간성이 중요한 모터 제어 명령이 CAN 버스 상에서 충돌하거나 단절된 상태다.\n*   **[30018] MQTT & [30019] ACS Disconnected:** 이는 최상위 관제 레벨의 문제다. MQTT 브로커와의 연결 끊김([30018])이나 ACS(Autonomous Control System)와의 통신 두절([30019])은 AMR이 '고립'되었음을 의미하며, 작업 할당(Task Assignment)이나 트래픽 관제(Traffic Control)를 받을 수 없게 된다.\n\n---\n\n### 6. 결론 (Conclusion)\n\nBMA 공정 AMR 시스템의 알람 코드들은 단순한 고장 신고가 아니다. 이는 **배터리의 전기화학적 상태, 센서의 물리적 한계, 모터의 역학적 부하, 그리고 네트워크의 데이터 무결성**을 실시간으로 감시하는 거대한 신경망의 신호이다.\n\n엔지니어는 [30002] 알람을 보고 단순히 버튼을 해제하는 것을 넘어, 그로 인해 [40002] 전압 저하가 유발되는 하드웨어적 시퀀스를 이해해야 하며, [30005] CRC 에러를 통해 공장 내 전자기적 노이즈 환경을 고려해야 한다. 이러한 심층적인 이해만이 시스템의 가동률(Availability)을 극대화하고 BMA 공정의 완벽한 자동화를 실현할 수 있다.",
        "source": "acs_alarm.md"
    },
    {
        "id": "40000",
        "original": "40000\nBMA 공정 AMR의 주행모터 드라이버에서 발생한 40003(Short Circuit) 알람은 시스템 내부의 단락 발생을 의미한다.\n\nBMA 공정 AMR의 주행모터 드라이버에서 발생한 40004(Emergency Stop - break 해제 상태) 알람은 비상 정지 상황으로 인해 브레이크가 해제되어 구동 준비가 되지 않은 상태를 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 비상 정지 버튼의 물리적 상태를 확인하고 해제하여 시스템을 정상 상태로 복구해야 한다.\n\nBMA 공정 AMR의 주행모터 드라이버에서 발생한 40005(Motor/Sensor ERROR) 알람은 모터 또는 센서의 설정값 오류 및 통신 결함을 의미한다.\n\nBMA 공정 AMR의 주행모터 드라이버에서 발생한 40006(MOSFET failure) 알람은 드라이버 내부 전력 제어 소자인 MOSFET의 소자 결함 또는 파손을 의미한다.\n\nBMA 공정 AMR의 주행모터 드라이버에서 발생한 40007(Default configuration loaded at startup) 알람은 시스템 시작 시 사용자 설정값이 아닌 공장 초기 설정값이 로드되었음을 의미한다.",
        "preprocessed": "# BMA 자동화 시스템 기술 백서: AMR 구동 제어 및 결함 허용 아키텍처\n**Technical Whitepaper: Drive Control & Fault Tolerance Architecture in BMA AMRs**\n\n---\n\n**작성자:** 수석 아키텍트 (Chief Architect)  \n**대상:** 시스템 엔지니어, 유지보수 담당자, 제어 로직 설계자  \n**주제:** 주행모터 드라이버(Drive Motor Driver)의 40000번대 이상 신호 분석 및 시스템 대응 메커니즘\n\n---\n\n## 1. 서론: 구동 시스템의 물리적 계층과 진단 로직\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 AMR(Autonomous Mobile Robot)의 핵심은 정밀한 주행 능력에 있습니다. 이를 관장하는 **주행모터 드라이버(Drive Motor Driver)**는 단순한 전력 공급 장치가 아니라, 상위 제어기(Main Controller)의 명령을 물리적 운동 에너지로 변환하고, 그 과정에서 발생하는 전기적·기계적 이상 징후를 밀리초(ms) 단위로 감시하는 **엣지(Edge) 진단 노드**입니다.\n\n본 챕터에서는 AMR 주행모터 드라이버에서 발생하는 **40000번대 알람 코드**를 심층 분석합니다. 이는 단순한 에러 메시지가 아니라, 시스템의 **전력 전자(Power Electronics), 안전 인터록(Safety Interlock), 센서 피드백(Sensor Feedback), 메모리 무결성(Memory Integrity)** 상태를 나타내는 중요한 지표입니다. 엔지니어는 이 코드를 통해 하드웨어의 물리적 손상 여부와 논리적 제어 불능 상태를 구분하여 접근해야 합니다.\n\n---\n\n## 2. 전력 전자 회로의 무결성 및 하드웨어 보호 (Power Electronics Integrity)\n\n주행모터 드라이버는 고전류를 스위칭하여 모터를 제어하므로, 전기적 스트레스에 가장 취약한 부품입니다. 40003번과 40006번 알람은 이러한 전력 회로의 치명적인 물리적 결함을 시사합니다.\n\n### 2.1. 시스템 단락과 과전류 보호 (Code 40003: Short Circuit)\n*   **발생 메커니즘 (Mechanism):**\n    **40003 (Short Circuit)** 알람은 드라이버의 출력단(U, V, W 상) 또는 내부 DC 링크 회로에서 **임피던스가 0에 수렴하는 단락(Short) 현상**이 감지되었음을 의미합니다. 이는 모터 권선의 절연 파괴, 케이블 피복 손상으로 인한 합선, 또는 이물질 유입으로 인한 전도성 경로 형성 시 발생합니다.\n*   **논리적 인과관계 (Logical Causality):**\n    1.  드라이버 내 전류 센서(Current Sensor/Shunt Resistor)가 허용 한계치(Threshold)를 초과하는 급격한 전류 상승(di/dt)을 감지합니다.\n    2.  하드웨어 보호 회로가 즉시 게이트 신호를 차단하여 전력 공급을 중단합니다.\n    3.  이 보호 동작이 소프트웨어 처리 속도보다 빠르게 하드웨어 레벨에서 수행된 후, 상위 제어기에 40003 코드를 송출합니다.\n*   **엔지니어링 시사점:**\n    이 알람은 단순 리셋으로 해결되지 않을 가능성이 높습니다. 재가동 시도 전, 멀티미터를 사용하여 모터 상간 저항 및 지락(Ground Fault) 여부를 반드시 물리적으로 계측해야 합니다.\n\n### 2.2. 전력 제어 소자의 파손 (Code 40006: MOSFET failure)\n*   **공학적 배경 (Engineering Background):**\n    AMR의 모터 드라이버는 **MOSFET(Metal-Oxide-Semiconductor Field-Effect Transistor)**을 이용한 H-Bridge 또는 3상 인버터 회로를 통해 배터리의 DC 전원을 모터 구동을 위한 AC 또는 PWM 파형으로 변환합니다.\n*   **발생 원인 및 현상:**\n    **40006 (MOSFET failure)**은 이 스위칭 소자가 열폭주(Thermal Runaway), 과전압(Over-voltage), 또는 노후화로 인해 물리적으로 파손되었음을 의미합니다. MOSFET이 파손되면 주로 'Short' 상태로 고착되므로, 전원을 인가하는 순간 대전류가 흘러 2차 손상을 유발할 수 있습니다.\n*   **시스템 진단 로직:**\n    드라이버는 부팅 시 또는 대기 상태에서 각 MOSFET의 게이트(Gate)에 테스트 펄스를 인가하고 드레인-소스(Drain-Source) 전압을 모니터링하는 자가 진단(Self-Diagnosis)을 수행합니다. 이 과정에서 예상치 못한 도통 상태가 감지되면 즉시 40006을 출력하고 시스템을 락다운(Lock-down) 시킵니다. 이는 **하드웨어 교체가 필수적인 치명적 결함(Critical Fault)**입니다.\n\n---\n\n## 3. 안전 인터록 및 제동 제어 시스템 (Safety & Braking System)\n\nBMA 공정은 고중량의 배터리 모듈을 다루므로, AMR의 제동 능력은 작업자의 안전과 직결됩니다.\n\n### 3.1. 비상 정지와 브레이크 해제 로직의 충돌 (Code 40004: Emergency Stop - break 해제 상태)\n*   **시스템 아키텍처 관점의 해석:**\n    **40004 (Emergency Stop - break 해제 상태)**는 **'안전 입력(Safety Input)'**과 **'구동 준비 상태(Ready State)'** 간의 논리적 불일치를 나타냅니다.\n    일반적으로 비상 정지(E-Stop)가 트리거되면, 시스템은 즉시 모터의 토크를 제거(Torque Off)하고 기계식 브레이크를 체결(Engage)해야 합니다. 그러나 이 알람은 **\"비상 정지 상황임에도 불구하고 브레이크가 해제(Release)되어 있거나, 시스템이 구동 불가능한 상태에서 브레이크 해제 신호가 감지됨\"**을 의미합니다.\n*   **물리적/논리적 교착 상태 (Deadlock):**\n    이 상태에서는 중력이나 관성에 의해 AMR이 의도치 않게 움직일 위험이 있으므로, 시스템은 소프트웨어적인 자동 복구(Auto-Recovery)를 차단합니다. 이는 **Fail-Safe(고장 시 안전 확보)** 설계 원칙에 따른 것입니다.\n*   **복구 메커니즘 (Recovery Procedure):**\n    1.  **운영자 개입:** 시스템 자동 복구가 실패했다는 것은 센서 데이터나 소프트웨어 로직만으로는 현재의 안전을 담보할 수 없다는 뜻입니다.\n    2.  **물리적 확인:** 운영자는 비상 정지 버튼(E-Stop Button)이 눌려 있는지, 혹은 외부 요인으로 브레이크가 강제 해제되었는지 확인해야 합니다.\n    3.  **하드와이어 리셋:** 비상 정지 버튼을 해제(Release)하면, 안전 릴레이(Safety Relay)의 접점이 물리적으로 닫히면서 드라이버에 'Safety OK' 신호가 인가됩니다. 이후 시스템 리셋을 통해 40004 에러를 소거(Clear)하고 정상 구동 모드로 진입합니다.\n\n---\n\n## 4. 센서 피드백 및 데이터 통신 무결성 (Sensor Feedback & Communication)\n\n정밀 주행을 위해서는 모터의 회전수와 위치에 대한 정확한 피드백이 필수적입니다.\n\n### 4.1. 폐루프 제어 실패 및 통신 오류 (Code 40005: Motor/Sensor ERROR)\n*   **작동 원리 (How it works):**\n    AMR의 주행 제어는 **폐루프 제어(Closed-loop Control)** 시스템입니다. 제어기가 \"속도 10\"을 명령하면, 모터의 엔코더(Encoder)나 홀 센서(Hall Sensor)는 실제 \"속도 10\"으로 움직이는지 피드백을 줍니다.\n*   **에러 발생 로직:**\n    **40005 (Motor/Sensor ERROR)**는 다음 두 가지 상황에서 주로 발생합니다.\n    1.  **피드백 불일치:** 모터에 전력을 공급했으나 엔코더 펄스 변화가 없거나(모터 구속), 홀 센서의 신호 패턴이 비정상적(예: 000 또는 111 패턴 등 불가능한 조합)일 때 발생합니다.\n    2.  **통신 타임아웃:** 상위 제어기(PLC/PC)와 모터 드라이버 간의 통신(CAN, RS-485, EtherCAT 등) 패킷이 손실되거나 설정된 주기 내에 응답이 없을 때 발생합니다.\n*   **데이터 흐름 분석:**\n    이 알람은 센서 하드웨어의 고장일 수도 있지만, 노이즈에 의한 통신 방해나 파라미터 설정값(예: 극수(Pole number) 설정 오류)의 불일치로 인해 발생할 수도 있습니다. 따라서 케이블 쉴딩 상태 확인 및 파라미터 검증이 선행되어야 합니다.\n\n---\n\n## 5. 시스템 초기화 및 메모리 관리 (Initialization & Memory)\n\n### 5.1. 비휘발성 메모리 데이터 손실 (Code 40007: Default configuration loaded at startup)\n*   **메커니즘 (Mechanism):**\n    모터 드라이버는 부팅 시 EEPROM이나 Flash 메모리와 같은 비휘발성 메모리(NVM)에서 사용자 설정값(PID 게인, 최대 속도 제한, 통신 ID 등)을 로드합니다.\n    **40007 (Default configuration loaded at startup)** 알람은 부팅 과정에서 NVM 데이터의 **체크섬(Checksum) 검증이 실패**했음을 의미합니다.\n*   **인과관계 및 결과:**\n    1.  전원 불안정, 비정상적인 종료, 또는 메모리 소자의 수명 저하로 인해 저장된 데이터가 손상(Corruption)되었습니다.\n    2.  시스템은 손상된 데이터를 사용하여 오작동하는 것을 방지하기 위해, 펌웨어에 내장된 **'공장 초기값(Factory Default)'**을 강제로 로드합니다.\n    3.  결과적으로 AMR은 구동은 가능할 수 있으나, BMA 공정 환경에 최적화된 튜닝 값(Calibration Data)이 소실된 상태입니다.\n*   **대응 전략:**\n    이 상태에서 작업을 지속하면 주행 정밀도가 떨어지거나 통신 충돌이 발생할 수 있습니다. 반드시 백업된 파라미터 파일을 다시 다운로드(Re-download)하고, 전원을 재인가하여 설정이 올바르게 저장되는지 검증해야 합니다.\n\n---\n\n## 6. 결론 (Conclusion)\n\nAMR 주행모터 드라이버의 40000번대 알람은 단순한 고장 신호가 아니라, 시스템을 보호하기 위한 **능동적인 방어 기제(Active Defense Mechanism)**입니다.\n*   **40003/40006**은 하드웨어 소손을 막기 위한 전력 차단,\n*   **40004**는 물리적 충돌을 방지하기 위한 안전 락(Lock),\n*   **40005**는 제어 정밀도 상실을 방지하기 위한 정지,\n*   **40007**은 데이터 오류로 인한 오동작을 막기 위한 초기화입니다.\n\n엔지니어는 각 코드가 내포한 물리적, 논리적 배경을 이해하고, 단순 복구가 아닌 근본 원인(Root Cause)을 제거하는 방향으로 유지보수를 수행해야 합니다.",
        "source": "acs_alarm.md"
    },
    {
        "id": "70000",
        "original": "70000\nBMA 공정의 WIA1000 PLC 시스템에서 70000 알람이 발생한 경우, 이는 설정된 작업 시작 시간(Work Start Time)을 초과했음을 의미한다.\n\nBMA 공정의 WIA1000 PLC 시스템에서 70001 알람이 발생한 경우, 이는 설비 간 인터록 과정 중 T2 시간 초과(Time Over)가 발생했음을 의미한다.\n\nBMA 공정의 WIA1000 PLC 시스템에서 70002 알람이 발생한 경우, 이는 설비 동작 시퀀스 중 T5 및 T6 시간 초과(Time Over)가 발생했음을 의미한다.\n\nBMA 공정 AMR 제어 PLC에서 70008 에러가 발생한 경우, 이는 상위 시스템과의 통신 중 언로딩 요청(U_REQ) 또는 로딩 요청(L_REQ) 신호가 비정상적으로 차단(OFF)되었음을 의미한다.\n\nBMA 공정 AMR 제어 PLC에서 70009 에러가 발생한 경우, 이는 설비의 가동 준비 완료(READY) 신호가 비정상적으로 차단(OFF)되었음을 의미한다.\nBMA 공정 AMR 시스템의 PLC 에러 코드 70010은 작업 시작 명령 수신 후 정해진 시간 내에 실제 작업이 개시되지 않았을 때 발생하는 '작업 시작 시간 초과 알람'을 의미한다.\n\nBMA 공정 AMR 시스템의 PLC 에러 코드 70011은 물건을 수령하기 전 단계에서 PLC 내부 시퀀스 동작이 정상적으로 수행되지 못해 설정된 대기 시간을 초과한 'T2 시간 초과 알람'이다.\n\nBMA 공정 AMR 시스템의 PLC 에러 코드 70012는 물건을 수령하는 과정에서 물체 끼임 현상이 발생하거나 센서가 중복으로 감지되어 공정이 지연될 때 발생하는 'T4 시간 초과 알람'이다.\n\nBMA 공정 AMR 시스템의 PLC 에러 코드 70013은 PIO(Parallel Input/Output) 통신 중 비상 정지 신호가 입력되었을 때 발생하는 'EMG 알람'을 의미한다.\n\nBMA 공정 WIA300 AMR 모델의 PLC 에러 코드 70016은 컨베이어 롤러 구동부의 이상이나 제어 불능 상태를 나타내는 '롤러 알람'이다.\nBMA 공정의 WIA300 PLC 시스템에서 70017 에러 코드가 발생한 경우, 이는 AMR의 도어(Door) 상태에 이상이 감지된 도어 알람 상태를 의미한다.\n\nBMA 공정의 WIA300 PLC 시스템에서 70018 에러 코드가 발생한 경우, 이는 통합 관제 시스템(ACS)의 제어 명령과 AMR의 실제 센서 감지 데이터가 일치하지 않는 센서 불일치 오류를 의미한다.\n\nBMA 공정 AMR의 나비프라(Navifra) 주행 제어 시스템에서 80000 에러 코드가 발생한 경우, 이는 주행 드라이버가 정상적으로 시작되지 않은 상태를 의미한다.\n\nBMA 공정 AMR의 나비프라(Navifra) 주행 제어 시스템에서 80001 에러 코드가 발생한 경우, 이는 로봇의 현재 위치를 파악하는 로컬라이제이션(Localization) 기능이 활성화되지 않은 상태를 의미한다.\n\nBMA 공정 AMR의 나비프라(Navifra) 주행 제어 시스템에서 80002 에러 코드가 발생한 경우, 이는 AMR이 설정된 주행 경로를 이탈하여 경로 위에 존재하지 않는 상태를 의미한다.",
        "preprocessed": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n## 결함 허용 아키텍처와 논리적 인과성 분석 (Fault Tolerance Architecture & Logical Causality)\n\n**작성자:** 수석 아키텍트 (Chief Architect)\n**대상:** 시스템 엔지니어, 제어 로직 설계자, 유지보수 전문가\n**버전:** 2.0\n\n---\n\n### 1. 서론: 결정론적 제어와 예외 처리의 철학\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 고전압 배터리 모듈을 다루는 환경 특성상, **결정론적(Deterministic)** 시스템 동작이 필수적이다. WIA1000/WIA300 PLC와 AMR(Autonomous Mobile Robot), 그리고 상위 관제 시스템(ACS/MCS) 간의 상호작용은 밀리초(ms) 단위의 시퀀스로 동기화된다.\n\n본 챕터에서는 시스템 운영 중 발생하는 주요 알람 코드(70000~80002)를 단순한 '고장'이 아닌, **시스템의 무결성을 유지하기 위한 논리적 방어 기제(Logical Defense Mechanism)**의 관점에서 재해석한다. 각 에러는 물리적 계층(Physical Layer), 제어 계층(Control Layer), 그리고 정보 계층(Information Layer) 간의 불일치가 발생했을 때, 시스템이 안전한 상태(Fail-Safe)로 천이하는 과정을 나타낸다.\n\n---\n\n### 2. 시퀀스 동기화 및 시간 제약 논리 (Temporal Logic & Synchronization)\n\n자동화 공정에서 '시간'은 물리적 위치만큼이나 중요한 제어 변수이다. PLC는 각 동작 단계(Step)마다 허용된 시간 윈도우(Time Window)를 설정하며, 이를 벗어날 경우 프로세스의 교착 상태(Deadlock)를 방지하기 위해 타임아웃 에러를 발생시킨다.\n\n#### 2.1 작업 착수 및 핸드쉐이킹 지연 (Latency in Handshaking)\n*   **관련 코드:** `70000`, `70010`\n*   **메커니즘 분석:**\n    상위 시스템(ACS)이 AMR이나 설비에 작업 명령(Command)을 하달했음에도 불구하고, 물리적 구동부가 반응하지 않는 현상이다. 이는 통신 네트워크의 패킷 손실보다는 **PLC 내부 로직의 조건 불충족**에서 기인한다.\n    *   **논리적 인과 사슬:** [작업 명령 수신] → [안전 조건(Safety Interlock) 검사] → [구동 조건 미충족(예: 배터리 전압 부족, 경로 미확보)] → [Timer 카운트 누적] → **[임계 시간 초과(Threshold Exceeded)]** → [70000/70010 발생]\n    *   **공학적 의미:** 시스템은 무한 대기 상태를 방지하기 위해 '작업 시작 시간(Work Start Time)'을 정의한다. 이 알람은 설비가 명령을 수행할 준비(Ready) 상태와 실제 수행(Execute) 상태 사이의 전이(Transition) 실패를 의미한다.\n\n#### 2.2 인터록 및 이송 시퀀스 타임아웃 (Interlock & Transfer Sequence)\n*   **관련 코드:** `70001 (T2)`, `70002 (T5/T6)`, `70011 (T2)`, `70012 (T4)`\n*   **메커니즘 분석:**\n    설비와 AMR 간의 물류 이송(Handover)은 정밀한 **핸드쉐이킹 프로토콜(Handshaking Protocol)**을 따른다. 각 단계별 타이머(T2, T4, T5, T6)는 물리적 충돌을 방지하는 핵심 파라미터다.\n    *   **T2 시간 초과 (70001, 70011):** 물건을 수령하기 직전(Pre-transfer), 설비와 AMR은 서로 \"줄 준비 됨(Unload Ready)\"과 \"받을 준비 됨(Load Ready)\" 신호를 교환한다. 이 신호 교환이 지연된다는 것은 **광통신(Optical Communication) 정렬 불량**이나 **상대 설비의 비정상 상태**를 시사한다.\n    *   **T4 시간 초과 및 물체 끼임 (70012):** 이송 중(In-transfer) 발생하는 가장 위험한 에러다. 컨베이어 구동 중 센서가 물체를 감지하는 시간이 설정된 T4 시간을 초과했다는 것은, 물리적으로 배터리 모듈이 **가이드에 걸림(Jamming)** 현상이 발생했거나, **센서 노이즈로 인한 중복 감지(Ghost Detection)**가 발생했음을 의미한다. 시스템은 모듈 파손을 막기 위해 즉시 모터를 정지시킨다.\n    *   **T5/T6 시간 초과 (70002):** 이송 완료 후(Post-transfer) 설비가 원위치로 복귀하거나 다음 시퀀스로 넘어가는 과정에서의 지연이다. 이는 주로 액추에이터(Actuator)의 노후화나 공압 저하로 인한 동작 속도 감소가 원인일 수 있다.\n\n---\n\n### 3. 신호 무결성 및 통신 안정성 (Signal Integrity & Stability)\n\nPLC와 AMR 간의 통신은 단순한 데이터 전송이 아니라, 실시간 제어권(Control Authority)의 교환 과정이다. 신호의 비정상적인 차단은 시스템의 신뢰성을 훼손한다.\n\n#### 3.1 요청 신호의 비정상적 소실 (Signal Drop-out)\n*   **관련 코드:** `70008`, `70009`\n*   **메커니즘 분석:**\n    디지털 제어 시스템에서 신호는 'High(On)' 상태를 유지해야 하는 구간이 있다.\n    *   **70008 (U_REQ/L_REQ 차단):** AMR이 도킹하여 작업을 수행하는 도중, 상위 시스템으로부터의 로딩/언로딩 요청 신호가 `Low(Off)`로 떨어지는 현상이다. 이는 **무선 통신 음영 구역(Shadow Zone)** 진입으로 인한 패킷 로스(Packet Loss)이거나, 상위 제어기의 **워치독(Watchdog) 타이머**에 의한 강제 리셋일 가능성이 높다.\n    *   **70009 (READY 신호 차단):** 설비 가동 준비 완료 신호가 작업 도중 사라지는 현상이다. 이는 설비 내부의 **E-Stop 루프가 순간적으로 개방**되었거나, 전원 공급 장치(PSU)의 전압 강하(Voltage Sag)로 인한 로직 리셋을 의심해야 한다.\n\n#### 3.2 데이터 불일치 및 PIO 통신 (Data Inconsistency & PIO)\n*   **관련 코드:** `70013`, `70018`\n*   **메커니즘 분석:**\n    *   **70013 (PIO EMG):** PIO(Parallel Input/Output)는 네트워크를 거치지 않는 하드와이어(Hard-wired) 통신이다. 여기서 비상 정지(EMG) 신호가 감지되었다는 것은, 소프트웨어적 오류가 아닌 **물리적 비상 버튼 타격**이나 **안전 릴레이의 하드웨어적 트리거**가 발생했음을 의미한다. 이는 최우선 순위 인터럽트(Highest Priority Interrupt)로 처리된다.\n    *   **70018 (ACS-Sensor 불일치):** **디지털 트윈(Digital Twin)의 동기화 실패** 사례다. ACS(서버)는 \"AMR에 자재가 없다\"고 판단하여 명령을 내렸으나, AMR의 로컬 센서는 \"자재 있음\"을 감지한 경우다. 데이터베이스의 상태 값과 물리적 센서 값의 충돌(Conflict) 시, 시스템은 안전을 위해 물리적 센서 값을 우선시하며 에러를 송출한다.\n\n---\n\n### 4. 하드웨어 구동 및 물리적 인터페이스 (Hardware Actuation & Interface)\n\nWIA300 모델과 같은 AMR은 물리적 세계와 직접 상호작용한다. 이 과정에서 기구적 결함은 센서 데이터를 통해 간접적으로 감지된다.\n\n*   **관련 코드:** `70016`, `70017`\n*   **메커니즘 분석:**\n    *   **70016 (롤러 알람):** 컨베이어 롤러를 구동하는 BLDC 모터나 스텝 모터의 **피드백 제어 루프(Feedback Control Loop)** 이상이다. 모터에 전력을 인가했으나 엔코더(Encoder) 펄스가 입력되지 않거나, 과전류(Over-current)가 감지되어 드라이버가 보호 모드로 진입한 상태다. 기구적 구속(Mechanical Binding)이 주원인이다.\n    *   **70017 (도어 알람):** AMR의 도어 개폐를 감지하는 리미트 스위치(Limit Switch)나 근접 센서의 상태 이상이다. 주행 중 도어 열림 신호가 감지되면, 공기 역학적 문제가 아니라 **작업자 충돌 방지 및 적재물 낙하 방지**를 위해 즉시 주행 인터록(Travel Interlock)이 걸린다.\n\n---\n\n### 5. 자율 주행 및 공간 인지 (Autonomous Navigation & Localization)\n\nNavifra 시스템은 AMR의 '두뇌'에 해당하며, 확률론적 로보틱스(Probabilistic Robotics) 이론에 기반하여 작동한다. 80000번대 에러는 이 인지 과정의 실패를 의미한다.\n\n#### 5.1 시스템 초기화 및 드라이버 (Initialization)\n*   **관련 코드:** `80000`\n*   **메커니즘 분석:**\n    주행 제어 소프트웨어(Navifra)와 하드웨어(모터, Lidar)를 연결하는 **HAL(Hardware Abstraction Layer) 드라이버**의 로딩 실패다. 부팅 시퀀스에서 장치 파일에 접근하지 못하거나, 통신 포트(COM/CAN) 점유 실패 시 발생한다.\n\n#### 5.2 위치 추정 및 경로 추종 (Localization & Path Tracking)\n*   **관련 코드:** `80001`, `80002`\n*   **메커니즘 분석:**\n    *   **80001 (Localization 비활성):** AMR은 Lidar로 스캔한 환경 데이터(Point Cloud)를 사전에 작성된 지도(Grid Map)와 매칭하여 자신의 위치를 추정한다(Scan Matching). 이 에러는 매칭 확률(Score)이 임계값 이하로 떨어져 **\"내가 어디에 있는지 확신할 수 없음(Lost Kid Problem)\"** 상태에 빠진 것이다. 특징점이 부족한 긴 복도나, 동적 장애물이 많은 환경에서 발생할 수 있다.\n    *   **80002 (경로 이탈):** AMR은 전역 경로(Global Path)를 따라가기 위해 지역 경로(Local Path)를 지속적으로 생성한다. 현재 위치와 목표 경로 사이의 **횡방향 오차(Cross-track Error)**가 허용 범위를 초과했을 때 발생한다. 이는 바닥의 미끄러짐(Slip)으로 인한 휠 오도메트리(Odometry) 오차 누적이나, 회피 기동 중 복귀 실패가 원인이다.\n\n---\n\n### 6. 결론 및 제언\n\n상기 분석된 에러 코드들은 BMA 공정의 안전과 품질을 보장하기 위한 시스템의 능동적 대처 결과이다. 엔지니어는 단순한 에러 리셋(Reset)에 그치지 않고, **타임아웃이 발생한 시점의 물리적 상황(Jamming, Sensor Noise)**과 **통신 로그(Signal Drop)**를 교차 분석하여 근본 원인(Root Cause)을 제거해야 한다. 특히 70000번대 시퀀스 에러와 80000번대 주행 에러가 복합적으로 발생할 경우, 센서 캘리브레이션과 네트워크 인프라 점검을 병행하는 것이 바람직하다.",
        "source": "acs_alarm.md"
    },
    {
        "id": "80000",
        "original": "80000\nBMA 공정 AMR의 나비프라(Navifra) 주행 제어 시스템에서 발생하는 80003(ERROR_CONFIDENCE_LOW) 에러는 로봇의 현재 위치 추정 신뢰도가 설정된 기준치보다 낮아 자기 위치 파악이 불가능한 상태를 의미한다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80004(ERROR_MAP_NOT_LOADED) 에러는 주행에 필요한 맵 데이터가 제어기에 정상적으로 로드되지 않았음을 나타낸다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80005(ERROR_PAUSED_BY_OBSTACLE) 정보는 로봇의 주행 경로상에 장애물이 감지되어 안전을 위해 일시 정지했음을 의미한다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80006(ERROR_MOTOR_NOTCONNECTED) 에러는 주행 구동 모터와 제어기 간의 통신 연결이 단절되었거나 물리적인 연결 오류가 발생한 상태이다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80007(ERROR_FRONT_LIDAR_SIGNAL_TIMEOUT) 에러는 전방 라이다(LiDAR) 센서로부터 수신되는 데이터 신호가 지정된 시간 내에 도달하지 않는 통신 타임아웃 상태를 의미한다.\nBMA 공정 AMR(나비프라 주행 시스템)의 80008(ERROR_FRONT_LIDAR_CLEAN) 에러는 전방 라이다(LiDAR) 센서 표면의 오염으로 인해 정상적인 스캔이 불가능한 상태를 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 전방 라이다 센서의 윈도우를 세정하여 이물질을 제거해야 한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80009(ERROR_REAR_LIDAR_SIGNAL_TIMEOUT) 에러는 후방 라이다(LiDAR) 센서와 제어기 간의 통신 신호가 지정된 시간 내에 수신되지 않는 통신 지연 상태를 나타낸다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80010(ERROR_REAR_LIDAR_CLEAN) 에러는 후방 라이다(LiDAR) 센서 렌즈에 먼지나 이물질이 부착되어 데이터 신뢰도가 저하된 상태를 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 후방 라이다 센서의 표면을 청결하게 닦아내야 한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80011(LOCALIZATION_LARGE_CORRECTION) 에러는 로봇이 인식하는 현재 위치와 실제 지도 데이터 간의 오차가 허용 범위를 초과하여 위치 보정값이 과도하게 발생한 상태이다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80012(ERROR_NAVICORE_NOTCONNECTED) 에러는 주행 제어 소프트웨어인 나비코어(Navicore)와 하드웨어 시스템 간의 연결이 단절되어 주행 명령을 수행할 수 없는 상태를 의미한다.\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80013(ERROR_PAUSE_BY_OBSTACLE_TIMEOUT) 에러는 장애물 감지로 인한 일시 정지 상태가 설정된 제한 시간을 초과했음을 의미한다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80014(ERROR_ENCODER_NOT_UPDATE) 정보는 주행 모터의 엔코더 데이터가 실시간으로 업데이트되지 않는 상태를 나타낸다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80015(ERROR_DOCKING_HEADING_CTR_EXCEEDED) 에러는 도킹 과정 중 기체의 헤딩(Heading) 보정 횟수가 허용 범위를 초과하여 정밀 진입에 실패했음을 의미한다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80016(ERROR_FRONT_CAMERA_TIMEOUT) 에러는 전방 카메라 모듈과의 통신 응답 시간이 초과되어 정상적인 영상 데이터를 수신할 수 없는 상태를 나타낸다.\n\nBMA 공정 AMR의 나비프라 주행 제어 시스템에서 발생하는 80017(ERROR_REAR_CAMERA_TIMEOUT) 에러는 후방 카메라 모듈과의 통신 응답 시간이 초과되어 정상적인 영상 데이터를 수신할 수 없는 상태를 의미한다.\nBMA 공정 AMR(나비프라 주행 시스템)에서 80018(ERROR_DOCK_NOT_FIND) 에러는 로봇이 도킹을 위한 마커나 위치를 인식하지 못했을 때 발생한다. 시스템 자동 복구가 실패하여 수동 조작이 필요한 경우, 운영자는 AMR의 현재 위치와 도킹 타겟의 가시성을 확인한 후 수동 주행으로 위치를 보정해야 한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)에서 80019(ERROR_LICENSE_IS_NOT_CHECKED) 에러는 주행 제어 소프트웨어의 라이선스 인증이 완료되지 않았거나 유효하지 않음을 의미한다. 시스템 자동 복구가 실패하여 수동 조작이 필요한 경우, 운영자는 제어 PC의 네트워크 연결 상태와 라이선스 키 등록 여부를 재점검해야 한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)에서 80020(ERROR_PATH_OUT) 에러는 로봇이 설정된 주행 경로를 일정 범위를 벗어나 이탈했을 때 발생한다. 시스템 자동 복구가 실패하여 수동 조작이 필요한 경우, 운영자는 경로 상의 장애물을 제거하고 AMR을 경로 내부로 재배치한 후 주행을 재개해야 한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)에서 80021(ERROR_UNDEFINED) 에러는 시스템 정의에 포함되지 않은 예외적인 오류가 발생했음을 나타낸다. 시스템 자동 복구가 실패하여 수동 조작이 필요한 경우, 운영자는 시스템 로그를 분석하고 메인 컨트롤러를 재부팅하여 상태를 초기화해야 한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)에서 80022(ERROR_PATH_NOT_CREATED) 에러는 목적지까지의 주행 경로 생성이 불가능한 환경일 때 발생한다. 시스템 자동 복구가 실패하여 수동 조작이 필요한 경우, 운영자는 맵 데이터의 정합성을 확인하고 목적지 설정값이 유효한지 점검해야 한다.\nBMA 공정 AMR(나비프라 주행 시스템)에서 80023(ERROR_DOCKING_POS_EXCEED) 에러는 로봇이 도킹 목표 위치의 허용 오차 범위를 초과하여 정지했음을 의미한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)에서 80024(ERROR_DOCKING_TIMEOUT) 에러는 설정된 제한 시간 내에 도킹 동작을 완료하지 못했을 때 발생한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80025(ERROR_PAUSE_BY_LIDAR_OBSTACLE) 상태는 라이다(LiDAR) 센서가 주행 경로상의 장애물을 감지하여 일시 정지했음을 나타내는 정보성 메시지이다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80026(ERROR_PAUSE_BY_CAMERA_OBSTACLE) 상태는 비전 카메라 센서가 장애물을 감지하여 주행을 일시 정지했음을 나타내는 정보성 메시지이다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80027(ERROR_PAUSE_BY_ANOTHER_ROBOT_OBSTACLE) 상태는 경로상에 위치한 다른 로봇을 장애물로 인식하여 충돌 방지를 위해 일시 정지했음을 나타내는 정보성 메시지이다.\nBMA 공정 AMR(나비프라 주행 시스템)에서 발생하는 80028 에러는 모터 드라이버의 응답 시간 초과(MOTOR_DRIVER_RESPONSE_TIMEOUT)를 의미한다.\n\nBMA 공정 AMR(나비프라 주행 시스템)의 80029 에러는 도킹 해제(Dock-out) 중 T-Zone 내 장애물이 감지되어 주행이 일시 정지된 상태(PAUSED_BY_DOCK_OUT_T_ZONE_OBSTACLE)를 나타낸다.\n\nBMA 공정 AMR의 ACS(Autonomous Control System) 감지 코드 3번은 로봇의 전원이 차단된 상태(POWER_OFF)를 의미한다.\n\nBMA 공정 AMR의 ACS 감지 코드 6번은 로봇이 자동 주행 모드가 아닌 수동 조작 상태(ROBOT_MANUAL_OPERATION_STATUS)임을 나타낸다.\n\nBMA 공정 AMR의 ACS 감지 코드 11번은 로봇이 설정된 경로를 주행하는 과정에서 ACS 제어 오류(ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE)가 발생했음을 의미한다.",
        "preprocessed": "# HMG BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n\n**문서 번호:** HMG-BMA-AMR-ARCH-04  \n**주제:** 자율주행 로봇(AMR)의 결함 허용 아키텍처(Fault Tolerance Architecture) 및 센서 퓨전 동역학 분석  \n**작성자:** 수석 아키텍트 (Chief Architect)  \n**대상:** 시스템 엔지니어, 유지보수 전문가, 제어 로직 설계자\n\n---\n\n## 1. 서론: BMA 공정 내 AMR 시스템의 결정론적 제어와 확률론적 주행\n\n현대자동차그룹의 배터리 모듈 어셈블리(BMA) 공정은 고중량의 배터리 셀과 모듈을 다루는 환경 특성상, AMR(Autonomous Mobile Robot)의 주행 정밀도와 안전성이 타협할 수 없는 핵심 요소입니다. 본 챕터에서는 **나비프라(Navifra)** 주행 제어 시스템에서 발생하는 상태 코드(80000 Series)와 ACS(Autonomous Control System) 감지 코드를 단순한 '에러'가 아닌, **시스템의 항상성(Homeostasis)을 유지하기 위한 논리적 방어 기제**의 관점에서 해석합니다.\n\n우리는 이 데이터를 통해 로봇이 물리적 세계(Physics)를 어떻게 인지(Perception)하고, 판단(Decision)하며, 제어(Action)하는지 그 심층적인 메커니즘을 규명합니다.\n\n---\n\n## 2. 위치 추정(Localization) 및 경로 계획(Path Planning) 알고리즘\n\nAMR이 공장 내에서 자신의 위치를 파악하는 과정은 확률론적 추론의 연속입니다. 나비프라 시스템은 라이다(LiDAR) 스캔 데이터와 저장된 맵(Grid Map)을 실시간으로 대조하는 **MCL(Monte Carlo Localization)** 또는 유사 알고리즘을 수행합니다.\n\n### 2.1. 확률 분포의 발산과 수렴 실패 (80003, 80011)\n*   **80003 (ERROR_CONFIDENCE_LOW):**\n    *   **메커니즘:** 로봇은 매 순간 수천 개의 가상 입자(Particle)를 뿌려 자신의 위치 확률 분포를 계산합니다. 센서 데이터와 맵 데이터의 매칭 점수(Matching Score)가 임계값 이하로 떨어지면, 입자들이 한곳으로 수렴하지 못하고 넓게 퍼지는 '발산(Divergence)' 현상이 발생합니다. 이는 환경의 급격한 변화(동적 장애물 다수 존재)나 특징점 부족(긴 복도 등)으로 인해 발생합니다.\n    *   **논리적 인과:** [특징점 매칭 실패] → [입자 필터 분산 증가] → [위치 신뢰도(Confidence) 하락] → [Fail-Safe 정지].\n*   **80011 (LOCALIZATION_LARGE_CORRECTION):**\n    *   **메커니즘:** 로봇의 내부 연산 위치(Odometry 기반)와 센서 관측 위치(LiDAR 기반) 간의 괴리가 순간적으로 허용 오차(Tolerance)를 초과하는 현상입니다. 이를 '납치된 로봇 문제(Kidnapped Robot Problem)'의 변형으로 볼 수 있으며, 바퀴의 미끄러짐(Slip)이나 외부 충격으로 인해 엔코더 값이 실제 이동량을 반영하지 못할 때 발생합니다. 시스템은 급격한 위치 점프(Jump)가 위험하다고 판단하여 주행을 차단합니다.\n\n### 2.2. 맵 데이터 및 경로 생성의 무결성 (80004, 80020, 80022)\n*   **80004 (ERROR_MAP_NOT_LOADED):** 제어기 부팅 시퀀스에서 파일 시스템(File System) I/O 지연이나 메모리 할당 실패로 인해 내비게이션 스택에 `.map` 데이터가 적재되지 않은 상태입니다. 맵 없이는 전역 경로 계획(Global Path Planning) 자체가 불가능하므로 시스템은 초기화 단계에서 멈춥니다.\n*   **80020 (ERROR_PATH_OUT) & 80022 (ERROR_PATH_NOT_CREATED):**\n    *   **80020:** 로봇이 제어 루프의 지연이나 관성으로 인해 가상 펜스(Virtual Fence)나 설정된 경로 튜브(Path Tube)를 물리적으로 이탈한 상태입니다.\n    *   **80022:** A* 또는 Dijkstra 알고리즘이 현재 위치에서 목적지까지의 유효한 노드(Node) 연결을 찾지 못한 경우입니다. 이는 맵 상의 장애물 설정 오류나, 목적지가 '주행 불가능 영역(Non-traversable Area)'으로 설정되었을 때 발생하는 논리적 교착 상태입니다.\n\n---\n\n## 3. 센서 퓨전과 인지 레이어의 물리적 특성 (Perception Layer)\n\nBMA 공정의 AMR은 '눈' 역할을 하는 라이다(LiDAR)와 카메라(Camera)에 전적으로 의존합니다. 이 센서들은 빛(Photon)의 비행 시간(ToF)이나 광학적 패턴을 분석하므로, 물리적 환경 요인에 민감하게 반응합니다.\n\n### 3.1. 광학 센서의 오염과 신호 왜곡 (80008, 80010)\n*   **작동 원리:** 라이다 센서는 적외선(IR) 펄스를 방출하고 반사되어 돌아오는 시간을 측정합니다.\n*   **80008 (ERROR_FRONT_LIDAR_CLEAN) & 80010 (ERROR_REAR_LIDAR_CLEAN):**\n    *   **물리적 현상:** 센서 윈도우에 먼지나 유막이 형성되면, 방출된 레이저가 윈도우 표면에서 난반사(Scattering)되거나 흡수됩니다. 이는 센서 내부적으로 \"거리가 0에 가까운 장애물이 지속적으로 감지됨\" 또는 \"반사 강도(Intensity) 저하\"로 해석됩니다.\n    *   **시스템 대응:** 노이즈 필터링 알고리즘의 한계를 초과하면, 시스템은 이를 '센서 실명(Sensor Blindness)' 상태로 간주하고 안전을 위해 주행을 중단합니다. 운영자의 물리적 세정(Wiping)만이 광학 경로를 복구할 수 있습니다.\n\n### 3.2. 통신 레이어의 지연과 타임아웃 (80007, 80009, 80016, 80017)\n*   **아키텍처:** 센서 모듈은 이더넷(Ethernet) 또는 USB 인터페이스를 통해 메인 제어기(PC)로 대용량의 포인트 클라우드(Point Cloud)나 이미지 데이터를 전송합니다.\n*   **메커니즘:** **80007/80009 (LiDAR Timeout)** 및 **80016/80017 (Camera Timeout)** 에러는 데이터 패킷이 설정된 주기(예: 100ms) 내에 도착하지 않음을 의미합니다. 이는 케이블의 물리적 단선, 커넥터의 접촉 불량, 또는 센서 내부 프로세서의 과부하(Overheat)로 인한 멈춤 현상(Hang)에서 기인합니다. 실시간 제어 시스템(Real-time System)에서 센서 데이터의 부재는 곧 '판단 불가'를 의미하므로 즉각적인 비상 정지(E-Stop) 트리거가 됩니다.\n\n---\n\n## 4. 장애물 회피 및 안전 제어 로직 (Safety & Obstacle Avoidance)\n\nAMR은 동적 환경에서 장애물을 감지하고 회피하거나 정지해야 합니다. 이는 단순한 감지가 아니라, **감지(Detection) -> 분류(Classification) -> 행동 결정(Behavior Decision)**의 단계를 거칩니다.\n\n### 4.1. 센서별 장애물 감지 특성 (80025, 80026, 80027)\n*   이 코드들은 에러가 아닌 **정보성 메시지(Info Message)**입니다. 시스템이 정상적으로 위험을 인지하고 방어 기제를 작동시켰음을 의미합니다.\n    *   **80025 (LiDAR):** 2D 평면상의 장애물 감지.\n    *   **80026 (Camera):** 3D 공간상의 장애물(예: 바닥에 낮게 깔린 물체나 공중에 돌출된 구조물) 감지.\n    *   **80027 (Another Robot):** V2V(Vehicle to Vehicle) 통신이나 관제 시스템(ACS)을 통해 타 로봇의 위치를 공유받아, 물리적 충돌 전에 논리적으로 정지하는 상위 레벨의 회피 기동입니다.\n\n### 4.2. 일시 정지와 타임아웃의 딜레마 (80005, 80013)\n*   **80005 (ERROR_PAUSED_BY_OBSTACLE):** 장애물이 감지되어 로컬 경로 계획기(Local Planner)가 속도를 0으로 감속한 상태입니다.\n*   **80013 (ERROR_PAUSE_BY_OBSTACLE_TIMEOUT):**\n    *   **Why:** 로봇이 무한정 대기하는 것은 전체 물류 흐름의 병목(Bottleneck)을 초래합니다.\n    *   **Logic:** 설정된 시간(예: 30초) 동안 장애물이 소거되지 않으면, 시스템은 이를 '일시적 장애물'이 아닌 '고정된 환경 변화' 또는 '해결 불가능한 교착 상태(Deadlock)'로 판단하여 에러를 송출하고 상위 관제 시스템(ACS)에 개입을 요청합니다.\n\n---\n\n## 5. 구동계(Actuator) 및 정밀 도킹 제어 (Kinematics & Docking)\n\nBMA 공정은 배터리 모듈의 이재(Transfer)를 위해 mm 단위의 정밀한 도킹을 요구합니다.\n\n### 5.1. 모터 제어와 피드백 루프의 붕괴 (80006, 80014, 80028)\n*   **80006 (ERROR_MOTOR_NOTCONNECTED) & 80028 (MOTOR_DRIVER_RESPONSE_TIMEOUT):** CAN 통신이나 RS-485 통신 라인을 통해 모터 드라이버와 제어기 간의 Heartbeat 신호가 끊긴 상태입니다. 명령을 내려도 바퀴가 움직이지 않거나, 제어 불능 상태가 될 수 있습니다.\n*   **80014 (ERROR_ENCODER_NOT_UPDATE):**\n    *   **심각성:** 제어기는 모터에 전압(PWM)을 인가했으나, 엔코더(Encoder) 피드백 수치가 변하지 않는 상태입니다. 이는 모터 축이 물리적으로 구속(Lock)되었거나, 내부 기어 파손, 또는 엔코더 센서 고장을 의미합니다. 이 경우 추측 항법(Dead Reckoning)이 불가능해지므로 즉시 시스템을 셧다운합니다.\n\n### 5.2. 도킹 정밀도와 반복 제어의 한계 (80015, 80018, 80023, 80024, 80029)\n*   **도킹 알고리즘:** AMR은 도킹 스테이션의 V-Marker나 반사판을 인식하여 상대 좌표를 계산하고, PID 제어를 통해 접근합니다.\n*   **80015 (ERROR_DOCKING_HEADING_CTR_EXCEEDED):** 로봇이 도킹 진입 각도(Heading)를 맞추기 위해 좌우 조향을 반복하다가, 설정된 횟수(Oscillation Limit)를 초과한 경우입니다. 이는 진입 경로가 너무 좁거나 초기 진입 각도가 불량할 때 발생합니다.\n*   **80023 (ERROR_DOCKING_POS_EXCEED):** 최종 정지 위치가 목표 지점의 허용 오차(예: ±5mm)를 벗어난 경우입니다. 배터리 이재 장비와의 기구적 충돌을 방지하기 위해 작업을 불허합니다.\n*   **80029 (PAUSED_BY_DOCK_OUT_T_ZONE_OBSTACLE):** 도킹 해제(Dock-out) 구역인 T-Zone은 설비와 로봇이 교차하는 위험 구역입니다. 이곳에서의 장애물 감지는 설비와의 충돌 가능성을 시사하므로 가장 높은 수준의 안전 정지가 수행됩니다.\n\n---\n\n## 6. 시스템 무결성 및 ACS 인터페이스 (System Integrity)\n\nAMR은 단독으로 존재하지 않으며, 나비코어(Navicore) 소프트웨어와 ACS(관제 시스템) 간의 유기적인 연결 속에 존재합니다.\n\n### 6.1. 소프트웨어 및 라이선스 무결성 (80012, 80019, 80021)\n*   **80012 (ERROR_NAVICORE_NOTCONNECTED):** 하드웨어(센서/모터)를 관장하는 펌웨어와 상위 두뇌인 '나비코어' 프로세스 간의 IPC(Inter-Process Communication) 채널이 붕괴된 상태입니다. 뇌와 척수의 연결이 끊긴 것과 같아 로봇은 식물 상태가 됩니다.\n*   **80019 (ERROR_LICENSE_IS_NOT_CHECKED):** 보안 및 사용 권한 검증 실패로, 소프트웨어 실행이 차단됩니다.\n*   **80021 (ERROR_UNDEFINED):** 예외 처리(Exception Handling)되지 않은 런타임 에러(Runtime Error)입니다. 이는 메모리 누수(Memory Leak)나 스택 오버플로우(Stack Overflow) 등 시스템 리소스 문제일 가능성이 높으며, 재부팅(Cold Boot)을 통한 메모리 초기화가 필수적입니다.\n\n### 6.2. ACS 관제 상태 코드의 의미 (ACS Code 3, 6, 11)\n*   **ACS Code 3 (POWER_OFF):** 로봇의 BMS(Battery Management System)가 전원을 차단했거나 비상 정지 버튼이 눌려 메인 컨택터가 개방된 상태입니다. 관제 시스템은 해당 로봇을 '오프라인'으로 처리하고 작업을 할당하지 않습니다.\n*   **ACS Code 6 (ROBOT_MANUAL_OPERATION_STATUS):** 엔지니어가 조이패드 등을 이용해 수동으로 제어권을 탈취한 상태입니다. 자동 관제 명령은 무시됩니다.\n*   **ACS Code 11 (ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE):** 로봇 자체의 문제가 아니라, ACS 서버가 로봇에게 내린 경로 명령 데이터에 논리적 오류(예: 존재하지 않는 노드 ID 전송)가 있거나, 통신 패킷 손실로 인해 명령 수행이 중단된 상태를 의미합니다.\n\n---\n\n## 7. 결론 및 제언\n\n상기 분석된 에러 코드들은 단순한 고장 신호가 아니라, BMA 공정의 안전과 품질을 보장하기 위한 **능동적인 방어 기제**입니다.\n엔지니어는 80000번대 에러 발생 시, 단순한 리셋(Reset)을 넘어 해당 에러가 **센서(Perception), 판단(Localization/Planning), 구동(Actuation)** 중 어느 레이어에서 기인했는지 파악하고, 물리적 원인(오염, 단선, 장애물)과 논리적 원인(타임아웃, 매칭 실패)을 구분하여 접근해야 합니다. 이러한 체계적인 접근만이 다운타임을 최소화하고 시스템의 가동률(Availability)을 극대화할 수 있습니다.",
        "source": "acs_alarm.md"
    },
    {
        "id": "0",
        "original": "0\nBMA 공정 ACS(AMR Control System)에서 발생하는 'ERROR_OCCURRED_WHILE_SENDING_JOB_COMMAND(코드 12)' 알람은 상위 시스템이 AMR로 작업 명령을 전송하는 과정에서 통신 오류나 데이터 무결성 문제로 인해 명령 전달이 실패했음을 의미한다.\n\nBMA 공정 ACS에서 발생하는 'WORK_DELAY(코드 30)' 알람은 할당된 작업의 수행 시간이 설정된 임계치를 초과하여 공정 지연이 발생하고 있는 상태를 나타낸다.\n\nBMA 공정 ACS에서 발생하는 'MAP_VERSION_IS_DIFFERENT(코드 45)' 알람은 제어 서버에 등록된 지도 데이터와 AMR 기체에 저장된 지도 데이터의 버전이 일치하지 않아 주행 안전성을 보장할 수 없는 상태를 의미한다.\n\nBMA 공정 ACS에서 발생하는 'COMMUNICATION_ERROR(코드 46)' 알람은 ACS 서버와 AMR 기체 간의 무선 네트워크 연결이 불안정하거나 끊겨 실시간 상태 모니터링 및 제어가 불가능한 상태를 나타낸다.\n\nBMA 공정 ACS에서 발생하는 'INOPERATIVE_AFTER_COMPLETION_OF_SENDING_TASK_COMMAND(코드 51)' 알람은 AMR이 작업 명령을 정상적으로 수신했음에도 불구하고, 기구적 결함이나 구동부 인터락으로 인해 실제 주행이나 동작을 시작하지 못하는 상태를 의미한다.\n\n**시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 ACS 관제 화면에서 해당 AMR의 통신 상태와 맵 버전을 확인하고, 필요 시 [Reset] 버튼을 누르거나 수동 조작 모드로 전환하여 기체의 상태를 초기화해야 한다.\nBMA 공정 ACS(Autonomous Control System)에서 감지된 100번 에러(HARD_DISK_CAPACITY_EXCEEDED)는 제어 PC의 하드디스크 저장 용량이 임계치를 초과하여 시스템 데이터 기록이 불가능한 상태를 의미한다. **시스템 자동 복구가 실패하여 수동 조작이 필요한 경우,** 운영자는 로그 파일 삭제 또는 디스크 정리 작업을 통해 저장 공간을 확보해야 한다.\n\nBMA 공정 ACS에서 감지된 700번 경고(AMR_COLLISION_RISK_WARNING)는 주행 중인 AMR의 경로상에 장애물이 감지되어 충돌 위험이 발생했음을 나타낸다.\n\nBMA 공정 ACS에서 감지된 701번 정보(WATING_FOR_MISSION_START_COLLISION_AVOIDANCE_DECTION)는 미션 시작 전 충돌 방지 센서가 물체를 감지하여 AMR이 안전 거리 확보를 위해 대기 중인 상태를 의미한다.",
        "preprocessed": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n\n**문서 번호:** HMG-BMA-ARCH-2024-04\n**주제:** ACS(AMR Control System)의 결함 허용(Fault Tolerance) 아키텍처 및 예외 처리 메커니즘\n**작성자:** 수석 아키텍트 / 공학 박사\n\n---\n\n## 1. 서론: 결정론적 제어와 불확실성의 관리\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 고전압 배터리 모듈을 다루는 환경 특성상, 물류 자동화 시스템(AMR)에 있어 극한의 정밀도와 안전성을 요구한다. 본 챕터에서는 ACS(AMR Control System)와 AMR(Autonomous Mobile Robot) 간의 상호작용에서 발생하는 주요 예외 상황(Exception)들을 시스템 아키텍처 관점에서 분석한다.\n\n단순한 에러 코드로 보이는 현상들은 사실 **통신 레이어(Network Layer)**, **어플리케이션 레이어(Application Layer)**, 그리고 **물리 제어 레이어(Physical Control Layer)** 간의 정교한 인과관계 사슬(Chain of Causality)에 의해 정의된다. 우리는 이 에러들이 시스템의 무결성(Integrity)과 작업자의 안전을 보장하기 위해 설계된 '방어 기제'임을 이해해야 한다.\n\n---\n\n## 2. 데이터 무결성 및 네트워크 동기화 (Data Integrity & Network Synchronization)\n\nAMR과 ACS 간의 통신은 단순한 신호 전달이 아닌, 실시간 상태 동기화 과정이다. 이 과정에서 발생하는 에러는 시스템이 잘못된 명령을 수행하여 발생할 수 있는 물리적 사고를 사전에 차단하는 논리적 차단기 역할을 수행한다.\n\n### 2.1. 명령 전송 실패와 프로토콜 검증\n**[ERROR_OCCURRED_WHILE_SENDING_JOB_COMMAND (Code 12)]**\n\n*   **발생 메커니즘:**\n    ACS가 AMR에게 작업 명령(Job Command) 패킷을 송신할 때, TCP/IP 스택 상의 **핸드쉐이킹(Handshaking)** 과정에서 무결성 검증이 실패한 경우다. 통신 프로토콜은 일반적으로 `[Header | Payload | Checksum]` 구조를 갖는데, 전송된 데이터의 체크섬(Checksum)이 수신 측에서 계산한 값과 일치하지 않거나, 정해진 시간(Time-to-Live) 내에 AMR로부터 ACK(Acknowledge) 신호가 반환되지 않을 때 트리거된다.\n*   **공학적 의의:**\n    이는 \"명령을 보냈는데 답이 없다\"는 단순한 상태가 아니다. 데이터 패킷이 노이즈로 인해 변조되었을 가능성을 내포한다. 만약 변조된 좌표 데이터가 그대로 구동부(Motor Drive)로 전달된다면 AMR은 엉뚱한 위치로 이동하여 설비와 충돌할 수 있다. 따라서 시스템은 **'불확실한 명령의 실행'보다는 '즉각적인 중단'을 선택**하여 안전을 확보한다.\n\n### 2.2. 무선 링크 불안정과 데드맨 스위치\n**[COMMUNICATION_ERROR (Code 46)]**\n\n*   **물리적 배경:**\n    BMA 공정은 다량의 금속 설비와 고전압 장비가 존재하여 전파 간섭(Interference)과 다중 경로 페이딩(Multipath Fading)이 빈번한 환경이다.\n*   **작동 원리:**\n    ACS와 AMR은 주기적으로 'Heartbeat' 신호를 주고받으며 연결 상태를 확인한다. Code 46은 이 Heartbeat가 임계 시간 이상 소실되었음을 의미한다. 이때 AMR 내부의 **데드맨 스위치(Deadman Switch)** 로직이 활성화되어, 로봇은 즉시 구동 모터의 전원을 차단(E-Stop)하고 브레이크를 체결한다. 이는 제어권이 없는 상태에서의 자율 주행(Runaway)을 물리적으로 방지하기 위함이다.\n\n### 2.3. 공간 정보의 불일치와 위치 추정 실패\n**[MAP_VERSION_IS_DIFFERENT (Code 45)]**\n\n*   **SLAM 알고리즘과의 상관관계:**\n    AMR은 라이다(Lidar) 센서로 수집한 점군(Point Cloud) 데이터를 저장된 지도(Occupancy Grid Map)와 대조하여 자신의 위치 $(x, y, \\theta)$를 추정하는 SLAM 기술을 사용한다.\n*   **논리적 인과:**\n    ACS 서버의 지도 버전(vN)과 AMR 로컬 스토리지의 지도 버전(vN-1)이 다를 경우, 동일한 좌표 $(x, y)$가 가리키는 물리적 위치가 달라진다. 예를 들어, 레이아웃 변경으로 생긴 벽을 AMR은 빈 공간으로 인식할 수 있다. 시스템은 주행 시작 전 맵 파일의 해시(Hash) 값을 대조하며, 불일치 시 **'위치 추정 신뢰도(Localization Confidence)'를 0으로 간주**하고 주행 승인을 거부(Lock)한다.\n\n---\n\n## 3. 프로세스 제어 및 기구적 인터락 (Process Control & Mechanical Interlock)\n\n명령이 정상적으로 전달되었더라도, 물리적 세계의 변수나 기구적 제약으로 인해 작업이 수행되지 못하는 경우가 발생한다.\n\n### 3.1. 논리적 수신과 물리적 구동의 괴리\n**[INOPERATIVE_AFTER_COMPLETION_OF_SENDING_TASK_COMMAND (Code 51)]**\n\n*   **현상 분석:**\n    통신 레이어에서는 명령 수신에 대한 ACK가 정상적으로 반환되었으나, 어플리케이션 레이어에서 구동 명령을 실행하지 못하는 **교착 상태(Deadlock)**이다.\n*   **원인 및 진단:**\n    이는 주로 **하드웨어 인터락(Hardware Interlock)**에 기인한다. 예를 들어, BMS(Battery Management System)가 전압 강하를 감지하여 모터 출력을 제한하고 있거나, 리프트(Lift) 모듈의 리미트 스위치(Limit Switch)가 비정상적인 상태(예: 완전히 내려가지 않음)로 감지되는 경우다. 소프트웨어는 \"출발하라\"고 명령하지만, 하드웨어 펌웨어 레벨에서 \"안전하지 않음\"으로 판단하여 구동을 거부(Veto)하는 상황이다.\n\n### 3.2. 시간 도메인에서의 공정 지연 감지\n**[WORK_DELAY (Code 30)]**\n\n*   **작동 원리:**\n    모든 작업(Task)에는 표준 택트 타임(Takt Time)에 기반한 예상 소요 시간($T_{expected}$)과 허용 임계치($T_{threshold}$)가 설정되어 있다. 시스템 타이머가 $T_{elapsed} > T_{threshold}$ 조건을 만족하면 Code 30을 발생시킨다.\n*   **심층 해석:**\n    단순한 시간 초과가 아니라, **물리적 주행 환경의 저하**를 시사하는 지표다. 바닥의 이물질로 인한 휠 슬립(Wheel Slip) 발생, 경로 상의 미세한 정체, 혹은 배터리 노후화로 인한 구동 속도 저하 등이 누적되어 나타나는 결과일 수 있다. 이는 즉각적인 고장은 아니지만, 공정 전체의 병목(Bottleneck)을 예고하는 전조 증상으로 해석해야 한다.\n\n---\n\n## 4. 환경 인지 및 충돌 회피 (Environmental Perception & Safety)\n\nAMR은 라이다 및 안전 센서를 통해 주변 환경을 실시간으로 감시하며, 충돌 가능성을 확률적으로 계산한다.\n\n### 4.1. 동적 장애물 감지와 경로 재계획\n**[AMR_COLLISION_RISK_WARNING (Code 700)]**\n\n*   **센서 퓨전 및 판단 로직:**\n    주행 중인 AMR은 2D 라이다와 3D 심도 카메라(Depth Camera)를 통해 전방의 장애물을 감지한다. 장애물이 감지되면 로컬 경로 생성기(Local Planner)는 현재 속도와 장애물 거리를 기반으로 **충돌 소요 시간(TTC, Time To Collision)**을 계산한다.\n*   **대응 메커니즘:**\n    TTC가 안전 마진 이하로 떨어지면 시스템은 즉시 감속 프로파일을 생성하고 Code 700을 송출한다. 이는 단순한 경고를 넘어, **회피 기동(Obstacle Avoidance) 알고리즘**이 작동을 시작했거나, 회피가 불가능하여 **비상 정지(E-Stop)**를 준비하는 과도기적 상태임을 의미한다.\n\n### 4.2. 초기 기동 시의 안전 영역 확보\n**[WATING_FOR_MISSION_START_COLLISION_AVOIDANCE_DECTION (Code 701)]**\n\n*   **정지 마찰력과 기동 안전:**\n    정지 상태에서 이동 상태로 전환($v=0 \\to v>0$)하는 순간은 에너지가 급격히 변화하는 시점이다. Code 701은 미션 시작 직전, AMR 주변의 **안전 영역(Safety Zone)** 내에 물체가 감지되어 기동을 보류(Suspend)하는 상태다.\n*   **Why it matters:**\n    주행 중 감지와 달리, 정지 상태에서는 로봇에 근접한 작업자가 있을 확률이 높다. 따라서 센서의 감지 민감도(Sensitivity)를 최대로 높여, 아주 미세한 움직임이나 물체라도 감지되면 모터에 토크(Torque)를 인가하지 않도록 설계된 **Zero-Speed Safety Logic**이 작동하는 것이다.\n\n---\n\n## 5. 시스템 리소스 및 복구 전략 (System Resource & Recovery)\n\n### 5.1. 데이터 로깅과 스토리지 관리\n**[HARD_DISK_CAPACITY_EXCEEDED (Code 100)]**\n\n*   **OS 레벨의 I/O 차단:**\n    ACS는 실시간 트래픽, 라이다 포인트 클라우드, 에러 로그 등 방대한 데이터를 기록한다. HDD 용량이 임계치(예: 95% 이상)를 초과하면, OS는 파일 시스템의 손상을 막기 위해 쓰기(Write) 작업을 거부한다. 이는 DB 트랜잭션 실패로 이어져 시스템 전체가 멈출 수 있다.\n*   **운영 대응:**\n    자동 복구(오래된 로그 덮어쓰기 등)가 실패한 경우, 운영자는 수동으로 로그를 삭제(Purge)하여 가용 공간을 확보해야 한다. 이는 시스템의 **가용성(Availability)**보다 **데이터 보존성**이 위협받는 상황을 방지하기 위한 강제적 중단 조치다.\n\n### 5.2. 수동 복구(Manual Recovery)의 공학적 의미\n시스템이 자동 복구에 실패하여 운영자에게 **[Reset]** 또는 **수동 조작**을 요구하는 것은, 소프트웨어 알고리즘이 해결할 수 없는 **비결정론적(Non-deterministic) 오류**가 발생했음을 의미한다.\n운영자가 수행하는 리셋 과정은 단순한 재부팅이 아니라, **에러 레지스터(Error Register)를 소거(Clear)**하고, 센서와 액추에이터의 상태를 **초기값(Default State)**으로 강제 동기화하여 시스템을 다시 결정론적 제어 범위 안으로 복귀시키는 절차이다.\n\n---\n\n## 6. 결론\n\nBMA 공정의 ACS에서 발생하는 알람 코드들은 단순한 고장 신호가 아니다. 이는 복잡한 물리적 환경 속에서 자율주행 로봇이 **데이터 무결성, 기구적 안전, 그리고 작업 효율성**을 유지하기 위해 끊임없이 수행하는 내부 연산의 결과물이다. 엔지니어는 각 코드가 내포하고 있는 통신 프로토콜, 센서 물리학, 제어 이론의 배경을 이해함으로써, 단순한 조치를 넘어 근본적인 시스템 최적화를 수행할 수 있어야 한다.",
        "source": "acs_alarm.md"
    }
]

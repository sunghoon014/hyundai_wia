[
    {
        "id": "# 1. Daily Operating",
        "preprocessed_group": "# 1. Daily Operating\nWEB ACS의 Place Cycle 설정 시, AMR이 미션을 수신하고 동작하기 위해서는 Logistics 스위치와 Run 상태가 모두 ON으로 활성화되어야 한다.\n\nWEB ACS의 Place Cycle 설정 절차는 오른쪽 톱니바퀴 아이콘 클릭 후 Place Cycle 메뉴를 선택하고, 검색창에서 제어할 Place 이름을 검색하여 Logistics 스위치와 Run 상태를 각각 ON과 RUNNING으로 전환하는 순서로 진행한다.\n\nPlace Cycle의 Logistics 기능은 시스템이 미션을 생성하고 AMR이 이를 수신하여 수행하도록 활성화하는 장치이며, 생산 가동 중에는 반드시 ON, 비가동 또는 종업 시에는 OFF 상태를 유지해야 한다.\n\nPlace Cycle의 RUN 상태는 가동 중인 생산 라인에서 필수적으로 활성화해야 하는 항목이며, 대부분의 운영 상황에서 상시 ON 상태를 유지한다.\n\n생산 시작 전에는 Place Cycle의 Logistics와 Run 버튼을 ON으로 활성화하고, 생산 완료 후에는 해당 버튼들을 OFF로 변경하는 것을 운영 규칙으로 한다.\nWEB ACS의 Place Cycle 설정 메뉴에서 AUTO ON/OFF 기능을 실행하면 RUN이 활성화된 항목에 대해 Logistics를 자동으로 ON/OFF 하며, 사용자는 실제 가동 라인의 RUN 상태가 ON인지 확인하여 사용하지 않는 장소의 RUN을 OFF로 설정해야 한다.\n1. 충전기에 도킹되어 충전 중인 AMR은 충전 상태를 유지해야 하며 절대로 전원을 끄지 않는다.\n\n2. 충전기 외부에 위치하여 미션 대기 중인 AMR은 전원을 꺼야 하며, 종료 시 WEB ACS에서 해당 AMR을 선택하여 Call Cancel(미션 반환 및 대기), Job Cancel, Power OFF를 순차적으로 실행한다.\n\n3. 주말 및 공휴일 등 장기 정지 시에는 모든 AMR의 남은 임무를 완료하거나 삭제한 후, 충전기에서 200mm 이상 분리하여 전원을 끈다.\n\n4. 작업 재개를 위해 AMR을 가동하는 경우, WEB ACS에서 해당 AMR을 선택하여 Power ON을 누른 후 Call-Retry를 실행한다.\n충전기가 도킹된 상태에서 1T/0.3T AMR을 강제로 종료하여 과전류 보호용 배터리 회로 차단기가 작동했을 경우, 자동 복구 실패 시 AMR 전면 커버를 제거하고 배터리를 분리한 뒤 배터리 뒷면의 차단기 스위치를 수동으로 켜서 전원 상태를 복구한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 운영 로직 및 전력 관리 아키텍처\n## (Technical Whitepaper: Operational Logic and Power Management Architecture in BMA Systems)\n\n**작성자:** 수석 아키텍트 (Chief Architect)\n**문서 등급:** Confidential (Internal Use Only)\n**적용 대상:** 현대자동차그룹 BMA 공정 0.3T/1T AMR 및 WEB ACS 운영 엔지니어\n\n---\n\n### 1. 서론 (Introduction)\n\n본 챕터에서는 BMA(Battery Module Assembly) 공정의 핵심 물류 자원인 AMR(Autonomous Mobile Robot)과 이를 관제하는 상위 시스템 WEB ACS(Activity Control System) 간의 **논리적 상호작용(Logical Interaction)** 및 **전력 관리 메커니즘(Power Management Mechanism)**을 다룬다.\n\n단순한 조작 절차를 넘어, 시스템이 미션(Mission)을 생성하고 할당하는 알고리즘적 배경과, 리튬이온 배터리 기반의 모빌리티 하드웨어가 전기적 안정성을 유지하기 위해 요구되는 물리적 제약 사항을 공학적 관점에서 심층 분석한다.\n\n---\n\n### 2. 미션 디스패칭 아키텍처와 Place Cycle 제어 논리\n#### (Mission Dispatching Architecture & Place Cycle Control Logic)\n\nWEB ACS는 공정 내 수백 개의 노드(Node)와 링크(Link)를 관리하며, 각 위치(Place)의 상태에 따라 AMR에게 작업을 할당한다. 이때 **'Place Cycle'** 설정은 시스템이 물리적 공간을 논리적 가용 자원으로 인식하게 만드는 핵심 인터페이스다.\n\n#### 2.1. 이중 검증 게이트웨이: Logistics와 Run 상태의 상관관계\nACS 시스템은 AMR에게 미션을 할당하기 전, **AND 논리 게이트**를 통해 해당 목적지의 유효성을 검증한다. 이 검증 과정은 `Logistics` 스위치와 `Run` 상태라는 두 가지 변수에 의해 결정된다.\n\n*   **Logistics (논리적 미션 생성 트리거):**\n    *   **기능:** 시스템 레벨에서의 '미션 생성 허가(Mission Generation Enable)' 비트(Bit)이다.\n    *   **작동 원리:** 이 스위치가 `ON` 상태일 때만 ACS의 스케줄러(Scheduler) 알고리즘이 해당 Place를 유효한 작업 대기열(Queue)에 포함시킨다. 만약 `OFF`라면, 물리적으로 설비가 가동 중이라 하더라도 ACS는 해당 위치로의 이동 명령을 생성하지 않는다. 이는 소프트웨어적인 차단막 역할을 한다.\n*   **Run (물리적 설비 가동 상태):**\n    *   **기능:** 현장 설비(Equipment)의 '물리적 준비 상태(Physical Readiness)'를 나타내는 상태 플래그이다.\n    *   **작동 원리:** `RUNNING` 상태는 해당 위치의 설비가 에러 없이 정상 작동 중이며, AMR과의 인터페이스(도킹, 이재 등)가 가능함을 의미한다.\n*   **논리적 인과관계 (Logical Causality):**\n    *   시스템은 `IF (Logistics == ON) AND (Run == RUNNING) THEN (Dispatch Mission)`의 로직을 수행한다.\n    *   따라서 운영자는 생산 시작 시 반드시 두 변수를 모두 활성화해야 하며, 비가동 시에는 이를 비활성화하여 불필요한 트래픽 생성이나 유령 미션(Ghost Mission) 할당을 방지해야 한다.\n\n#### 2.2. 배치(Batch) 제어 프로세스: Auto ON/OFF 알고리즘\n대규모 공정에서 개별 Place를 일일이 제어하는 것은 휴먼 에러(Human Error)를 유발할 수 있다. 이를 방지하기 위해 ACS는 **Auto ON/OFF** 기능을 제공한다.\n\n*   **메커니즘:** 이 기능은 `Run` 상태를 마스터 키(Master Key)로 활용한다. 사용자가 Auto 기능을 실행하면, 시스템은 현재 `Run` 상태가 `ON`인 모든 Place를 스캔(Scan)하고, 해당 항목들의 `Logistics` 스위치를 동기화(Synchronization)하여 일괄적으로 `ON`으로 전환한다.\n*   **데이터 흐름:** `User Input (Auto ON)` -> `Query (Select Places where Run=True)` -> `Update (Set Logistics=True)` -> `System Feedback (Ready to Dispatch)`.\n*   이 프로세스는 운영자가 실제 가동 라인과 시스템 설정 간의 불일치(Mismatch)를 최소화하도록 설계되었다.\n\n---\n\n### 3. AMR 전력 관리 시스템과 전기화학적 안정성\n#### (AMR Power Management System & Electrochemical Stability)\n\nAMR은 고용량 리튬이온 배터리를 동력원으로 사용하며, BMS(Battery Management System)를 통해 전압과 전류를 제어한다. 전력 관리 규정은 단순한 에너지 절약이 아닌, 배터리 셀(Cell)의 수명 보호와 시스템의 안전한 종료(Graceful Shutdown)를 위해 설계되었다.\n\n#### 3.1. 충전 중 전원 유지의 공학적 이유\n*   **규정:** 충전기에 도킹(Docking)되어 충전 중인 AMR은 절대 전원을 끄지 않는다.\n*   **Why (공학적 배경):**\n    *   **BMS 통신 유지:** 충전 중에는 AMR의 BMS와 충전기(Charger) 간에 지속적인 통신(CAN/Ethernet)이 이루어진다. 이를 통해 배터리의 전압(Voltage), 온도(Temperature), SOC(State of Charge) 정보를 실시간으로 교환하며 CC(Constant Current) 및 CV(Constant Voltage) 모드를 조절한다.\n    *   **냉각 시스템 가동:** 급속 충전 시 발생하는 열을 제어하기 위해 AMR 내부의 냉각 팬(Cooling Fan)이 가동되어야 한다. 전원을 끄면 냉각 시스템이 중단되어 배터리 셀의 열화(Degradation)를 초래할 수 있다.\n\n#### 3.2. 대기 상태(Idle)에서의 Graceful Shutdown 절차\n충전기 외부에서 대기 중인 AMR은 기생 방전(Parasitic Drain)을 막기 위해 전원을 차단해야 한다. 그러나 즉각적인 전원 차단(Hard Power Off)은 데이터 손실이나 논리적 오류를 유발하므로, 다음과 같은 **순차적 종료 시퀀스**를 준수해야 한다.\n\n1.  **Call Cancel (미션 반환):** 할당된 미션을 ACS 서버에 반환하여, 다른 로봇이 해당 작업을 수행할 수 있도록 스케줄러를 갱신한다.\n2.  **Job Cancel (작업 취소):** 로봇 내부의 로컬 컨트롤러(Local Controller)에서 수행 중인 프로세스를 중단하고, 구동 모터 및 액추에이터의 서보(Servo)를 Off 상태로 전환한다.\n3.  **Power OFF (전원 차단):** 상위 논리 회로가 안전하게 종료된 후, 물리적 전원을 차단한다.\n\n#### 3.3. 장기 보관 시 물리적 격리 (Physical Isolation)\n*   **규정:** 주말 등 장기 정지 시 충전기에서 **200mm 이상** 이격 후 전원을 끈다.\n*   **작동 원리:**\n    *   **갈바닉 절연(Galvanic Isolation) 확보:** 충전 단자와 로봇의 접촉 부위가 장기간 연결되어 있을 경우, 미세한 누설 전류(Leakage Current)가 발생하거나, 충전기 전원 차단 시 배터리에서 충전기 쪽으로 역전류(Reverse Current)가 흐를 위험이 있다.\n    *   200mm의 물리적 거리는 이러한 전기적 경로를 완벽히 차단하여 배터리의 과방전(Deep Discharge)을 방지하는 물리적 안전장치(Fail-safe)이다.\n\n---\n\n### 4. 비상 상황 복구 및 하드웨어 보호 메커니즘\n#### (Emergency Recovery & Hardware Protection Mechanism)\n\n#### 4.1. 재가동 시퀀스: Call-Retry를 통한 동기화\nAMR을 재가동할 때 `Power ON` 후 `Call-Retry`를 실행하는 것은 단순한 재시도가 아니다. 이는 **ACS 서버와 AMR 간의 상태 동기화(State Synchronization)** 과정이다.\n*   전원이 꺼져 있던 동안 ACS와 AMR 간의 정보 불일치가 발생할 수 있다. `Call-Retry` 명령은 AMR이 자신의 현재 위치(Localization)와 상태 정보를 ACS에 강제로 푸시(Push)하고, 중단되었던 미션 컨텍스트(Context)를 복원하는 핸드쉐이킹(Handshaking) 절차이다.\n\n#### 4.2. 과전류 보호 회로(OCPD) 작동 및 수동 복구\n*   **현상:** 충전 중인 1T/0.3T AMR을 강제 종료할 경우, 배터리 회로 차단기가 트립(Trip)될 수 있다.\n*   **원인 분석 (Physics):**\n    *   충전 중에는 높은 전류(High Amperage)가 흐르고 있다. 이때 강제로 시스템을 종료하면, 인덕턴스 성분에 의해 급격한 전압 스파이크(Voltage Spike)나 과도 전류(Transient Current)가 발생할 수 있다.\n    *   배터리 내부의 보호 회로(Protection Circuit)는 이를 단락(Short Circuit)이나 심각한 전기적 결함으로 인식하여, 물리적 차단기(Breaker)를 작동시켜 배터리 셀을 보호한다.\n*   **복구 메커니즘:**\n    *   이 상태는 소프트웨어 리셋으로 복구되지 않는 **하드웨어 락(Hardware Lock)** 상태이다.\n    *   따라서 엔지니어는 전면 커버를 제거하고(물리적 접근), 배터리 후면의 차단기 스위치를 직접 조작(Mechanical Reset)하여 회로를 다시 연결해야 한다. 이는 시스템 보호를 위한 최후의 보루가 정상 작동했음을 의미한다.\n\n---\n**결론:**\nBMA 공정의 안정적인 운영은 WEB ACS의 논리적 설정과 AMR 하드웨어의 물리적 특성을 정확히 이해하는 것에서 시작된다. 운영자는 각 조작 행위가 시스템의 데이터 흐름과 전기적 회로에 미치는 인과관계를 숙지하고, 정의된 프로토콜을 준수하여 시스템의 가용성(Availability)과 안전성(Safety)을 확보해야 한다.",
        "questions": [
            "BMA 자동화 시스템의 WEB ACS 운영 로직 및 AMR 전력 관리 아키텍처 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "WEB ACS의 미션 디스패칭 아키텍처 내에서 Logistics 스위치와 Run 상태 변수가 결합하여 미션을 생성하는 메커니즘과, Auto ON/OFF 알고리즘이 전체 시스템 가용성에 기여하는 방식을 공학적으로 분석하시오.",
            "충전 중인 AMR을 강제 종료할 시 발생하는 전압 스파이크가 배터리 보호 회로(OCPD)를 트리거하는 물리적 원인과, 이로 인해 발생하는 하드웨어 락 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": "# 2. Trouble Shooting: Call Assignment",
        "preprocessed_group": "# 2. Trouble Shooting: Call Assignment\n1. ACS 상에서 Call이 생성되지 않을 경우, WEB ACS의 Place Cycle 설정 메뉴에서 해당 설비 또는 컨베이어의 Logistics와 RUN 상태가 모두 ON 및 RUNNING으로 활성화되어 있는지 확인한다.\n\n2. ACS 상에서 Call이 생성되지 않을 경우, WEB ACS의 PLC 탭에서 설비(EQP) 또는 컨베이어의 Call Type 값과 AMR의 Call Type 값이 일치하는지 대조하고, 값이 다를 경우 설비 또는 컨베이어의 Call Type을 올바른 값으로 수정한다.\n\n3. ACS 상에서 Call이 생성되지 않을 경우, 설비 HMI(EQP HMI) 화면 우측의 Call Create Pause 버튼이 활성화되어 콜 생성을 차단하고 있는지 확인한다.\n\n4. ACS 상에서 Call이 생성되지 않을 경우, WEB ACS의 Work Orders 메뉴에서 해당 AMR의 상태가 Idle인지 확인하고, 이전 작업이 남아있어 자동 복구가 실패한 경우 해당 Work Order를 삭제한다.\nAMR이 할당되지 않고 대기하는 자재 준비 지연(Warehouse Delay) 발생 시, 작업자는 WEB ACS의 Mission 탭에서 Status를 통해 작업 상태를 확인한다.\n\n자재 준비 지연(Warehouse Delay) 상황에서 창고 내 부품 준비가 늦어지는 경우(Process Delay), 작업자는 창고 내 부품 준비 지연 여부를 점검한다.\n\n자재 준비 지연(Warehouse Delay) 상황에서 창고 내 부품 준비가 실패한 경우(Preparation Fail), 작업자는 부품 재고 부족 여부 및 창고 설비의 에러 상태를 확인한다.\nMCS 상에서 LOAD 명령이 존재함에도 로봇 할당이 되지 않을 경우, WEB ACS의 Mission List를 통해 AMR에 수동 미션이 설정되어 있거나 목적지에 이미 다른 미션이 할당되어 자동 미션 수행이 불가능한 상태인지 확인해야 한다.\n\n자동 복구 실패 시, WEB ACS의 AMR Info 메뉴에서 해당 AMR이 AUTO 모드로 설정되어 있는지 확인해야 하며, AMR이 AUTO 모드일 때만 MCS 미션을 정상적으로 수행할 수 있다.\nAMR이 Way Point(WP)에서 장시간 대기하는 현상은 목적지 점유 상태 또는 창고 시스템의 로직 문제로 인해 발생한다.\n\n자동 복구 실패 시, 목적지 위치에 이미 도킹 중이거나 작업을 수행 중인 선행 AMR이 있는지 확인하여 후속 AMR의 대기 원인을 파악한다.\n\n수동 조작이 필요한 경우, 창고 시스템이 수동 모드이거나 목적지 위치 정보를 제공하지 못할 때는 창고 보전 담당자에게 연락하여 조치를 취한다.\n\nAMR이 Way Point(WP)에 도착했음에도 창고 시스템에서 적재 위치(#1 또는 #2)를 결정하여 지정해주지 않으면 AMR은 해당 위치에서 지속적으로 대기한다.\n차종 변경 시 BMA 부품, BSA용 공급, 배터리 셀 공급 프로세스의 AMR은 자재 회수가 가능하지만, Lower Case(L/C) 공급 AMR은 자재를 회수할 수 없다.\n\n차종 변경 시작 시 수동 조작이 필요한 경우, 설비 HMI에서 Call Create Pause를 'ON'으로 설정한 후 Call Cancel과 Work Reset을 순차적으로 실행한다.\n\n차종 변경 완료 후 작업을 재개하는 경우, 설비 HMI에서 Call Create Pause를 'OFF'로 설정한다.\n\n이미 로드된 자재를 작업자가 수동으로 회수하는 경우, 설비 HMI에서 Call Create Pause 'ON', Call Cancel, Work Reset을 실행한 뒤 지게차나 카트를 이용해 수동으로 언로드(Unload)하고 Call Create Pause를 'OFF'로 변경한다.\n\n이미 로드된 자재를 AMR 및 설비를 통해 자동으로 회수하는 경우, 자재를 NG 처리하여 배출 포트로 이동시킨 후 설비 HMI에서 'Call Priority' 버튼을 눌러 AMR을 호출하여 창고로 배출한다.\n작업자의 실수로 AMR의 미션이 삭제되어 적재물을 실은 상태로 정지한 경우, WEB ACS에서 해당 AMR을 수동 모드(Manual Mode)로 전환한 후 적재물 종류에 따라 다음과 같이 조치한다.\n\n1. BMA Pallet 적재 시, 자동 복구 실패 시 WEB ACS에서 MW 11, MW 21(Loaded) 또는 MW 13, MW 213(Empty) 위치를 우클릭하여 Unload를 실행한 후 자동 모드(Auto Mode)로 전환한다.\n2. BMA Parts Box 적재 시, 수동 조작이 필요한 경우 WEB ACS에서 MS25(회수 포트)를 우클릭하여 Unload 및 Unload2를 선택한 후 자동 모드(Auto Mode)로 전환한다.\n3. L/C 및 BSA 완제품 적재 시, 수동 조작이 필요한 경우 WEB ACS에서 목표 지점을 우클릭하여 Unload를 실행하고 자동 모드(Auto Mode)로 전환하거나 지게차를 이용하여 수동으로 배출한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서\n## 작업 할당 로직 및 예외 상황 처리 메커니즘 (Task Allocation & Exception Handling)\n\n### 1. 개요 (Overview)\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화는 ACS(AGV Control System)와 MCS(Material Control System), 그리고 현장의 설비 PLC(Programmable Logic Controller) 간의 정교한 데이터 핸드셰이킹(Handshaking)을 기반으로 작동한다. 본 챕터에서는 AMR(Autonomous Mobile Robot)의 작업 할당(Call Assignment) 프로세스에서 발생하는 논리적 교착 상태(Deadlock)와 통신 불일치 현상을 시스템 아키텍처 관점에서 분석하고, 이에 대한 공학적 해결 원리를 서술한다.\n\n---\n\n### 2. ACS 작업 생성 실패의 논리적 원인 분석 (Logic of Call Generation Failure)\n\nACS 상에서 작업 요청(Call)이 생성되지 않는 현상은 단순한 통신 단절이 아닌, 시스템의 **가용성 검증(Availability Check)** 및 **데이터 무결성(Data Integrity)** 검증 단계에서의 실패를 의미한다.\n\n#### 2.1. 논리적 가용성 플래그 (Logical Availability Flags)\nACS는 작업을 생성하기 전, 대상 설비(Equipment)와 컨베이어 시스템의 상태를 논리적으로 검증한다. WEB ACS의 `Place Cycle` 설정 메뉴에서 확인되는 **Logistics**와 **RUN** 상태는 시스템의 '논리적 연결됨(Logically Connected)'과 '물리적 가동 중(Physically Running)'을 나타내는 이중 안전장치다.\n*   **메커니즘:** 상위 시스템은 설비로부터 `Heartbeat` 신호를 수신하더라도, `Logistics=ON` 및 `RUN=RUNNING`이라는 두 가지 비트(Bit)가 동시에 `True`일 때만 유효한 작업 노드로 인식한다. 이 중 하나라도 비활성화될 경우, 시스템은 해당 노드를 '격리(Isolation)' 상태로 간주하여 작업 큐(Queue) 생성을 원천 차단한다.\n\n#### 2.2. 데이터 타입 불일치에 의한 프로토콜 거부 (Protocol Rejection by Type Mismatch)\n설비(EQP)와 AMR 간의 **Call Type** 불일치는 데이터베이스 레벨의 무결성 위반을 초래한다.\n*   **작동 원리:** 설비 PLC가 요청하는 자재의 속성(Call Type)과 AMR이 운송 가능한 자재의 속성(AMR Call Type)은 1:1 또는 N:1로 매핑되어야 한다. WEB ACS의 PLC 탭에서 이 값이 상이할 경우, ACS의 스케줄러(Scheduler)는 \"적합한 운송 수단 없음\"으로 판단하여 Call 생성을 중단한다. 이는 잘못된 자재가 투입되어 발생할 수 있는 물리적 공정 사고를 예방하기 위한 소프트웨어적 인터록(Interlock)이다.\n\n#### 2.3. HMI 레벨의 인터럽트 (HMI Level Interrupt)\n설비 HMI(Human-Machine Interface)의 **Call Create Pause** 버튼은 상위 시스템의 로직을 하위 레벨에서 강제로 차단하는 '소프트웨어 인터럽트' 역할을 수행한다.\n*   **인과관계:** 이 버튼이 활성화되면 PLC의 특정 레지스터 값이 변경되어, 자재가 투입 준비 완료 상태(Ready)가 되더라도 상위 ACS로 `Call Request` 트리거를 보내지 않는다. 이는 유지보수나 일시적 라인 정지 시 불필요한 트래픽 생성을 억제한다.\n\n#### 2.4. 작업 스레드 점유 (Task Thread Occupation)\nAMR이 물리적으로는 정지해 있으나 시스템상으로 작업을 할당받지 못하는 경우, **Work Orders** 메뉴의 상태 점검이 필수적이다.\n*   **Deadlock 메커니즘:** AMR의 상태가 `Idle`이 아닌 경우, 이전 작업의 트랜잭션(Transaction)이 정상적으로 종료(Commit)되지 않고 잔존해 있음을 의미한다. 데이터베이스 상에 '유령 작업(Ghost Task)'이 남아있으면, 스케줄러는 해당 AMR을 'Busy' 상태로 인식하여 신규 작업을 할당하지 않는다. 잔존 Work Order의 강제 삭제는 이러한 논리적 점유를 해제하여 리소스를 가용 상태로 복구하는 과정이다.\n\n---\n\n### 3. 자재 준비 지연 및 창고 시스템 연동 (Warehouse Integration & Latency)\n\n자재 준비 지연(Warehouse Delay)은 물리적 물류 흐름과 디지털 정보 흐름의 비동기화(Desynchronization)에서 기인한다.\n\n#### 3.1. 프로세스 지연과 준비 실패의 구분\n*   **Process Delay (준비 지연):** 창고 내부의 스태커 크레인(Stacker Crane)이나 컨베이어의 물리적 이동 시간이 예상보다 길어지는 경우다. 이는 시스템 에러가 아닌 '물리적 병목(Physical Bottleneck)' 현상이다.\n*   **Preparation Fail (준비 실패):** WMS(Warehouse Management System)가 재고 부족(Out of Stock)이나 창고 설비의 하드웨어 에러(Motor Fault, Sensor Error 등)로 인해 출고 명령을 수행할 수 없는 상태다. 이는 즉각적인 유지보수 개입이 필요한 '시스템 예외(System Exception)' 상황이다.\n\n#### 3.2. MCS 로드 명령과 자원 할당의 경합 (Resource Contention)\nMCS 상에 `LOAD` 명령이 존재함에도 로봇이 할당되지 않는 현상은 **자원 경합(Resource Contention)** 또는 **미션 중복(Mission Overlap)**에 기인한다.\n*   **분석:** WEB ACS Mission List에 수동 미션이 선점되어 있거나, 목적지 노드(Destination Node)에 다른 미션이 예약(Reservation)된 경우, 교착 상태 방지 알고리즘에 의해 자동 할당이 보류된다.\n*   **제어 모드 의존성:** AMR은 `AUTO` 모드에서만 MCS의 스케줄링 알고리즘에 반응한다. `MANUAL` 모드는 로컬 제어권이 우선시되므로 중앙 관제 시스템의 명령을 무시(Bypass)하게 설계되어 있다. 따라서 자동 복구 실패 시 AMR의 제어 모드 확인은 필수적인 디버깅 절차다.\n\n---\n\n### 4. 경로 대기 및 동적 라우팅 로직 (Way Point Waiting & Dynamic Routing)\n\nAMR이 Way Point(WP)에서 장시간 대기하는 현상은 **동적 라우팅(Dynamic Routing)** 실패 또는 **공간 상호 배제(Spatial Mutual Exclusion)** 로직의 결과다.\n\n#### 4.1. 목적지 점유와 트래픽 제어\nAMR은 충돌 방지를 위해 목적지 노드가 선행 AMR에 의해 점유(Occupied)되어 있거나, 도킹 프로세스가 진행 중일 때 WP에서 대기하도록 프로그래밍되어 있다. 이는 다중 로봇 제어 시스템(Multi-Agent System)의 기본 원칙인 상호 배제(Mutual Exclusion)가 작동하는 정상적인 대기 상태일 수 있다.\n\n#### 4.2. WMS의 위치 결정 지연 (Location Assignment Latency)\nAMR이 WP에 도착했음에도 대기하는 주된 기술적 원인은 창고 시스템(WMS)의 **적재 위치 결정 로직(Decision Logic)** 지연이다.\n*   **데이터 흐름:** AMR(WP 도착 신호) → ACS → MCS → WMS(적재 포트 #1/#2 가용성 판단) → MCS → ACS → AMR(최종 목적지 하달).\n*   **현상:** 이 데이터 체인 중 WMS가 적재 위치(#1 or #2)를 확정하여 리턴하지 않으면, AMR은 다음 이동 명령(Next Move Command)을 수신하지 못해 WP에서 무한 대기(Infinite Loop)하게 된다. 창고 시스템이 수동 모드이거나 위치 정보를 소실(Null Return)한 경우, 보전 담당자를 통한 시스템 리셋이 요구된다.\n\n---\n\n### 5. 차종 변경 시의 역물류 프로세스 (Reverse Logistics in Model Changeover)\n\n차종 변경(Model Change)은 정방향 물류(Forward Logistics)를 중단하고, 라인 내 잔류 자재를 제거하는 역물류(Reverse Logistics) 프로세스를 수반한다.\n\n#### 5.1. 자재별 회수 가능성 (Recoverability by Material Type)\n*   **회수 가능 (BMA/BSA/Battery Cell):** 표준화된 팔레트나 박스 형태의 자재는 AMR의 그리퍼나 컨베이어 인터페이스와 호환되어 자동 회수가 가능하다.\n*   **회수 불가능 (Lower Case - L/C):** L/C 공급 AMR은 공정 특성상 단방향 공급에 최적화되어 있거나, 자재의 부피 및 적재 방식의 특이성으로 인해 역방향 회수 로직이 구현되어 있지 않다. 이는 하드웨어적 제약에 따른 시스템 설계 사양이다.\n\n#### 5.2. 트랜잭션 롤백 시퀀스 (Transaction Rollback Sequence)\n차종 변경 시 수동 조작 절차는 데이터베이스의 트랜잭션을 안전하게 롤백(Rollback)하는 과정이다.\n1.  **Call Create Pause 'ON':** 신규 트랜잭션 생성 차단 (Input Blocking).\n2.  **Call Cancel:** 대기 중인 요청 큐(Queue) 삭제.\n3.  **Work Reset:** 현재 진행 중인 프로세스 강제 종료 및 초기화.\n4.  **Unload (Manual/Auto):** 물리적 자재 제거.\n5.  **Call Create Pause 'OFF':** 시스템 재가동 준비 완료 (System Resume).\n\n이 순서를 준수하지 않을 경우, 물리적 자재는 제거되었으나 시스템상에는 자재가 존재하는 **데이터 불일치(Data Inconsistency)**가 발생할 수 있다.\n\n---\n\n### 6. 미션 소실 시 수동 복구 및 예외 처리 (Manual Recovery & Exception Handling)\n\n작업자의 실수로 미션이 삭제되어 AMR이 '적재 상태(Loaded)'로 고립된 경우, 시스템은 AMR의 위치와 적재물 정보를 잃어버린 상태가 된다. 이를 복구하기 위해 가상의 시스템 상태를 강제로 주입(Injection)해야 한다.\n\n#### 6.1. 가상 노드를 통한 상태 동기화 (State Synchronization via Virtual Nodes)\nWEB ACS에서의 우클릭 및 `Unload` 명령은 실제 물리적 하역을 수행하는 것이 아니라, 시스템 상의 AMR 상태를 `Loaded`에서 `Empty`로 강제 전환하는 **논리적 리셋(Logical Reset)** 과정이다.\n\n*   **BMA Pallet:** `MW 11`, `MW 21` (적재 상태 노드) 또는 `MW 13`, `MW 213` (공차 상태 노드)와 같은 특정 메모리 워드(Memory Word) 주소에 해당하는 가상 위치를 이용하여 시스템 상태를 동기화한다.\n*   **BMA Parts Box:** `MS25`(회수 포트)와 같은 지정된 회수 노드에서 `Unload` 및 `Unload2` 명령을 수행하여, 복잡한 부품 박스의 데이터 구조를 초기화한다.\n*   **L/C 및 BSA 완제품:** 목표 지점(Destination)에서 논리적 `Unload`를 수행하거나, 지게차를 이용한 물리적 배출 후 시스템 상태를 수동으로 보정한다.\n\n이러한 수동 복구 절차 후 `Auto Mode`로의 전환은, 초기화된 상태 정보를 바탕으로 AMR이 다시 중앙 관제 시스템의 스케줄링 루프(Scheduling Loop)에 정상적으로 편입되도록 하는 최종 단계다.",
        "questions": [
            "BMA 자동화 시스템의 작업 할당 로직 및 예외 상황 처리 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "ACS의 가용성 검증 플래그와 설비 PLC 간의 데이터 핸드셰이킹이 전체 물류 시스템 내에서 작업 큐를 생성하고 제어하는 공학적 작동 원리와 시스템적 상호작용을 분석하시오.",
            "AMR이 Way Point에서 무한 대기하거나 작업 할당이 실패하는 상황 발생 시, WMS의 결정 지연 및 데이터 무결성 위배 등 근본 원인에 따른 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": "# 3. Trouble Shooting: Navigation & Obstacle",
        "preprocessed_group": "# 3. Trouble Shooting: Navigation & Obstacle\nACS_ERROR_WHILE_NAVIGATING_THE_ROUTE 오류는 WEB ACS 상에서 관리자가 AMR에 Move 명령을 내릴 때 목적지 지점이 정상 주행 경로가 아닌 주행 불가 영역(흰색 배경)으로 지정될 경우 발생한다.\n\n자동 복구 실패 시, WEB ACS 상단의 Job Cancel 버튼을 클릭하여 현재 작업을 취소해야 한다.\n\n수동 조작이 필요한 경우, JOG 모드를 활성화하여 AMR을 정상 주행 경로(색상이 있는 라인) 위로 이동시켜야 한다.\n\nAMR이 정상 경로 위에 위치하면, 다시 일반 경로 상의 지점을 목적지로 선택하여 Move 명령을 실행한다.\n1T AMR이 물리적으로 지정된 주행 경로를 벗어난 상태에서 주행을 시도할 경우 [80002] ERROR_NOT_ON_PATH가 발생한다.\n\n자동 복구 실패 시, WEB ACS에서 Job Cancel을 클릭하여 작업을 취소한 후 현장에서 1T AMR을 수동 또는 JOG 조작을 통해 정상 주행 경로 내부로 이동시킨다.\n\n수동 조작이 완료된 후에는 WEB ACS에서 CALL-RETRY 버튼을 클릭하거나 1T AMR의 모드를 AUTO로 전환하여 작업을 재개한다.\nAMR의 위치 신뢰도가 낮은 상태인 [80003] ERROR_CONFIDENCE_LOW 에러는 AMR이 맵에 기록되지 않은 미지의 영역으로 이동하거나, 주변의 일시적인 장애물이 고정 지형지물을 가려 라이다 센서의 위치 대조가 불가능할 때 발생한다.\n\n자동 복구 실패 시, 작업자는 AMR 주변의 시야를 가리는 장애물을 제거하고 AMR을 일반 주행 경로 내부로 이동시킨 후 제자리에서 360도 회전시켜 ACS 상의 위치와 실제 현장 위치의 일치 여부를 확인해야 한다.\n\n수동 조작이 필요한 경우, WEB ACS의 해당 AMR Command 탭에서 Init Position 항목을 선택하고 특정 노드(Location)나 맵 상의 지점(Map icon)을 지정한 뒤, 현재 AMR이 바라보는 방향(Heading) 값을 0~360도 범위 내에서 입력하고 APPLY 버튼을 눌러 위치를 강제로 보정한다.\n1T/0.3T AMR 주행 중 모터 회전수를 감지하는 엔코더 데이터가 업데이트되지 않아 [80014] ERROR_ENCODER_NOT_UPDATE 오류가 발생하며 기체가 정지하는 경우, 수동 조작이 필요한 경우 WEB ACS에서 Job Cancel을 클릭하고 AMR 기체 측면의 물리적 RESET 버튼을 누른 뒤 CALL-RETRY 또는 AUTO 모드를 실행하여 복구한다.\nAMR(Autonomous Mobile Robot)의 라이다(LIDAR) 또는 3D 카메라 센서가 주행 경로상의 장애물을 감지하면 로봇이 일시 정지하거나 에러를 발생시킨다.\nAMR 주행 경로 상에 장애물이 존재하여 라이다(LIDAR) 센서가 이를 감지하고 안전을 위해 정지한 경우, 작업자는 AMR의 정상 주행을 위해 주행 경로 상의 장애물을 제거해야 한다.\n[20014] Stop due to HOKUYO Lidar obstacle detection 발생 시, HOKUYO Lidar가 안전콘의 은색 반사판이나 작업자 안전조끼의 반사 테이프 등 빛을 강하게 반사하는 물체를 장애물로 인식하여 AMR의 속도를 감속하거나 정지시킨다.\n\n자동 복구 실패 시, AMR 주변의 장애물이나 반사경을 2m 이상 분리한 후 AMR 측면의 RESET 버튼을 누른다.\n\n수동 조작이 필요한 경우, HOKUYO Lidar 렌즈의 이물질 여부를 확인하고 전용 렌즈 클리너나 부드러운 천을 사용하여 제거한다.\n\n상기 조치 후에도 OSSD(Output Signal Switching Device)가 해제되지 않을 경우, AMR의 전원을 재부팅한다.\n\nAMR 재시작 후에도 OSSD 오류가 지속되는 경우, HYUNDAI-WIA의 S/V 담당자에게 문의하여 기술 지원을 받는다.\nAMR의 OSSD LIDAR ERROR[30020]는 기기 주변의 장애물 감지 또는 센서 오염으로 인해 안전 비상 정지 신호가 발생하여 이동이 차단된 상태를 의미하며, 자동 복구 실패 시 주변 장애물을 2m 이상 분리한 후 AMR 측면의 RESET 버튼을 누르거나 전용 클리너로 LIDAR 렌즈의 이물질을 제거해야 한다. 수동 조작 및 재시작 후에도 오류가 지속되는 경우에는 AMR의 전원을 재투입하고, 이후에도 문제가 해결되지 않으면 HYUNDAI-WIA S/V 담당자에게 문의하여 조치를 취한다.\nAMR의 Lidar에 감지된 물체가 로봇의 충돌 감지 영역(Safety Zone)과 겹쳐 PAUSED_BY_OBSTACLE 관련 알람이 발생한 경우, 작업자는 로봇 주변 및 도킹 구역 내 실제 장애물 유무를 확인하고 이를 제거해야 한다.\n\n도킹아웃 시 T-Zone 내 팔레트 등의 장애물이 감지되어 정지한 경우, 로봇 앞면과 옆면의 넓은 영역을 점검하여 장애물을 제거해야 한다.\n\n금속 설비에서 반사된 빛을 장애물로 오인하여 주행이 불가한 경우, 빛 반사가 의심되는 구역을 덮거나 비반사 필름을 부착하여 간섭을 차단해야 한다.\n\n도킹 시도 중 장애물 감지로 인해 자동 복구에 실패한 경우, 수동으로 도킹을 해제(Undocking)한 후 Web ACS에서 Call-Retry를 실행하여 재시도한다.\n[80026] PAUSE_BY_CAMERA_OBSTACLE 에러는 3D 카메라가 감지한 물체가 AMR의 충돌 감지 영역과 겹칠 때 발생하며, 주행 중에는 전면 장애물을, 도킹 중에는 도킹 위치까지의 장애물을 감지한다.\n\n해당 에러는 높이가 있는 공중의 객체도 감지하므로 바닥뿐만 아니라 상부의 장애물 유무를 함께 확인해야 한다.\n\n설비 HMI 패널 등이 AMR 도킹 위치로 돌출되어 장애물로 인식될 경우, 해당 패널의 위치를 이동시켜야 한다.\n\nAMR 주행 경로 상에 늘어진 케이블이나 호스 등의 방해물이 존재할 경우, 이를 즉시 제거해야 한다.\n\n자동 복구 실패 시, 작업자는 로봇 근처 및 도킹 구역 내부에 실제 장애물이 있는지 확인하고 이를 제거해야 한다.\n\n수동 조작이 필요한 경우, 도킹 아웃 시 로봇의 앞면과 옆면의 넓은 영역에서 감지되는 장애물을 모두 제거한 후 운행한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n## 자율주행 내비게이션 아키텍처 및 센서 퓨전 기반 장애물 회피 메커니즘\n**(Autonomous Navigation Architecture & Sensor Fusion based Obstacle Avoidance Mechanism)**\n\n---\n\n### 1. 개요 (Overview)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화는 ACS(Agile Control System)의 글로벌 경로 계획(Global Path Planning)과 AMR(Autonomous Mobile Robot)의 로컬 제어(Local Control)가 유기적으로 결합된 복합 시스템입니다. 본 챕터에서는 0.3T 및 1T AMR이 주행 경로를 생성하고 추종하는 논리적 프로세스와, Lidar 및 3D Camera 센서 퓨전을 통해 구현되는 안전 메커니즘(Safety Mechanism)의 심층적인 작동 원리를 기술합니다. 특히 현장에서 발생하는 주요 에러 코드의 공학적 원인과 시스템의 논리적 대응 절차를 분석하여, 엔지니어가 시스템의 인과관계를 명확히 이해하도록 돕습니다.\n\n---\n\n### 2. 내비게이션 알고리즘 및 위치 추정 무결성 (Navigation Algorithm & Localization Integrity)\n\nAMR의 자율 주행은 사전에 정의된 디지털 맵(Digital Map)과 실제 환경 데이터를 실시간으로 대조하는 확률적 모델(Probabilistic Model)에 기반합니다. 이 과정에서 경로 유효성 검증 실패나 위치 추정의 불확실성이 발생할 경우, 시스템은 안전을 위해 즉각적인 예외 처리(Exception Handling) 루틴을 수행합니다.\n\n#### 2.1. 경로 계획의 유효성 검증 및 예외 처리\n**[System Logic: ACS Command Validation Layer]**\n\nACS는 AMR에게 이동 명령(Move Command)을 하달하기 전, 목적지 노드의 유효성을 검증합니다. 이때 발생하는 **`ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE`**는 단순한 명령 오류가 아니라, **경로 비용 계산(Path Cost Calculation)의 실패**를 의미합니다.\n\n*   **발생 원리 (Mechanism):** ACS의 맵 데이터는 '주행 가능 영역(Costmap defined)'과 '주행 불가 영역(Undefined/White Background)'으로 이진화되어 있습니다. 관리자가 주행 불가 영역을 목적지로 지정할 경우, A* 또는 Dijkstra와 같은 경로 탐색 알고리즘은 목표 지점까지의 유효한 노드 연결(Edge Connection)을 생성할 수 없어 무한 루프나 Null 값을 반환하게 됩니다.\n*   **시스템 대응 (System Response):** 시스템은 이를 치명적 논리 오류로 간주하여 해당 Job을 거부합니다.\n*   **복구 로직 (Recovery Logic):** 자동 복구가 불가능한 논리적 교착 상태이므로, 운영자가 `Job Cancel` 신호를 통해 잘못된 명령 스택을 소거해야 합니다. 이후 JOG 모드를 통해 AMR을 Costmap이 정의된 정상 경로(Colored Line)로 물리적으로 이동시켜, 알고리즘이 다시 유효한 경로 비용을 산출할 수 있는 초기 조건을 형성해야 합니다.\n\n#### 2.2. 경로 추종 오차 및 이탈 감지 (Cross-Track Error Monitoring)\n**[Error Code: 80002 - ERROR_NOT_ON_PATH]**\n\n1T AMR은 경로 추종 시 설정된 경로와 실제 로봇 위치 간의 수직 거리 오차(Cross-Track Error, XTE)를 실시간으로 모니터링합니다.\n\n*   **발생 원리 (Mechanism):** 로봇의 제어기(Controller)는 매 제어 주기마다 `|Current_Position - Planned_Path|`를 연산합니다. 이 값이 허용 임계값(Threshold)을 초과하면, 로봇은 자신이 제어 불가능한 영역에 있다고 판단합니다. 이는 슬립(Slip) 현상이나 외력에 의한 밀림 등으로 발생할 수 있습니다.\n*   **복구 로직 (Recovery Logic):** 이탈 상태에서는 자율 복귀 경로 생성이 불가능하므로(Unsafe State), `Job Cancel` 후 수동/JOG 조작을 통해 로봇을 허용 오차 범위(정상 경로) 내로 진입시켜야 합니다. 위치가 정상 범위로 수렴하면 `CALL-RETRY` 또는 `AUTO` 모드 전환을 통해 경로 추종 PID 제어 루프를 재활성화합니다.\n\n#### 2.3. 확률적 위치 추정 및 신뢰도 저하 (Probabilistic Localization & Confidence)\n**[Error Code: 80003 - ERROR_CONFIDENCE_LOW]**\n\nAMR은 SLAM(Simultaneous Localization and Mapping) 기술, 특히 입자 필터(Particle Filter)나 그래프 기반 최적화를 통해 자신의 위치를 추정합니다.\n\n*   **발생 원리 (Mechanism):** 라이다 센서가 스캔한 현재의 점군(Point Cloud) 데이터와 저장된 맵 데이터 간의 매칭 확률(Matching Probability)이 임계치 이하로 떨어지는 현상입니다.\n    *   **환경적 요인:** 맵에 없는 미지의 영역 진입 또는 동적 장애물(지게차, 작업자 등)이 고정 지형지물(벽, 기둥)을 장시간 가려 '특징점(Feature)' 추출이 불가능한 경우 발생합니다.\n*   **복구 로직 (Recovery Logic):**\n    1.  **시야 확보:** 센서의 시야(Field of View)를 가리는 장애물을 제거하여 특징점 매칭을 유도합니다.\n    2.  **재수렴(Re-convergence):** 제자리에서 360도 회전을 수행하면 라이다가 전방위 데이터를 수집하여 위치 확률 분포를 갱신, 현재 위치를 재특정할 수 있습니다.\n    3.  **강제 초기화(Initialization):** 자동 수렴 실패 시, ACS의 `Init Position` 명령을 통해 로봇에게 현재의 절대 좌표(Node/Map Icon)와 헤딩(Heading, 0~360도) 값을 강제로 주입(Injection)하여 위치 추정 알고리즘을 리셋합니다.\n\n#### 2.4. 오도메트리 피드백 상실 (Odometry Feedback Loss)\n**[Error Code: 80014 - ERROR_ENCODER_NOT_UPDATE]**\n\n정밀 주행을 위해서는 바퀴의 회전량을 감지하는 엔코더(Encoder) 데이터가 필수적입니다.\n\n*   **발생 원리 (Mechanism):** 모터 제어기(Motor Driver)가 구동 전류를 인가했음에도 불구하고, 엔코더로부터 펄스(Pulse) 신호 변화가 감지되지 않는 상태입니다. 이는 물리적으로 바퀴가 구속(Stall)되었거나, 엔코더 통신 라인의 단선, 혹은 센서 모듈의 하드웨어적 고장을 의미합니다.\n*   **시스템 대응 (System Response):** 제어기는 이를 '제어 불능 상태'로 판단하여 즉시 모터 전원을 차단(Emergency Stop)합니다.\n*   **복구 로직 (Recovery Logic):** 이는 하드웨어 상태 불일치이므로 소프트웨어 리셋만으로는 해결되지 않을 수 있습니다. `Job Cancel` 후 기체 측면의 물리적 `RESET` 버튼을 눌러 하위 레벨 제어기(Low-level Controller)를 재부팅하고 엔코더 상태를 초기화해야 합니다.\n\n---\n\n### 3. 안전 센서 퓨전 및 OSSD 메커니즘 (Safety Sensor Fusion & OSSD Mechanism)\n\nBMA 공정의 AMR은 작업자와의 협동을 전제로 하므로, 국제 안전 규격(ISO 13849-1 등)을 준수하는 하드웨어 기반의 안전 시스템을 탑재하고 있습니다.\n\n#### 3.1. 광학적 특성에 따른 라이다 오인식 (Optical Characteristics & Lidar False Positive)\n**[Error Code: 20014 - Stop due to HOKUYO Lidar obstacle detection]**\n\nHOKUYO 안전 라이다는 ToF(Time of Flight) 방식을 사용하며, 레이저 펄스가 물체에 반사되어 돌아오는 시간을 측정합니다.\n\n*   **발생 원리 (Mechanism):**\n    *   **고반사체 간섭 (High Reflectivity):** 안전콘의 은색 반사판이나 작업자 조끼의 반사 테이프는 입사된 레이저를 광원 방향으로 강하게 반사(Retro-reflection)시킵니다. 이는 수신부 포토다이오드(Photodiode)의 포화(Saturation)를 유발하거나, '블루밍(Blooming)' 현상을 일으켜 실제보다 물체를 더 크게, 혹은 존재하지 않는 위치에 장애물이 있는 것으로 오인하게 만듭니다.\n    *   **센서 오염:** 렌즈 표면의 이물질은 레이저를 산란(Scattering)시켜 신호 대 잡음비(SNR)를 떨어뜨리고, 이를 근거리 장애물로 인식하게 합니다.\n*   **복구 로직 (Recovery Logic):**\n    *   **물리적 이격:** 고반사 물체를 2m 이상 이격시켜 수신 광량을 정상 범위로 낮춥니다.\n    *   **광학적 세척:** 전용 클리너로 렌즈를 닦아 산란 요인을 제거합니다.\n    *   **하드웨어 리셋:** 센서 내부의 에러 레지스터가 래치(Latch)된 경우, `RESET` 버튼 또는 전원 재부팅을 통해 OSSD 상태를 클리어해야 합니다. 지속적인 오류는 센서 모듈 자체의 결함일 수 있으므로 S/V 기술 지원이 필요합니다.\n\n#### 3.2. OSSD 기반 비상 정지 메커니즘 (OSSD Based Emergency Stop)\n**[Error Code: 30020 - OSSD LIDAR ERROR]**\n\nOSSD(Output Signal Switching Device)는 소프트웨어의 개입 없이 센서가 직접 전력 계통을 제어하는 최상위 안전 장치입니다.\n\n*   **작동 원리 (Mechanism):** 라이다가 설정된 안전 영역(Safety Zone) 내에서 물체를 감지하거나 자체 고장(Self-diagnosis fault)을 감지하면, OSSD 신호 라인(Dual Channel)을 Low 상태로 떨어뜨립니다. 이는 모터 구동 회로의 전원을 물리적으로 차단(Cut-off)하여 로봇을 즉시 정지시킵니다.\n*   **데이터 흐름 (Data Flow):** [Obstacle Detection] -> [Lidar Internal Logic] -> [OSSD Signal Low] -> [Safety Relay Open] -> [Motor Power Cut].\n*   **복구 로직 (Recovery Logic):** 장애물 제거 후 `RESET` 버튼을 누르는 행위는 Safety Relay에 다시 전원을 인가하여 OSSD 신호를 High 상태로 복구시키는 과정입니다.\n\n---\n\n### 4. 3D 인지 및 동적 환경 상호작용 (3D Perception & Dynamic Environment Interaction)\n\n2D 라이다의 한계(높이 정보 부재)를 극복하기 위해 3D 카메라가 퓨전(Fusion)되어 입체적인 장애물 감지를 수행합니다.\n\n#### 4.1. 3D 공간 장애물 및 충돌 방지 (Volumetric Obstacle Detection)\n**[Error Code: 80026 - PAUSE_BY_CAMERA_OBSTACLE]**\n\n*   **발생 원리 (Mechanism):** 3D 카메라는 전방 공간을 복셀(Voxel) 단위로 인식합니다. 바닥에 닿아있지 않은 공중의 물체(늘어진 케이블, 돌출된 HMI 패널 등)가 AMR의 충돌 예측 볼륨(Collision Volume) 내에 진입하면 에러를 트리거합니다.\n*   **도킹 시나리오 (Docking Scenario):** 도킹/언도킹 과정에서는 로봇과 설비 간의 간격이 매우 좁아집니다. 이때 금속 설비 표면의 정반사(Specular Reflection)가 3D 카메라에 노이즈(Ghost Object)를 생성하여 `PAUSED_BY_OBSTACLE` 알람을 유발할 수 있습니다.\n*   **복구 로직 (Recovery Logic):**\n    *   **환경 개선:** 상부 장애물(케이블 등)을 제거하거나, 금속 반사면에 비반사 필름을 부착하여 센서 간섭을 차단합니다.\n    *   **수동 탈출:** 도킹 중 장애물 감지로 교착 상태(Deadlock)에 빠진 경우, 자동 알고리즘으로는 충돌 없이 빠져나갈 경로를 계산할 수 없습니다. 따라서 작업자가 수동으로 `Undocking`을 수행하여 로봇을 안전한 공간(Free Space)으로 이동시킨 후, `Call-Retry`를 통해 작업을 재개해야 합니다.\n\n---\n\n### 5. 결론 (Conclusion)\n\nBMA 공정의 AMR 시스템 에러는 단순한 고장이 아니라, **불확실한 환경 변수로부터 시스템과 작업자를 보호하기 위한 방어 기제(Defense Mechanism)의 작동**으로 이해해야 합니다. 엔지니어는 각 에러 코드가 의미하는 센서의 물리적 한계와 알고리즘의 논리적 조건을 정확히 파악하고, 제시된 인과관계에 따라 체계적인 트러블슈팅을 수행함으로써 시스템의 가동률(Availability)을 극대화해야 합니다.",
        "questions": [
            "BMA 자동화 시스템의 자율주행 내비게이션 아키텍처 및 센서 퓨전 기반 장애물 회피 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR의 확률적 위치 추정(Probabilistic Localization) 과정에서 Lidar 점군 데이터와 디지털 맵이 매칭되는 원리와, 이 데이터가 OSSD 기반 안전 시스템 및 3D 카메라 복셀 데이터와 결합하여 장애물을 회피하는 시스템적 상호작용을 공학적으로 분석하시오.",
            "경로 비용 계산 실패(ACS_ERROR)나 위치 신뢰도 저하(ERROR_CONFIDENCE_LOW) 상황 발생 시, 시스템이 자율 주행을 중단하고 안전 인터락을 활성화하는 논리적 판단 과정과 각 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": "# 4. Trouble Shooting: Docking & H/W",
        "preprocessed_group": "# 4. Trouble Shooting: Docking & H/W\n도킹 실패 및 센서 에러는 주로 로봇의 하드웨어인 IR 센서와 설비 측의 물리적 가이드인 도그플레이트 및 V마커 간의 정렬 문제로 인하여 발생한다.\n[10015] Docking failure due to IR sensor detection failure 에러는 AMR 밑면에 부착된 IR 센서가 설비 스토퍼의 도그플레이트(Dog Plate)를 정상적으로 감지하지 못할 때 발생한다.\n\n도킹 실패의 주요 원인은 설비 도그플레이트의 파손, V-마커(V-Marker)의 정렬 불량, 또는 AMR IR 센서의 높이 설정 오류 및 동작 이상이다.\n\n자동 복구 실패 시, WEB ACS 상에서 AMR이 올바른 위치에 도킹되었다면 JOB CANCEL과 ERROR RESET을 실행한 후 상태를 After Docking으로 변경하여 작업을 완료 처리한다.\n\n수동 조작이 필요한 경우로서 AMR이 비정상적인 위치에 있다면, JOB CANCEL과 ERROR RESET 실행 후 Move 명령으로 AMR을 Docking-Out 시키고 상태를 Before로 변경하여 재시도를 준비한다.\n\n하드웨어 점검 시에는 도그플레이트의 파손 여부, V-마커의 기울어짐 상태, AMR 하단 IR 센서의 작동 여부 및 높이 적절성을 확인한다.\n\nWEB ACS를 통한 센서 신호 확인 시, 0.3T AMR은 후면 도킹만 가능하며 rear_docking_check_sensor와 front_docking_check_sensor2 항목이 모두 ON 상태여야 도킹 완료(DOCK OK)로 간주한다.\n\nWEB ACS를 통한 센서 신호 확인 시, 1T AMR은 전방 또는 후방 도킹 방향에 따라 front_docking_check_sensor1 또는 rear_docking_check_sensor가 ON 상태여야 도킹 완료(DOCK OK)로 간주한다.\nAMR의 도킹 시도 중 진입 각도(Heading)가 허용 오차 범위를 초과하여 도킹이 중단된 경우, WEB ACS에서 Job Cancel을 클릭하여 작업을 취소한다.\n\n자동 복구 실패 시, AMR을 수동(Manual/JOG)으로 조작하여 도킹 스테이션에서 완전히 빠져나오도록(Docking-Out) 조치한다.\n\n수동 조작이 완료된 후에는 CALL-RETRY를 클릭하여 AMR의 도킹을 처음부터 다시 시도한다.\nAMR이 도킹 시도 중 맵(Map) 상의 티칭 좌표와 로봇 센서가 실제로 감지한 V-마커(V-Marker)의 위치가 일치하지 않아 도킹 대상을 찾지 못할 경우 [80018] ERROR_DOCK_NOT_FIND 에러가 발생한다.\n\nV-마커(V-Marker)가 수평 또는 수직 방향으로 정렬되지 않고 비뚤어지면 AMR의 도킹 실패 원인이 되며, 작업자는 이동 중 V-마커를 밟거나 강한 충격을 주어 위치가 변형되지 않도록 주의해야 한다.\n\n자동 복구 실패 시, 작업자는 WEB ACS에서 Job Cancel을 클릭하여 작업을 취소한 후 AMR을 수동으로 조작하여 도킹 스테이션에서 빠져나와(Docking-Out) 도킹 전(Before Docking) 상태로 되돌려야 한다.\n\n동일한 도킹 에러가 반복적으로 발생하는 경우, V-마커(V-Marker)의 정렬 상태를 교정하거나 마커를 교체해야 한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n## 정밀 도킹 시스템의 메커니즘 및 하드웨어 무결성 분석 (Precision Docking Mechanism & H/W Integrity)\n\n### 1. 개요 (Executive Summary)\n\nBMA(Battery Module Assembly) 공정 내 AMR(Autonomous Mobile Robot)의 운용 효율성은 설비와의 물리적 결합, 즉 **도킹(Docking)**의 정밀도에 의해 결정된다. 도킹 프로세스는 단순한 위치 이동이 아니라, 글로벌 네비게이션(Global Navigation)에서 로컬 퍼셉션(Local Perception)으로 제어권이 이양되는 임계 구간이다.\n\n본 챕터에서는 AMR의 도킹 시퀀스 중 발생하는 물리적/논리적 불일치 현상을 시스템 아키텍처 관점에서 분석한다. 특히 Lidar 기반의 형상 인식(V-Marker)과 IR 센서 기반의 물리적 체결 확인(Dog Plate) 과정에서 발생하는 에러 코드 **[80018]** 및 **[10015]**의 발생 원리, 센서 데이터 흐름, 그리고 시스템 복구(Recovery)를 위한 FSM(Finite State Machine) 제어 로직을 심층적으로 다룬다.\n\n---\n\n### 2. 로컬 퍼셉션과 기하학적 정렬 메커니즘 (Local Perception & Geometric Alignment)\n\nAMR이 도킹 스테이션에 접근할 때, 시스템은 SLAM(Simultaneous Localization and Mapping) 기반의 전역 좌표계에서 Lidar 센서를 활용한 상대 좌표계로 주행 알고리즘을 전환한다. 이 과정에서 핵심적인 역할을 수행하는 것이 **V-마커(V-Marker)**이다.\n\n#### 2.1. V-마커 기반의 형상 인식 알고리즘\nV-마커는 단순한 표식이 아니라, Lidar 센서가 스캔한 포인트 클라우드(Point Cloud) 데이터 내에서 특정한 기하학적 특징(Feature)을 추출하기 위한 기준점(Reference)이다.\n\n*   **작동 원리:** AMR의 메인 컨트롤러는 Lidar로 스캔된 환경 데이터 중 'V'자 형태의 모서리(Corner) 특징점을 추출하고, 이를 사전에 정의된 템플릿과 매칭(Template Matching)하여 로봇의 현재 진입 각도(Heading)와 편차(Lateral Offset)를 계산한다.\n*   **[80018] ERROR_DOCK_NOT_FIND의 발생 메커니즘:**\n    이 에러는 **\"예측된 위치(Global Map)\"와 \"실측된 형상(Local Sensor)\" 간의 불일치**에서 기인한다.\n    1.  **좌표 불일치:** 맵 상에 티칭(Teaching)된 도킹 좌표에 도달했음에도 불구하고, Lidar 센서의 유효 탐지 범위(FOV) 내에서 V-마커의 특징점이 검출되지 않을 때 발생한다.\n    2.  **형상 왜곡:** 작업자의 실수로 V-마커를 밟거나 충격을 가해 마커가 물리적으로 변형(비뚤어짐)된 경우, Lidar 알고리즘은 이를 유효한 마커로 인식하지 못하고 노이즈(Noise)로 처리한다. 이는 패턴 매칭 점수(Score)가 임계값 미만으로 떨어지게 하여 도킹 대상을 찾지 못하는 결과를 초래한다.\n\n#### 2.2. 진입 각도(Heading) 제어 및 예외 처리\n도킹의 성공률은 진입 벡터의 정렬에 달려 있다. AMR이 계산한 진입 경로의 각도가 허용 오차(Tolerance) 범위를 초과할 경우, 물리적 충돌을 방지하기 위해 시스템은 즉시 도킹 프로세스를 중단(Abort)한다. 이는 설비와 로봇 간의 커넥터 파손을 방지하기 위한 **소프트웨어적 안전 인터록(Safety Interlock)**이다.\n\n---\n\n### 3. 물리적 체결 검증 시스템 (Physical Verification System)\n\nLidar가 AMR을 도킹 위치로 유도했다면, 최종적인 체결 완료 여부는 **IR(Infrared) 센서**와 **도그플레이트(Dog Plate)** 간의 상호작용을 통해 검증된다.\n\n#### 3.1. IR 센서와 도그플레이트의 광학적 상호작용\nAMR 하단에 부착된 IR 센서는 적외선을 방출하고, 설비 스토퍼(Stopper)에 장착된 도그플레이트(Dog Plate)에서 반사되어 돌아오는 광량을 측정하여 거리를 감지한다.\n\n*   **[10015] Docking failure due to IR sensor detection failure 분석:**\n    이 에러는 도킹 동작이 완료되었어야 하는 시점에, IR 센서의 신호(Digital Input)가 'High' 또는 'On' 상태로 전환되지 않았음을 의미한다.\n    *   **광학적 경로 차단 및 산란:** 도그플레이트가 파손되거나 표면이 오염된 경우, 적외선의 반사율(Reflectivity)이 저하되어 센서가 임계값 이상의 신호를 수신하지 못한다.\n    *   **설치 높이(Z-axis) 오차:** IR 센서는 특정 초점 거리(Focal Length)를 가진다. 센서의 높이 설정이 부적절하면 초점이 맞지 않아 감지 실패로 이어진다.\n\n#### 3.2. 기종별 센서 퓨전 로직 (Sensor Fusion Logic by Model)\nBMA 공정에는 0.3T와 1T 두 가지 타입의 AMR이 운용되며, 각기 다른 하중과 기구학적 특성에 따라 도킹 완료를 판단하는 센서 로직(Boolean Logic)이 상이하다.\n\n*   **0.3T AMR (단방향 도킹):**\n    *   구조적 특성상 후면 도킹(Rear Docking)만을 지원한다.\n    *   **판단 로직:** 안전 무결성을 위해 **AND 게이트** 로직을 사용한다.\n        $$Docking\\_Status = (rear\\_docking\\_check\\_sensor == ON) \\land (front\\_docking\\_check\\_sensor2 == ON)$$\n        두 센서가 동시에 활성화되어야만 시스템은 이를 'DOCK OK'로 간주한다.\n\n*   **1T AMR (양방향 도킹):**\n    *   전방 및 후방 진입이 모두 가능하다.\n    *   **판단 로직:** 진입 방향에 따른 **조건부 분기(Conditional Branching)** 로직을 수행한다.\n        *   전방 도킹 시: `front_docking_check_sensor1 == ON`\n        *   후방 도킹 시: `rear_docking_check_sensor == ON`\n\n---\n\n### 4. 시스템 복구 전략 및 FSM 제어 (Recovery Strategy & FSM Control)\n\n에러 발생 시 시스템을 정상 상태로 복귀시키기 위해서는 WEB ACS(Access Control System)를 통한 논리적 상태 제어와 현장 작업자의 물리적 조치가 병행되어야 한다.\n\n#### 4.1. 논리적 상태 복구 (Logical Recovery via ACS)\nACS 상에서의 조작은 시스템의 **교착 상태(Deadlock)**를 해제하는 과정이다.\n\n1.  **JOB CANCEL:** 현재 수행 중인 작업 스레드(Thread)를 강제 종료하여 AMR에 할당된 리소스를 해제한다.\n2.  **ERROR RESET:** PLC 및 상위 제어기의 에러 레지스터(Error Register)를 소거(Clear)한다.\n3.  **상태 동기화 (State Synchronization):**\n    *   **자동 복구 실패 시 (위치 정상):** 센서 오작동 등으로 인해 실제로는 도킹되었으나 시스템이 인지하지 못한 경우, 강제로 상태를 `After Docking`으로 변경하여 프로세스를 다음 단계로 넘긴다(Bypass).\n    *   **위치 비정상 시:** AMR이 엉뚱한 위치에 있다면, 상태를 `Before Docking`으로 변경하여 재진입을 준비시킨다.\n\n#### 4.2. 물리적 복구 및 재시도 (Physical Recovery & Retry)\n논리적 리셋만으로 해결되지 않는 물리적 정렬 불량은 수동 조작(Manual Operation)을 통해 해결해야 한다.\n\n*   **Docking-Out 메커니즘:**\n    자동 복구가 불가능할 때, 작업자는 수동(Manual/JOG) 모드로 AMR을 조작하여 도킹 스테이션의 간섭 영역(Interference Zone) 밖으로 완전히 이탈시켜야 한다. 이는 재진입 시 경로 계획(Path Planning) 알고리즘이 초기화된 상태에서 깨끗한 경로를 생성할 수 있도록 하기 위함이다.\n*   **CALL-RETRY:**\n    물리적 위치가 초기화된 후 `CALL-RETRY` 명령을 인가하면, 시스템은 V-마커 탐색부터 시작하는 전체 도킹 시퀀스를 처음부터 다시 수행한다.\n\n### 5. 결론 및 유지보수 제언\n\n도킹 실패는 대부분 하드웨어(센서, 마커, 플레이트)의 물리적 변형과 소프트웨어(알고리즘)의 허용 오차 간의 불일치에서 발생한다. 따라서 유지보수 엔지니어는 단순한 에러 리셋을 넘어 다음 사항을 주기적으로 점검해야 한다.\n\n1.  **V-마커의 기하학적 무결성:** 수직/수평 정렬 상태 및 표면 손상 여부.\n2.  **IR 센서의 신호 감도:** 도그플레이트와의 거리 및 높이(Height) 캘리브레이션.\n3.  **환경 노이즈 관리:** Lidar 및 IR 센서에 간섭을 줄 수 있는 외부 광원이나 장애물 제거.\n\n이러한 체계적인 접근 방식만이 BMA 공정의 가동률(Availability)을 극대화하고 다운타임을 최소화할 수 있다.",
        "questions": [
            "BMA 공정 내 AMR의 정밀 도킹 시스템을 구성하는 로컬 퍼셉션 알고리즘과 물리적 체결 검증 체계 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "Lidar 기반의 V-마커 형상 인식 메커니즘과 IR 센서 기반의 도그플레이트 감지 기술이 전체 도킹 시퀀스 내에서 어떻게 상호작용하며 정밀 정렬을 구현하는지 공학적으로 분석하시오.",
            "도킹 과정 중 에러 코드 [80018] 및 [10015] 상황 발생 시, 시스템이 판단하는 물리적/논리적 결함의 근본 원인과 FSM 기반의 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": "# 5. Trouble Shooting: Model Specific",
        "preprocessed_group": "# 5. Trouble Shooting: Model Specific\nAMR의 기구적 특성인 Box Conveyor 또는 Pallet Lift 방식에 따라 발생하는 모델별 특화 에러를 확인하고, 자동 복구 실패 시 각 기구부의 특성에 맞는 조치 방법을 수행한다.\n0.3T AMR(Box Conveyor)에서 단순 작업 중단이나 박스 끼임이 발생하여 자동 복구가 실패한 경우, 작업자는 AMR 또는 설비 HMI를 조작하고 Payload를 수동으로 설정하여 조치한다.\n0.3T AMR(Box Conveyor)의 컨베이어 이송 중 박스 끼임 현상이나 작업 지연 알람으로 인해 단순 작업 중단이 발생한 경우, 0.3T AMR HMI 화면 좌측 하단의 Main 버튼(F1)을 클릭한 후 화면 중앙의 RESUME 버튼을 눌러 작업을 재개한다.\n설비 문제로 인해 0.3T AMR(Box Conveyor)이 도킹하지 못하고 대기하여 후속 AMR의 이동 경로를 방해하는 경우, 설비 HMI의 AMR INTERFACE 메뉴에서 Call Cancel, Call Create Pause 활성화(ON), Work Reset을 순서대로 실행한 후 0.3T AMR을 MS25(회수 포트)로 복귀시킨다.\n\n설비 점검이 완료되면 0.3T AMR(Box Conveyor)의 Check and Call을 실행하고 Create Pause를 비활성화(OFF)하며, 긴급한 상황이 발생할 경우 HMI의 Call Priority 버튼을 사용하여 0.3T AMR을 우선 호출한다.\n0.3T AMR(Box Conveyor)이 2열 공급 임무 수행 중 설비 포트의 물품 포화(Port Full)로 인해 작업을 수행하지 못하는 경우, WEB ACS에서 JOB Cancel과 Error Reset을 실행한 후 0.3T AMR HMI의 Manual 모드 인터페이스 화면에서 Close ALL을 클릭하여 열려 있는 컨베이어 도어를 모두 닫고 다시 AUTO 모드로 전환해야 하며, 설비 HMI에서 Call Cancel과 Work Reset을 거쳐 WEB ACS를 통해 Call Retry를 수행해야 한다.\n0.3T AMR(Box Conveyor)이 2열 공급 미션 중 1단 작업만 수행하고 알람이 발생하여 정지한 경우, WEB ACS에서 해당 JOB을 Cancel하고 Error Reset을 수행한 뒤, 0.3T AMR HMI를 Manual 모드로 전환하여 'Close all door'로 도어를 닫고 다시 AUTO 모드로 전환한다. 이후 WEB ACS의 Conveyor 탭 내 Payload Setting에서 공급하지 못한 자재는 '1EA – Full', 공급 완료된 칸은 '1EA – None'으로 수정한 후 JOB Complete(강제 완료)를 클릭하며, 설비 HMI에서 Call Cancel과 Work Reset을 차례로 수행한 뒤 WEB ACS를 AUTO Mode로 복귀시킨다.\n0.3T AMR(Box Conveyor)이 2열 회수 미션 수행 중 해당 회수 포트에 빈 박스(Empty Box)가 없어 작업을 수행할 수 없는 경우, 자동 복구 실패 시 설비 HMI에서 Call Cancel과 Work Reset을 실행하고 WEB ACS에서 JOB Cancel, Error Reset, Conveyor 탭의 Payload All Clear 설정을 순차적으로 진행한 후 Job complete와 Auto Mode를 적용한다.\n0.3T AMR(Box Conveyor)이 2열 회수 미션 중 1단 작업만 완료하고 알람이 발생한 경우, 작업자는 설비 HMI에서 Call Cancel과 Work Reset을 실행하고 WEB ACS에서 JOB Cancel과 Error Reset을 수행한 뒤, 0.3T AMR HMI를 Manual 모드로 전환하여 적재 위치 확인 및 Conveyor Door를 모두 닫고, WEB ACS의 Payload Setting을 #1: Empty, #2: None으로 수정한 후 MS25(회수 포트) 메뉴에서 Select Unload 1을 클릭하고 0.3T AMR HMI를 다시 AUTO 모드로 전환하여 조치한다.\n1T AMR(Pallet Lift)이 설비에 도킹했음에도 설비 측의 비정상적인 PLC 신호로 인해 작업을 시작하지 못하고 시간 초과 알람이 발생하는 경우, 자동 복구 실패 시 WEB ACS에서 Job Cancel과 Error Reset을 실행하고 설비 HMI에서 Work Reset을 통해 신호를 초기화한 뒤 WEB ACS에서 AMR 상태를 After Docking으로 변경하여 미션을 재시도하거나 완료 처리한다.\n1T AMR(Pallet Lift)이 BSA Outlet, BMA Outlet, BPA Empty SKID Outlet 구역에 도킹하였으나 지게차 작업 등 작업자 간섭으로 인해 들어 올릴 제품(Work)이 없어 작업 지연이 발생하는 경우, 자동 복구 실패 시 설비 HMI에서 Call Cancel 및 Work Reset을 수행하고 WEB ACS에서 Job Cancel, Error Reset, After Docking 순으로 조작하여 조치한다.\n\n알람 발생 후 해당 포트에 제품이 다시 준비되어 작업 재개가 가능한 경우, 수동 조작이 필요한 상황에서 설비 HMI의 Work Reset을 수행하고 WEB ACS에서 Job Cancel, Error Reset, After Docking 순으로 조작하여 공정을 재개한다.\n1T AMR(Pallet Lift)의 리프트 Up/Down 작업 후 SKID 휨 등으로 인해 제품 감지 센서가 미감지되어 자동 복구가 실패한 경우, WEB ACS에서 Job Cancel, Error Reset, Lift down을 수행하고 설비 HMI에서 Call Cancel과 Work Reset을 거쳐 AMR을 점검 장소로 이동시킨 후 작업자가 지게차로 해당 PLT를 수동 배출한다.\n\n1T AMR(Pallet Lift)의 Loading 작업 중 센서 조정이 필요하여 자동 복구가 실패한 경우, WEB ACS에서 JOB Cancel, Work Reset, Lift down을 수행하고 설비 HMI에서 Call Cancel과 Work Reset을 거친 뒤 AMR을 점검 장소로 이동시켜 센서를 점검하며 해당 SKID 이송을 위해 다른 AMR을 할당한다.\n\n1T AMR(Pallet Lift)의 Unload 작업 중 센서 조정이 필요하거나 잔류 감지 오류로 인해 자동 복구가 실패한 경우, WEB ACS에서 Job Cancel, Error Reset, Lift down, Job Complete(강제 완료), Payload Clear(적재물 없음 처리)를 수행하고 설비 HMI에서 Work Reset을 거친 뒤 AMR을 점검 장소로 이동시켜 센서를 점검한다.\n1T AMR의 리프트 구동 중 상한(Up) 또는 하한(Down) 센서가 감지되지 않아 동작이 멈춘 경우, Loading 작업 시에는 WEB ACS에서 Job Cancel, Error Reset, Lift down을 순차적으로 실행하고 설비 HMI에서 Call Cancel과 Work Reset을 수행한 후 1T AMR을 점검 장소로 이동하여 센서를 점검한다.\n\n1T AMR의 리프트 구동 중 상한(Up) 또는 하한(Down) 센서가 감지되지 않아 동작이 멈춘 경우, Unloading 작업 시에는 WEB ACS에서 Job Cancel, Error Reset, Lift down, Job Complete, Payload Clear를 순차적으로 실행하고 설비 HMI에서 Work Reset을 수행한 후 1T AMR을 점검 장소로 이동하여 센서를 점검한다.\n\n수동 조작이 필요한 경우, 점검이 완료된 1T AMR은 반드시 이상 유무를 확인한 후 후공정에 투입한다.\n1T AMR(Pallet Lift)의 물리적 센서 정상 작동 여부를 진단하기 위해서는 WEB ACS에서 해당 AMR을 클릭한 후 Information 탭의 Category를 IO로 변경하여 mobis_1ton_onboard_sensor 1/2(제품 감지) 및 mobis_1ton_lift_up/down_sensor(리프트 위치) 항목의 점등 상태(ON/OFF)를 확인한다.\n1T AMR(Pallet Lift)의 리프트 Up/Down 동작 완료 후 시스템상에서 작업 완료 처리가 되지 않는 경우, 1T AMR은 장비(EQP) 측의 'Unload REQ / Load REQ' 신호를 정상적으로 수신하지 못한 상태이므로 자동 복구 실패 시 WEB ACS에서 Job Cancel 및 Error Reset을 수행한 뒤 AMR을 작업 전 상태로 원복하고 After Docking 상태로 변경하여 PLC Manager Interface를 통해 수동으로 인터페이스 신호를 점검해야 한다.",
        "textbook": "# BMA 공정 자동화 시스템 기술 백서\n## 이기종 AMR 운용 시나리오별 예외 처리 및 시스템 복구 메커니즘 (Exception Handling & System Recovery Mechanism)\n\n### 1. 개요 (Overview)\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 고중량의 배터리 모듈과 부품 박스를 이송하기 위해 **0.3T Box Conveyor AMR**과 **1T Pallet Lift AMR**이라는 이기종(Heterogeneous) 로봇 군집을 운용한다. 이 시스템의 안정성은 물리적 기구부(Physical Layer), 제어 로직(PLC Layer), 그리고 관제 시스템(ACS/MCS Layer) 간의 정밀한 동기화(Synchronization)에 의존한다.\n\n본 챕터에서는 각 AMR 모델의 기구적 특성에 따른 에러 발생 원인(Root Cause)을 공학적으로 분석하고, 시스템의 논리적 교착 상태(Logical Deadlock)를 해소하기 위한 데이터 흐름 및 복구 프로세스를 심층적으로 기술한다.\n\n---\n\n### 2. 0.3T AMR (Box Conveyor Type): 동적 이송 제어와 논리적 정합성\n0.3T AMR은 컨베이어 벨트와 도어(Door) 메커니즘을 통해 박스 단위의 자재를 이송한다. 이 과정에서 발생하는 문제는 주로 물리적 마찰에 의한 구동 실패와 시스템 상의 재고 데이터 불일치로 나뉜다.\n\n#### 2.1. 물리적 끼임(Jamming)과 토크 제어 메커니즘\n컨베이어 구동 중 발생하는 '박스 끼임' 현상은 모터의 부하 전류(Load Current)가 임계치를 초과하거나, 엔코더(Encoder)의 회전수와 지령 속도 간의 오차가 발생할 때 감지된다.\n*   **현상:** 이송 중 박스 끼임 또는 작업 지연 알람 발생.\n*   **복구 로직:** 시스템은 과부하 보호를 위해 모터 전원을 차단(Trip)한다. 작업자가 물리적 장애 요소를 제거한 후, HMI의 **[Main(F1) -> RESUME]** 시퀀스를 입력하는 것은 단순한 재시작이 아니다. 이는 모터 드라이버의 에러 레지스터(Error Register)를 소거(Clear)하고, 중단된 시점의 시퀀스 스텝(Sequence Step)을 다시 호출하여 PID 제어 루프를 재활성화하는 과정이다.\n\n#### 2.2. 도킹 실패와 경로 점유 교착 상태 (Deadlock Resolution)\nAMR이 설비와 도킹(Docking)을 시도하다 실패할 경우, 해당 AMR은 경로를 점유한 채 정지하여 후속 로봇의 이동을 막는 병목(Bottleneck) 현상을 유발한다.\n*   **해결 알고리즘:**\n    1.  **설비 측 리셋:** 설비 HMI의 **[Call Cancel]** 및 **[Call Create Pause ON]**은 설비가 더 이상 해당 미션에 대해 '준비 상태(Ready)'가 아님을 선언하고, 신규 호출 생성을 억제하여 큐(Queue)를 비우는 작업이다.\n    2.  **상태 초기화:** **[Work Reset]**은 설비 PLC와 AMR 간의 통신 핸드셰이킹(Handshaking) 비트를 강제로 `0`으로 초기화하여 통신 타임아웃 루프를 끊는다.\n    3.  **회수 명령:** 이후 AMR을 **MS25(회수 포트)**로 복귀시키는 것은 시스템 상에서 해당 로봇의 위치 점유를 해제하고, 안전 구역(Safe Zone)에서 재가동을 준비시키기 위함이다.\n\n#### 2.3. 다단 적재(2-Row) 미션에서의 데이터 불일치와 동기화\n0.3T AMR이 2열 공급/회수 미션을 수행할 때, 물리적 적재 상태와 ACS(ACS: Automated Control System) 상의 데이터(Payload Data)가 불일치하면 시스템은 안전을 위해 작업을 중단한다.\n\n*   **시나리오 A: 포트 포화(Port Full)로 인한 공급 실패**\n    *   **원인:** 설비 센서가 포트에 자재가 있음을 감지했으나, AMR은 공급 명령을 받고 진입한 경우 발생. 이는 물리적 센서 값과 상위 시스템의 재고 데이터 간의 레이턴시(Latency) 차이로 발생할 수 있다.\n    *   **복구 메커니즘:**\n        1.  **물리적 차단:** HMI Manual 모드의 **[Close ALL]**은 컨베이어 도어를 강제로 폐쇄하여 주행 중 자재 낙하를 방지하는 하드웨어 인터락(Interlock)을 체결하는 과정이다.\n        2.  **논리적 리셋:** WEB ACS의 **[JOB Cancel]** 및 **[Error Reset]**은 현재 수행 중인 트랜잭션을 롤백(Rollback)시킨다. 이후 **[Call Retry]**를 통해 상위 시스템이 최신 센서 데이터를 기반으로 작업을 재할당하도록 유도한다.\n\n*   **시나리오 B: 부분 작업 완료 (Partial Completion) 후 데이터 보정**\n    *   **원인:** 2단 작업 중 1단만 성공하고 에러가 발생한 경우, AMR은 \"작업 중\" 상태로 남게 되며, ACS는 여전히 2개의 자재를 모두 가진 것으로 인식할 수 있다.\n    *   **데이터 동기화 (Digital Twin Synchronization):**\n        *   작업자는 WEB ACS의 **Payload Setting**을 수정하여 디지털 트윈 데이터를 물리적 현실과 일치시켜야 한다.\n        *   공급 실패한 자재는 **'1EA – Full'**, 공급 완료된 칸은 **'1EA – None'**으로 설정한다.\n        *   이후 **[JOB Complete]**를 실행하면, 시스템은 해당 미션을 '강제 성공'으로 처리하고 재고 데이터를 업데이트하여 다음 프로세스로 넘어갈 수 있게 한다.\n\n*   **시나리오 C: 회수 미션 중 빈 박스 부재 (Empty Box Missing)**\n    *   **원인:** 회수 포트에 빈 박스가 있다는 정보(Data)를 바탕으로 로봇이 도착했으나, Lidar 또는 근접 센서가 박스를 감지하지 못한 경우.\n    *   **복구:** 설비와 ACS의 작업을 취소한 후, **[Payload All Clear]**를 수행한다. 이는 로봇이 \"아무것도 싣지 않았다\"는 상태로 논리적 정의를 내리는 것이며, 이를 통해 로봇은 다음 명령을 수신할 수 있는 Idle 상태로 전환된다.\n\n---\n\n### 3. 1T AMR (Pallet Lift Type): 고중량 리프팅 역학 및 센서 퓨전\n1T AMR은 유압 또는 전동 리프트를 사용하여 스키드(Skid)를 들어 올린다. 이 과정에서는 고중량에 의한 구조적 변형과 센서 정밀도 간의 상관관계가 핵심적인 기술적 이슈로 작용한다.\n\n#### 3.1. PLC 신호 타임아웃과 핸드셰이킹 프로토콜\nAMR이 도킹에 성공했음에도 작업이 시작되지 않는 현상은 주로 **PLC Handshaking Protocol**의 실패에서 기인한다.\n*   **메커니즘:** AMR은 도킹 후 `Docking_Complete` 신호를 송출하고, 설비 PLC로부터 `Work_Start` 신호를 대기한다. 특정 시간(Timeout) 내에 응답이 없으면 교착 상태를 방지하기 위해 에러를 발생시킨다.\n*   **조치:** WEB ACS에서 **[After Docking]** 상태로 변경하는 것은, 시스템에게 \"로봇은 이미 물리적으로 도킹 위치에 있으니, 주행 단계를 생략하고 즉시 작업(Work) 단계부터 재시도하라\"는 명령을 내리는 것이다. 이는 불필요한 주행 시간을 단축하고 통신 시퀀스만 재시작하는 효율적인 복구 전략이다.\n\n#### 3.2. 스키드 변형(Deformation)과 센서 미감지\n고중량 배터리 모듈을 적재한 스키드는 물리적 하중에 의해 미세하게 휘어질 수 있다(Deflection).\n*   **원인:** 리프트 Up/Down 시, 스키드의 휨으로 인해 AMR의 광학 센서나 근접 센서(Proximity Sensor)의 감지 범위(Detection Zone)를 벗어나는 경우, 시스템은 안전을 위해 동작을 즉시 정지한다.\n*   **복구 프로세스:**\n    1.  **강제 하강:** WEB ACS의 **[Lift down]** 명령을 통해 유압/모터 밸브를 개방하여 리프트를 원점으로 복귀시킨다.\n    2.  **수동 배출:** 센서 오차 범위를 벗어난 스키드는 자동화 설비로 핸들링이 불가능하므로, AMR을 점검 장소로 이동시킨 후 지게차를 이용해 수동으로 라인에서 배출(Reject)한다.\n\n#### 3.3. 센서 I/O 진단 및 인터페이스 신호 점검\n물리적 센서의 고장인지, 단순한 위치 오차인지 판별하기 위해 엔지니어는 로우 레벨(Low-level) 데이터에 접근해야 한다.\n*   **진단 방법:** WEB ACS의 **Information 탭 -> IO Category**에서 `mobis_1ton_onboard_sensor 1/2` (제품 감지) 및 `mobis_1ton_lift_up/down_sensor` (리프트 상/하한 리미트 스위치)의 비트 상태(ON/OFF)를 실시간으로 모니터링한다.\n*   **인터페이스 신호 복구:** 리프트 동작은 완료되었으나 시스템 상 완료 처리가 안 되는 경우, 이는 장비(EQP) 측의 `Unload REQ / Load REQ` 신호가 끊긴(Drop) 상태이다. 이때는 **PLC Manager Interface**를 통해 수동으로 신호를 트리거(Trigger)하여 논리적 흐름을 이어주어야 한다.\n\n#### 3.4. 잔류 감지 오류 및 센서 재조정\nUnload 작업 중 잔류 감지(Residual Detection) 오류가 발생하면, 실제로는 짐을 내렸으나 센서는 여전히 짐이 있다고 판단할 수 있다.\n*   **조치:** **[Job Complete(강제 완료)]** 및 **[Payload Clear]**를 통해 소프트웨어적으로 \"짐 없음\" 상태를 확정 짓는다. 이후 해당 AMR은 반드시 점검 장소로 이동하여 센서의 감도(Sensitivity) 및 설치 각도를 재조정(Calibration)해야 한다. 이는 센서의 히스테리시스(Hysteresis) 특성이 변했거나, 외란광(Ambient Light) 등의 노이즈가 원인일 수 있기 때문이다.\n\n---\n\n### 4. 결론: 시스템 무결성을 위한 표준 운영 절차 (SOP)\nBMA 공정의 자동화 시스템 복구 절차는 단순히 에러를 끄는 것이 아니라, **[물리적 상태(Physical State)] - [제어 신호(PLC Signal)] - [데이터 상태(ACS Data)]** 의 3요소를 일치시키는 과정이다.\n\n1.  **설비(Equipment):** `Call Cancel`과 `Work Reset`을 통해 PLC의 시퀀스 메모리를 초기화한다.\n2.  **관제(ACS):** `Job Cancel`과 `Payload Setting`을 통해 데이터베이스의 트랜잭션 무결성을 확보한다.\n3.  **로봇(AMR):** `Manual Mode` 조작과 `Sensor Check`를 통해 기구부의 안전을 확보하고 재가동 준비를 마친다.\n\n모든 수동 조작 및 점검이 완료된 AMR은 반드시 이상 유무를 최종 확인(Verification)한 후 후공정에 투입되어야 하며, 이는 전체 라인의 가동률(Availability)과 직결되는 핵심 원칙이다.",
        "questions": [
            "BMA 공정 내 이기종 AMR(0.3T 및 1T) 운용 중 발생하는 예외 상황별 원인 분석과 시스템 복구 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "0.3T AMR의 컨베이어 토크 제어와 1T AMR의 PLC 핸드셰이킹 프로토콜이 물리적 구동부 및 상위 관제 시스템(ACS)과 어떻게 상호작용하여 시스템의 논리적 정합성을 유지하는지 그 작동 원리를 공학적으로 분석하시오.",
            "다단 적재 미션의 데이터 불일치나 고중량 스키드 변형에 따른 센서 미감지 상황 발생 시, 시스템의 논리적 판단 과정과 물리적·데이터적 무결성을 회복하기 위한 단계별 대응 메커니즘을 상세히 설명하시오."
        ]
    },
    {
        "id": "# 6. Operational Manual: Control Tools (조작 및 유지보수 매뉴얼)",
        "preprocessed_group": "# 6. Operational Manual: Control Tools (조작 및 유지보수 매뉴얼)\n현장 운영자는 Operational Manual을 통해 설비(EQP) 및 시스템(ACS)을 제어하고, AMR의 센서 및 도킹 설비를 유지보수한다.\nEQP HMI의 AMR Interface 메뉴는 설비 화면 우측에 위치하며, 작업자가 AMR 관련 핵심 기능을 조작하고 구체적인 운영 시나리오에 따라 설비를 제어하는 용도로 사용한다.\nEQP HMI의 Call Cancel 기능은 설비에서 이미 생성된 AMR 호출(Call)을 취소하는 기능이며, 반드시 AMR이 도킹하기 전에 수행해야 한다.\n\n수동 조작이 필요한 경우, EQP HMI 우측의 Call Cancel 버튼을 클릭한 후 좌측 하단의 화살표(>)를 눌러 명령을 실행하며, 상태창에서 Response Call Cancel 및 Bit Clear(Request ID, Call Request, Call Response, Robot Assigned, Call Cancel)를 확인한다.\n\n차종 교체 시 설비를 AUTO에서 Manual로 전환하여 신규 차종으로 변경했음에도 신규 콜이 생성되지 않는 경우, Call Cancel을 실행하여 이전 차종의 콜을 삭제한 후 작업을 시작한다.\n\n시업 및 라인 재개 시 작업자가 수동으로 재공을 조절하거나 재고 조사 후 설비 상태가 변경되어 이전 공급 콜이 유지되는 경우, Call Cancel을 실행하여 잘못된 콜을 삭제한다.\n\n라인 점검 중 설비 에러 조치 지연으로 인해 대기 중인 AMR이 물류 정체를 유발하는 경우, Call Cancel을 실행하여 해당 AMR을 복귀시킨다.\nEQP HMI의 Call Create Pause 기능은 설비가 자재 투입 또는 배출 조건을 충족하더라도 AMR 호출 신호를 생성하지 않도록 제어하는 기능이다.\n\n이미 AMR 호출이 생성된 상태에서 호출을 취소하고자 할 때는 Call Create Pause 대신 Call Cancel 기능을 사용해야 한다.\n\n수동 조작이 필요한 경우, 설비 HMI 우측의 Call Create Pause 버튼을 클릭하여 버튼이 활성화(ON)된 상태를 확인한다.\n\nAMR 자동 공급이 불필요한 리워크 제품 연속 투입 시에는 Call Create Pause 기능을 활성화하여 호출 생성을 차단한다.\n\n작업자가 지게차 등을 이용해 수동으로 자재를 투입하거나 배출하는 동안에는 Call Create Pause 기능을 사용하여 설비의 자동 호출 신호 생성을 일시 정지한다.\nEQP HMI의 Call Priority(우선 호출) 기능은 특정 설비의 호출을 최우선 순위로 설정하여 대기 중인 AMR을 가장 먼저 할당받게 하는 기능이다.\n\nEQP HMI의 Call Priority 기능은 1회만 활성화되며, 해당 작업 완료 후 다음 호출부터는 정상 우선순위(Priority)가 적용된다.\n\n수동 조작이 필요한 경우, 설비 HMI 우측의 Call Priority 버튼을 클릭하고 좌측 하단의 화살표(>)를 눌러 명령을 실행한 뒤 상태창에서 활성화 여부를 확인한다.\n\n긴급 자재 공급이 필요하거나 NG 팔레트, 셀 공팔레트, BMA 완제품 및 공팔레트가 배출되지 않아 설비 막힘(Blocking)이 발생한 경우, EQP HMI의 Call Priority 기능을 사용하여 긴급 배출을 수행한다.\nEQP HMI의 Forced Docking(강제 도킹) 기능은 설비와 AMR의 Call Type이 일치하지 않더라도 강제로 도킹 및 작업을 진행하게 하는 기능이다.\n\nForced Docking 기능은 1회만 활성화되며, 다음 도킹 시점부터는 설비와 AMR의 Call Type 일치 여부를 확인하는 정상 로직이 다시 적용된다.\n\n수동 조작이 필요한 경우, 설비 HMI 우측의 Forced Docking 버튼을 클릭한 후 좌측 상태창에서 Call Request, Call Response, Robot Assigned 상태를 확인한다.\n\n타 라인 긴급 지원이나 리워크 투입을 위해 기존 라인의 콜을 무시하고 다른 라인의 AMR을 수동으로 투입해야 하는 경우 Forced Docking 기능을 사용한다.\n\nBSA #1라인 자동 공급 중 작업을 취소하고 BSA #2라인에 강제로 수동 공급하려는 경우, BSA #1라인의 Call Cancel을 실행하여 기존 콜을 제거한 후 BSA #2라인에서 Forced Docking 또는 Priority를 실행한다.\n\n지게차를 이용해 수동으로 자재를 투입할 때 컨베이어가 작동하지 않는 경우, HMI에서 컨베이어 수동 구동을 실시한다.\n\n공 팔레트 회수 미션이 생성된 상태에서 지게차로 팔레트를 먼저 회수한 경우, 배출부의 Call Cancel을 실행하여 기존 콜을 제거해야 한다.\nAMR이 BMA 배출 라인에서 품질 검사를 위해 정차하거나 수동 위치 조정이 필요한 경우, WEB ACS에서 해당 AMR 호기를 선택하고 BMA 배출 포트에서 Docking-OUT이 완전히 완료된 것을 확인한 후 JOB CANCEL을 클릭한다.\n\n도킹 아웃 도중 JOB CANCEL을 클릭하면 PLC 신호 꼬임(Interface Error)이 발생할 수 있으므로 주의해야 하며, 수동 조작이 필요한 경우 Unlock 버튼을 클릭하여 JOG 버튼을 활성화한 뒤 키보드나 화면 버튼으로 주변 장애물에 주의하며 운전한다.\n\n수동 조작 및 검사가 완료된 후에는 CALL-RETRY 버튼을 클릭하여 AMR을 BMA 배출에서 BMA 자동창고로 이동하는 자동 미션으로 복귀시킨다.\nAMR Sensor 점검 및 V-marker ASSY 상태 관리 시, 차상 제품감지센서는 FESTO 사의 SOEG-RTH-M18-PS-K-2L 모델을 2개 사용하며, 리프트용 근접센서는 FESTO 사의 SIEH-M12B-PS-S-L 모델을 2개 사용하고, 도킹용 근접센서는 AUTONICS 사의 PRT12-8DN2 모델을 2개 사용한다.\n자동 복구 실패 시, 작업자는 1T AMR 차상에 설치된 제품감지센서의 상태를 점검하고 필요에 따라 감도 및 위치를 조정한다.\n1. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor(호기: R_107~135)를 분해할 경우, T-렌치를 사용하여 커버(1)은 2.5mm, 커버(2)는 3mm 나사를 풀고 센서가 낙하하지 않도록 주의하며 제거한다.\n\n2. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 동작 상태는 후면 LED를 통해 확인하며, 대기 시에는 녹색 LED가 점등되고 감지 시에는 녹색과 노란색 LED가 동시에 점등된다.\n\n3. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 감지 높이를 조정할 경우, 일자 정밀드라이버를 사용하여 반시계 방향으로 최소 높이를 설정한 후 시계 방향으로 돌려가며 높이를 맞춘다.\n\n4. BMA SKID에 장착된 콘-타입(Cone Type) AMR Sensor의 권장 세팅 높이는 20 ~ 25 mm이다.\n\n5. BSA SKID에 장착된 콘-타입(Cone Type) AMR Sensor는 프레임이 없는 구조이므로 PLT 하부 커버를 감지할 수 있도록 95 ~ 100 mm 높이로 설정한다.\n\n6. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 감지 높이를 100mm 초과로 설정할 경우, 리프트가 하강한 상태에서도 제품을 오감지할 수 있으므로 주의한다.\n\n7. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 조립 완료 후 수동 확인이 필요한 경우, WEB ACS의 Information 내 IO 탭에서 onboard_sensor_1(전방) 및 onboard_sensor_2(후방)의 상태가 감지 시 녹색, 미검출 시 빨간색으로 표시되는지 확인한다.\n1. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서를 분해할 때는 상부 커버 제거, Push 버튼 제거, 센서 브라켓 제거 순서로 탈거한다.\n2. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서 동작 상태는 LED가 녹색일 때 대기, 녹색과 노란색이 동시에 점등될 때 동작 중임을 나타낸다.\n3. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서 감지 범위는 센서 버튼을 누른 상태에서 감지가 확인되는 지점까지 조정하며, 권장 설정 높이는 5mm이다.\n4. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서 조립 완료 후에는 WEB ACS의 IO 탭을 통해 정상 동작 여부를 최종 확인한다.\n자동 복구 실패 시, 작업자는 AMR 리프트 및 도킹 장치에 부착된 근접센서의 감지 상태와 이물질 부착 여부를 직접 점검해야 한다.\nAMR 리프트 UP/DOWN 센서의 점검을 위해 2.5mm T-렌치를 사용하여 보전용 커버를 탈거한 후 리프트 동작 시 센서 LED의 점등 여부를 확인한다.\n\n수동 조작이 필요한 경우, 17mm 스패너로 고정 너트를 풀어 AMR 리프트 센서와 검출체(프레임) 간의 거리를 2mm로 조정한다.\n\nAMR 리프트 센서의 높이 조정이 필요한 경우, Down 센서를 기준으로 Up 센서까지의 거리를 100mm가 되도록 녹색 표시 볼트를 이용하여 조정한다.\n1T AMR의 도킹 검지 센서는 전방과 후방에 각 1개씩 장착되어 있으며, 0.3T AMR의 도킹 검지 센서는 후방에 2개 장착되어 있다.\n\nAMR 도킹 검지 센서의 높이를 조정할 경우, 지면으로부터 16mm(브라켓 기준 19mm) 높이에 세팅용 지그(Zig)를 배치하고 센서 높이를 맞춘 후 너트를 체결하여 고정한다.\n\nAMR 도킹 검지 센서의 동작을 확인하는 경우, 실제 도킹 포인트에 진입하여 ACS(AMR Control System)의 IO 탭에서 센서 감지 여부를 점검한다.\nV-marker ASSY는 V-marker, 오버런 스토퍼, 도그플레이트 ASSY, 자동충전기 브라켓으로 구성된다.\n\nV-marker의 위치나 각도가 틀어져 AMR이 도킹 위치를 찾지 못하는 경우, 작업자는 V-marker의 정렬 상태를 점검하고 재조립 또는 교체를 실시한다.\n\nV-marker의 파손을 방지하기 위해 작업자가 V-marker를 밟거나 발로 차지 않도록 안전 교육을 실시해야 한다.\n\n도그플레이트의 각도가 틀어져 도킹 완료 후 '센서 미감지' 에러(10015)가 발생하는 경우, 작업자는 도그플레이트의 위치를 교정하거나 파손 시 부품을 교체한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n## 이기종 제어 시스템 간의 상호 운용성 및 센서 피드백 메커니즘\n**(Interoperability and Sensory Feedback Mechanisms in Heterogeneous Control Systems)**\n\n---\n\n### 1. 서론 (Introduction)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 물리적 계층(Physical Layer)의 AMR(Autonomous Mobile Robot)과 논리적 계층(Logical Layer)의 상위 관제 시스템(ACS/MCS), 그리고 제어 계층(Control Layer)의 설비 PLC가 유기적으로 결합된 복합 시스템(Cyber-Physical System)입니다. 본 챕터에서는 단순한 조작 절차를 넘어, 각 시스템 간의 **핸드쉐이킹(Handshaking) 프로토콜**, **센서의 공학적 감지 원리**, 그리고 **예외 상황(Exception Handling)에서의 논리적 인과관계**를 심층적으로 분석합니다. 엔지니어는 이를 통해 시스템의 블랙박스 내부에서 발생하는 데이터 흐름과 물리적 상호작용을 이해해야 합니다.\n\n---\n\n### 2. 설비-AMR 인터페이스 제어 논리 및 교착 상태 방지 (EQP-AMR Interface Logic)\n\n설비(EQP)와 AMR 간의 통신은 비동기적(Asynchronous) 환경에서 결정론적(Deterministic) 동작을 보장해야 합니다. EQP HMI의 제어 도구들은 이러한 통신 과정에서 발생할 수 있는 논리적 교착 상태(Deadlock)나 레이스 컨디션(Race Condition)을 해결하기 위해 설계되었습니다.\n\n#### 2.1. 호출 취소(Call Cancel)와 레지스터 초기화 메커니즘\n`Call Cancel` 기능은 단순히 명령을 철회하는 것이 아니라, PLC 메모리 내의 통신 레지스터를 강제로 소거(Clear)하는 **'상태 리셋(State Reset)'** 과정입니다.\n\n*   **작동 원리:**\n    1.  **트리거:** 운영자가 HMI에서 Call Cancel을 실행.\n    2.  **내부 로직:** PLC는 `Request ID`, `Call Request`, `Call Response`, `Robot Assigned` 비트를 순차적으로 `0`으로 초기화합니다.\n    3.  **필요성:** AMR이 도킹하기 전(Pre-Docking) 단계에서만 유효한 이유는, 도킹 프로세스가 시작되면 설비와 로봇 간의 하드와이어드(Hard-wired) 또는 광통신 인터록이 체결되기 때문입니다. 이 상태에서 논리적 호출만 취소할 경우, 물리적 연결은 유지된 채 논리 링크만 끊어지는 **'고아 상태(Orphaned State)'**가 발생하여 시스템 멈춤을 유발합니다.\n*   **적용 시나리오:**\n    *   **차종 교체(Model Change):** `AUTO`에서 `Manual`로 전환 시, 기존 차종에 대한 호출 ID가 잔존하면 신규 차종의 호출 생성을 방해(Blocking)합니다. 이때 Call Cancel은 잔존 ID를 플러시(Flush)하여 메모리 스택을 비웁니다.\n    *   **재공 불일치:** 라인 재개 시 물리적 재고와 시스템상 재고 데이터(WIP Count)가 불일치할 경우, 잘못 생성된 공급 요청을 삭제하여 물류 병목을 해소합니다.\n\n#### 2.2. 호출 생성 일시 정지(Call Create Pause)와 흐름 제어\n`Call Create Pause`는 설비의 센서가 자재 투입/배출 조건을 만족하더라도(Trigger Condition Met), 상위 시스템으로의 신호 송출을 물리적으로 차단(Gating)하는 기능입니다.\n\n*   **논리적 차이점:** `Call Cancel`이 이미 생성된 트랜잭션을 파괴하는 것이라면, `Call Create Pause`는 트랜잭션 생성 자체를 억제하는 **'게이트 키퍼(Gatekeeper)'** 역할을 수행합니다.\n*   **공학적 적용:**\n    *   **리워크(Rework) 공정:** 불량품 재투입 시, 정상적인 자재 소진 로직에 의해 불필요한 자재 공급 요청이 발생할 수 있습니다. 이를 방지하기 위해 자동 호출 트리거를 마스킹(Masking)합니다.\n    *   **수동 개입 시 안전 확보:** 지게차 작업 등 인간이 개입하는 동안 시스템의 비동기적 호출 생성을 막아, AMR과 작업자 간의 동선 중첩을 원천 차단합니다.\n\n#### 2.3. 우선순위 역전(Priority Inversion) 및 강제 도킹(Forced Docking)\nACS의 스케줄링 알고리즘은 기본적으로 FIFO(First-In-First-Out) 또는 최적 경로 기반이지만, 현장 상황에 따라 이를 오버라이드(Override)해야 할 때가 있습니다.\n\n*   **Call Priority (인터럽트 요청):** 설비 막힘(Blocking) 발생 시, 해당 설비의 호출에 최상위 가중치를 부여하여 큐(Queue)의 맨 앞으로 이동시킵니다. 이는 1회성 인터럽트(One-shot Interrupt)로 동작하며, 작업 완료 후 시스템은 즉시 표준 스케줄링 로직으로 복귀합니다.\n*   **Forced Docking (유효성 검사 우회):**\n    *   **정상 로직:** 설비의 `Call Type`과 AMR의 `Job Type`이 일치하는지 비트 단위로 비교(Bitwise Comparison)하여, 불일치 시 도킹을 거부합니다.\n    *   **강제 로직:** 긴급 지원이나 라인 간 교차 투입 시, 이 비교 로직을 바이패스(Bypass)하여 물리적 도킹을 승인합니다.\n    *   **주의사항:** BSA #1라인에서 #2라인으로 전환 시, 반드시 기존 라인의 잔존 신호를 `Call Cancel`로 소거해야 합니다. 그렇지 않으면 두 라인의 신호가 중첩되어 **'이중 할당(Double Assignment)'** 오류가 발생합니다.\n\n---\n\n### 3. 자율주행 시스템의 예외 처리 및 신호 무결성 (AMR Navigation & Signal Integrity)\n\nAMR의 자율주행은 정밀한 위치 추정(Localization)과 상위 시스템과의 끊임없는 통신에 의존합니다.\n\n#### 3.1. 작업 취소(Job Cancel)와 도킹 시점의 임계성\nWEB ACS를 통한 `JOB CANCEL` 명령은 AMR의 미션 큐를 삭제합니다. 그러나 이 명령의 실행 시점은 시스템 안정성에 치명적인 영향을 미칩니다.\n\n*   **Docking-OUT 완료 후 실행 원칙:**\n    *   도킹 중(Docking-IN/Busy)에는 AMR과 설비 간의 광통신 또는 근거리 무선 통신을 통해 I/O 신호가 실시간으로 교환됩니다(예: E-Stop 연동, 컨베이어 구동 신호).\n    *   이 과정에서 강제로 Job을 취소하면, PLC는 통신 두절을 감지하고 **'Interface Error'**를 발생시킵니다. 이는 단순 에러가 아니라, 설비와 로봇 양쪽의 안전 회로가 트립(Trip)되는 현상입니다.\n    *   따라서 반드시 물리적/논리적 연결이 해제된 `Docking-OUT` 상태 확인 후 명령을 실행해야 합니다.\n\n#### 3.2. 수동 조작(Manual Jog)과 서보 제어\nAMR이 위치를 잃거나(Delocalization) 장애물에 갇혔을 때, `Unlock` 기능을 통해 제어권을 자동(Auto)에서 수동(Manual)으로 전환합니다. 이는 서보 모터의 위치 제어 루프(Position Control Loop)를 해제하고, 작업자의 입력에 따라 속도 제어(Velocity Control) 모드로 구동함을 의미합니다. 복구 후 `CALL-RETRY`는 중단된 시퀀스의 포인터를 찾아 자동화 루프를 재개시키는 명령어입니다.\n\n---\n\n### 4. 센서 시스템의 물리학적 특성 및 캘리브레이션 (Sensor Physics & Calibration)\n\nBMA 공정의 신뢰성은 센서 데이터의 정확도에 좌우됩니다. 각 센서는 고유의 물리적 검출 원리를 가지며, 이에 따른 정밀한 튜닝이 요구됩니다.\n\n#### 4.1. 광학식 제품 감지 센서 (Photoelectric Sensors)\nAMR 차상에는 FESTO사의 `SOEG-RTH-M18-PS-K-2L` (확산 반사형) 모델이 사용됩니다.\n\n*   **작동 원리:** 발광부에서 쏘아진 빛이 물체(배터리 모듈/SKID)에 반사되어 수광부로 돌아오는 광량을 측정합니다.\n*   **히스테리시스(Hysteresis)와 감지 높이:**\n    *   **Cone Type (BMA/BSA SKID):** 권장 높이 **20~25mm**. 이 센서는 배경 억제(Background Suppression) 기능이 제한적일 수 있습니다. 만약 높이를 **100mm 초과**로 설정하면, 리프트 하강 시 바닥면(Floor)을 제품으로 오인하는 **'허위 양성(False Positive)'** 신호가 발생합니다.\n    *   **Attach Type (Type B):** 권장 높이 **5mm**. 감지 거리가 매우 짧게 설정된 이유는 난반사에 의한 노이즈를 최소화하고, 대상 물체의 유무만을 명확히 판별하기 위함입니다.\n*   **상태 표시:** 녹색 LED(전원/대기)와 노란색 LED(출력/감지)의 조합을 통해 센서의 동작 상태(N.O/N.C) 및 안정 영역 진입 여부를 시각적으로 판별합니다.\n\n#### 4.2. 유도형 근접 센서 (Inductive Proximity Sensors)\n리프트 및 도킹 감지에는 FESTO `SIEH-M12B` 및 AUTONICS `PRT12-8DN2`가 사용됩니다.\n\n*   **작동 원리:** 센서 전면부에서 고주파 자기장을 형성하고, 금속 물체(검출체)가 접근할 때 발생하는 와전류(Eddy Current) 손실을 감지하여 스위칭합니다.\n*   **정밀 튜닝 (Gap Control):**\n    *   **리프트 센서:** 검출체(프레임)와의 거리를 **2mm**로 유지해야 합니다. 이는 자기장의 유효 검출 범위(Sensing Distance) 내에서 가장 안정적인 신호 대 잡음비(SNR)를 확보하는 거리입니다.\n    *   **Up/Down 스트로크:** Down 센서 기준 Up 센서까지 **100mm** 간격은 리프트의 기계적 스트로크와 일치해야 하며, 이를 벗어날 경우 리프트 모터의 과부하(Overload)나 위치 결정 실패를 유발합니다.\n\n---\n\n### 5. 인프라스트럭처와 기하학적 인식 (Infrastructure & Geometric Recognition)\n\nAMR은 주변 환경의 특징점(Feature)을 인식하여 자신의 위치를 계산합니다.\n\n#### 5.1. V-Marker와 Lidar SLAM\nV-Marker는 단순한 반사판이 아니라, AMR의 Lidar 센서가 인식하는 **기하학적 랜드마크(Geometric Landmark)**입니다.\n\n*   **인식 메커니즘:** AMR의 네비게이션 알고리즘은 스캔된 포인트 클라우드(Point Cloud) 데이터와 사전에 정의된 V-Marker의 형상 템플릿을 매칭합니다.\n*   **변형의 영향:** 작업자의 충격으로 V-Marker의 각도가 틀어지면, 템플릿 매칭 점수(Matching Score)가 하락하여 AMR은 도킹 위치를 특정하지 못하고 배회하거나 정지합니다.\n\n#### 5.2. 도그플레이트(Dog Plate)와 물리적 정렬 확인\n도그플레이트는 도킹의 최종 단계에서 기구적 정렬을 확정하고 센서를 트리거하는 물리적 인터페이스입니다.\n\n*   **에러 코드 10015 (센서 미감지):** 도킹 동작은 완료되었으나, 도그플레이트가 센서 감지 범위(Sensing Area)에 들어오지 않았음을 의미합니다. 이는 AMR의 정차 위치 오차(Navigation Error) 또는 도그플레이트의 기구적 변형(Mechanical Deformation)에 기인합니다. 따라서 단순 재시도보다는 플레이트의 위치 교정 및 파손 여부 점검이 선행되어야 합니다.\n\n---\n\n**결론:** BMA 공정의 안정적인 운영은 HMI의 논리적 제어, AMR의 통신 프로토콜 준수, 그리고 센서 하드웨어의 정밀한 물리적 세팅이 삼위일체를 이룰 때 달성됩니다. 운영자와 엔지니어는 각 에러 코드와 현상 이면에 존재하는 이러한 시스템적 인과관계를 파악하여 근본적인 원인을 해결해야 합니다.",
        "questions": [
            "BMA(Battery Module Assembly) 공정 내 이기종 제어 시스템 간의 상호 운용성 및 센서 피드백 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "설비(EQP)와 AMR 간의 핸드쉐이킹 프로토콜에서 호출 취소(Call Cancel) 및 호출 생성 일시 정지(Call Create Pause) 기능이 PLC 메모리 레지스터 및 트랜잭션 제어에 미치는 영향과 시스템적 상호작용을 공학적으로 분석하시오.",
            "AMR 도킹 과정 중 'Interface Error' 또는 '에러 코드 10015(센서 미감지)' 상황 발생 시, 통신 무결성 및 센서의 물리적 검출 원리(광학/유도형)에 근거한 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": "# 7. Appendix",
        "preprocessed_group": "# 7. Appendix\nMCS(Material Control System)는 부품 재고를 관리하고 작업 할당을 내리는 최상위 제어 시스템으로서, PLC(Programmable Logic Controller) 신호를 통해 부품 보충 요청을 ACS(AMR Control System)에 전달한다.\n\nPLC(Programmable Logic Controller)는 공장 자동화 시스템에서 센서의 입력 신호를 받아 프로그래밍된 로직에 따라 연산을 수행하고 모터나 밸브 등의 외부 장치를 제어하는 산업용 컴퓨터이다.\n\nWMS(Warehouse Management System)는 창고 내 재고, 입출고 및 보관 위치를 효율적으로 관리하는 시스템이다.\n\nBMA(Battery Module Assembly)는 배터리 셀들을 결합하여 하나의 모듈로 제작하는 배터리 모듈 조립 공정을 의미한다.\n\nBSA(Battery System Assembly)는 BMA 공정에서 제작된 배터리 모듈들을 차량 장착용 최종 시스템으로 조립하는 배터리 시스템 조립 공정을 의미한다.\n\nCELL은 에너지를 저장하고 방출하는 배터리의 가장 기본적인 단위인 배터리 셀을 의미한다.\n\nL/C(Lower Case)는 배터리 시스템의 하단부를 구성하는 부품인 하부 케이스를 의미한다.\n\nLWR CASE(LL)는 배터리 시스템의 하부 케이스를 지칭하며, 문서 내에서는 LL이라는 약어로 사용된다.\n\nSKID RETURN(RC)은 물품 운반용 스키드(Skid)를 회수하거나 재활용하는 라인 또는 구역을 의미하며, 문서 내에서는 RC라는 약어로 사용된다.\n\nMS(Material Storage)는 BMA 또는 BSA 공정에 필요한 다양한 부품들을 보관하는 부품 창고를 의미한다.\n\nCS(BMA CELL)는 배터리 셀이 BMA 공정으로 공급되거나 처리되는 구역인 BMA CELL 공정을 의미한다.\n\nMC(BMA)는 배터리 모듈이 조립되는 핵심 공정 구역인 BMA 공정을 의미한다.\n\nMW(Module Warehouse)는 BMA 공정에서 사용되거나 생산된 모듈을 자동으로 보관하고 관리하는 BMA 자동 창고를 의미한다.\n\nBP(BSA)는 배터리 시스템이 조립되는 핵심 공정 구역인 BSA 공정을 의미한다.\n\nSL(BSA)은 BSA 공정 내의 특정 라인이나 로드 지점을 나타내는 BSA 공정 관련 명칭이다.\n\nSP(BSA)은 BSA 공정 내의 특정 생산 지점을 나타내는 BSA 공정 관련 명칭이다.\n\nSC(System Complete)는 최종 조립이 완료된 배터리 시스템을 보관하는 완제품 창고를 의미한다.\n\nEQP(Equipment)는 물건을 가공하거나 조립하는 하드웨어 및 PLC 기반의 물리적인 장비 본체를 의미한다.\n\nEQP HMI(Human-Machine Interface)는 작업자가 물리적인 생산 장비를 제어, 모니터링 및 관리할 수 있도록 지원하는 소프트웨어 및 터치 패널 하드웨어 기반의 사용자 인터페이스이다.\n\nAMR(Autonomous Mobile Robot)은 부품을 실어 나르는 자율주행 운반 로봇을 의미한다.\n\nWeb ACS(AMR Control System)는 AMR의 경로 지정, 작업 할당 및 실시간 모니터링을 수행하는 웹 기반의 중앙 통제 시스템이다.\n\nPLT(Pallet)는 물품을 적재하고 운반하는 데 사용되는 운반대인 팔렛트를 의미한다.\n\nOK(Good)는 정상품 또는 장비의 정상적인 상태를 의미한다.\n\nNG(Not Good)는 불량품 또는 장비의 비정상적인 상태를 의미한다.\n도킹 전 트래픽 발생 시 창고(Warehouse) 문제로 인해 AMR이 이동 중 멈추거나 경로가 막힌 경우, 수동 조작이 필요한 상황에서 작업자는 AMR의 Job Cancel을 실행하고 AMR을 주행 경로 밖으로 이동시킨 후, 창고 문제가 해결되면 다시 AMR을 주행 경로 안으로 복귀시켜 상태를 Before Docking으로 변경한다.\n0.3T AMR(Box Conveyor)이 도킹 후 에러를 발생시켰으나 도킹 상태가 정상(Docking OK)인 경우, 작업자는 0.3T AMR HMI 메인 화면에서 RESUME 버튼을 클릭하여 복구를 시도한다.\n\n자동 복구 실패 시, 0.3T AMR의 1차 초기화를 위해 설비의 Work Reset을 수행한 후 AMR의 Job Cancel, Error Reset, Door Close를 순차적으로 진행하고 상태를 After Docking으로 변경한다.\n\n1차 초기화 후에도 문제가 해결되지 않을 경우, 0.3T AMR의 2차 완전 초기화를 위해 설비의 Call Create Pause를 ON으로 설정하고 Call Cancel 및 Work Reset을 수행하며, AMR의 Job Cancel과 Error Reset을 실행한다.\n\n2차 완전 초기화 후 작업 전 단계(Before Work)에서 수동 조작이 필요한 경우, 0.3T AMR의 상태를 After Docking으로 설정하고 공급 미션은 MS25(회수 포트)로, 회수 미션은 복귀(Go back)로 지정한 뒤 설비 라인을 점검하고 Call Create Pause를 OFF로 전환한다.\n\n2차 완전 초기화 후 작업 중 단계(In Work)에서 수동 조작이 필요한 경우, 0.3T AMR의 박스 위치 점검과 도어 닫기를 수행한 후 Payload 값을 수동으로 설정한다.\n\n작업 중 단계에서 0.3T AMR에 적재된 박스가 빈 박스(Empty Box)인 경우, MS25 Unload를 수행하고 Auto 모드로 전환하여 복귀 절차를 진행한다.\n\n작업 중 단계에서 0.3T AMR에 실물 박스가 적재되어 있거나 박스가 없는 경우(Full Box or Nothing), 즉시 창고 복귀(Go Back)를 수행하고 설비의 Call Create Pause를 OFF로 변경하여 라인을 재개한다.\n1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 있는 상태에서 트러블 슈팅이 해결되지 않을 경우, 설비 PLC 및 센서를 점검하고 1T AMR의 리프트를 작업 전 상태로 상하 구동하여 초기화한 뒤 설비 Work Reset과 AMR의 Job Cancel, Error Reset, After Docking 설정을 순차적으로 수행한다.\n\n1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 없는 상태에서 설비(Product Line) 측 문제로 에러가 발생한 경우, 설비의 Call Create Pause를 활성화하고 Call Cancel과 Work Reset을 수행한 뒤 AMR의 Job Cancel, Error Reset, After Docking 처리를 거쳐 라인 점검 후 Call Create Pause를 해제한다.\n\n1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 없는 상태에서 창고(Warehouse) 측 문제로 에러가 발생한 경우, 수동 조작이 필요한 상황으로 간주하여 보전반을 호출한다.\n\n1T AMR(Pallet Lift)의 도킹 상태 확인 결과 도킹에 실패한 경우, [4.1. 도킹 실패 및 센서 에러] 섹션에 명시된 조치 절차를 수행한다.\n\n1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 감지되었으나 자동 복구에 실패하여 AMR 센서 이상이 확인된 경우, [5.2 센서 점검] 가이드에 따라 조치한다.",
        "textbook": "# BMA/BSA 자동화 시스템 아키텍처 및 제어 로직 기술 백서\n## (Technical Whitepaper: BMA/BSA Automation System Architecture & Control Logic)\n\n**작성자:** 수석 아키텍트 (Chief Architect)  \n**문서 등급:** 대외비 (Confidential)  \n**적용 공정:** 현대자동차그룹 BMA/BSA Manufacturing Line\n\n---\n\n## 1. 서론: 통합 제어 시스템의 계층적 구조 (Hierarchical Control Architecture)\n\nBMA(Battery Module Assembly) 및 BSA(Battery System Assembly) 공정은 단순한 물리적 조립을 넘어, 데이터와 물류가 실시간으로 동기화되는 **CPS(Cyber-Physical System)** 환경입니다. 본 시스템은 최상위 관리 시스템인 **MCS**와 **WMS**, 중간 제어 계층인 **ACS**, 그리고 현장 제어 계층인 **PLC**와 **AMR**이 유기적으로 결합된 다층 구조(Multi-layered Architecture)를 갖습니다.\n\n### 1.1 데이터 흐름과 제어 권한의 위계 (Data Topology)\n시스템의 안정성을 보장하기 위해 제어 권한은 엄격한 위계 구조를 따릅니다.\n\n*   **MCS (Material Control System):** 공정의 '두뇌'에 해당합니다. 생산 계획에 따라 부품 소요량을 예측하고, 하위 시스템에 작업(Job)을 할당합니다. MCS는 직접 장비를 제어하지 않고, **PLC**와의 통신을 통해 트리거(Trigger) 신호를 수신하여 **ACS**에 물류 명령을 하달하는 **이벤트 기반(Event-Driven)** 아키텍처를 채택하고 있습니다.\n*   **ACS (AMR Control System - Web ACS):** 자율주행 로봇(AMR) 군집을 관리하는 '관제탑'입니다. MCS로부터 할당받은 작업을 수행하기 위해 최적의 경로(Path Planning)를 연산하고, 다수의 AMR 간 트래픽을 중재(Arbitration)하며, 실시간 위치 및 상태를 모니터링합니다.\n*   **PLC (Programmable Logic Controller):** 물리적 장비(EQP)를 제어하는 '신경망'입니다. 센서(Sensor)로부터 입력된 아날로그/디지털 신호를 밀리초(ms) 단위의 스캔 타임(Scan Time) 내에 처리하여 모터, 밸브, 리프트 등의 액추에이터를 결정론적(Deterministic)으로 제어합니다.\n*   **WMS (Warehouse Management System):** 재고의 정합성을 보장합니다. MS(Material Storage), MW(Module Warehouse), SC(System Complete) 등 각 창고 구역의 입출고 트랜잭션을 관리하며, 물리적 재고 위치와 전산 재고를 동기화합니다.\n\n---\n\n## 2. 공정 역학 및 물류 흐름 (Process Dynamics & Material Flow)\n\n배터리 제조 공정은 에너지 밀도가 높은 셀(Cell)을 다루므로, 물리적 충격 방지와 정밀한 위치 제어가 필수적입니다. 물류 흐름은 에너지 단위의 결합 과정에 따라 다음과 같이 구성됩니다.\n\n1.  **Cell to Module (BMA 공정):**\n    *   **CS (BMA CELL):** 가장 기본 단위인 배터리 셀이 투입되는 시점입니다.\n    *   **MC (BMA):** 셀들이 결합되어 모듈(Module) 형태를 갖추는 핵심 조립 구역입니다.\n    *   **MW (Module Warehouse):** 완성된 모듈이 BSA 공정으로 넘어가기 전, 버퍼(Buffer) 역할을 수행하는 자동 창고입니다.\n2.  **Module to System (BSA 공정):**\n    *   **BP (BSA):** 모듈들이 **L/C (Lower Case)** 위에 안착되어 최종 시스템으로 조립됩니다.\n    *   **LWR CASE (LL):** 배터리 팩의 하부 하우징으로, 구조적 강성을 담당합니다.\n    *   **SC (System Complete):** 조립이 완료된 배터리 시스템이 보관되는 최종 단계입니다.\n3.  **Support Logistics:**\n    *   **MS (Material Storage):** 부품 공급의 원천입니다.\n    *   **SKID RETURN (RC):** 물류 순환의 핵심인 스키드(Skid)를 회수하여 재투입하는 루프(Loop) 시스템입니다.\n\n---\n\n## 3. 자율주행 로봇(AMR)의 메커니즘 및 운영 로직\n\nAMR은 단순한 운송 수단이 아니라, 공정 간의 '동기화'를 담당하는 능동적 에이전트입니다. 적재물의 특성에 따라 두 가지 타입으로 운용됩니다.\n\n### 3.1 0.3T AMR (Box Conveyor Type)\n*   **작동 원리:** 상단에 컨베이어 벨트가 장착되어 있어, 설비(EQP)의 컨베이어와 도킹(Docking) 시 속도와 위치를 동기화하여 박스(Box) 단위의 자재를 이송합니다.\n*   **핵심 기술:** 설비와의 정밀한 정렬(Alignment)이 요구되며, 이송 시 진동을 최소화하여 셀(Cell) 손상을 방지합니다.\n\n### 3.2 1T AMR (Pallet Lift Type)\n*   **작동 원리:** 고중량의 팔렛트(PLT)나 스키드(SKID)를 들어 올리는 리프트(Lift) 메커니즘을 탑재하고 있습니다.\n*   **핵심 기술:** 무게 중심(Center of Gravity) 변화에 따른 주행 안정성 확보와, 리프트 상하 구동 시의 유압/전동 제어 정밀도가 핵심입니다.\n\n---\n\n## 4. 결함 허용 시스템 및 예외 처리 전략 (Fault Tolerance & Exception Handling)\n\n자동화 시스템에서 에러는 피할 수 없는 변수입니다. 따라서 시스템은 에러 발생 시 **교착 상태(Deadlock)**를 방지하고, 최단 시간 내에 정상 상태로 복귀(Recovery)하기 위한 다단계 로직을 내장하고 있습니다.\n\n### 4.1 트래픽 제어 및 교착 상태 해결 (Traffic & Deadlock Resolution)\n다수의 AMR이 좁은 경로에서 운용될 때, 창고(Warehouse) 측의 지연이나 병목 현상으로 인해 AMR이 주행 경로 상에서 고립되는 경우가 발생합니다.\n\n*   **논리적 인과관계:** [창고 문제 발생] -> [AMR 경로 점유 및 정지] -> [후속 AMR 진입 불가 (Traffic Jam)]\n*   **해결 메커니즘:**\n    1.  **Job Cancel (자원 점유 해제):** 작업자는 ACS 상에서 해당 AMR의 작업을 취소하여, 시스템이 해당 로봇에 할당한 논리적 점유권(Token)을 해제합니다.\n    2.  **Physical Relocation (물리적 회피):** AMR을 주행 경로 밖으로 수동 이동시켜 물리적 병목을 해소합니다.\n    3.  **State Restoration (상태 복원):** 창고 문제가 해결되면, AMR을 다시 경로로 복귀시키고 상태를 **'Before Docking'**으로 재설정합니다. 이는 AMR의 상태 머신(State Machine)을 초기 진입 단계로 리셋하여, 중단된 시점부터 논리적 오류 없이 프로세스를 재개하기 위함입니다.\n\n### 4.2 0.3T AMR 도킹 에러 복구 프로토콜 (3-Stage Recovery Logic)\n도킹(Docking)은 AMR과 설비 간의 물리적/통신적 결합이 일어나는 가장 불안정한 단계입니다. 시스템은 에러의 심각도에 따라 3단계의 복구 절차를 수행합니다.\n\n#### 1단계: 일시적 통신/센서 오류 (Transient Error)\n*   **현상:** 도킹 상태는 물리적으로 정상(Docking OK)이나, 소프트웨어적 에러가 발생한 경우.\n*   **조치:** **RESUME** 명령을 통해 일시적인 패킷 손실이나 타임아웃을 무시하고 프로세스를 재개합니다.\n\n#### 2단계: 로직 불일치 (Logic Mismatch) - 1차 초기화\n*   **현상:** RESUME 실패 시. 설비와 AMR 간의 시퀀스 스텝이 어긋난 상태입니다.\n*   **조치:**\n    1.  **EQP Work Reset:** 설비 측의 PLC 시퀀스를 초기화합니다.\n    2.  **AMR Reset Sequence:** Job Cancel -> Error Reset -> Door Close.\n    3.  **State Sync:** AMR 상태를 **'After Docking'**으로 강제 설정하여, 설비가 작업을 완료했다고 인식하게 함으로써 다음 프로세스로 넘어가도록 유도합니다.\n\n#### 3단계: 시스템 비동기화 (System Desynchronization) - 2차 완전 초기화\n*   **현상:** 1차 초기화 실패 시. 상위 시스템(MCS)과 현장 설비 간의 데이터 정합성이 깨진 상태입니다.\n*   **조치 (심층 분석):**\n    1.  **Call Create Pause (ON):** **가장 중요한 단계**입니다. 복구 작업 중 MCS가 새로운 자재 보충 요청(Call)을 생성하지 못하도록 막아, '복구 중 추가 명령 유입'으로 인한 논리적 충돌(Race Condition)을 방지합니다.\n    2.  **Call Cancel & Work Reset:** 기존에 발행된 잘못된 요청을 삭제하고 설비를 리셋합니다.\n    3.  **Conditional Recovery (조건부 복구):**\n        *   **작업 전(Before Work):** 공급 미션은 회수 포트(MS25)로, 회수 미션은 복귀(Go Back)로 변경하여 안전하게 라인을 비웁니다.\n        *   **작업 중(In Work):** 박스 유무를 센서로 재확인합니다.\n            *   **Empty Box:** MS25에서 언로딩(Unload) 후 복귀. (빈 박스 회수 로직)\n            *   **Full Box / Nothing:** 즉시 복귀(Go Back). (실물 자재가 있거나 아예 없는 경우, 공정 투입 부적합으로 판단하여 창고로 회송)\n    4.  **Call Create Pause (OFF):** 모든 조치가 완료되면 Pause를 해제하여 정상적인 생산 요청을 다시 수신합니다.\n\n### 4.3 1T AMR (Pallet Lift) 예외 처리 로직\n1T AMR은 고중량물을 다루므로, **제품(SKID)의 유무**와 **에러의 원천(설비 vs 창고)**에 따라 대응 로직이 분기됩니다.\n\n1.  **SKID 존재 시 (Load State):**\n    *   **위험 요소:** 리프트가 상승한 상태에서 에러 발생 시 전복 위험이 있습니다.\n    *   **조치:** 리프트를 하강(초기화)하여 무게 중심을 낮춘 후, 설비와 AMR을 리셋하고 **'After Docking'** 상태로 전환하여 잔여 프로세스를 수행합니다.\n2.  **SKID 부재 시 (Unload State):**\n    *   **설비(Product Line) 문제:** 설비 센서 오작동 등으로 인한 경우, **Call Create Pause**를 걸고 설비 로직을 리셋하여 허위 호출을 제거합니다.\n    *   **창고(Warehouse) 문제:** WMS 상의 재고 데이터와 실제 물리적 상태가 불일치하는 경우입니다. 이는 자동 복구가 불가능한 치명적 오류(Critical Error)로 간주하여, 즉시 보전반(Maintenance Team)을 호출해 수동으로 데이터를 보정해야 합니다.\n\n### 4.4 센서 퓨전 및 하드웨어 점검 (Sensor Fusion & H/W Check)\n도킹 실패나 자동 복구 불가 시, 이는 단순 소프트웨어 문제가 아니라 물리적 센서(Lidar, IR, Camera 등)의 오염이나 고장일 가능성이 높습니다.\n*   **V-Marker 인식 실패:** AMR은 설비에 부착된 반사판(V-Marker)을 Lidar로 스캔하여 정밀 위치를 보정합니다. 도킹 실패 시 이 마커의 손상 여부나 센서 렌즈의 오염을 우선적으로 점검해야 합니다 ([4.1 도킹 실패] 및 [5.2 센서 점검] 참조).\n\n---\n\n## 5. 결론 (Conclusion)\n\n본 BMA/BSA 자동화 시스템은 MCS-ACS-PLC로 이어지는 견고한 데이터 파이프라인과, 0.3T/1T AMR의 특화된 기구학적 설계를 바탕으로 구축되었습니다. 특히, 다단계 에러 복구 시나리오(Resume -> Reset -> Full Initialization)와 **Call Create Pause**와 같은 트래픽 제어 기법은 시스템의 가동률(Availability)을 극대화하고 다운타임을 최소화하는 핵심 기술입니다. 엔지니어는 단순한 매뉴얼 준수를 넘어, 이러한 시스템의 논리적 인과관계를 이해하고 상황에 맞는 최적의 트러블 슈팅을 수행해야 합니다.",
        "questions": [
            "현대자동차그룹 BMA/BSA 공정의 계층적 제어 아키텍처(MCS, ACS, PLC, WMS)와 물류 흐름 및 AMR 운영 로직 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR(0.3T/1T)의 기구학적 특성에 따른 자재 이송 메커니즘과, 설비 도킹 과정에서 Lidar 및 V-Marker를 활용한 정밀 위치 보정 기술이 전체 시스템 내에서 어떻게 상호작용하는지 공학적으로 분석하시오.",
            "공정 내 교착 상태(Deadlock)나 도킹 에러 발생 시, 'Call Create Pause'를 포함한 다단계 복구 시나리오(Resume-Reset-Full Initialization)가 가동되는 논리적 판단 과정과 시스템의 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 0,
        "preprocessed_group": "WEB ACS의 Place Cycle 설정 시, AMR이 미션을 수신하고 동작하기 위해서는 Logistics 스위치와 Run 상태가 모두 ON으로 활성화되어야 한다.\n\nWEB ACS의 Place Cycle 설정 절차는 오른쪽 톱니바퀴 아이콘 클릭 후 Place Cycle 메뉴를 선택하고, 검색창에서 제어할 Place 이름을 검색하여 Logistics 스위치와 Run 상태를 각각 ON과 RUNNING으로 전환하는 순서로 진행한다.\n\nPlace Cycle의 Logistics 기능은 시스템이 미션을 생성하고 AMR이 이를 수신하여 수행하도록 활성화하는 장치이며, 생산 가동 중에는 반드시 ON, 비가동 또는 종업 시에는 OFF 상태를 유지해야 한다.\n\nPlace Cycle의 RUN 상태는 가동 중인 생산 라인에서 필수적으로 활성화해야 하는 항목이며, 대부분의 운영 상황에서 상시 ON 상태를 유지한다.\n\n생산 시작 전에는 Place Cycle의 Logistics와 Run 버튼을 ON으로 활성화하고, 생산 완료 후에는 해당 버튼들을 OFF로 변경하는 것을 운영 규칙으로 한다.",
        "textbook": "# WEB ACS 기반의 Place Cycle 제어 논리와 미션 디스패칭(Mission Dispatching) 메커니즘\n\n## 1. 서론: BMA 공정 내 노드(Node) 관리의 중요성\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 자동화 시스템에서 **WEB ACS(Automated Control System)**는 수십 대의 AMR(Autonomous Mobile Robot)과 설비 간의 물류 흐름을 조율하는 중앙 관제탑 역할을 수행한다. 이때, 공장 내의 물리적 위치(Station)를 논리적 객체로 추상화한 것이 바로 **'Place'**이며, 이 Place의 가동 상태를 정의하는 것이 **'Place Cycle'**이다.\n\n단순히 로봇을 특정 위치로 보내는 것이 아니라, 해당 위치가 현재 물류를 수용할 수 있는지, 시스템적으로 미션을 생성해도 되는지를 판단하는 것은 전체 시스템의 **결정론적(Deterministic) 동작**을 보장하기 위해 필수적이다. 본 챕터에서는 WEB ACS 상에서 Place Cycle을 구성하는 핵심 파라미터인 **Logistics**와 **Run** 상태의 공학적 의미와, 이들이 AMR의 미션 수신 프로세스에 미치는 논리적 인과관계를 심층 분석한다.\n\n---\n\n## 2. 이중 제어 레이어(Dual-Layer Control): Logistics와 Run의 상관관계\n\nWEB ACS의 Place Cycle 설정은 단일 신호가 아닌, **Logistics**와 **Run**이라는 두 가지 독립적인 변수의 **논리적 곱(AND Condition)**에 의해 작동한다. 이는 시스템의 안전성과 운영 유연성을 확보하기 위한 이중 잠금 장치(Double Interlock) 설계 사상을 반영한다.\n\n### 2.1. Logistics: 미션 생성 및 할당의 게이트키퍼 (Mission Generator)\n**Logistics** 스위치는 시스템의 **스케줄러(Scheduler) 레벨**에서 작동하는 파라미터다.\n*   **작동 원리:** Logistics가 **ON** 상태일 때, ACS의 중앙 알고리즘은 해당 Place를 '유효한 물류 목적지'로 인식한다. 즉, 상위 시스템(MES/MCS)에서 작업 지시가 내려오거나 설비에서 호출 신호가 발생했을 때, 이를 실제 AMR이 수행해야 할 '미션(Mission)'으로 변환하여 큐(Queue)에 등록하는 권한을 부여한다.\n*   **비활성화 시 메커니즘:** 만약 Logistics가 **OFF**라면, 물리적으로 설비가 가동 중이라 하더라도 ACS는 해당 위치로 향하는 어떠한 미션도 생성하지 않는다. 이는 AMR이 불필요하게 유휴 설비로 이동하거나, 유지보수 중인 구역으로 진입하여 교착 상태(Deadlock)를 유발하는 것을 원천적으로 차단한다.\n\n### 2.2. Run: 노드 실행 상태 및 가용성 검증 (Execution Availability)\n**Run** 상태는 해당 Place의 **실행 레벨(Execution Level)**을 관장한다.\n*   **작동 원리:** **RUNNING** 상태는 해당 Place가 물리적으로 AMR을 받아들일 준비가 되었으며, 내부 로직(예: 도착 확인, 적재/이재 시퀀스 등)이 활성화되어 있음을 의미한다. 이는 생산 라인이 가동 중(Active)일 때 필수적으로 요구되는 상태 값이다.\n*   **상시 가동의 필요성:** BMA 공정의 특성상 연속적인 흐름 생산이 이루어지므로, 대부분의 운영 상황에서 Run 상태는 상시 **ON**을 유지하여 시스템의 응답 지연(Latency)을 최소화해야 한다.\n\n---\n\n## 3. 데이터 흐름과 시스템 설정 프로세스 (Data Flow & Configuration)\n\n신입 엔지니어는 WEB ACS 인터페이스 뒤에서 발생하는 데이터의 흐름을 이해해야 한다. 운영자가 UI를 통해 설정을 변경할 때, 백엔드에서는 다음과 같은 절차로 시스템 상태가 갱신된다.\n\n1.  **파라미터 접근 (Access):** 운영자가 WEB ACS 우측 상단의 설정(톱니바퀴 아이콘) 메뉴를 통해 `Place Cycle`에 진입하는 것은, 시스템의 **글로벌 구성 데이터베이스(Global Configuration DB)**에 접근하는 과정이다.\n2.  **타겟팅 (Targeting):** 검색창을 통해 특정 `Place` 이름을 쿼리(Query)하는 과정은 수백 개의 노드 중 제어 대상의 고유 ID(UUID)를 필터링하는 단계다.\n3.  **상태 천이 (State Transition):**\n    *   **Logistics → ON:** 미션 디스패처(Mission Dispatcher) 프로세스에 해당 노드의 인터럽트 처리를 허용하라는 플래그(Flag)를 세트한다.\n    *   **Run → RUNNING:** 해당 노드의 상태 머신(State Machine)을 'Idle'에서 'Active'로 전환한다.\n4.  **동기화 (Synchronization):** 변경된 설정값은 실시간으로 네트워크를 통해 대기 중인 AMR 군집(Fleet)에 브로드캐스팅되거나, AMR이 다음 미션을 요청할 때 참조된다.\n\n---\n\n## 4. 운영 시나리오별 시스템 거동 및 프로토콜\n\n시스템의 안정성을 위해 생산 주기(Production Lifecycle)에 따른 엄격한 운영 규칙이 적용된다. 이는 인간의 개입 실수(Human Error)를 방지하고 시스템 리소스를 최적화하기 위함이다.\n\n### 4.1. 생산 시작 전 (Startup Sequence)\n*   **Action:** Logistics와 Run 버튼을 모두 **ON**으로 활성화.\n*   **Mechanism:** 시스템은 '콜드 스타트(Cold Start)' 상태에서 벗어나 모든 노드를 '수신 대기(Listening)' 상태로 전환한다. 이때부터 설비 PLC로부터의 I/O 신호가 유효한 트리거로 인정받아 AMR 미션으로 전환되기 시작한다.\n*   **Why:** 만약 둘 중 하나라도 OFF 상태라면, AMR은 미션을 수신하지 못하고 대기 장소(Waiting Position)에서 무한 대기하게 되며, 이는 전체 라인의 병목(Bottleneck) 현상을 초래한다.\n\n### 4.2. 생산 가동 중 (Runtime)\n*   **Action:** Logistics **ON**, Run **RUNNING** 유지.\n*   **Mechanism:** 실시간으로 발생하는 수천 건의 트랜잭션을 처리한다. AMR은 지속적으로 미션을 할당받고 이동한다.\n\n### 4.3. 생산 종료 및 비가동 시 (Shutdown Sequence)\n*   **Action:** Logistics와 Run 버튼을 **OFF**로 비활성화.\n*   **Mechanism:**\n    1.  **Logistics OFF:** 더 이상 새로운 미션이 큐(Queue)에 쌓이지 않도록 차단한다(Cut-off).\n    2.  **Run OFF:** 해당 Place의 논리적 전원을 차단하여, 잔여 미션이나 오작동으로 인한 AMR의 진입 시도를 거부한다.\n*   **Why:** 생산이 종료된 후에도 설정이 ON으로 남아있을 경우, 센서 오작동이나 잔류 신호(Ghost Signal)로 인해 AMR이 빈 라인으로 출동하는 '유령 미션'이 발생할 수 있다. 이는 배터리 전력 낭비뿐만 아니라, 다음 날 시업 점검 시 AMR이 엉뚱한 위치에 가 있는 혼선을 야기한다.\n\n## 5. 결론\n\nWEB ACS의 **Place Cycle** 설정은 단순한 스위치 조작이 아니다. 이는 BMA 공정의 물리적 가동 여부를 논리적 데이터 흐름으로 변환하는 **디지털 트윈(Digital Twin)의 동기화 과정**이다.\n\n엔지니어는 **\"Logistics는 미션의 생성 권한, Run은 노드의 실행 준비 상태\"**라는 개념을 명확히 인지하고, 두 조건이 모두 충족(AND Logic)되었을 때만 AMR이 물리적으로 움직인다는 원칙을 이해해야 한다. 이러한 엄격한 상태 관리는 고속으로 움직이는 자율주행 로봇 시스템의 예측 가능성과 안전성을 보장하는 핵심 기반이다.",
        "questions": [
            "WEB ACS 기반의 Place Cycle 제어 논리와 미션 디스패칭(Mission Dispatching) 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "Place Cycle을 구성하는 Logistics와 Run 파라미터가 각각 스케줄러와 실행 레벨에서 수행하는 역할과, 두 변수의 논리적 결합(AND Condition)이 AMR 미션 수신 프로세스에 미치는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "생산 종료 및 비가동 시 Logistics와 Run을 비활성화하지 않았을 때 발생할 수 있는 '유령 미션' 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 1,
        "preprocessed_group": "WEB ACS의 Place Cycle 설정 메뉴에서 AUTO ON/OFF 기능을 실행하면 RUN이 활성화된 항목에 대해 Logistics를 자동으로 ON/OFF 하며, 사용자는 실제 가동 라인의 RUN 상태가 ON인지 확인하여 사용하지 않는 장소의 RUN을 OFF로 설정해야 한다.",
        "textbook": "# WEB ACS 기반의 동적 물류 제어 메커니즘: Place Cycle 및 가동 상태 동기화 프로토콜\n\n## 1. 서론: BMA 공정 내 물류 오케스트레이션의 핵심\n현대자동차그룹의 BMA(Battery Module Assembly) 공정은 다수의 AMR(Autonomous Mobile Robot)과 설비가 유기적으로 연동되는 복합 시스템입니다. 이 시스템의 중추 신경망 역할을 수행하는 **WEB ACS(Automated Control System)**는 단순한 모니터링 도구를 넘어, 공정의 가동 현황(Physical Status)을 물류 흐름(Logical Flow)으로 변환하는 핵심 알고리즘을 내장하고 있습니다.\n\n본 기술 백서에서는 WEB ACS의 **Place Cycle 설정 메뉴** 내 **AUTO ON/OFF 기능**이 수행하는 논리적 연산 과정과, 이에 따른 **RUN 상태** 및 **Logistics(물류 가용성)** 간의 상관관계를 시스템 아키텍처 관점에서 심층 분석합니다. 또한, 자동화 로직의 한계점을 보완하기 위한 운영자의 개입(Human-in-the-loop)이 시스템 안정성에 미치는 공학적 중요성을 서술합니다.\n\n---\n\n## 2. AUTO ON/OFF 알고리즘의 작동 원리 및 데이터 흐름\n\n### 2.1. 논리적 인과관계 (Logical Causality)\nWEB ACS 내 'Place Cycle'은 AMR이 주행해야 할 경로(Path)와 작업 지점(Node)의 순서를 정의하는 토폴로지(Topology) 데이터입니다. 여기서 **AUTO ON/OFF** 기능은 운영자가 수동으로 각 공정의 물류 투입 여부를 결정하는 비효율을 제거하기 위해 설계된 **상태 동기화(State Synchronization) 알고리즘**입니다.\n\n이 기능이 실행될 때 시스템 내부에서는 다음과 같은 논리적 연쇄 반응이 발생합니다:\n\n1.  **트리거(Trigger):** 운영자가 Place Cycle 메뉴에서 AUTO ON/OFF 기능을 활성화.\n2.  **상태 스캔(State Scanning):** ACS 서버는 데이터베이스 또는 메모리 레지스터에 정의된 모든 공정(Place) 항목의 **RUN 비트(Bit)** 상태를 전수 조사(Polling)합니다.\n3.  **조건부 연산(Conditional Operation):**\n    *   **IF [RUN Status == Active(ON)]:** 해당 공정이 물리적으로 가동 중임을 의미하므로, 시스템은 즉시 해당 지점의 **Logistics 플래그**를 **ON**으로 전환합니다. 이는 AMR의 라우팅 테이블(Routing Table)에 해당 노드를 '진입 가능' 상태로 등록하는 것을 의미합니다.\n    *   **ELSE [RUN Status == Inactive(OFF)]:** 해당 공정이 정지 상태이거나 비가동 중임을 의미하므로, **Logistics 플래그**를 **OFF**로 전환합니다. 이는 AMR의 경로 탐색 알고리즘에서 해당 노드를 배제(Exclusion)시켜 불필요한 진입을 원천 차단합니다.\n\n### 2.2. 시스템 아키텍처 관점의 데이터 흐름\n이 과정은 **설비 제어 레이어(PLC)**와 **상위 관제 레이어(ACS)** 간의 데이터 정합성을 유지하는 핵심 메커니즘입니다. 'RUN' 상태는 설비의 물리적 전원 및 가동 준비 완료 신호를 대변하며, 'Logistics'는 AMR 관제 시스템의 논리적 허가 신호를 대변합니다. AUTO ON/OFF 기능은 이 두 레이어 사이의 **미들웨어(Middleware) 로직**으로 작용하여, 물리적 설비가 준비되지 않은 상태에서 논리적 물류 명령이 하달되는 '명령 불일치(Command Mismatch)' 오류를 방지합니다.\n\n---\n\n## 3. 운영자 개입의 필요성: 물리적 상태와 디지털 트윈의 정합성 확보\n\n### 3.1. 자동화의 한계와 휴먼 에러 방지\n비록 AUTO ON/OFF 기능이 RUN 상태에 따라 Logistics를 자동으로 제어하지만, 시스템은 **'RUN 상태가 참(True)인가?'**라는 디지털 값만을 신뢰합니다. 만약 실제 현장(Physical World)에서는 설비가 고장 났거나 유지보수 중임에도 불구하고, 시스템 상의 RUN 설정이 여전히 ON으로 남아있다면 치명적인 논리적 오류가 발생합니다.\n\n이를 방지하기 위해 엔지니어는 다음의 절차를 반드시 수행해야 합니다:\n\n1.  **실제 가동 라인 검증 (Physical Verification):** 운영자는 WEB ACS 화면상의 데이터에만 의존하지 않고, 실제 BMA 라인의 설비가 가동 가능한 상태인지 육안 또는 CCTV 등을 통해 교차 검증해야 합니다.\n2.  **비가동 구역의 강제 차단 (Manual Override):** 사용하지 않는 장소(Unused Place)의 RUN 상태가 ON으로 되어 있다면, 이를 수동으로 **OFF**로 설정해야 합니다.\n\n### 3.2. 미조치 시 발생 가능한 공학적 문제 (Failure Scenario)\n만약 실제로는 가동하지 않는 라인의 RUN 상태를 ON으로 방치하고 AUTO ON/OFF를 실행할 경우, 다음과 같은 연쇄적인 시스템 장애가 발생합니다:\n\n*   **유령 경로 생성 (Phantom Path Generation):** ACS는 해당 비가동 라인을 '가용 라인'으로 인식하여 Logistics를 ON으로 활성화합니다.\n*   **AMR 교착 상태 (Deadlock):** AMR은 작업 지시를 받고 해당 라인으로 이동하지만, 설비와의 핸드쉐이킹(Handshaking)이 불가능하거나 물리적 작업이 수행되지 않아 무한 대기 상태에 빠지게 됩니다.\n*   **전체 물류 효율 저하 (Throughput Degradation):** 한 대의 AMR이 비가동 라인에 묶이게 되면, 후속 AMR들의 경로를 막거나(Blocking), 가용 자원(AMR 대수)이 감소하여 전체 공정의 사이클 타임(Cycle Time)이 지연됩니다.\n\n---\n\n## 4. 결론\n\nWEB ACS의 Place Cycle 내 **AUTO ON/OFF 기능**은 설비의 가동 상태(RUN)와 물류 흐름 허가(Logistics)를 연동시키는 **동적 라우팅 제어(Dynamic Routing Control)**의 핵심 기술입니다. 이 기능은 시스템의 자동화 수준을 높여주지만, 그 기반이 되는 데이터(RUN 상태)의 무결성은 전적으로 운영자의 정확한 현장 확인 및 설정 관리에 달려 있습니다.\n\n따라서 엔지니어는 **[물리적 현장 확인] -> [시스템 RUN 상태 최신화] -> [AUTO ON/OFF 실행]**이라는 표준 운영 절차(SOP)를 준수함으로써, 불필요한 물류 정체를 예방하고 BMA 공정의 가동 효율(Availability)을 극대화해야 합니다.",
        "questions": [
            "WEB ACS 기반의 동적 물류 제어 메커니즘과 Place Cycle 설정 내 AUTO ON/OFF 기능의 아키텍처 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "설비 제어 레이어(PLC)의 RUN 비트 상태가 상위 관제 레이어(ACS)의 Logistics 플래그 및 AMR 라우팅 테이블로 변환되는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "실제 설비 상태와 시스템 데이터 간의 불일치가 발생했을 때, 유령 경로 생성 및 AMR 교착 상태로 이어지는 논리적 인과관계와 시스템의 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 2,
        "preprocessed_group": "1. 충전기에 도킹되어 충전 중인 AMR은 충전 상태를 유지해야 하며 절대로 전원을 끄지 않는다.\n\n2. 충전기 외부에 위치하여 미션 대기 중인 AMR은 전원을 꺼야 하며, 종료 시 WEB ACS에서 해당 AMR을 선택하여 Call Cancel(미션 반환 및 대기), Job Cancel, Power OFF를 순차적으로 실행한다.\n\n3. 주말 및 공휴일 등 장기 정지 시에는 모든 AMR의 남은 임무를 완료하거나 삭제한 후, 충전기에서 200mm 이상 분리하여 전원을 끈다.\n\n4. 작업 재개를 위해 AMR을 가동하는 경우, WEB ACS에서 해당 AMR을 선택하여 Power ON을 누른 후 Call-Retry를 실행한다.",
        "textbook": "# BMA 공정 내 자율주행 로봇(AMR)의 전력 관리 및 운영 생명주기 프로토콜 (Energy Management Protocols and Operational Lifecycle)\n\n## 1. 서론: 전력 관리의 시스템적 중요성\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 효율성은 물류의 혈관 역할을 하는 AMR(Autonomous Mobile Robot)의 가동률(Availability)에 의해 결정된다. AMR의 전력 관리는 단순한 배터리 충·방전의 문제를 넘어, **ACS(AMR Control System)**와의 데이터 동기화, **BMS(Battery Management System)**의 전기화학적 안정성, 그리고 공정 전체의 **교착 상태(Deadlock)** 방지를 위한 핵심 아키텍처 요소이다. 본 장에서는 AMR의 충전, 대기, 장기 정지, 그리고 재가동 시나리오에 따른 시스템적 거동 원리와 엔지니어링 메커니즘을 심층 분석한다.\n\n---\n\n## 2. 충전 도킹 상태에서의 시스템 무결성 유지 (Charging State Integrity)\n\n### 2.1. 충전 중 전원 유지의 전기화학적/논리적 배경\n**[Fact 1]**에 따르면, 충전기에 도킹(Docking)되어 충전 프로세스가 진행 중인 AMR은 절대 전원을 차단해서는 안 되며, 'Power ON' 상태를 유지해야 한다. 이는 다음과 같은 공학적 이유에 기인한다.\n\n1.  **BMS의 능동적 셀 밸런싱(Active Cell Balancing):** 리튬이온 배터리 팩은 충전 중에 각 셀(Cell) 간의 전압 편차를 맞추는 밸런싱 작업이 수행된다. 이 과정에서 전원이 강제 차단될 경우, 특정 셀의 과전압(Over-voltage) 또는 불균형 상태가 고착화되어 배터리 수명(SOH, State of Health)에 치명적인 영향을 미친다.\n2.  **충전기와 AMR 간의 핸드쉐이킹(Handshaking) 유지:** 충전은 단순히 전력을 밀어 넣는 행위가 아니라, 충전기(Charger)와 로봇(AMR)이 CAN 통신 또는 Ethernet을 통해 전압(V), 전류(A), 온도(T) 데이터를 실시간으로 교환하는 **피드백 제어 루프(Feedback Control Loop)** 과정이다. 전원 차단 시 통신 링크가 끊기며 충전기는 이를 '비정상 이탈'로 간주, 아크(Arc) 발생 방지를 위해 급격히 출력을 차단하게 되는데, 이 과정에서 서지(Surge) 전압이 발생하여 로봇 내부의 전장 회로(DC-DC 컨버터 등)를 손상시킬 수 있다.\n3.  **열 관리 시스템(Thermal Management):** 고전류 충전 시 발생하는 열을 식히기 위해 AMR 내부의 냉각 팬(Cooling Fan)이 가동된다. 전원 차단은 냉각 시스템의 정지를 의미하며, 잔열(Residual Heat)로 인한 소자 손상을 초래할 수 있다.\n\n---\n\n## 3. 미션 대기 상태의 유휴 자원 관리 (Idle Resource Management)\n\n### 3.1. 유휴 AMR의 전원 차단 논리\n**[Fact 2]**는 충전기 외부에 위치한 대기(Idle) 상태의 AMR은 전원을 꺼야 함을 명시한다. 이는 대기 전력(Standby Power) 소모로 인한 배터리 심방전(Deep Discharge)을 방지하기 위함이다. AMR은 구동 모터가 정지해 있더라도, Lidar 센서, 메인 컨트롤러(IPC), 통신 모듈이 지속적으로 전력을 소비하므로, 물리적 작업이 없는 경우 전원을 차단하여 에너지 효율을 극대화해야 한다.\n\n### 3.2. Graceful Shutdown 시퀀스: 논리적 연결 해제\n전원을 끄는 과정은 물리적 스위치를 내리는 것으로 시작되지 않는다. 시스템의 데이터 무결성을 위해 **WEB ACS**를 통한 순차적 종료 절차(Graceful Shutdown)가 필수적이다.\n\n1.  **Call Cancel (미션 반환 및 대기):**\n    *   **Why:** 상위 제어 시스템(ACS/MCS)은 해당 AMR을 '가용 자원(Available Resource)'으로 인식하고 있다. 물리적 전원을 먼저 끄면, 서버는 로봇이 통신 두절(Disconnection)된 것으로 판단하여 에러를 발생시키거나, 존재하지 않는 로봇에게 명령을 내리는 **'고아 프로세스(Orphan Process)'**가 생성된다.\n    *   **Mechanism:** Call Cancel 명령은 ACS의 스케줄러(Scheduler)에게 \"이 로봇은 더 이상 작업을 수행할 수 없음\"을 알리고, 할당된 논리적 점유권을 해제한다.\n\n2.  **Job Cancel (작업 버퍼 소거):**\n    *   **Why:** 로봇 내부 메모리(RAM)에 잔존할 수 있는 미수행 명령(Pending Jobs)을 삭제한다. 이를 수행하지 않고 재부팅할 경우, 로봇이 켜지자마자 과거의(이미 유효하지 않은) 명령을 수행하려다 충돌 사고가 발생할 수 있다.\n\n3.  **Power OFF (물리적 차단):**\n    *   **Mechanism:** 논리적 연결이 모두 안전하게 해제된 후, 최종적으로 메인 릴레이(Main Relay)를 개방(Open)하여 배터리와 전장 시스템 간의 연결을 물리적으로 차단한다.\n\n---\n\n## 4. 장기 정지 시의 물리적 격리 및 안전 프로토콜 (Long-term Storage Protocol)\n\n### 4.1. 잔여 임무 처리와 데이터베이스 정합성\n**[Fact 3]**에 따라 주말 및 공휴일 등 장기 정지 시에는 모든 잔여 임무를 완료하거나 삭제해야 한다. 이는 ACS 데이터베이스의 트랜잭션(Transaction)을 닫기 위함이다. 미완료된 임무가 DB에 남아있을 경우, 휴무 후 시스템 재가동 시 수십 대의 로봇이 동시에 오래된 명령을 처리하려 하여 네트워크 트래픽 폭주(Broadcast Storm)나 논리적 충돌을 야기할 수 있다.\n\n### 4.2. 200mm 이격(Separation)의 공학적 의미\n충전기에서 AMR을 **200mm 이상 분리**한 후 전원을 끄는 규정은 단순한 위치 이동이 아니라, 다음과 같은 물리적/센서 공학적 안전장치이다.\n\n1.  **전기적 절연(Galvanic Isolation) 확보:** 충전 접점(Contact Pad)과 로봇의 집전 장치가 물리적으로 닿아 있는 상태에서 장기간 방치될 경우, 접점 부식이나 미세 전류 누설이 발생할 수 있다. 200mm 이격은 완벽한 공기 절연(Air Gap)을 보장한다.\n2.  **Lidar 센서의 최소 감지 거리(Minimum Range):** 대부분의 2D Safety Lidar는 센서 표면 바로 앞(약 0~100mm 구간)에 불감대(Blind Spot)를 가진다. 너무 가깝게 주차된 상태에서 재기동할 경우, 로봇이 충전기를 장애물로 인식하지 못하고 전진하여 충돌할 위험이 있다. 200mm는 센서가 전방의 충전기를 명확한 '장애물'로 인식할 수 있는 안전 거리이다.\n3.  **재기동 시 위치 추정(Localization) 오차 방지:** 로봇이 충전기 구조물에 완전히 밀착되어 있으면, Lidar가 스캔할 수 있는 특징점(Feature)이 제한되어 초기 위치 추정(Initial Pose Estimation)에 실패할 확률이 높아진다.\n\n---\n\n## 5. 시스템 재가동 및 네트워크 재진입 (System Initialization & Reintegration)\n\n### 5.1. Power ON과 부팅 시퀀스\n**[Fact 4]**의 작업 재개 절차는 휴면 상태의 하드웨어를 깨우고 네트워크에 재진입시키는 과정이다.\n*   **WEB ACS에서의 Power ON:** 이는 원격 웨이크업(Remote Wake-up) 신호 또는 현장 작업자에 의한 물리적 버튼 인가를 의미한다. 전원이 인가되면 AMR은 **POST(Power On Self Test)**를 수행하여 모터 드라이버, 센서, 배터리 상태를 점검하고 OS를 로드한다.\n\n### 5.2. Call-Retry: 상태 머신(State Machine)의 동기화\n단순히 전원을 켜는 것만으로는 로봇이 자동으로 작업을 시작하지 않는다. **Call-Retry** 실행은 다음과 같은 필수적인 논리적 핸드쉐이킹을 수행한다.\n\n1.  **Heartbeat 재개:** AMR이 ACS 서버에 \"나는 정상적으로 부팅되었으며 통신 가능하다\"는 신호(Heartbeat)를 전송한다.\n2.  **위치 동기화:** 로봇이 현재 자신의 좌표(x, y, theta)를 서버에 보고하고, 서버상의 로봇 위치 정보와 일치하는지 검증한다.\n3.  **작업 할당 요청:** \"현재 대기 중(Idle)\" 상태임을 알리고, ACS의 스케줄러로부터 새로운 작업(Job)을 수신할 준비가 되었음을 선언한다.\n\n이 과정을 통해 AMR은 물리적인 '기계 덩어리'에서 시스템의 통제를 받는 '지능형 에이전트'로 전환되어 BMA 공정의 물류 흐름에 복귀하게 된다.",
        "questions": [
            "BMA 공정 내 자율주행 로봇(AMR)의 전력 관리 체계 및 운영 생명주기 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR 충전 도킹 시 BMS의 셀 밸런싱 및 충전기와의 피드백 제어 루프가 시스템 무결성 유지에 기여하는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "장기 정지 시 AMR을 충전기에서 200mm 이상 이격해야 하는 물리적·센서 공학적 근거와, 미션 미반환 상태에서 전원 차단 시 발생하는 논리적 판단 오류 및 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 3,
        "preprocessed_group": "충전기가 도킹된 상태에서 1T/0.3T AMR을 강제로 종료하여 과전류 보호용 배터리 회로 차단기가 작동했을 경우, 자동 복구 실패 시 AMR 전면 커버를 제거하고 배터리를 분리한 뒤 배터리 뒷면의 차단기 스위치를 수동으로 켜서 전원 상태를 복구한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 전력 관리 및 하드웨어 보호 메커니즘\n\n## 1. 서론: AMR 전력 시스템의 안정성 설계\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 핵심 물류 자원인 1T 및 0.3T AMR(Autonomous Mobile Robot)은 고효율 리튬 계열 배터리 시스템을 기반으로 구동된다. 이 시스템은 단순한 에너지 저장 장치를 넘어, BMS(Battery Management System)와 연동된 정교한 전력 분배 유닛(PDU: Power Distribution Unit)을 통해 모터 구동, 센서 처리, 통신 모듈에 필요한 전력을 안정적으로 공급한다.\n\n본 장에서는 충전 도킹(Docking) 상태에서 발생할 수 있는 비정상적인 전원 차단 시나리오와, 이에 대응하는 하드웨어 레벨의 과전류 보호 메커니즘(Overcurrent Protection Mechanism), 그리고 물리적 복구 절차의 공학적 원리를 심층적으로 다룬다.\n\n## 2. 충전 중 강제 종료와 과도 응답(Transient Response) 현상\n\n### 2.1. 충전 도킹 상태의 전기적 특성\nAMR이 충전 스테이션에 도킹되어 있을 때, 로봇 내부의 전력 회로는 외부 전원(Grid Power)으로부터 정류된 DC 전압을 받아들이는 '수동적 부하(Passive Load)' 상태이자, 동시에 배터리를 충전하는 '능동적 싱크(Active Sink)' 상태가 된다. 이때 충전기와 배터리 사이에는 수십 암페어(A) 이상의 대전류가 흐르는 폐회로(Closed Loop)가 형성된다.\n\n### 2.2. 강제 종료 시의 역기전력 및 서지(Surge) 발생\n정상적인 종료 절차(Graceful Shutdown)는 충전 전류를 서서히 감소(Ramp-down)시킨 후 릴레이를 개방하지만, 물리적 버튼이나 비상 정지 등을 통한 **강제 종료(Forced Shutdown)**는 이 흐름을 즉각적으로 절단한다.\n\n전기 회로 이론에 따르면, 인덕턴스 성분이 존재하는 회로에서 전류의 급격한 변화($di/dt$)는 필연적으로 높은 역기전력(Back EMF)을 유발한다.\n$$ V = L \\cdot \\frac{di}{dt} $$\n이 수식에 의해, 충전 중 강제 종료는 순간적으로 시스템의 정격 전압을 초과하는 과도 전압(Transient Voltage)과 돌입 전류(Inrush Current)를 발생시킨다. 이러한 전기적 충격(Surge)은 AMR 내부의 민감한 전자 부품(PCB, 모터 드라이버 등)을 파괴할 위험이 있다.\n\n## 3. 배터리 회로 차단기(Circuit Breaker)의 보호 로직\n\n### 3.1. 과전류 보호 메커니즘 (OCP)\nAMR의 배터리 팩에는 이러한 전기적 충격으로부터 셀(Cell)과 전장 부품을 보호하기 위해 물리적인 **회로 차단기(Circuit Breaker)**가 내장되어 있다. 강제 종료로 인해 허용치를 초과하는 과전류(Overcurrent)가 감지되면, 차단기 내부의 바이메탈(Bimetal)이나 전자기 코일이 작동하여 물리적으로 회로를 개방(Trip)한다. 이는 퓨즈(Fuse)와 달리 재사용이 가능한 보호 장치이나, 트립(Trip) 상태에서는 배터리의 출력이 완전히 차단되므로 AMR은 전원 불능(Blackout) 상태에 빠지게 된다.\n\n### 3.2. 자동 복구 실패의 원인\n일반적으로 BMS는 일시적인 오류에 대해 소프트웨어적인 리셋을 시도한다. 그러나 물리적 차단기가 트립된 경우, 이는 소프트웨어 제어 범위를 벗어난 하드웨어적 단락(Open Circuit) 상태이므로, 시스템의 자동 복구(Auto-Recovery) 로직이 작동하지 않는다. 즉, 전력 선로 자체가 물리적으로 끊어진 상태이므로 외부에서의 기계적 개입 없이는 전원을 복구할 수 없다.\n\n## 4. 하드웨어 레벨의 수동 복구 절차 및 공학적 유의사항\n\n자동 복구가 불가능한 상황(차단기 트립)에서 엔지니어는 다음과 같은 절차를 통해 시스템을 정상화해야 한다. 이 과정은 단순한 스위치 조작이 아니라, 잔류 전하 방전 및 회로 안정화를 포함한 일련의 공학적 조치이다.\n\n### 4.1. 물리적 접근 및 전원 분리 (Isolation)\n*   **AMR 전면 커버 제거:** 내부 배터리 팩에 접근하기 위해 하우징을 분해한다.\n*   **배터리 커넥터 분리:** 차단기를 리셋하기 전, 부하(Load) 측과의 연결을 완전히 끊어야 한다. 이는 차단기 복구 순간 발생할 수 있는 2차적인 스파크나 서지 전압이 메인보드로 유입되는 것을 방지하기 위한 필수적인 **절연(Isolation)** 조치이다.\n\n### 4.2. 차단기 수동 리셋 (Manual Reset)\n*   **배터리 후면 스위치 조작:** 배터리 팩 후면에 위치한 차단기 스위치를 물리적으로 'ON' 위치로 전환한다. 이 행위는 개방되었던 접점을 기계적으로 다시 연결하여 전위차를 형성할 준비를 마치는 것이다.\n\n### 4.3. 시스템 재기동 및 검증\n배터리 커넥터를 다시 연결하고 전원을 인가하면, BMS는 초기화 시퀀스(Initialization Sequence)를 수행한다. 이때 전압, 전류, 온도가 정상 범위인지 체크한 후 메인 릴레이를 닫아 시스템에 전력을 공급한다. 엔지니어는 이 과정에서 다시 과전류 알람이 발생하지 않는지 모니터링하여, 강제 종료로 인한 영구적인 하드웨어 손상이 없었음을 최종 검증해야 한다.\n\n---\n**결론:** 충전 중 강제 종료는 시스템에 심각한 전기적 스트레스를 주는 행위이다. 배터리 차단기의 작동은 최후의 안전장치(Fail-Safe)가 성공적으로 동작했음을 의미하며, 수동 복구 절차는 이러한 안전장치를 해제하고 시스템을 정상 궤도로 돌려놓는 정밀한 유지보수 과정이다.",
        "questions": [
            "BMA 자동화 시스템의 AMR 전력 관리 체계 및 하드웨어 보호 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "충전 도킹 상태에서 강제 종료 시 발생하는 역기전력(Back EMF)의 공학적 원리와, 이것이 배터리 회로 차단기(Circuit Breaker) 및 전체 시스템 보호 로직과 상호작용하는 과정을 분석하시오.",
            "물리적 차단기 트립(Trip)으로 인한 전원 불능 상황 발생 시, 시스템의 자동 복구가 불가능한 논리적 근거와 이를 해결하기 위한 단계별 수동 복구 절차의 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 4,
        "preprocessed_group": "1. ACS 상에서 Call이 생성되지 않을 경우, WEB ACS의 Place Cycle 설정 메뉴에서 해당 설비 또는 컨베이어의 Logistics와 RUN 상태가 모두 ON 및 RUNNING으로 활성화되어 있는지 확인한다.\n\n2. ACS 상에서 Call이 생성되지 않을 경우, WEB ACS의 PLC 탭에서 설비(EQP) 또는 컨베이어의 Call Type 값과 AMR의 Call Type 값이 일치하는지 대조하고, 값이 다를 경우 설비 또는 컨베이어의 Call Type을 올바른 값으로 수정한다.\n\n3. ACS 상에서 Call이 생성되지 않을 경우, 설비 HMI(EQP HMI) 화면 우측의 Call Create Pause 버튼이 활성화되어 콜 생성을 차단하고 있는지 확인한다.\n\n4. ACS 상에서 Call이 생성되지 않을 경우, WEB ACS의 Work Orders 메뉴에서 해당 AMR의 상태가 Idle인지 확인하고, 이전 작업이 남아있어 자동 복구가 실패한 경우 해당 Work Order를 삭제한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: ACS 태스크 생성 로직 및 예외 처리 메커니즘\n**Technical Whitepaper: Logic Architecture of Task Generation and Dispatching in BMA Automation**\n\n---\n\n## 1. 서론: 결정론적 태스크 스케줄링의 개요\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화는 ACS(Automated Control System)를 중추로 하여 AMR(Autonomous Mobile Robot), 설비(Equipment), 그리고 상위 관제 시스템 간의 유기적인 데이터 동기화에 의존한다. 이 시스템의 핵심은 **'Call(작업 요청)'**이 생성되는 과정에 있으며, 이는 단순한 신호 전달이 아닌 다층적인 논리 게이트(Logic Gate)와 상태 검증(State Validation)을 통과해야만 실행되는 결정론적(Deterministic) 프로세스다.\n\n본 챕터에서는 ACS 상에서 Call이 생성되지 않는 현상을 시스템 아키텍처 관점에서 분석하고, 각 레이어(Layer)별 데이터 흐름과 논리적 인과관계를 심층적으로 기술한다.\n\n---\n\n## 2. 논리적/물리적 가용성 검증 (Availability Validation)\n### 2.1 Place Cycle의 이중 검증 메커니즘 (Logistics & RUN)\nACS가 특정 설비나 컨베이어로부터 작업 요청을 수신하고 이를 실제 AMR에 할당하기 위해서는, 해당 노드(Node)가 논리적, 물리적으로 '가용 상태'임이 선행되어야 한다. WEB ACS의 **Place Cycle** 설정은 이러한 가용성을 판단하는 최상위 게이트 역할을 수행한다.\n\n*   **Logistics (논리적 흐름 제어):** 이는 소프트웨어 레벨의 스위치로, 해당 설비가 전체 물류 네트워크 토폴로지(Topology) 상에서 활성화되어 있는지를 정의한다. 설비가 물리적으로 정상이라 하더라도, 공정 밸런싱이나 유지보수를 위해 시스템적으로 격리(Isolation)해야 할 경우 Logistics 상태는 OFF가 된다.\n*   **RUN (물리적 운전 상태):** 이는 설비의 실제 가동 여부를 나타내는 하드웨어 레벨의 상태 플래그다. 설비 제어기(PLC)로부터 수신된 Heartbeat 신호나 Operation Status가 'Running'일 때만 활성화된다.\n\n**[작동 원리 및 인과관계]**\nACS의 디스패칭 알고리즘은 `IF (Logistics == ON) AND (RUN == RUNNING) THEN Create_Call`이라는 **AND 논리 연산**을 수행한다. 두 조건 중 하나라도 만족하지 못할 경우(False), 시스템은 해당 설비를 '비가용(Unavailable)'으로 간주하여 Call 생성 프로세스를 즉시 중단한다. 이는 준비되지 않은 설비로 AMR이 이동하여 발생할 수 있는 대기 시간(Idle Time) 증가나 병목 현상을 원천적으로 차단하기 위한 방어 로직이다.\n\n---\n\n## 3. 이기종 시스템 간 데이터 무결성 및 프로토콜 동기화\n### 3.1 Call Type 매핑과 핸드쉐이킹 (PLC ↔ ACS ↔ AMR)\nBMA 공정에는 다양한 사양의 AMR(예: 0.3T, 1T 등)과 설비가 혼재되어 있다. 따라서 설비가 요청하는 작업의 성격과 이를 수행할 AMR의 제원(Capability)이 정확히 일치해야 한다. 이 일치 여부를 판단하는 핵심 파라미터가 **Call Type**이다.\n\n*   **데이터 흐름(Data Flow):**\n    1.  **Source (설비/컨베이어):** PLC 레지스터에 정의된 Call Type 값(Integer 또는 String)을 상위 시스템으로 송출한다.\n    2.  **Middleware (ACS):** 수신된 Call Type 값을 데이터베이스 내의 AMR Fleet 설정과 대조한다.\n    3.  **Target (AMR):** 해당 Call Type을 수행할 수 있는 AMR 그룹을 필터링한다.\n\n**[작동 원리 및 인과관계]**\nWEB ACS의 PLC 탭에서 확인되는 **EQP(설비) Call Type**과 **AMR Call Type** 간의 불일치(Mismatch)는 프로토콜 레벨의 통신 오류를 야기한다. 예를 들어, 설비는 'Type A(고중량 배터리 모듈)'를 요청했으나, 시스템에 가용한 AMR이 'Type B(경량 부품)'로 설정되어 있다면, ACS는 물리적 호환성 문제(적재 하중 초과, 트레이 규격 불일치 등)를 방지하기 위해 Call 생성을 거부한다. 이는 단순한 설정 오류가 아니라, 공정 안전을 보장하기 위한 **데이터 무결성(Data Integrity) 검증 실패**로 해석해야 한다. 따라서 엔지니어는 두 시스템 간의 파라미터 매핑 테이블을 수정하여 논리적 연결 고리를 복구해야 한다.\n\n---\n\n## 4. 휴먼 인터페이스(HMI)에 의한 우선 제어권 (Override Control)\n### 4.1 Call Create Pause의 신호 우선순위\n자동화 시스템이라 하더라도 운영자(Operator)의 판단이나 현장 상황에 따른 수동 개입(Manual Intervention)은 최우선 순위를 가져야 한다. 설비 HMI(EQP HMI)에 존재하는 **Call Create Pause** 버튼은 이러한 수동 오버라이드(Override) 기능을 수행한다.\n\n**[작동 원리 및 인과관계]**\n이 기능은 시스템 아키텍처 상에서 **'Hard Interlock'**으로 동작한다. 앞서 언급한 Logistics나 RUN 상태가 모두 정상이라 하더라도, HMI로부터 `Pause == True` 신호가 인가되면 ACS의 스케줄러는 모든 논리 연산을 무시하고 Call 생성을 강제로 차단(Block)한다.\n이는 다음과 같은 상황에서 필수적이다:\n*   설비 내부의 자재 걸림(Jam) 발생 시.\n*   작업자가 설비 유지보수를 위해 접근할 때 안전 확보.\n*   후공정의 버퍼(Buffer)가 가득 차서 일시적인 유량 제어(Flow Control)가 필요할 때.\n\n따라서 Call이 생성되지 않을 때, 시스템 로그 상의 에러가 없다면 이는 시스템 오류가 아니라 운영자의 의도적인 개입(Pause 활성화)이 시스템에 정상적으로 반영된 결과임을 인지해야 한다.\n\n---\n\n## 5. 리소스 할당 및 교착 상태(Deadlock) 해결\n### 5.1 Work Order의 생명주기(Lifecycle)와 좀비 프로세스 처리\nACS는 각 AMR에게 작업을 할당할 때 **Work Order(작업 지시서)**라는 객체를 생성하여 관리한다. 하나의 AMR은 특정 시점에 하나의 Work Order만 처리할 수 있는 단일 스레드(Single-threaded)적 성격을 갖는다.\n\n*   **정상적인 상태 전이:** `Idle (대기)` → `Assigned (할당)` → `Running (수행)` → `Complete (완료)` → `Idle (대기)`\n*   **교착 상태(Deadlock) 발생:** 통신 단절, 센서 오류, 또는 예기치 않은 프로세스 종료로 인해 AMR이 물리적으로는 작업을 마쳤으나, 시스템 상의 상태값(State)이 `Idle`로 복귀하지 못하고 이전 작업 정보(Residual Data)를 유지하는 경우가 발생한다.\n\n**[작동 원리 및 인과관계]**\nWEB ACS의 Work Orders 메뉴에서 AMR의 상태가 `Idle`이 아닌 경우, ACS 스케줄러는 해당 로봇을 '작업 중(Busy)'으로 인식하여 새로운 Call을 할당하지 않는다. 특히 자동 복구(Auto-Recovery) 로직이 실패하여 남겨진 **'좀비 Work Order'**는 시스템 리소스를 점유하며 새로운 태스크의 진입을 막는 블로킹(Blocking) 요소가 된다.\n이때 엔지니어가 해당 Work Order를 강제로 삭제(Force Delete)하는 행위는, 꼬여버린 상태 머신(State Machine)을 초기화(Reset)하여 AMR을 다시 가용 리소스 풀(Resource Pool)로 반환시키는 **논리적 리셋(Logical Reset)** 과정이다. 이를 통해 AMR의 상태는 `Null` 또는 `Unknown`에서 다시 `Idle`로 천이(Transition)되며, 비로소 새로운 Call을 수신할 준비를 마치게 된다.",
        "questions": [
            "BMA 자동화 시스템의 ACS 태스크 생성 로직 및 예외 처리 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "설비 PLC, ACS, AMR 간의 Call Type 매핑 과정에서 데이터 무결성을 검증하는 방식과 이기종 시스템 간의 프로토콜 동기화 작동 원리를 공학적으로 분석하시오.",
            "AMR의 상태값이 Idle로 복귀하지 못하는 교착 상태(Deadlock) 발생 시 시스템의 논리적 판단 과정과 좀비 Work Order 삭제를 통한 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 5,
        "preprocessed_group": "AMR이 할당되지 않고 대기하는 자재 준비 지연(Warehouse Delay) 발생 시, 작업자는 WEB ACS의 Mission 탭에서 Status를 통해 작업 상태를 확인한다.\n\n자재 준비 지연(Warehouse Delay) 상황에서 창고 내 부품 준비가 늦어지는 경우(Process Delay), 작업자는 창고 내 부품 준비 지연 여부를 점검한다.\n\n자재 준비 지연(Warehouse Delay) 상황에서 창고 내 부품 준비가 실패한 경우(Preparation Fail), 작업자는 부품 재고 부족 여부 및 창고 설비의 에러 상태를 확인한다.",
        "textbook": "# BMA 자동화 시스템의 자재 동기화 및 지연 처리 메커니즘 (Material Synchronization & Latency Management)\n\n## 1. 서론: AMR과 창고 관리 시스템 간의 상호운용성\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 효율성은 자재 창고(Warehouse)와 생산 라인 간의 정밀한 물류 동기화에 의존합니다. AMR(Autonomous Mobile Robot)은 단순히 자재를 운반하는 운송 수단이 아니라, 상위 관제 시스템(ACS: Autonomous Control System) 및 창고 관리 시스템(WMS/MCS)과 실시간으로 데이터를 교환하는 **사이버-물리 시스템(Cyber-Physical System)**의 말단 노드(Edge Node)입니다.\n\n본 기술 백서는 자재 불출 과정에서 발생하는 **'자재 준비 지연(Warehouse Delay)'** 현상을 시스템 아키텍처 관점에서 분석하고, 이에 따른 **'공정 지연(Process Delay)'**과 **'준비 실패(Preparation Fail)'**의 논리적 인과관계 및 데이터 흐름을 심층적으로 기술합니다.\n\n---\n\n## 2. 미션 디스패칭(Mission Dispatching)과 상태 모니터링 아키텍처\n\n### 2.1. 자원 할당 최적화 알고리즘 (Resource Allocation Logic)\n일반적으로 AMR은 ACS로부터 미션(Mission)을 수신하면 즉시 이동을 시작합니다. 그러나 **자재 준비 지연(Warehouse Delay)** 상태는 시스템의 **디스패처(Dispatcher) 알고리즘**이 의도적으로 AMR 할당을 보류(Pending)한 상태를 의미합니다.\n\n*   **작동 원리:** ACS는 WMS(Warehouse Management System)로부터 \"자재 출고 준비 완료(Ready to Pick)\" 신호를 수신하기 전까지는 해당 미션을 수행할 AMR을 지정하지 않습니다. 이는 준비되지 않은 포트(Port)로 로봇을 미리 보내 발생할 수 있는 **병목 현상(Bottleneck)**과 **교착 상태(Deadlock)**를 방지하기 위한 선제적 로직입니다.\n*   **데이터 시각화 (WEB ACS):** 이 과정에서 발생하는 모든 트랜잭션은 **WEB ACS**의 **Mission 탭**에 실시간으로 기록됩니다. **Status** 필드는 단순한 텍스트가 아니라, 시스템 내부의 **유한 상태 머신(FSM: Finite State Machine)**이 현재 어느 단계(State)에 머물러 있는지를 나타내는 지표입니다. 작업자가 이를 확인하는 행위는 백엔드 로직의 교착 여부를 판단하는 첫 번째 디버깅 절차입니다.\n\n---\n\n## 3. 프로세스 지연(Process Delay)의 공학적 분석\n\n### 3.1. 비동기 프로세스와 타임아웃 메커니즘\n**자재 준비 지연(Warehouse Delay)**이라는 대분류 하에서, **Process Delay**는 창고 내부의 물리적 설비(Stacker Crane, Conveyor 등)가 작동 중이나, 예상된 **사이클 타임(Cycle Time)**을 초과하는 경우 발생합니다.\n\n*   **발생 메커니즘:** WMS는 자재 불출 명령을 내린 후, 특정 시간(Time Window) 내에 출고 포트의 센서(Photoelectric Sensor 등)가 자재 감지를 트리거(Trigger)할 것을 기대합니다. 그러나 설비의 노후화, 일시적인 통신 지연, 또는 다량의 불출 명령으로 인한 큐(Queue) 적체로 인해 물리적 이동이 지연될 수 있습니다.\n*   **시스템 반응:** ACS는 WMS로부터 \"Processing(처리 중)\"이라는 상태 값을 지속적으로 수신하지만, \"Complete(완료)\" 플래그가 수신되지 않는 상태가 지속됩니다. 이는 시스템 오류(Fault)가 아닌 **지연(Latency)** 상태이므로, 시스템은 에러를 발생시키지 않고 대기 모드를 유지합니다.\n*   **운영적 대응:** 작업자가 창고 내 부품 준비 지연 여부를 점검해야 하는 이유는, 이것이 소프트웨어적 버그가 아니라 **물리적 물류 흐름의 정체**에서 기인하기 때문입니다.\n\n---\n\n## 4. 준비 실패(Preparation Fail)와 예외 처리 (Exception Handling)\n\n### 4.1. 논리적 데이터 불일치와 물리적 하드웨어 오류\n**Preparation Fail**은 Process Delay와 달리, 시스템이 해당 미션을 수행할 수 없음을 확정적으로 판단한 **터미널 스테이트(Terminal State)**입니다. 이는 크게 두 가지 공학적 원인으로 분류됩니다.\n\n#### A. 데이터 정합성 오류 (Data Integrity Error) - 부품 재고 부족\n*   **원리:** ERP(Enterprise Resource Planning)나 WMS 상의 전산 재고(Logical Stock)와 실제 창고 내 물리적 재고(Physical Stock) 간의 불일치(Discrepancy)가 발생한 경우입니다.\n*   **데이터 흐름:** WMS가 특정 Bin(적재 위치)으로 크레인을 보냈으나, 해당 위치의 **로드 셀(Load Cell)**이나 **비전 센서**가 빈 팔레트(Empty Pallet)를 감지하면, WMS는 ACS에게 **NACK(Negative Acknowledgement)** 신호와 함께 \"재고 없음\" 코드를 반환합니다.\n*   **결과:** ACS는 즉시 해당 미션을 'Fail' 처리하고, AMR 할당을 영구적으로 취소하여 헛된 주행(Dead Run)을 방지합니다.\n\n#### B. 설비 제어 시스템 오류 (Equipment Control Fault)\n*   **원리:** 창고 자동화 설비(AS/RS)를 제어하는 PLC(Programmable Logic Controller) 레벨에서 하드웨어적인 에러가 발생한 경우입니다. 서보 모터의 과부하(Overload), 인버터 트립(Trip), 또는 통신 모듈의 단선 등이 원인이 될 수 있습니다.\n*   **인과관계:** 설비가 물리적으로 움직일 수 없는 상태이므로, 아무리 시간을 대기해도 자재는 출고 포트에 도달할 수 없습니다. 따라서 시스템은 즉시 에러 상태를 전파(Propagate)합니다.\n*   **운영적 대응:** 작업자가 \"창고 설비의 에러 상태\"를 확인하는 것은, 상위 시스템(ACS)이 수신한 에러 코드가 실제 하드웨어의 어떤 물리적 결함(센서 오작동, 모터 고장 등)에서 기인했는지를 현장에서 검증(Verification)하는 절차입니다.\n\n---\n\n## 5. 결론\nBMA 공정의 **Warehouse Delay** 관리는 단순한 기다림이 아니라, **ACS(관제)-WMS(창고)-AMR(로봇)** 간의 복잡한 핸드쉐이킹(Handshaking) 프로토콜의 결과물입니다.\n**Process Delay**는 물리적 처리 속도의 한계(Throughput Limit)를, **Preparation Fail**은 데이터의 불일치나 하드웨어의 고장(Hard Failure)을 의미합니다. 작업자는 WEB ACS의 Status 정보를 통해 이러한 시스템 내부의 논리적 판단 결과를 역추적하여, 소프트웨어적 대기 상태인지 물리적 개입이 필요한 고장 상태인지를 정확히 식별해야 합니다.",
        "questions": [
            "BMA 자동화 시스템의 자재 동기화 메커니즘 및 창고 지연(Warehouse Delay) 처리 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "ACS, WMS, AMR 간의 상호운용성 아키텍처 내에서 자원 할당 최적화 알고리즘과 유한 상태 머신(FSM)이 자재 불출 미션을 제어하는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "자재 준비 과정에서 발생하는 'Process Delay'와 'Preparation Fail' 상황 발생 시, 시스템의 논리적 판단 과정과 데이터 정합성 및 설비 제어 관점에서의 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 6,
        "preprocessed_group": "MCS 상에서 LOAD 명령이 존재함에도 로봇 할당이 되지 않을 경우, WEB ACS의 Mission List를 통해 AMR에 수동 미션이 설정되어 있거나 목적지에 이미 다른 미션이 할당되어 자동 미션 수행이 불가능한 상태인지 확인해야 한다.\n\n자동 복구 실패 시, WEB ACS의 AMR Info 메뉴에서 해당 AMR이 AUTO 모드로 설정되어 있는지 확인해야 하며, AMR이 AUTO 모드일 때만 MCS 미션을 정상적으로 수행할 수 있다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: AMR 관제 로직과 자원 할당의 결정론적 메커니즘\n**(Technical Whitepaper: Deterministic Mechanisms of AMR Dispatching and Resource Allocation in BMA Automation)**\n\n---\n\n### 1. 서론: MCS와 ACS 간의 명령 동기화 및 자원 경합\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화는 상위 제어 시스템인 **MCS(Material Control System)**와 하위 실행 시스템인 **ACS(AMR Control System)** 간의 정밀한 핸드쉐이킹(Handshaking)을 기반으로 작동한다. 이 계층 구조에서 MCS는 전체 공정의 자재 흐름을 관장하는 '두뇌' 역할을 하며, ACS는 실제 물리적 자원인 **AMR(Autonomous Mobile Robot)** 군집을 제어하는 '신경망' 역할을 수행한다.\n\n본 장에서는 MCS가 `LOAD` 명령을 하달했음에도 불구하고, 물리적 실행 주체인 AMR이 할당(Dispatching)되지 않는 현상을 시스템 아키텍처 관점에서 분석하고, 이에 대한 논리적 인과관계와 데이터 흐름을 심층적으로 기술한다.\n\n---\n\n### 2. 자원 할당 실패(Dispatching Failure)의 논리적 원인 분석\n\nMCS 상에서 `LOAD` 명령(Command)이 큐(Queue)에 존재함에도 불구하고, ACS가 특정 AMR을 해당 작업에 할당하지 못하는 현상은 단순한 통신 오류가 아니다. 이는 시스템이 **교착 상태(Deadlock)**나 **물리적 충돌(Collision)**을 방지하기 위해 설계된 **'자원 점유 및 우선순위 로직(Resource Reservation & Priority Logic)'**이 정상적으로 작동하고 있다는 반증이기도 하다.\n\n#### 2.1. 수동 미션에 의한 인터럽트와 우선순위 역전 (Priority Inversion)\nACS의 스케줄링 알고리즘은 기본적으로 MCS로부터 수신된 자동화 명령을 처리하도록 설계되어 있다. 그러나 **WEB ACS**의 `Mission List`에 **수동 미션(Manual Mission)**이 설정되어 있는 경우, 시스템은 이를 최상위 우선순위(Highest Priority) 인터럽트로 간주한다.\n\n*   **작동 원리:** 엔지니어가 유지보수나 긴급 조작을 위해 WEB ACS를 통해 특정 AMR에 수동 명령을 입력하면, 해당 AMR의 **작업 레지스터(Task Register)**는 수동 미션으로 즉시 점유(Lock)된다.\n*   **결과:** MCS가 아무리 `LOAD` 명령을 송출하더라도, ACS의 디스패처(Dispatcher)는 해당 AMR을 '가용 자원(Available Resource)' 목록에서 제외한다. 이는 자동 명령이 수동 조작을 덮어써서 발생할 수 있는 안전 사고를 방지하기 위한 **논리적 차단(Logical Block)** 메커니즘이다.\n\n#### 2.2. 목적지 노드 점유와 경로 계획의 배타성 (Spatial Resource Contention)\nAMR의 자율 주행은 공장 바닥을 수학적 그래프(Graph) 모델로 변환한 **토폴로지 맵(Topology Map)** 위에서 이루어진다. MCS가 지시한 목적지(Destination Node)에 이미 다른 미션이 할당되어 있다는 것은, 해당 공간 자원이 **'예약(Reserved)'** 상태임을 의미한다.\n\n*   **공학적 배경:** 다중 로봇 제어 시스템(Multi-Agent System)에서 두 대 이상의 로봇이 동일한 좌표나 노드를 동시에 점유하는 것은 물리적 충돌을 의미한다. 따라서 ACS의 경로 계획(Path Planning) 알고리즘은 선행 미션이 완료되어 해당 노드의 점유가 해제(Release)될 때까지 후행 미션의 할당을 보류한다.\n*   **데이터 흐름:**\n    1.  MCS `LOAD` 명령 수신.\n    2.  ACS가 목적지 노드의 상태 비트(State Bit) 검사.\n    3.  `Node_Status == OCCUPIED` 또는 `RESERVED`일 경우, 할당 로직은 대기(Wait) 상태로 전환.\n    4.  이 과정에서 운영자는 겉보기에 로봇이 할당되지 않는 현상을 목격하게 된다.\n\n---\n\n### 3. 시스템 상태 머신(State Machine)과 오토 모드의 무결성\n\n시스템의 자동 복구(Auto-recovery) 기능이 실패하거나, 미션 수행이 근본적으로 불가능한 경우, 엔지니어는 시스템의 가장 기초적인 상태(State)인 **운전 모드(Operation Mode)**를 검증해야 한다.\n\n#### 3.1. AUTO 모드와 MCS 명령 수락의 인과관계\nBMA 공정의 모든 AMR은 **유한 상태 머신(Finite State Machine, FSM)**에 따라 동작한다. 여기서 **AUTO 모드**는 단순한 스위치 설정이 아니라, AMR이 외부 관제 시스템(MCS/ACS)의 제어 신호를 수락하고 처리할 준비가 되었음을 알리는 **'통신 및 제어 권한 위임(Control Authority Delegation)'** 상태를 의미한다.\n\n*   **논리적 게이트(Logical Gate):** ACS와 AMR 간의 통신 프로토콜에는 명령 수락을 위한 전제 조건(Pre-condition)으로 `Mode == AUTO`라는 논리적 게이트가 존재한다.\n*   **데이터 흐름 및 차단:**\n    *   **Case 1 (AUTO 모드):** MCS 명령 패킷 도달 → AMR 내부 컨트롤러가 모드 비트 확인(`1`: AUTO) → 명령 파싱 및 구동 모터 제어 시작.\n    *   **Case 2 (MANUAL/TEACHING 모드):** MCS 명령 패킷 도달 → AMR 내부 컨트롤러가 모드 비트 확인(`0`: Not AUTO) → **명령 패킷 폐기(Drop) 또는 NACK(Negative Acknowledge) 응답 전송.**\n\n#### 3.2. WEB ACS를 통한 상태 검증 및 복구 절차\n자동 복구 시도가 실패했다는 것은 소프트웨어적인 리셋(Soft Reset)만으로는 해결되지 않는 하드웨어적 상태 불일치가 존재함을 시사한다. 이때 엔지니어는 **WEB ACS**의 `AMR Info` 메뉴를 통해 해당 로봇의 실시간 상태 데이터를 확인해야 한다.\n\n*   **진단 메커니즘:** WEB ACS는 현장의 AMR로부터 주기적인 **Heartbeat 신호**와 상태 패킷을 수신하여 시각화한다. 만약 AMR이 수동 조작 중이거나 에러 상태로 인해 AUTO 모드가 해제된 경우, MCS의 어떠한 미션도 물리적 구동으로 이어지지 않는다.\n*   **결론:** 따라서 MCS 미션의 정상적인 수행을 위해서는 AMR의 로컬 제어기가 반드시 AUTO 모드로 설정되어 있어야 하며, 이는 중앙 관제 시스템이 개별 로봇에 대한 **결정론적 제어(Deterministic Control)**를 수행하기 위한 필수 불가결한 조건이다.",
        "questions": [
            "BMA 공정의 MCS와 ACS 간 명령 동기화 및 AMR 자원 할당의 결정론적 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "수동 미션 인터럽트에 의한 우선순위 역전 현상과 토폴로지 맵 기반의 목적지 노드 점유 로직이 전체 AMR 군집 제어 시스템 내에서 어떻게 상호작용하는지 그 흐름을 공학적으로 분석하시오.",
            "MCS의 LOAD 명령에도 불구하고 AMR 할당 실패나 명령 패킷 폐기가 발생하는 상황에서, 유한 상태 머신(FSM)의 AUTO 모드 무결성 검증과 관련한 시스템의 논리적 판단 과정 및 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 7,
        "preprocessed_group": "AMR이 Way Point(WP)에서 장시간 대기하는 현상은 목적지 점유 상태 또는 창고 시스템의 로직 문제로 인해 발생한다.\n\n자동 복구 실패 시, 목적지 위치에 이미 도킹 중이거나 작업을 수행 중인 선행 AMR이 있는지 확인하여 후속 AMR의 대기 원인을 파악한다.\n\n수동 조작이 필요한 경우, 창고 시스템이 수동 모드이거나 목적지 위치 정보를 제공하지 못할 때는 창고 보전 담당자에게 연락하여 조치를 취한다.\n\nAMR이 Way Point(WP)에 도착했음에도 창고 시스템에서 적재 위치(#1 또는 #2)를 결정하여 지정해주지 않으면 AMR은 해당 위치에서 지속적으로 대기한다.",
        "textbook": "# BMA 공정 내 AMR 자율 주행 및 관제 시스템의 상호 운용성 분석: Way Point(WP) 대기 메커니즘과 예외 처리 로직\n\n## 1. 서론: 물류 자동화의 결정적 노드(Critical Node)로서의 Way Point\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화 시스템에서 AMR(Autonomous Mobile Robot)의 주행은 단순한 좌표 이동의 연속이 아니다. 특히 **Way Point(WP)**는 단순한 경유지가 아니라, AMR의 로컬 제어기(Local Controller)와 상위 관제 시스템(ACS/WCS) 간의 **데이터 동기화(Data Synchronization) 및 의사결정(Decision Making)이 이루어지는 임계 구역(Critical Section)**으로 정의된다.\n\n본 챕터에서는 AMR이 WP에 도착한 후 발생하는 장시간 대기 현상(Long-term Idle State)을 시스템 아키텍처 관점에서 분석하고, 목적지 할당 로직의 실패 원인과 이에 따른 물리적/논리적 인과관계를 심층적으로 기술한다.\n\n---\n\n## 2. 목적지 할당 알고리즘과 교착 상태(Deadlock)의 역학\n\n### 2.1. 동적 라우팅(Dynamic Routing)과 슬롯 할당 로직\nAMR이 WP에 도달했을 때, 시스템은 정적인 경로를 따르는 것이 아니라 실시간 상황에 기반한 동적 라우팅을 수행한다. 입력된 사실(Fact)에 따르면, AMR은 WP 도착 시점에서 창고 시스템으로부터 **적재 위치(#1 또는 #2)** 중 하나를 할당받아야 한다.\n\n이 과정은 다음과 같은 논리적 시퀀스로 작동한다:\n1.  **Trigger (이벤트 발생):** AMR이 WP 좌표 반경(Tolerance) 내에 진입하면, AMR은 상위 시스템에 `Arrived_at_WP` 신호를 송신한다.\n2.  **Processing (상태 연산):** 창고 시스템은 현재 적재 위치 #1과 #2의 **가용성(Availability)**을 평가한다. 이는 해당 슬롯의 센서 데이터, 작업 스케줄, 선행 AMR의 점유 상태 등을 종합하여 판단한다.\n3.  **Assignment (자원 할당):** 최적의 위치(예: #1)가 결정되면 시스템은 AMR에게 `Target_Node: #1`이라는 지령을 하달한다.\n\n### 2.2. 대기 현상의 근본 원인: 할당 로직의 타임아웃\nAMR이 WP에서 지속적으로 대기하는 현상은 위 3단계 중 **Assignment 단계의 결락(Missing)** 또는 **지연(Latency)**에서 기인한다. 창고 시스템이 적재 위치(#1 또는 #2)를 결정하여 패킷을 전송하지 않으면, AMR의 내부 상태 머신(State Machine)은 `Moving` 상태로 전이되지 못하고 `Idle/Wait` 상태를 유지한다. 이는 안전을 위한 **Fail-Safe 설계**의 일환으로, 목적지가 확정되지 않은 상태에서의 임의 주행을 원천 차단하여 충돌 사고를 방지하기 위함이다.\n\n---\n\n## 3. 물리적 점유와 논리적 점유의 불일치 (Physical vs. Logical Occupancy)\n\n### 3.1. 자원 경합(Resource Contention)과 선행 AMR\n자동 복구 실패 시 확인해야 할 가장 중요한 물리적 변수는 **선행 AMR의 존재 여부**이다. 이는 컴퓨터 공학적 관점에서 **상호 배제(Mutual Exclusion, Mutex)** 원칙과 직결된다.\n\n*   **논리적 점유(Logical Occupancy):** 시스템 데이터베이스 상에서 해당 위치(#1 또는 #2)가 '사용 중(Busy)'으로 마킹된 상태.\n*   **물리적 점유(Physical Occupancy):** 실제 공간에 선행 AMR이 도킹 중이거나 작업을 수행 중인 상태.\n\n만약 선행 AMR이 작업을 마치고 물리적으로는 이탈했으나, 통신 지연이나 센서 오류로 인해 시스템 상에서 '점유 해제(Release)' 신호가 처리되지 않았다면, 후속 AMR은 물리적 공간이 비어있음에도 불구하고 WP에서 무한 대기하게 된다. 반대로, 시스템은 비어있다고 판단했으나 실제로는 선행 AMR이 고장으로 멈춰 있다면, 후속 AMR의 Lidar 센서나 Safety Zone이 장애물을 감지하여 주행을 차단한다. 따라서 엔지니어는 이 두 가지 점유 상태의 일치 여부를 반드시 검증해야 한다.\n\n---\n\n## 4. 시스템 모드 종속성과 데이터 흐름(Data Flow) 단절\n\n### 4.1. 수동 모드(Manual Mode)에 의한 제어권 이양\n창고 시스템이 **수동 모드**로 전환된 경우, 자동화 로직(Auto-Logic)의 실행 루프가 중단된다. 이 상태에서 상위 시스템은 AMR로부터 `Arrived_at_WP` 요청을 수신하더라도, 이에 대한 응답(Response)인 목적지 좌표를 생성하지 않는다.\n\n이는 시스템 아키텍처 상 **제어권(Control Authority)**이 알고리즘에서 인간 운영자(Human Operator)에게로 이양되었음을 의미한다. 수동 모드에서는 안전상의 이유로 모든 자동 할당 프로세스가 바이패스(Bypass)되거나 차단(Block)되도록 설계되어 있다. 따라서 AMR은 상위 제어기로부터 유효한 데이터 패킷(Valid Payload)을 수신할 때까지 대기 모드를 유지할 수밖에 없다.\n\n### 4.2. 목적지 정보 소실(Null Destination)과 예외 처리\n창고 시스템이 정상적인 자동 모드임에도 불구하고 목적지 정보를 제공하지 못하는 경우는 **데이터 무결성(Data Integrity)** 문제로 볼 수 있다.\n*   **재고 데이터 오류:** 적재할 자재 정보가 DB에서 누락된 경우.\n*   **설비 인터페이스 에러:** 창고 설비(Stacker Crane 등)와 관제 시스템 간의 통신 두절(Disconnection).\n\n이러한 경우 시스템은 AMR에게 잘못된 목적지를 주는 것보다 **'지령 없음(No Command)'** 상태를 유지하는 것이 전체 공정의 꼬임(Gridlock)을 방지하는 데 유리하다.\n\n---\n\n## 5. 결론 및 대응 프로토콜: Human-in-the-loop\n\nAMR이 WP에서 장시간 대기하는 현상은 단순한 오류가 아니라, **불확실한 상황에서 시스템의 엔트로피를 증가시키지 않기 위한 방어적 기제(Defensive Mechanism)**이다.\n\n엔지니어는 다음의 인과 사슬을 이해하고 대응해야 한다:\n1.  **현상:** AMR WP 대기 지속.\n2.  **1차 원인 분석 (System Logic):** 창고 시스템이 적재 위치(#1/#2) 할당 로직을 수행하지 않음.\n3.  **2차 원인 분석 (Physical/Mode):** 선행 AMR에 의한 자원 점유(Deadlock) 또는 창고 시스템의 수동 모드 전환.\n4.  **조치 (Action):** 자동 복구(Auto-Recovery)가 불가능한 경우, 이는 소프트웨어 로직의 범위를 벗어난 물리적/운영적 예외 상황임을 의미한다. 따라서 **창고 보전 담당자**에게 연락하여 시스템 모드를 정상화하거나, 물리적 장애 요소를 제거하는 **인적 개입(Human-in-the-loop)**을 통해 데이터 흐름을 재개시켜야 한다.",
        "questions": [
            "BMA 공정 내 AMR 자율 주행 및 관제 시스템의 상호 운용성과 Way Point 대기 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR이 Way Point 진입 시 수행하는 데이터 동기화 과정과 창고 시스템의 동적 라우팅 알고리즘이 전체 물류 시스템 내에서 어떻게 상호작용하는지 그 흐름을 공학적으로 분석하시오.",
            "AMR의 WP 장시간 대기 현상 발생 시, 물리적·논리적 점유 불일치 및 시스템 모드 설정에 따른 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 8,
        "preprocessed_group": "차종 변경 시 BMA 부품, BSA용 공급, 배터리 셀 공급 프로세스의 AMR은 자재 회수가 가능하지만, Lower Case(L/C) 공급 AMR은 자재를 회수할 수 없다.\n\n차종 변경 시작 시 수동 조작이 필요한 경우, 설비 HMI에서 Call Create Pause를 'ON'으로 설정한 후 Call Cancel과 Work Reset을 순차적으로 실행한다.\n\n차종 변경 완료 후 작업을 재개하는 경우, 설비 HMI에서 Call Create Pause를 'OFF'로 설정한다.\n\n이미 로드된 자재를 작업자가 수동으로 회수하는 경우, 설비 HMI에서 Call Create Pause 'ON', Call Cancel, Work Reset을 실행한 뒤 지게차나 카트를 이용해 수동으로 언로드(Unload)하고 Call Create Pause를 'OFF'로 변경한다.\n\n이미 로드된 자재를 AMR 및 설비를 통해 자동으로 회수하는 경우, 자재를 NG 처리하여 배출 포트로 이동시킨 후 설비 HMI에서 'Call Priority' 버튼을 눌러 AMR을 호출하여 창고로 배출한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 차종 변경(Model Change) 시 자재 흐름 제어 및 예외 처리 메커니즘\n\n## 1. 개요 (Overview)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 다차종 혼류 생산을 지원하는 유연 생산 시스템(FMS, Flexible Manufacturing System)을 기반으로 설계되었다. 그러나 차종 변경(Model Change) 시점에서는 기존 차종의 잔여 자재를 라인에서 제거(Clearance)하고 신규 차종의 자재를 투입하는 과정에서 물리적, 논리적 제약 사항이 발생한다.\n\n본 챕터에서는 차종 변경 시 AMR(Autonomous Mobile Robot)과 설비 간의 상호작용, 특히 **Lower Case(L/C) 공급 공정의 기구학적 비가역성**과 이를 해결하기 위한 **제어 시스템(HMI/PLC)의 논리적 시퀀스(Logical Sequence)**를 심층 분석한다. 또한, 잔여 자재 회수를 위한 수동 및 자동 프로세스의 아키텍처적 차이와 그 작동 원리를 공학적 관점에서 서술한다.\n\n---\n\n## 2. 자재 회수의 기구학적 제약과 AMR 운용 특성\n\n### 2.1. 공정별 자재 회수 가능성 분석 (Reversibility Analysis)\nBMA 공정 내 물류 흐름은 기본적으로 공급(Supply) 방향으로 최적화되어 있으나, 차종 변경 시에는 역방향(Reverse) 물류가 요구된다. 이때 AMR의 하드웨어 특성과 이송 메커니즘에 따라 회수 가능 여부가 결정된다.\n\n*   **회수 가능 그룹 (BMA 부품, BSA 공급, 배터리 셀):**\n    이 공정의 AMR들은 트레이(Tray)나 매거진(Magazine) 단위의 소형/중형 자재를 취급한다. 이송 메커니즘은 양방향 컨베이어 혹은 리프트 방식을 채택하고 있어, 설비와의 핸드쉐이킹(Handshaking) 프로토콜만 역으로 수행하면 물리적인 자재 회수(Retrieval)가 가능하다. 즉, 투입 포트가 곧 배출 포트의 역할을 겸할 수 있는 **양방향 토폴로지(Bidirectional Topology)**를 갖는다.\n\n*   **회수 불가능 그룹 (Lower Case 공급 AMR):**\n    **Lower Case(L/C)**는 배터리 모듈의 하부 하우징으로, 중량물이며 부피가 크다. L/C 공급 AMR과 도킹하는 설비의 투입부는 중력이나 체인 구동에 의한 **단방향(Unidirectional) 진입 메커니즘**으로 설계되어 있다.\n    *   **Why?** 중량물의 경우 역방향 구동 시 모터 부하 및 기구적 정렬(Alignment) 유지가 어렵고, 안전상의 이유로 Back-stop 메커니즘이 적용되는 경우가 많다.\n    *   **Result:** 따라서 L/C 공급 AMR은 자재를 설비에 안착(Docking & Drop)시킨 이후에는 물리적으로 다시 자재를 집어 올릴 수 없는 **비가역적(Irreversible) 상태**가 된다. 이는 시스템 설계 단계에서 정의된 하드웨어적 제약 사항이다.\n\n---\n\n## 3. 제어 로직의 상태 전이와 인터락 해제 (State Transition & Interlock Release)\n\n차종 변경 시 시스템은 '생산 모드(Production Mode)'에서 '전환 모드(Transition Mode)'로 변경되어야 한다. 이 과정에서 운영자는 HMI(Human Machine Interface)를 통해 PLC의 내부 레지스터를 조작하여 논리적 흐름을 제어한다.\n\n### 3.1. 명령 생성 중단 (Call Create Pause: ON)\n*   **기능:** 상위 관제 시스템(ACS/MCS)에서 하위 설비로 내려오는 신규 자재 요청(Call) 생성 로직을 차단한다.\n*   **작동 원리:** PLC 내의 자재 요청 생성 트리거(Trigger) 비트를 마스킹(Masking) 처리한다. 이 기능이 활성화('ON')되면, 설비 내 자재가 소진되더라도 추가적인 AMR 호출 신호가 발생하지 않는다. 이는 차종 변경 중 구형 자재가 추가로 투입되는 것을 방지하는 **유입 차단(Inflow Blocking)** 단계이다.\n\n### 3.2. 요청 취소 및 작업 리셋 (Call Cancel & Work Reset)\n이미 생성되어 대기 큐(Queue)에 존재하는 명령들을 소거하는 단계이다.\n*   **Call Cancel:** 현재 실행 중이지 않은 대기 상태의 미션(Mission)들을 삭제한다. ACS의 스케줄러 테이블에서 해당 설비와 관련된 펜딩(Pending) 작업들을 제거하여, 불필요한 트래픽을 방지한다.\n*   **Work Reset:** 설비 PLC의 **유한 상태 머신(FSM, Finite State Machine)**을 초기화한다. 현재 진행 중이던 시퀀스(Step)를 강제로 종료하고, 에러 플래그나 임시 데이터 레지스터를 '0'으로 클리어(Clear)하여, 새로운 차종 데이터를 받아들일 준비 상태(Ready State)로 복귀시킨다.\n\n### 3.3. 작업 재개 (Call Create Pause: OFF)\n차종 변경 설정이 완료된 후, 마스킹 해제 신호를 인가한다. 이때부터 PLC는 변경된 차종 ID(Model ID)를 기반으로 새로운 자재 요청 신호를 ACS로 송출하기 시작하며, 정상적인 생산 사이클이 재개된다.\n\n---\n\n## 4. 잔여 자재 처리 프로세스: 수동 vs 자동 (Material Recovery Protocols)\n\n이미 설비 내부로 로드(Load)된 자재를 제거하는 방법은 **물리적 접근(수동)**과 **논리적 우회(자동)** 두 가지 방식으로 나뉜다.\n\n### 4.1. 수동 회수 프로세스 (Manual Unload)\n작업자가 물리적으로 개입해야 하는 경우(예: L/C AMR의 회수 불가 특성 또는 설비 고장 시), 시스템은 안전을 위해 완벽한 정지 상태를 유지해야 한다.\n\n1.  **논리적 격리:** `Call Create Pause 'ON'` → `Call Cancel` → `Work Reset`을 순차적으로 실행하여 설비와 AMR의 자동 운전을 비활성화한다. 이는 작업자가 설비 영역(Safety Zone)에 진입했을 때 기계가 불시에 작동하는 것을 막는 **논리적 안전 펜스(Logical Safety Fence)** 역할을 한다.\n2.  **물리적 회수:** 지게차나 카트 등 외부 장비를 이용하여 자재를 언로드한다. 이때 설비의 센서는 자재가 제거됨을 감지(Sensor Falling Edge)하지만, `Work Reset` 상태이므로 이를 에러로 인식하지 않고 대기한다.\n3.  **시스템 복귀:** 작업 완료 후 `Call Create Pause 'OFF'`를 입력하면, 시스템은 초기 상태에서 다시 시작하며 신규 자재를 요청한다.\n\n### 4.2. 자동 회수 프로세스: 가상 불량 처리 (Automatic Recovery via Virtual NG)\nAMR 및 설비를 이용해 자동으로 자재를 빼내고 싶지만, 정상적인 '회수(Return)' 로직을 사용할 수 없는 경우(예: 단방향 물류 라인), 시스템은 **\"정상 자재를 불량품(NG)으로 위장\"**시키는 논리적 우회(Logic Bypass) 기법을 사용한다.\n\n1.  **NG 처리 (Virtual Defect Assignment):**\n    *   운영자는 HMI를 통해 해당 자재의 상태 비트(Status Bit)를 'OK'에서 'NG(No Good)'로 강제 변경한다.\n    *   **Why?** 설비 로직 상, '생산 완료된 제품'은 다음 공정으로 이동하지만, '불량품'은 별도의 배출 포트(Discharge Port)로 이동하도록 프로그래밍되어 있기 때문이다. 이를 통해 역방향 이동이 불가능한 하드웨어 제약을 우회하여, **순방향(Forward) 흐름을 유지하면서 자재를 라인 밖으로 배출**할 수 있다.\n\n2.  **배출 포트 이동 및 우선 호출 (Priority Call):**\n    *   자재가 NG 배출 포트에 도착하면, HMI에서 `Call Priority` 버튼을 활성화한다.\n    *   **작동 원리:** 일반적인 자재 요청은 FIFO(First-In-First-Out) 방식으로 처리되지만, `Priority` 신호는 ACS 스케줄러의 최상위 인터럽트(Interrupt)로 작용한다. 이는 차종 변경 시간을 단축하기 위해 배출용 AMR을 최우선으로 배차(Dispatching)하게 만든다.\n\n3.  **창고 배출:**\n    *   호출된 AMR은 해당 자재를 수령하여 창고(Warehouse)나 NG 스테이션으로 이송한다. 시스템 입장에서 이 자재는 '불량'으로 기록되지만, 물리적으로는 온전한 자재이므로 창고 입고 후 재고 관리 시스템(WMS)에서 상태를 '정상'으로 갱신하는 후처리 과정이 수반된다.\n\n## 5. 결론 (Conclusion)\n\nBMA 공정의 차종 변경 시나리오는 단순한 자재 교체가 아니라, **하드웨어의 기구학적 제약(L/C의 비가역성)**과 **소프트웨어의 상태 제어(Pause/Reset)**가 정교하게 맞물려 돌아가는 과정이다. 엔지니어는 각 버튼 조작이 PLC 레지스터와 ACS 스케줄러에 미치는 영향을 정확히 이해해야 하며, 특히 자동 회수가 불가능한 상황에서 'NG 처리'를 통한 논리적 우회 기법을 적절히 활용하여 라인 가동 중단(Downtime)을 최소화해야 한다.",
        "questions": [
            "BMA 자동화 시스템의 차종 변경(Model Change) 시 자재 흐름 제어 및 예외 처리 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "Lower Case(L/C) 공급 공정의 기구학적 비가역성이 발생하는 물리적 원인과, 이를 극복하기 위해 HMI/PLC 제어 시스템 내에서 'Call Create Pause' 및 'Work Reset' 기능이 전체 시스템과 상호작용하는 공학적 메커니즘을 분석하시오.",
            "단방향 물류 라인에서 잔여 자재 회수가 불가능한 상황 발생 시, 시스템이 '가상 불량 처리(Virtual NG)'를 통해 하드웨어적 제약을 논리적으로 우회하는 판단 과정과 배출 포트 이동 및 우선 호출(Priority Call)로 이어지는 대응 메커니즘을 상세히 설명하시오."
        ]
    },
    {
        "id": 9,
        "preprocessed_group": "작업자의 실수로 AMR의 미션이 삭제되어 적재물을 실은 상태로 정지한 경우, WEB ACS에서 해당 AMR을 수동 모드(Manual Mode)로 전환한 후 적재물 종류에 따라 다음과 같이 조치한다.\n\n1. BMA Pallet 적재 시, 자동 복구 실패 시 WEB ACS에서 MW 11, MW 21(Loaded) 또는 MW 13, MW 213(Empty) 위치를 우클릭하여 Unload를 실행한 후 자동 모드(Auto Mode)로 전환한다.\n2. BMA Parts Box 적재 시, 수동 조작이 필요한 경우 WEB ACS에서 MS25(회수 포트)를 우클릭하여 Unload 및 Unload2를 선택한 후 자동 모드(Auto Mode)로 전환한다.\n3. L/C 및 BSA 완제품 적재 시, 수동 조작이 필요한 경우 WEB ACS에서 목표 지점을 우클릭하여 Unload를 실행하고 자동 모드(Auto Mode)로 전환하거나 지게차를 이용하여 수동으로 배출한다.",
        "textbook": "# BMA 공정 자동화 시스템 기술 백서\n## Section 4.3: 예외 상황 발생 시 미션 복구 및 교착 상태(Deadlock) 해결 메커니즘\n\n### 1. 개요 (Overview)\n\nBMA(Battery Module Assembly) 공정 내 물류 흐름은 ACS(Advanced Control System)와 AMR(Autonomous Mobile Robot) 간의 실시간 데이터 동기화에 의해 제어된다. 그러나 운영 과정에서 작업자의 인적 오류(Human Error)로 인해 실행 중인 미션(Mission)이 강제 삭제되는 상황이 발생할 수 있다.\n\n이 경우, AMR은 물리적으로는 적재물(Payload)을 파지하고 있으나, 논리적으로는 목적지(Destination) 데이터를 상실한 **'고립 상태(Orphan State)'**에 빠지게 된다. 이는 시스템 상에서 해당 로봇이 유휴(Idle) 상태로 인식되거나, 반대로 점유(Busy) 상태임에도 다음 명령을 수행할 수 없는 논리적 교착 상태(Logical Deadlock)를 유발한다.\n\n본 챕터에서는 이러한 미션 소실 상황에서 시스템의 정합성(Integrity)을 유지하고, 적재물의 종류(Pallet, Parts Box, 완제품)에 따라 최적화된 복구 로직(Recovery Logic)이 어떻게 수행되는지 아키텍처 관점에서 기술한다.\n\n---\n\n### 2. 제어 권한 이양 및 상태 동기화 (Control Authority Transfer)\n\n미션이 삭제된 AMR은 자율 주행을 위한 경로(Path Planning) 데이터를 잃게 되므로, 안전을 위해 즉시 정지(Fail-Safe Stop)한다. 이때 시스템 복구를 위한 첫 번째 단계는 제어 권한을 스케줄러(Scheduler)에서 운영자(Operator)로 이양하는 것이다.\n\n*   **수동 모드(Manual Mode) 전환의 공학적 의미:**\n    WEB ACS 상에서의 수동 모드 전환은 AMR의 제어 루프(Control Loop)에서 상위 관제 시스템의 자동 할당 알고리즘을 배제(Bypass)하는 것을 의미한다. 이는 로봇이 불완전한 데이터로 인해 예측 불가능한 거동을 하는 것을 방지하고, 운영자가 직접 개입하여 논리적 에러를 수정할 수 있는 '관리자 권한(Supervisory Control)'을 활성화하는 절차다.\n\n---\n\n### 3. 적재물 유형별 복구 시나리오 및 데이터 흐름 (Recovery Scenarios & Data Flow)\n\n적재물의 물리적 특성과 공정 내 위치(Topology)에 따라 복구 프로토콜은 상이하게 적용된다. 각 시나리오는 AMR 내부 PLC와 ACS 간의 통신 프로토콜을 기반으로 설계되었다.\n\n#### 3.1. BMA Pallet 적재 시: 가상 노드 할당을 통한 강제 배출\n\nBMA Pallet 공정에서 미션이 삭제된 경우, 시스템은 로봇의 현재 위치와 적재 상태를 기반으로 가상의 목표 노드(Virtual Target Node)를 재설정해야 한다.\n\n*   **논리적 위치 정의 (Logical Node Definition):**\n    *   **MW 11, MW 21 (Loaded State):** 적재물이 존재하는 상태에서의 목표 노드 레지스터.\n    *   **MW 13, MW 213 (Empty State):** 공(Empty) Pallet 회수 또는 이동을 위한 노드 레지스터.\n    *   이러한 `MW(Map Waypoint)` 코드는 단순한 좌표가 아니라, 공정 맵(Map) 상에서 로봇이 작업을 수행할 수 있는 유효한 '논리적 정류장'을 의미한다.\n\n*   **Unload 명령의 시퀀스 (Sequence of Unload Command):**\n    1.  **명령 주입 (Injection):** 운영자가 WEB ACS에서 해당 위치(MW xx)를 우클릭하여 `Unload`를 실행하면, ACS는 AMR에게 \"현재 위치를 목적지로 간주하고 하역 시퀀스를 수행하라\"는 오버라이드 신호(Override Signal)를 전송한다.\n    2.  **PLC 동작:** AMR 내부 PLC는 주행 모터(Traction Motor)를 잠그고(Lock), 리프트 또는 컨베이어 모터를 구동하여 적재물을 배출한다.\n    3.  **상태 초기화:** 배출이 완료되면 로봇의 센서(Photo sensor 등)가 적재물 없음을 감지하고, 로봇의 상태 비트(State Bit)를 `Loaded`에서 `Empty`로 갱신한다.\n\n*   **자동 모드 복귀:** 모든 물리적 작업이 완료된 후 `Auto Mode`로 전환하면, 스케줄러는 해당 로봇을 다시 '가용 자원(Available Resource)'으로 인식하여 대기열(Queue)에 있는 새로운 미션을 할당한다.\n\n#### 3.2. BMA Parts Box 적재 시: 전용 회수 포트를 통한 다단 제어\n\n부품 박스(Parts Box)는 Pallet에 비해 크기가 작고 정밀한 도킹이 요구되므로, 임의의 위치가 아닌 지정된 회수 포트(Recovery Port)를 통해 복구가 이루어진다.\n\n*   **MS25 (회수 포트)의 역할:**\n    `MS(Machine Station) 25`는 공정 라인 내에서 에러가 발생한 자재를 안전하게 회수하기 위해 설계된 버퍼 존(Buffer Zone)이다. 이곳은 물리적 가이드나 센서 인터락(Interlock)이 갖춰져 있어 수동 조작 시의 충돌 위험을 최소화한다.\n\n*   **Unload 및 Unload2의 순차적 실행 (Sequential Execution):**\n    단순 `Unload` 명령 하나로 처리하지 않고 `Unload`와 `Unload2`를 선택적으로 혹은 순차적으로 수행하는 이유는 AMR의 하역 메커니즘이 다단(Multi-stage)으로 구성되어 있기 때문이다.\n    *   **Unload:** 1차적으로 도킹 래치(Latch)를 해제하거나 이송 컨베이어를 예비 구동하는 단계.\n    *   **Unload2:** 실제 적재물을 외부로 밀어내거나(Push), 외부 설비와의 핸드쉐이킹(Handshaking)을 완료하는 단계.\n    이러한 분할 실행은 기구적 잼(Mechanical Jam)을 방지하고, 자재가 불완전하게 배출되어 낙하하는 사고를 예방하기 위한 안전 로직이다.\n\n#### 3.3. L/C 및 BSA 완제품 적재 시: 하이브리드 복구 전략\n\nL/C(Low Converter) 및 BSA(Battery System Assembly) 완제품은 고중량(High Payload)이며 고가의 자산이다. 따라서 소프트웨어적 복구와 물리적 장비(지게차)를 이용한 하드웨어적 복구를 병행하는 하이브리드 전략을 취한다.\n\n*   **소프트웨어적 복구 (ACS Unload):**\n    목표 지점(Target Point)에 이미 도달했거나 근접한 경우, ACS 상에서 `Unload` 명령을 통해 정상적인 공정 흐름을 마무리 짓는다. 이는 데이터의 연속성을 유지하는 가장 이상적인 방법이다.\n\n*   **하드웨어적 복구 (Manual Forklift Operation):**\n    AMR이 설비와 설비 사이의 전이 구간(Transition Zone)에서 멈추거나, 소프트웨어 명령에 응답하지 않는 경우(통신 음영 등), 지게차를 이용한 물리적 배출이 수행된다.\n    *   **Why Forklift?** 배터리 모듈의 무게로 인해 작업자가 직접 이송하는 것은 불가능하며, AMR의 리프트만으로는 안전한 하역이 어려운 위치일 수 있다.\n    *   **데이터 정합성 후처리:** 지게차로 제품을 강제 배출한 경우, ACS는 여전히 로봇이 짐을 싣고 있다고 판단할 수 있다. 따라서 물리적 배출 후 반드시 시스템 상에서 해당 로봇의 재고 데이터(Inventory Data)를 소거(Clear)하고 `Auto Mode`로 전환해야 데이터 불일치(Data Discrepancy)를 방지할 수 있다.\n\n---\n\n### 4. 결론 (Conclusion)\n\n작업자의 실수로 인한 미션 삭제는 단순한 조작 오류처럼 보이지만, 시스템 내부적으로는 **[경로 데이터 소실] -> [Fail-Safe 정지] -> [논리적 교착 상태]**로 이어지는 복합적인 문제를 야기한다.\n\n현대자동차그룹 BMA 공정의 자동화 시스템은 이러한 상황에 대비하여, **WEB ACS를 통한 제어 권한의 유연한 변경(Auto/Manual)**과 **적재물 특성에 따른 세분화된 배출 로직(MW/MS 코드 기반의 Unload 시퀀스)**을 갖추고 있다. 이를 통해 예외 상황 발생 시에도 공정 전체의 셧다운(Shutdown) 없이, 해당 노드만 국소적으로 복구하여 가동률(Availability)을 극대화한다.",
        "questions": [
            "BMA 공정 자동화 시스템 내 미션 삭제로 인한 교착 상태 해결 및 적재물 유형별 복구 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR이 '고립 상태(Orphan State)'에 빠졌을 때 제어 권한이 스케줄러에서 운영자로 이양되는 공학적 의미와, MW/MS 코드를 활용한 가상 노드 할당 및 PLC 제어 루프 간의 시스템적 상호작용을 분석하시오.",
            "미션 소실 상황에서 적재물의 물리적 특성(Pallet, Parts Box, 완제품)에 따라 Unload 시퀀스가 다르게 설계된 논리적 근거와, 데이터 정합성 유지를 위한 단계별 대응 메커니즘을 상세히 설명하시오."
        ]
    },
    {
        "id": 10,
        "preprocessed_group": "ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE 오류는 WEB ACS 상에서 관리자가 AMR에 Move 명령을 내릴 때 목적지 지점이 정상 주행 경로가 아닌 주행 불가 영역(흰색 배경)으로 지정될 경우 발생한다.\n\n자동 복구 실패 시, WEB ACS 상단의 Job Cancel 버튼을 클릭하여 현재 작업을 취소해야 한다.\n\n수동 조작이 필요한 경우, JOG 모드를 활성화하여 AMR을 정상 주행 경로(색상이 있는 라인) 위로 이동시켜야 한다.\n\nAMR이 정상 경로 위에 위치하면, 다시 일반 경로 상의 지점을 목적지로 선택하여 Move 명령을 실행한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 자율주행 경로 계획 및 예외 처리 메커니즘\n\n## 1. 서론: 경로 계획(Path Planning)의 알고리즘적 기초와 무결성\n\n현대자동차그룹 BMA 공정 내 도입된 AMR(Autonomous Mobile Robot) 시스템은 단순한 점 대 점(Point-to-Point) 이동이 아닌, 정밀하게 정의된 **위상학적 지도(Topological Map)** 기반의 자율 주행을 수행한다. 이 시스템의 핵심은 관제 시스템(ACS/MCS)이 하달한 목적지 좌표가 로봇이 물리적으로 주행 가능한 영역(Navigable Area) 내에 존재하는지를 검증하는 **경로 유효성 검사(Path Validation)** 프로세스에 있다.\n\n본 장에서는 경로 생성 실패 시 발생하는 `ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE` 에러의 기술적 배경을 분석하고, 이를 해결하기 위한 논리적/물리적 복구 절차(Recovery Procedure)의 공학적 원리를 상세히 기술한다.\n\n---\n\n## 2. 에러 발생 메커니즘: `ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE`\n\n### 2.1. 공간 데이터의 추상화와 주행 불가 영역\nACS(Automated Control System)의 WEB 인터페이스 상에서 시각화되는 맵은 크게 두 가지 영역으로 구분된다.\n1.  **정상 주행 경로(Colored Line):** AMR이 SLAM(Simultaneous Localization and Mapping) 알고리즘을 통해 자기 위치를 인식하고, 글로벌 경로 계획(Global Path Planning)을 수립할 수 있도록 사전에 정의된 **노드(Node)와 엣지(Edge)의 집합**이다.\n2.  **주행 불가 영역(White Background):** 맵 데이터 상에서 '장애물(Obstacle)'로 정의되거나, 경로 비용(Cost)이 무한대로 설정된 **미정의 공간(Undefined Space)**이다.\n\n### 2.2. 경로 생성 알고리즘의 실패 원리\n관리자가 WEB ACS를 통해 AMR에 `Move` 명령을 내리면, 시스템은 현재 로봇의 위치($P_{start}$)와 목표 지점($P_{goal}$) 사이의 최적 경로를 탐색한다(주로 A* 또는 Dijkstra 알고리즘 변형 사용).\n\n이때, 관리자가 실수로 **주행 불가 영역(흰색 배경)**을 $P_{goal}$로 지정할 경우, 경로 계획 알고리즘은 목표 지점의 **비용 지도(Cost Map)** 값을 조회한다. 해당 좌표가 '이동 불가능(Non-traversable)'으로 마킹되어 있거나 위상학적 그래프와 연결성이 끊겨 있을 경우, 알고리즘은 유효한 경로 해(Solution)를 도출할 수 없다.\n\n이 논리적 연산 실패는 즉시 예외(Exception) 처리되며, 시스템은 `ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE`라는 에러 코드를 반환하여 운영자에게 \"목표 좌표가 주행 알고리즘의 허용 범위를 벗어났음\"을 알린다.\n\n---\n\n## 3. 시스템 복구 전략: 논리적 리셋과 물리적 보정\n\n이 에러는 하드웨어 고장이 아닌 **논리적 명령 오류**에 해당하므로, 시스템의 상태(State)를 초기화하고 로봇의 물리적 위치를 보정하는 두 단계의 절차가 요구된다.\n\n### 3.1. 논리적 교착 상태 해제 (Job Cancel)\n잘못된 좌표가 입력된 상태에서 시스템은 해당 명령을 수행하기 위해 지속적으로 경로 재탐색(Re-planning)을 시도하거나, 에러 상태(Error State)에 락(Lock)이 걸리게 된다. 자동 복구(Auto Recovery) 기능이 실패한다는 것은 소프트웨어적인 재시도만으로는 불가능한 영역(Unreachable Area)임을 의미한다.\n\n따라서 운영자는 WEB ACS 상단의 **[Job Cancel]** 버튼을 클릭하여 다음의 내부 로직을 수행해야 한다:\n1.  **명령 큐(Command Queue) 플러시(Flush):** 현재 수행 불가능한 `Move` 명령을 메모리에서 강제 삭제한다.\n2.  **상태 머신 리셋:** AMR과 ACS의 통신 상태를 '에러(Error)'에서 '대기(Idle)' 상태로 전환하여 새로운 명령을 수신할 준비를 마친다.\n\n### 3.2. 물리적 위치 보정 (Manual JOG Operation)\n논리적 리셋이 완료되었더라도, 만약 AMR이 관성이나 이전의 잘못된 주행 시도로 인해 경로를 이탈해 있다면 자율 주행을 재개할 수 없다. AMR의 자율 주행 엔진은 **\"로봇이 정의된 경로(Colored Line) 상의 허용 오차 범위 내에 위치할 때\"**만 활성화되도록 안전 설계(Fail-safe)가 되어 있기 때문이다.\n\n따라서 운영자는 **수동 조작(JOG 모드)**을 활성화하여 다음의 공학적 조치를 취해야 한다:\n*   **수동 제어(Manual Override):** 자율 주행 알고리즘의 개입을 차단하고, 운영자가 모터의 구동을 직접 제어하여 로봇을 이동시킨다.\n*   **경로 복귀(Return to Path):** 로봇을 **정상 주행 경로(색상이 있는 라인)** 위로 물리적으로 이동시킨다. 이는 로봇의 LiDAR나 카메라 센서가 맵 상의 특징점(Feature)을 다시 포착하고, 자신의 위치 확률 분포(Localization Probability)를 수렴시키기 위함이다.\n\n### 3.3. 정상 운용 재개\nAMR이 정상 경로(Colored Line) 위에 위치하여 자기 위치 인식(Localization) 신뢰도가 확보되면, 시스템은 다시 자율 주행 준비 상태가 된다. 이때 운영자는 **일반 경로 상의 유효한 지점**을 목적지로 선택하여 `Move` 명령을 재발행함으로써, 중단되었던 물류 흐름을 정상화한다.\n\n---\n\n## 4. 결론 및 요약\n\n`ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE`는 시스템의 결함이 아니라, **정의되지 않은 공간으로의 이동 명령을 차단하는 방어적 로직**의 결과이다. 엔지니어는 이 에러가 발생했을 때 단순한 재시작이 아닌, **[명령 취소(Job Cancel) -> 수동 경로 복귀(JOG to Path) -> 유효 명령 재발행(Re-command)]**이라는 일련의 인과적 절차를 준수해야 한다. 이는 자율주행 시스템의 데이터 무결성을 유지하고, 예측 불가능한 영역에서의 로봇 오작동을 방지하는 필수적인 운영 프로토콜이다.",
        "questions": [
            "BMA 자동화 시스템의 자율주행 경로 계획 알고리즘과 예외 처리 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR의 위상학적 지도(Topological Map) 데이터 구조 내에서 경로 계획 알고리즘이 주행 가능 영역과 불가 영역을 판별하는 작동 원리와, 시스템적 상호작용을 공학적으로 분석하시오.",
            "ACS_ERROR_WHILE_NAVIGATING_THE_ROUTE 에러 발생 시, 논리적 교착 상태 해제와 물리적 위치 보정이 필요한 근본 원인 및 시스템의 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 11,
        "preprocessed_group": "1T AMR이 물리적으로 지정된 주행 경로를 벗어난 상태에서 주행을 시도할 경우 [80002] ERROR_NOT_ON_PATH가 발생한다.\n\n자동 복구 실패 시, WEB ACS에서 Job Cancel을 클릭하여 작업을 취소한 후 현장에서 1T AMR을 수동 또는 JOG 조작을 통해 정상 주행 경로 내부로 이동시킨다.\n\n수동 조작이 완료된 후에는 WEB ACS에서 CALL-RETRY 버튼을 클릭하거나 1T AMR의 모드를 AUTO로 전환하여 작업을 재개한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 자율주행 로봇의 경로 이탈 메커니즘 및 복구 프로토콜\n\n## 1. 서론: 자율주행 시스템의 위치 인식과 경로 추종\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류의 핵심인 **1T AMR(Autonomous Mobile Robot)**은 정밀한 **SLAM(Simultaneous Localization and Mapping)** 알고리즘을 기반으로 작동합니다. 이 시스템은 사전에 정의된 '가상 지도(Global Map)'와 로봇에 장착된 Lidar 센서가 실시간으로 수집하는 '점군 데이터(Point Cloud Data)'를 매칭하여 자신의 위치 $(x, y, \\theta)$를 실시간으로 추정합니다.\n\nAMR의 주행 제어 시스템은 **전역 경로(Global Path)**와 **지역 경로(Local Path)** 계획을 통해 목표 지점까지 이동합니다. 이때 시스템은 로봇의 현재 위치가 허용된 주행 경로(Navigation Mesh) 내에 존재하는지를 지속적으로 감시하며, 이는 공정의 안전과 효율성을 보장하는 가장 기초적인 로직입니다.\n\n## 2. 경로 이탈(Path Deviation)의 공학적 정의와 [80002] 에러 발생 원리\n\n### 2.1. 위치 오차와 임계값(Threshold)\nAMR이 주행 중 바퀴의 미끄러짐(Slip), 센서의 일시적 노이즈, 혹은 외부의 물리적 외력에 의해 시스템이 설정한 허용 오차 범위를 벗어나는 경우가 발생할 수 있습니다. 로봇의 제어기(Controller)는 실시간 위치 좌표가 사전에 정의된 '주행 가능 영역(Drivable Area)'의 경계(Boundary)를 벗어났다고 판단할 경우, 즉시 주행 모터를 비활성화하고 비상 정지 상태로 전환합니다.\n\n### 2.2. [80002] ERROR_NOT_ON_PATH의 트리거 메커니즘\n이때 발생하는 **`[80002] ERROR_NOT_ON_PATH`** 알람은 단순한 경고가 아닌, 시스템 보호를 위한 **소프트웨어 인터락(Software Interlock)**입니다.\n\n1.  **감지(Detection):** 로봇의 위치 추정 알고리즘이 현재 좌표를 경로 밖(Off-Path)으로 인식합니다.\n2.  **판단(Decision):** 내비게이션 스택(Navigation Stack)의 **전역 경로 생성기(Global Planner)**는 현재 위치에서 목표 지점까지의 유효한 경로를 생성할 수 없다고 판단합니다. 이는 로봇이 장애물 구역이나 지도상에 존재하지 않는 미지의 영역(Unknown Space)에 있다고 인식하기 때문입니다.\n3.  **실행(Action):** 안전 사고를 방지하기 위해 모션 제어기(Motion Controller)는 구동 명령을 차단하고 해당 에러 코드를 상위 관제 시스템(ACS)으로 송출합니다.\n\n## 3. 자동 복구 실패와 수동 개입의 필요성\n\n시스템은 일시적인 위치 인식 오류에 대비해 재위치 추정(Re-localization)을 시도하지만, 물리적으로 로봇이 경로를 완전히 이탈한 경우 자동 복구는 불가능합니다. 로봇 스스로 경로 밖에서 경로 안으로 진입하는 행위는 충돌 위험이 높은 '비정상 주행'으로 간주되어 알고리즘 레벨에서 차단되기 때문입니다. 따라서 운영자에 의한 물리적/논리적 개입이 필수적입니다.\n\n### 3.1. 논리적 리셋: WEB ACS Job Cancel\n물리적 조치에 앞서, **WEB ACS(Auto Control System)** 상에서 **'Job Cancel'**을 수행해야 합니다.\n*   **Why?** 로봇이 에러 상태임에도 불구하고, 시스템 내부의 작업 큐(Task Queue)에는 여전히 \"목표 지점으로 이동하라\"는 명령이 잔존해 있습니다. 이 잔존 명령을 소거(Flush)하지 않고 로봇을 이동시키면, 로봇은 위치가 변경되는 즉시 과거의 명령을 수행하려 하여 급발진하거나 예측 불가능한 거동을 보일 수 있습니다.\n*   **Mechanism:** Job Cancel 명령은 AMR의 작업 버퍼를 초기화하고, 로봇을 '대기(Idle)' 상태로 전환하여 안전한 수동 조작을 가능하게 합니다.\n\n### 3.2. 물리적 보정: 수동(Manual) 및 JOG 조작\n운영자는 현장에서 1T AMR을 **수동(Manual)** 모드로 전환하거나 **JOG 컨트롤러**를 사용하여 물리적으로 이동시켜야 합니다.\n*   **목표:** 로봇의 기하학적 중심(Footprint Center)을 가상 지도상의 **정상 주행 경로(On-Path Area)** 내부로 진입시키는 것입니다.\n*   **데이터 흐름:** 로봇이 경로 내부로 들어오는 순간, Lidar 센서는 주변 지형지물(Feature)을 다시 인식하고, SLAM 알고리즘은 지도 데이터와 센서 데이터의 매칭률(Matching Score)을 회복하여 자신의 위치를 '신뢰할 수 있는 상태(High Confidence)'로 갱신합니다.\n\n## 4. 시스템 재동기화 및 작업 재개 (Handshaking)\n\n물리적 복구가 완료된 후, 시스템을 정상 가동 상태로 되돌리기 위해서는 상위 시스템(ACS)과 하위 시스템(AMR) 간의 **핸드쉐이킹(Handshaking)** 과정이 필요합니다.\n\n### 4.1. CALL-RETRY 및 AUTO 모드 전환\n운영자가 WEB ACS에서 **'CALL-RETRY'** 버튼을 클릭하거나, 로봇의 로컬 패널에서 모드를 **'AUTO'**로 전환하는 행위는 시스템에 **\"준비 완료(Ready to Operate)\"** 신호를 인가하는 트리거(Trigger)가 됩니다.\n\n1.  **상태 확인:** 시스템은 로봇이 현재 `[80002]` 에러 조건(경로 이탈)에서 해제되었는지 검증합니다.\n2.  **에러 소거(Clear):** 조건이 충족되면(즉, 로봇이 경로 위에 있으면), 제어기는 활성화되어 있던 에러 플래그를 소거(Reset)합니다.\n3.  **제어권 이양:** 로봇의 제어권이 수동 조작에서 다시 자율주행 알고리즘으로 이양되며, ACS는 중단되었던 작업이나 새로운 작업을 로봇에 할당(Dispatch)합니다.\n\n이러한 일련의 과정은 단순한 에러 해결을 넘어, **[감지] -> [차단] -> [초기화] -> [물리적 보정] -> [재검증]**으로 이어지는 안전 무결성(Safety Integrity)을 보장하는 표준 복구 절차입니다.",
        "questions": [
            "BMA 공정 내 1T AMR의 자율주행 경로 이탈 메커니즘 및 복구 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "SLAM 알고리즘 기반의 위치 추정 과정에서 Lidar 점군 데이터와 가상 지도가 상호작용하는 방식 및 경로 생성기(Planner)가 주행 가능 영역을 판단하는 공학적 원리를 분석하시오.",
            "[80002] ERROR_NOT_ON_PATH 에러 발생 시 소프트웨어 인터락이 작동하는 논리적 근거와, Job Cancel 및 물리적 보정을 거쳐 시스템 재동기화에 이르는 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 12,
        "preprocessed_group": "AMR의 위치 신뢰도가 낮은 상태인 [80003] ERROR_CONFIDENCE_LOW 에러는 AMR이 맵에 기록되지 않은 미지의 영역으로 이동하거나, 주변의 일시적인 장애물이 고정 지형지물을 가려 라이다 센서의 위치 대조가 불가능할 때 발생한다.\n\n자동 복구 실패 시, 작업자는 AMR 주변의 시야를 가리는 장애물을 제거하고 AMR을 일반 주행 경로 내부로 이동시킨 후 제자리에서 360도 회전시켜 ACS 상의 위치와 실제 현장 위치의 일치 여부를 확인해야 한다.\n\n수동 조작이 필요한 경우, WEB ACS의 해당 AMR Command 탭에서 Init Position 항목을 선택하고 특정 노드(Location)나 맵 상의 지점(Map icon)을 지정한 뒤, 현재 AMR이 바라보는 방향(Heading) 값을 0~360도 범위 내에서 입력하고 APPLY 버튼을 눌러 위치를 강제로 보정한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 자율주행 내비게이션의 위치 추정 신뢰성 및 예외 처리 메커니즘\n\n## 1. 서론: 확률적 위치 추정(Probabilistic Localization)과 신뢰도\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내에서 운용되는 AMR(Autonomous Mobile Robot)은 정해진 레일이 아닌, 가상의 지도를 기반으로 주행하는 SLAM(Simultaneous Localization and Mapping) 기술을 채택하고 있다. 이 시스템의 핵심은 로봇이 자신의 위치를 '확정'하는 것이 아니라, 센서 데이터와 지도 데이터를 비교하여 확률적으로 '추정'한다는 점에 있다.\n\n본 챕터에서는 AMR의 위치 추정 알고리즘이 임계치 이하의 신뢰도를 보일 때 발생하는 `[80003] ERROR_CONFIDENCE_LOW`의 공학적 배경과, 이를 해결하기 위한 물리적/논리적 복구 절차(Recovery Procedure)에 대해 심층적으로 기술한다.\n\n---\n\n## 2. 위치 신뢰도 저하의 원인 분석: [80003] ERROR_CONFIDENCE_LOW\n\n### 2.1. 센서 퓨전과 스캔 매칭(Scan Matching)의 불일치\nAMR은 주행 중 Lidar 센서를 통해 획득한 실시간 점군(Point Cloud) 데이터와, 메모리에 저장된 점유 격자 지도(Occupancy Grid Map)를 실시간으로 대조(Matching)한다. 정상적인 상황에서 이 두 데이터의 상관관계(Correlation)는 높은 수치를 유지한다.\n\n그러나 `[80003] ERROR_CONFIDENCE_LOW` 에러는 이 상관계수가 시스템이 설정한 안전 임계값(Safety Threshold) 미만으로 떨어졌음을 의미한다. 이는 단순한 센서 오류가 아니라, **환경적 불확실성이 알고리즘의 허용 범위를 초과한 상태**이다.\n\n### 2.2. 주요 발생 시나리오 및 공학적 원인\n1.  **미지 영역(Unknown Area) 진입:**\n    *   AMR이 사전에 매핑(Mapping)되지 않은 구역으로 진입할 경우, Lidar가 수집하는 기하학적 특징(Feature)들이 지도 데이터베이스에 존재하지 않는다. 이 경우 위치 추정 알고리즘(예: Monte Carlo Localization)의 입자(Particle)들이 수렴하지 못하고 발산(Divergence)하게 되어 신뢰도가 급격히 하락한다.\n2.  **동적 장애물에 의한 시야 차폐(Occlusion):**\n    *   BMA 공정 특성상 지게차, 작업자, 적재된 자재 등 일시적인 장애물이 빈번하게 발생한다. 이러한 장애물이 AMR 주변을 둘러싸 고정 지형지물(벽, 기둥 등)을 가릴 경우, Lidar는 지도상의 랜드마크를 식별할 수 없게 된다. 이를 '납치된 로봇 문제(Kidnapped Robot Problem)'의 변형으로 볼 수 있으며, 로봇은 자신의 위치를 특정할 수 있는 참조점(Reference Point)을 상실하게 된다.\n\n---\n\n## 3. 물리적 복구 메커니즘: 환경 재인식 프로세스\n\n자동 복구 알고리즘이 실패하여 교착 상태(Deadlock)에 빠진 경우, 작업자에 의한 물리적 개입이 필수적이다. 이 과정은 단순히 로봇을 옮기는 것이 아니라, **센서가 유효한 데이터를 수집할 수 있는 환경을 조성**하는 과정이다.\n\n### 3.1. 장애물 제거 및 경로 복귀의 중요성\n작업자는 우선 AMR의 Lidar 시야(Field of View)를 차단하는 장애물을 제거해야 한다. 이는 센서 데이터의 노이즈(Noise)를 제거하고 신호 대 잡음비(SNR)를 높이는 행위이다. 이후 AMR을 일반 주행 경로(Global Path) 내부로 이동시키는 것은, 로봇을 특징점(Feature)이 풍부하고 지도 데이터와 일치도가 높은 영역으로 강제 복귀시켜 알고리즘의 재수렴을 돕기 위함이다.\n\n### 3.2. 제자리 360도 회전(In-place Rotation)의 원리\nAMR을 제자리에서 360도 회전시키는 절차는 단순한 확인 과정이 아니다. 이는 **전방향(Omni-directional) 스캔 데이터 확보를 통한 위치 재초기화(Re-initialization)** 과정이다.\n*   **작동 원리:** 로봇이 회전하며 수집한 360도 전방위 Lidar 데이터는 지도상의 기하학적 구조와 전수 비교된다. 단일 방향만 바라볼 때보다 매칭 확률이 기하급수적으로 상승하며, 이를 통해 ACS(Access Control System) 상의 가상 위치와 실제 물리적 위치 간의 오차(Offset)를 최소화한다.\n\n---\n\n## 4. 논리적 강제 보정: WEB ACS를 통한 위치 주입(Pose Injection)\n\n물리적 조치 후에도 위치 추정에 실패하거나, 센서 데이터만으로 복구가 불가능한 경우, 상위 관제 시스템인 WEB ACS를 통해 강제적인 위치 보정(Manual Calibration)을 수행해야 한다. 이는 확률적 추정을 중단하고, 결정론적(Deterministic) 값을 시스템에 주입하는 과정이다.\n\n### 4.1. Command 인터페이스와 Init Position\nWEB ACS의 `Command` 탭에서 제공하는 `Init Position` 기능은 AMR의 내부 상태 추정기(State Estimator)를 리셋하는 명령이다.\n*   **Node/Map Icon 지정:** 운영자가 특정 노드(Location)나 맵 상의 지점을 선택하면, 시스템은 해당 좌표 $(x, y)$를 AMR의 현재 위치로 강제 할당한다. 이는 칼만 필터(Kalman Filter)나 파티클 필터의 위치 분포를 해당 좌표로 강제 수렴시키는 효과를 갖는다.\n\n### 4.2. 헤딩(Heading) 값 보정의 기하학적 의미\n좌표 $(x, y)$만큼 중요한 것이 로봇이 바라보는 방향, 즉 **헤딩(Heading, $\\theta$)** 값이다.\n*   **입력 범위:** 0~360도 (절대 방위각 기준).\n*   **작동 메커니즘:** 운영자는 실제 현장에서 AMR이 바라보는 방향을 육안으로 확인하고, 해당 각도를 입력해야 한다. 만약 좌표가 정확하더라도 헤딩 값이 실제와 다르면, 로봇이 주행을 시작하는 순간 Lidar 스캔 데이터가 지도와 엇갈리게 되어 즉시 위치 신뢰도 에러가 재발한다.\n*   **APPLY 실행:** `APPLY` 버튼을 누르는 순간, 입력된 $(x, y, \\theta)$ 벡터 값이 AMR의 로컬 컨트롤러로 전송된다. AMR은 이 값을 '참(True)'으로 받아들이고, 기존의 누적된 위치 오차 데이터를 소거(Clear)한 후 즉시 정상 주행 모드로 전환한다.\n\n## 5. 결론\n\n`[80003] ERROR_CONFIDENCE_LOW`는 AMR의 자율주행 안전을 보장하기 위한 필수적인 방어 기제이다. 엔지니어는 이 에러가 단순한 고장이 아니라, **환경 변화와 센서 데이터 간의 불일치를 감지한 결과**임을 이해해야 한다. 따라서 복구 절차는 물리적 환경 개선(장애물 제거, 회전)을 통해 센서 데이터의 질을 높이거나, WEB ACS를 통해 정확한 위치 좌표를 재주입하여 시스템의 수학적 모델을 초기화하는 두 가지 축으로 이루어진다.",
        "questions": [
            "BMA 자동화 시스템 내 AMR의 자율주행 내비게이션 위치 추정 신뢰성 및 예외 처리 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "SLAM 기반 AMR의 Lidar 스캔 매칭 과정에서 발생하는 확률적 위치 추정 원리와, 위치 신뢰도 저하 시 제자리 360도 회전이 알고리즘 재수렴에 기여하는 시스템적 상호작용을 공학적으로 분석하시오.",
            "[80003] ERROR_CONFIDENCE_LOW 에러 상황 발생 시, 환경적 불확실성이 위치 추정 알고리즘에 미치는 영향과 WEB ACS를 통한 위치 주입(Pose Injection) 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 13,
        "preprocessed_group": "1T/0.3T AMR 주행 중 모터 회전수를 감지하는 엔코더 데이터가 업데이트되지 않아 [80014] ERROR_ENCODER_NOT_UPDATE 오류가 발생하며 기체가 정지하는 경우, 수동 조작이 필요한 경우 WEB ACS에서 Job Cancel을 클릭하고 AMR 기체 측면의 물리적 RESET 버튼을 누른 뒤 CALL-RETRY 또는 AUTO 모드를 실행하여 복구한다.",
        "textbook": "# AMR 구동계 피드백 상실에 따른 시스템 거동 분석 및 복구 프로토콜: [80014] 에러를 중심으로\n\n## 1. 서론: 폐루프 제어 시스템(Closed-Loop Control System)의 무결성\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류의 핵심인 1T 및 0.3T AMR(Autonomous Mobile Robot)은 정밀한 위치 제어를 위해 **폐루프 제어 시스템(Closed-Loop Control System)**을 기반으로 구동된다. 이 시스템의 핵심은 모터 컨트롤러(Motor Controller)가 내린 주행 명령(Command)과 실제 모터의 물리적 회전(Action)이 일치하는지를 실시간으로 검증하는 것이다.\n\n이 검증 과정에서 가장 중요한 역할을 수행하는 센서가 바로 **엔코더(Encoder)**이다. 엔코더는 모터의 회전축에 결합되어 회전 변위와 속도를 펄스(Pulse) 신호로 변환하여 제어기로 피드백(Feedback)을 전송한다. 만약 이 피드백 루프가 끊어지거나 데이터가 갱신되지 않는다면, 로봇은 자신의 이동 상태를 인지할 수 없는 '운동학적 실명(Kinematic Blindness)' 상태에 빠지게 된다.\n\n본 기술 백서에서는 엔코더 데이터 갱신 실패로 인해 발생하는 **[80014] ERROR_ENCODER_NOT_UPDATE** 에러의 발생 메커니즘을 공학적으로 분석하고, 이에 대한 시스템적 복구 절차(Recovery Protocol)의 논리적 인과관계를 규명한다.\n\n---\n\n## 2. [80014] 에러 발생 메커니즘 및 인과 분석\n\n### 2.1. 엔코더 피드백 상실의 공학적 원리\nAMR의 주행 제어기(Motion Controller)는 모터에 전류를 인가하여 토크(Torque)를 발생시킴과 동시에, 엔코더로부터 수신되는 펄스 카운트의 변화량($\\Delta P$)을 모니터링한다. 정상적인 주행 상황이라면, 모터에 구동 명령(PWM 신호 등)이 인가되었을 때 엔코더 값은 시간에 따라 선형적 혹은 비선형적으로 변화해야 한다.\n\n**[80014] ERROR_ENCODER_NOT_UPDATE**는 다음과 같은 논리적 조건이 충족될 때 트리거(Trigger)된다:\n\n1.  **Command Injection:** 제어기가 모터 구동을 위해 임계치 이상의 전력을 공급하고 있다.\n2.  **Time Window:** 설정된 감시 시간(Watchdog Timer)이 경과하였다.\n3.  **Feedback Null:** 위 조건에도 불구하고 엔코더의 레지스터 값이 이전 상태와 동일하거나(Frozen), 변화량이 0으로 감지된다.\n\n이는 물리적으로 엔코더의 통신 케이블 단선, 센서 내부의 광학/자기 디스크 오염, 혹은 모터 축과 엔코더 간의 기계적 커플링 파손 등을 시사한다.\n\n### 2.2. 시스템 안전장치(Fail-Safe)의 동작\n엔코더 데이터가 업데이트되지 않는 상황은 단순한 센서 고장이 아니라, **추측 항법(Dead Reckoning)의 실패**를 의미한다. AMR은 LiDAR를 통한 SLAM(Simultaneous Localization and Mapping)과 엔코더를 통한 오도메트리(Odometry)를 융합(Sensor Fusion)하여 현재 위치를 추정한다.\n\n엔코더 데이터가 누락될 경우, 로봇은 실제로는 이동하고 있음에도 불구하고 시스템상으로는 '정지 상태'로 오인하거나, 반대로 제어기가 목표 속도를 맞추기 위해 과도한 전류를 모터에 인가하여 급발진(Runaway)할 위험이 있다. 따라서 시스템은 [80014] 에러를 감지하는 즉시 **Emergency Stop(비상 정지)** 로직을 수행하여 모터의 전원을 차단하고 기체를 정지시킨다.\n\n---\n\n## 3. 다층적 복구 프로토콜 (Multi-Layered Recovery Protocol)\n\n[80014] 에러는 하드웨어 센서의 이상 신호가 상위 제어 로직까지 전파된 복합적인 오류이므로, 복구 과정 또한 **관제 시스템(ACS) → 하드웨어(AMR) → 제어 로직(Software)** 순의 다층적인 접근이 필요하다.\n\n### 3.1. 상위 관제 레벨의 논리적 연결 해제 (WEB ACS Job Cancel)\n물리적 조치를 취하기 전, 가장 먼저 수행해야 할 단계는 **WEB ACS(Auto Control System)** 상에서의 **Job Cancel**이다.\n\n*   **Why:** AMR이 에러로 정지했더라도, 상위 관제 시스템인 ACS는 해당 로봇에게 여전히 특정 작업(Job)을 할당하고 있는 상태(Resource Lock)일 수 있다.\n*   **Mechanism:** 운영자가 Job Cancel 명령을 전송하면, ACS는 해당 AMR에 할당된 운송 명령 큐(Queue)를 비우고, 로봇의 상태를 '작업 중(Busy)'에서 '에러/대기(Error/Idle)' 상태로 강제 천이시킨다. 이는 후속 물리적 리셋 과정에서 발생할 수 있는 시스템 간의 상태 불일치(State Mismatch)를 방지하기 위한 논리적 초기화 단계이다.\n\n### 3.2. 하드웨어 레벨의 오류 소거 (Physical RESET)\n논리적 연결이 해제된 후, 현장 엔지니어는 AMR 기체 측면에 위치한 물리적 **RESET 버튼**을 조작해야 한다.\n\n*   **Why:** [80014]와 같은 크리티컬 에러는 모터 드라이버(Motor Driver)의 비휘발성 메모리나 에러 레지스터(Error Register)에 래치(Latch)되어 유지된다. 소프트웨어적인 재부팅만으로는 하드웨어 레벨의 락(Lock)이 풀리지 않을 수 있다.\n*   **Mechanism:** RESET 버튼을 누르면 모터 드라이버 및 하위 제어 보드(Low-level Controller)에 하드웨어 인터럽트 신호가 인가된다. 이 과정에서 드라이버 내의 에러 플래그(Flag)가 소거(Clear)되고, 엔코더와의 통신 포트가 재초기화(Re-initialization)된다. 즉, 센서와 제어기 간의 물리적 핸드쉐이킹(Handshaking)을 처음부터 다시 시작하게 만드는 과정이다.\n\n### 3.3. 제어 루프의 재동기화 (CALL-RETRY / AUTO Mode)\n하드웨어 리셋이 완료되면, 마지막으로 **CALL-RETRY** 또는 **AUTO 모드**를 실행하여 시스템을 정상 궤도로 복귀시킨다.\n\n*   **Why:** 하드웨어 에러가 소거되었더라도, 로봇의 주행 알고리즘은 아직 활성화되지 않은 상태(Standby)이다.\n*   **Mechanism:**\n    1.  **CALL-RETRY/AUTO 실행:** 상위 제어기가 AMR의 주행 프로세스를 다시 로드한다.\n    2.  **Localization Check:** 로봇은 다시 들어오는 엔코더 데이터와 LiDAR 스캔 데이터를 비교하여 자신의 현재 위치를 재확인한다.\n    3.  **Servo On:** 위치가 확인되면 모터에 다시 전력을 공급(Servo On)하고, 중단되었던 주행 경로를 재계산(Re-planning)하여 업무를 재개한다.\n\n---\n\n## 4. 결론\n\n[80014] ERROR_ENCODER_NOT_UPDATE는 AMR의 구동계와 제어계 사이의 신뢰성(Reliability)이 깨졌음을 알리는 중요한 신호이다. 이 에러에 대한 대응은 단순한 '재부팅'이 아니라, **ACS(논리) - AMR Hardware(물리) - Navigation Logic(알고리즘)**으로 이어지는 전체 시스템 아키텍처의 순차적인 재동기화 과정임을 이해해야 한다. 엔지니어는 이 절차를 준수함으로써 데이터 불일치로 인한 2차 사고를 예방하고, BMA 공정의 가동률(Availability)을 최적의 상태로 유지할 수 있다.",
        "questions": [
            "AMR 구동계의 피드백 상실에 따른 시스템 거동 분석 및 [80014] 에러 복구 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "엔코더(Encoder) 피드백 루프의 데이터 갱신 실패가 발생하는 공학적 메커니즘과, 이것이 추측 항법(Dead Reckoning) 및 센서 퓨전(Sensor Fusion) 시스템 내에서 어떻게 상호작용하여 비상 정지를 유발하는지 분석하시오.",
            "[80014] 에러 발생 시 상위 관제 시스템(ACS)의 논리적 연결 해제부터 하드웨어 리셋, 제어 루프 재동기화로 이어지는 단계별 대응 메커니즘과 각 절차의 논리적 인과관계를 서술하시오."
        ]
    },
    {
        "id": 14,
        "preprocessed_group": "AMR(Autonomous Mobile Robot)의 라이다(LIDAR) 또는 3D 카메라 센서가 주행 경로상의 장애물을 감지하면 로봇이 일시 정지하거나 에러를 발생시킨다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 자율주행 로봇(AMR)의 인지 제어 및 장애물 회피 메커니즘\n\n## 1. 서론: BMA 공정 내 안전 주행의 중요성\n현대자동차그룹의 배터리 모듈 조립(BMA, Battery Module Assembly) 공정은 고중량의 배터리 셀과 모듈을 다루는 환경 특성상, 물류 이송을 담당하는 AMR(Autonomous Mobile Robot)의 정밀한 주행 제어와 즉각적인 위험 감지 능력이 필수적이다. 본 챕터에서는 AMR이 주행 경로 상의 비정상적 객체(Obstacle)를 인지하고, 이를 시스템 레벨에서 해석하여 물리적 정지(Pause) 또는 에러(Error) 상태로 전환하는 일련의 공학적 메커니즘과 데이터 흐름을 심층 분석한다.\n\n## 2. 센서 퓨전(Sensor Fusion) 기반의 환경 인지 아키텍처\n\nAMR이 주행 환경을 인식하는 과정은 단일 센서에 의존하지 않으며, **라이다(LIDAR)**와 **3D 카메라**의 상호 보완적인 데이터 융합(Sensor Fusion)을 통해 이루어진다.\n\n### 2.1. LIDAR 센서의 작동 원리와 ToF 메커니즘\nLIDAR(Light Detection and Ranging)는 AMR의 '수평적 시야'를 담당하는 핵심 센서다. 이 센서는 **ToF(Time of Flight)** 방식을 기반으로 작동한다. 즉, 센서에서 발사된 레이저 펄스가 물체에 반사되어 되돌아오는 시간을 측정하여 거리를 산출한다.\n*   **데이터 처리:** LIDAR는 초당 수만 번의 레이저 스캔을 통해 주변 환경을 2차원 또는 3차원의 **점군(Point Cloud)** 데이터로 변환한다.\n*   **BMA 환경 특성:** 공정 내 설비 다리, 작업자의 안전화, 적재된 팔레트 등의 기하학적 형상을 실시간으로 스캔하여, 사전에 정의된 맵(Map) 데이터와 비교(Matching)함으로써 자신의 위치를 추정(Localization)함과 동시에 미확인 물체를 장애물로 식별한다.\n\n### 2.2. 3D 카메라의 심도 인식(Depth Sensing)\nLIDAR가 주로 수평면의 장애물을 감지한다면, 3D 카메라는 수직적 공간 정보와 LIDAR의 사각지대(Blind Spot)를 보완한다.\n*   **입체 시각 구현:** 스테레오 비전(Stereo Vision) 또는 구조광(Structured Light) 방식을 사용하여 대상 물체의 **심도(Depth) 정보**를 획득한다.\n*   **기능적 역할:** 바닥에 놓인 낮은 높이의 케이블이나, LIDAR 스캔 높이보다 높게 돌출된 설비의 오버행(Overhang) 구조물 등을 감지하여 충돌 가능성을 3차원적으로 분석한다.\n\n## 3. 장애물 감지 시 논리적 인과관계 및 제어 로직 (Logic Flow)\n\n장애물 감지 후 AMR의 반응은 단순한 전원 차단이 아니며, **[인지] -> [판단] -> [제어]**의 정교한 알고리즘을 따른다.\n\n### 3.1. 보호 필드(Protective Field)와 경고 필드(Warning Field)의 동적 운용\nAMR의 제어 소프트웨어는 로봇 주변을 가상의 안전 구역으로 설정하여 관리한다. 이 구역은 로봇의 현재 속도와 적재 중량(Payload)에 따라 동적으로 가변한다.\n1.  **경고 필드(Warning Field) 진입 시:** 장애물이 원거리에 감지되면, 로봇은 감속(Deceleration) 로직을 수행하여 충돌 가능성을 낮추고 경로 재탐색(Re-planning)을 시도한다.\n2.  **보호 필드(Protective Field) 침범 시:** 장애물이 물리적 충돌 위험 거리 내로 진입하면, 시스템은 즉각적인 정지 시퀀스를 발동한다.\n\n### 3.2. 일시 정지(Pause) vs 에러(Error) 발생의 결정 로직\n입력된 팩트에서 언급된 \"일시 정지하거나 에러를 발생시킨다\"는 현상은 장애물의 속성과 지속 시간에 따라 시스템이 다르게 반응한 결과이다.\n\n*   **시나리오 A: 일시 정지 (Temporary Pause)**\n    *   **조건:** 감지된 장애물이 동적 객체(예: 지나가는 작업자, 다른 AGV)로 판단되고, 일정 시간(Threshold Time) 이내에 센서 감지 범위에서 사라지는 경우.\n    *   **메커니즘:** 모션 제어기(Motion Controller)는 주행 모터를 0 RPM으로 제어하여 대기 상태(Standby)를 유지한다. 장애물이 소거되면 별도의 리셋 없이 주행을 자동 재개한다.\n    \n*   **시나리오 B: 에러 발생 및 시스템 락 (Error Generation & System Lock)**\n    *   **조건:** 장애물이 정적 객체(예: 방치된 자재)이거나, 설정된 타임아웃(Timeout) 시간을 초과하여 경로를 점유하고 있는 경우. 또는 센서 자체의 오작동(Dirty Lens, 통신 두절)으로 인해 안전을 보장할 수 없는 경우.\n    *   **메커니즘:**\n        1.  **Safety PLC 트리거:** 상위 제어기는 이를 '주행 불가 상태'로 판정하고 Safety PLC에 비상 정지 신호를 보낸다.\n        2.  **알람 코드 생성:** 시스템은 해당 상황에 매핑된 구체적인 에러 코드(예: Obstacle Detection Timeout)를 생성한다.\n        3.  **인터록(Interlock) 체결:** 안전을 위해 운영자의 물리적 확인 및 리셋(Reset) 신호가 인가되기 전까지 로봇의 구동부 전원을 차단하거나 브레이크를 체결하여 이동을 원천 봉쇄한다.\n\n## 4. 물리적 거동과 관성 제어 (Kinematics & Inertia)\n\nBMA 공정의 AMR은 고중량의 배터리 모듈을 이송하므로, 장애물 감지 시의 급정거는 물리적 위험을 수반한다. 따라서 시스템은 **관성 모멘트(Moment of Inertia)**를 고려한 제어를 수행한다.\n\n*   **감속 프로파일(Deceleration Profile):** 장애물 감지 즉시 무조건적인 급제동(Hard Stop)을 걸 경우, 관성에 의해 적재된 배터리 모듈이 이탈하거나 로봇이 전도될 위험이 있다. 따라서 제어 시스템은 안전 거리가 확보된 상태에서는 'S-Curve' 형태의 부드러운 감속을 우선 수행한다.\n*   **E-Stop (Emergency Stop):** 단, 보호 필드 내 초근접 상황에서는 물리적 충돌 방지가 최우선이므로, 모터의 역기전력을 이용한 급속 제동과 기계적 브레이크를 동시에 작동시켜 제동 거리를 최소화한다.\n\n## 5. 데이터 흐름과 관제 시스템(ACS) 연동\n\n로봇 단말에서 발생한 장애물 감지 이벤트는 로컬에 머물지 않고 전체 관제 시스템으로 전파된다.\n\n1.  **Perception Layer:** LIDAR/Camera가 장애물 좌표(x, y, z) 데이터 생성.\n2.  **Navigation Stack:** 로컬 코스트맵(Local Costmap)에 해당 좌표를 '이동 불가 영역(Lethal Obstacle)'으로 마킹.\n3.  **Vehicle Controller:** 주행 알고리즘이 정지 명령 생성 및 모터 드라이버에 토크(Torque) 0 명령 하달.\n4.  **Network Layer:** AMR은 무선 네트워크를 통해 ACS(AGV Control System)에 `Status: Paused` 또는 `Error: Obstacle_Detected` 패킷을 전송.\n5.  **System Response:** ACS는 해당 AMR의 경로를 막힌 구간으로 인식하여, 후속 AMR들의 경로를 우회시키거나(Re-routing), 운영자 모니터링 대시보드에 알람을 표출하여 즉각적인 조치를 유도한다.\n\n---\n**결론적으로, AMR의 장애물 감지 및 정지 메커니즘은 단순한 센서 반응이 아니라, 정밀한 센서 퓨전 기술, 동적 안전 구역 설정, 관성을 고려한 모션 제어, 그리고 상위 관제 시스템과의 실시간 데이터 동기화가 결합된 고도화된 안전 알고리즘의 산물이다.**",
        "questions": [
            "BMA 공정 내 자율주행 로봇(AMR)의 센서 퓨전 기반 환경 인지 아키텍처와 장애물 회피 및 제어 로직 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "LIDAR의 ToF 메커니즘과 3D 카메라의 심도 인식 기술이 결합된 센서 퓨전 데이터가 로컬 코스트맵(Local Costmap) 생성 및 모션 제어기와 어떻게 상호작용하는지 그 공학적 흐름을 분석하시오.",
            "장애물 감지 시 객체의 동적·정적 속성에 따라 일시 정지(Pause) 또는 시스템 에러(Error)로 판정되는 논리적 판단 과정과, 관성 모멘트를 고려한 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 15,
        "preprocessed_group": "AMR 주행 경로 상에 장애물이 존재하여 라이다(LIDAR) 센서가 이를 감지하고 안전을 위해 정지한 경우, 작업자는 AMR의 정상 주행을 위해 주행 경로 상의 장애물을 제거해야 한다.",
        "textbook": "# 자율주행 로봇(AMR)의 장애물 감지 메커니즘 및 안전 정지 프로토콜\n**(Obstacle Detection & Safety Interlock Protocol in BMA Process)**\n\n## 1. 서론: BMA 공정 내 동적 환경과 안전 아키텍처\n현대자동차그룹의 BMA(Battery Module Assembly) 공정은 고중량의 배터리 모듈을 이송하는 AMR(Autonomous Mobile Robot)과 작업자, 그리고 기타 설비가 공존하는 복합적인 동적 환경(Dynamic Environment)입니다. 이러한 환경에서 AMR의 자율 주행 시스템은 단순한 이동 수단을 넘어, 실시간으로 주변 환경을 인지하고 판단하는 지능형 안전 시스템을 내포해야 합니다. 본 챕터에서는 AMR이 주행 경로 상의 장애물을 인지하고, 물리적 충돌을 방지하기 위해 시스템이 어떻게 반응(Reaction)하며, 장애물 제거 후 어떠한 논리적 절차를 통해 정상 주행으로 복귀하는지에 대한 엔지니어링 메커니즘을 심층적으로 기술합니다.\n\n## 2. LIDAR 센서 기반의 환경 인지 및 신호 처리 (Perception Layer)\nAMR의 '눈' 역할을 하는 2D 라이다(LIDAR, Light Detection and Ranging) 센서는 **ToF(Time of Flight)** 방식을 기반으로 작동합니다. 센서는 초당 수천 회 이상의 레이저 펄스를 수평으로 방사하고, 물체에 반사되어 돌아오는 시간을 측정하여 거리 데이터를 산출합니다.\n\n1.  **포인트 클라우드(Point Cloud) 형성:** 라이다는 반사된 신호들을 조합하여 AMR 주변의 환경을 점들의 집합인 포인트 클라우드 형태로 실시간 매핑합니다.\n2.  **필터링 및 객체 인식:** 시스템은 수신된 데이터 중 공기 중의 먼지나 미세한 노이즈를 필터링 알고리즘을 통해 제거하고, 유의미한 기하학적 형상(Geometric Shape)을 가진 객체만을 '장애물'로 인식합니다.\n3.  **임계값(Threshold) 판정:** 사전에 정의된 주행 경로(Global Path) 상에 위치한 객체가 설정된 안전 임계값 이내로 진입했는지를 지속적으로 연산합니다.\n\n## 3. 안전 영역(Safety Field) 침범과 제동 로직 (Control Layer)\nAMR의 제어 시스템은 라이다 센서의 감지 범위를 기능에 따라 **경고 영역(Warning Field)**과 **보호 정지 영역(Protective Stop Field)**으로 세분화하여 관리합니다. 입력된 텍스트에서 언급된 \"안전을 위해 정지한 경우\"는 장애물이 보호 정지 영역을 침범했을 때 발생하는 **하드웨어 레벨의 인터락(Interlock)** 동작을 의미합니다.\n\n*   **트리거(Trigger):** 장애물이 보호 정지 영역 내에서 감지되는 즉시, 라이다 센서는 Safety PLC(Programmable Logic Controller)로 비상 정지 신호(Emergency Signal)를 송출합니다.\n*   **모션 제어(Motion Control):** Safety PLC는 모터 드라이버에 전력을 차단하거나 역기전력을 이용한 급제동 명령을 하달합니다. 이때 시스템은 관성에 의한 미끄러짐을 방지하고 배터리 모듈의 적재 안정성을 유지하기 위해 최적화된 **감속 프로파일(Deceleration Profile)**을 적용하여 AMR을 정지시킵니다.\n*   **상태 천이(State Transition):** AMR은 '주행(Running)' 상태에서 '에러/정지(Error/Stop)' 상태로 천이하며, 상위 관제 시스템(ACS)에 현재 위치와 장애물 감지 상태를 보고하여 해당 구역의 트래픽을 일시적으로 동결시킵니다.\n\n## 4. 물리적 장애 요인 제거와 시스템 복구 (Operational Recovery)\n시스템이 안전 정지 상태(Safety Lock)에 진입하면, 단순히 장애물이 사라진다고 해서 즉시 다시 움직이지 않습니다. 이는 센서의 오작동이나 일시적인 신호 소실로 인한 급발진 사고를 방지하기 위한 설계 원칙입니다. 따라서 \"작업자가 장애물을 제거해야 한다\"는 행위는 시스템의 **재기동 조건(Restart Condition)**을 충족시키기 위한 필수적인 물리적 선행 과정입니다.\n\n1.  **물리적 소거(Physical Clearance):** 작업자가 주행 경로 상의 장애물을 제거하면, 라이다 센서는 더 이상 반사파가 보호 정지 영역 내에서 검출되지 않음을 확인합니다.\n2.  **센서 리셋 및 재검증:** 센서 레벨에서는 장애물 감지 신호(Output Signal Switching Device, OSSD)가 OFF에서 ON(정상) 상태로 복귀합니다. 그러나 AMR의 메인 컨트롤러는 여전히 '정지' 상태를 유지합니다.\n3.  **경로 재탐색 및 주행 재개:** 장애물이 완전히 제거된 환경에서 시스템은 현재 위치를 재확인(Re-localization)하고, 글로벌 경로 계획(Global Path Planning)과 로컬 경로 계획(Local Path Planning)을 대조합니다. 경로상의 무결성이 확인되면, AMR은 대기 상태를 해제하고 설정된 가속도 곡선에 따라 서서히 속도를 높이며 정상 주행 모드로 복귀합니다.\n\n## 5. 결론\nAMR의 장애물 감지 및 정지 메커니즘은 단순한 센서의 반응이 아니라, **[물리적 감지] -> [Safety PLC의 논리적 판단] -> [모션 제어의 물리적 제동]**으로 이어지는 정교한 인과관계의 사슬입니다. 작업자에 의한 장애물 제거는 이 교착 상태(Deadlock)를 해소하고 시스템의 안전 무결성(Safety Integrity)을 검증한 후 프로세스를 재개하는 핵심적인 트리거 역할을 수행합니다.",
        "questions": [
            "BMA 공정 내 자율주행 로봇(AMR)의 장애물 감지 메커니즘 및 안전 정지 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "LIDAR 센서의 ToF 방식 기반 환경 인지와 Safety PLC를 통한 제동 명령 하달 과정이 전체 자율주행 시스템 내에서 어떻게 상호작용하는지 공학적으로 분석하시오.",
            "장애물에 의한 보호 정지 영역 침범 시 발생하는 하드웨어 레벨의 인터락 작동 원리와, 장애물 제거 후 시스템이 정상 주행으로 복귀하기 위한 논리적 판단 과정 및 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 16,
        "preprocessed_group": "[20014] Stop due to HOKUYO Lidar obstacle detection 발생 시, HOKUYO Lidar가 안전콘의 은색 반사판이나 작업자 안전조끼의 반사 테이프 등 빛을 강하게 반사하는 물체를 장애물로 인식하여 AMR의 속도를 감속하거나 정지시킨다.\n\n자동 복구 실패 시, AMR 주변의 장애물이나 반사경을 2m 이상 분리한 후 AMR 측면의 RESET 버튼을 누른다.\n\n수동 조작이 필요한 경우, HOKUYO Lidar 렌즈의 이물질 여부를 확인하고 전용 렌즈 클리너나 부드러운 천을 사용하여 제거한다.\n\n상기 조치 후에도 OSSD(Output Signal Switching Device)가 해제되지 않을 경우, AMR의 전원을 재부팅한다.\n\nAMR 재시작 후에도 OSSD 오류가 지속되는 경우, HYUNDAI-WIA의 S/V 담당자에게 문의하여 기술 지원을 받는다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 자율주행 로봇(AMR)의 안전 센싱 메커니즘과 장애물 감지 로직 분석\n\n## 1. 서론: 안전 무결성(Safety Integrity)과 [20014] 에러의 정의\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 고중량의 배터리 모듈을 운송하는 AMR(Autonomous Mobile Robot)과 작업자가 공존하는 협동 환경입니다. 이러한 환경에서 시스템의 최우선 설계 원칙은 'Fail-Safe(안전 동작)'이며, 이를 구현하기 위해 AMR에는 고정밀 HOKUYO Lidar 센서가 탑재되어 있습니다.\n\n에러 코드 **[20014] Stop due to HOKUYO Lidar obstacle detection**은 단순한 정지 신호가 아니라, AMR의 주행 경로 상에 충돌 위험이 감지되었을 때 발동하는 최상위 레벨의 안전 인터록(Safety Interlock)입니다. 본 챕터에서는 해당 에러가 발생하는 광학적/물리적 원리와 시스템 내부의 데이터 흐름, 그리고 OSSD(Output Signal Switching Device) 기반의 안전 제어 메커니즘을 심층적으로 분석합니다.\n\n---\n\n## 2. HOKUYO Lidar의 센싱 원리와 광학적 포화(Optical Saturation) 현상\n\n### 2.1. ToF(Time of Flight) 및 위상차 검출 방식\nHOKUYO Lidar는 레이저 펄스를 방출하고 물체에 반사되어 돌아오는 빛의 비행 시간(ToF) 또는 위상차를 측정하여 거리를 연산합니다. 센서는 수평 시야각(FOV) 내에서 고속으로 스캐닝하며 실시간으로 점군(Point Cloud) 데이터를 생성, 이를 사전에 정의된 안전 영역(Safety Zone) 맵과 대조합니다.\n\n### 2.2. 고반사율 물체에 의한 인식 오류 메커니즘\n입력된 팩트에 따르면, 안전콘의 은색 반사판이나 작업자 안전조끼의 반사 테이프가 장애물로 오인식되는 경우가 빈번합니다. 이는 **재귀반사(Retro-reflection)** 특성에 기인합니다.\n*   **광학적 포화(Saturation):** 일반적인 물체는 난반사(Diffuse Reflection)를 일으키지만, 재귀반사 소재는 광원을 향해 빛을 집중적으로 반사합니다. 이로 인해 Lidar의 수광부(Photodetector)에 허용 임계치를 초과하는 강한 신호가 유입됩니다.\n*   **고스트 데이터(Ghost Data) 생성:** 수광 소자가 포화되면 신호 처리 알고리즘은 거리 연산에 실패하거나, 실제보다 훨씬 가까운 거리에 물체가 존재하는 것으로 데이터를 왜곡(Aliasing)합니다.\n*   **결과:** 시스템은 이를 '임박한 충돌 위험'으로 간주하여 즉각적인 감속 또는 급정지(Emergency Stop) 명령을 생성합니다.\n\n---\n\n## 3. 시스템 제어 로직 및 데이터 흐름 (Data Flow)\n\n### 3.1. 감지에서 제동까지의 인과 사슬 (Chain of Causality)\n장애물 감지 시 시스템은 다음과 같은 순차적 로직을 수행합니다.\n\n1.  **센서 레벨 (Detection):** HOKUYO Lidar가 설정된 보호 영역(Protective Field) 내에서 임계값 이상의 반사 신호를 감지합니다.\n2.  **신호 처리 (Signal Processing):** 센서 내부 프로세서는 이를 장애물 좌표로 변환하고, 안전 출력 신호인 OSSD를 `High` 상태에서 `Low` 상태로 전환합니다.\n3.  **안전 PLC (Safety Logic):** AMR 내부의 Safety PLC는 OSSD 신호의 차단(Cut-off)을 감지하는 즉시 모터 드라이버에 STO(Safe Torque Off) 기능을 활성화하거나 감속 프로파일을 적용합니다.\n4.  **물리적 제동 (Actuation):** 모터의 전력이 차단되거나 역기전력이 인가되어 AMR은 물리적으로 정지하며, 상위 관제 시스템(ACS)에 [20014] 에러 코드를 전송합니다.\n\n### 3.2. OSSD(Output Signal Switching Device)의 역할\nOSSD는 단순한 On/Off 스위치가 아니라, 주기적인 펄스 테스트를 통해 회로의 단선이나 단락을 자가 진단하는 이중화된 안전 신호 체계입니다. [20014] 에러 상황에서 OSSD가 해제되지 않는다는 것은, 센서가 여전히 위험 요소가 존재한다고 판단하고 있거나(Latching), 센서 자체의 하드웨어적 오류 상태임을 의미합니다.\n\n---\n\n## 4. 복구 메커니즘 및 트러블슈팅 아키텍처\n\n시스템이 안전 정지 상태(Safety Stop State)에 진입했을 때, 정상 운전 모드로 복귀하기 위한 절차는 물리적 환경 개선과 논리적 리셋의 두 단계로 구성됩니다.\n\n### 4.1. 환경적 요인 제거 및 히스테리시스(Hysteresis) 관리\n자동 복구가 실패할 경우, 운영자는 AMR 주변의 장애물이나 반사체를 **2m 이상** 이격시켜야 합니다.\n*   **Why 2m?** 센서의 감지 영역은 '정지 영역(Stop Zone)'과 그 외곽의 '경고 영역(Warning Zone)'으로 나뉩니다. 단순히 정지 영역만 벗어나는 것이 아니라, 센서의 노이즈 마진과 히스테리시스(Hysteresis) 구간을 완전히 벗어나기 위해 충분한 물리적 거리(2m)를 확보해야 센서가 \"안전함(Clear)\" 상태로 로직을 전환할 수 있습니다.\n*   **RESET 버튼의 기능:** 장애물 제거 후 측면 RESET 버튼을 누르는 행위는 Safety PLC에 '에러 확인(Acknowledge)' 신호를 보내는 것입니다. 이는 래치(Latch)된 에러 레지스터를 소거(Clear)하고 OSSD 신호를 다시 `High`로 복구시키는 트리거 역할을 합니다.\n\n### 4.2. 광학적 유지보수 (Optical Maintenance)\n수동 조작 시 렌즈의 이물질을 확인하는 것은 신호 대 잡음비(SNR)를 확보하기 위함입니다.\n*   **산란(Scattering) 방지:** 렌즈 표면의 먼지나 유막은 레이저 빔을 산란시켜 측정 정밀도를 떨어뜨리고, 이를 장애물로 오인하게 만듭니다. 전용 렌즈 클리너나 부드러운 천을 사용하는 것은 렌즈 코팅 손상을 방지하여 광학적 투과율을 유지하기 위한 필수적인 공학적 조치입니다.\n\n### 4.3. 시스템 재부팅 및 하드웨어 초기화\n상기 조치 후에도 OSSD가 복구되지 않을 경우, AMR 전원 재부팅(Power Cycle)을 수행합니다.\n*   **초기화 원리:** 재부팅은 센서의 펌웨어와 Safety PLC의 통신 스택을 초기화합니다. 일시적인 소프트웨어 글리치(Glitch)나 통신 버퍼 오버플로우로 인해 OSSD 신호가 논리적으로 묶여있는(Stuck) 상태를 해소합니다.\n\n### 4.4. 기술 지원 에스컬레이션 (Escalation)\n재부팅 후에도 오류가 지속된다면, 이는 단순한 환경적/일시적 요인이 아닌 센서 내부 회로의 손상이나 캘리브레이션 데이터의 영구적 손실을 시사합니다. 이 단계에서는 현장 조치가 불가능하므로 **HYUNDAI-WIA S/V(Supervisor/Service) 담당자**에게 이관하여, 전문 진단 툴을 통한 하드웨어 분석을 수행해야 합니다.\n\n---\n\n## 5. 결론\n\n[20014] 에러는 HOKUYO Lidar의 정밀한 광학 측정 기술과 Safety PLC의 결정론적(Deterministic) 로직이 결합된 결과입니다. 엔지니어는 이 에러를 단순한 '멈춤'으로 인식하지 않고, **광학적 반사 특성 - 센서의 신호 처리 - OSSD 안전 인터록**으로 이어지는 인과관계를 이해함으로써, 보다 신속하고 정확하게 시스템을 정상화할 수 있습니다.",
        "questions": [
            "BMA 자동화 시스템 내 자율주행 로봇(AMR)의 안전 센싱 메커니즘과 장애물 감지 로직 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "HOKUYO Lidar 센서의 ToF 및 위상차 검출 방식이 고반사율 물체와 만났을 때 발생하는 광학적 포화 현상의 원리와, 이것이 OSSD 및 Safety PLC를 거쳐 물리적 제동으로 이어지는 시스템적 상호작용을 공학적으로 분석하시오.",
            "[20014] 에러 발생 시 장애물을 2m 이상 이격해야 하는 히스테리시스(Hysteresis) 관리의 논리적 근거와, 환경 개선 후 RESET 버튼 및 재부팅을 통한 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 17,
        "preprocessed_group": "AMR의 OSSD LIDAR ERROR[30020]는 기기 주변의 장애물 감지 또는 센서 오염으로 인해 안전 비상 정지 신호가 발생하여 이동이 차단된 상태를 의미하며, 자동 복구 실패 시 주변 장애물을 2m 이상 분리한 후 AMR 측면의 RESET 버튼을 누르거나 전용 클리너로 LIDAR 렌즈의 이물질을 제거해야 한다. 수동 조작 및 재시작 후에도 오류가 지속되는 경우에는 AMR의 전원을 재투입하고, 이후에도 문제가 해결되지 않으면 HYUNDAI-WIA S/V 담당자에게 문의하여 조치를 취한다.",
        "textbook": "# BMA 공정 자율주행 로봇(AMR)의 안전 무결성 및 OSSD LIDAR 기반 장애 제어 메커니즘\n\n## 1. 서론: 안전 제어 시스템의 아키텍처 개요\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 고중량의 배터리 모듈을 운송하는 환경 특성상, AMR(Autonomous Mobile Robot)의 주행 안전성이 최우선 설계 요소로 고려된다. 이 중 **OSSD(Output Signal Switching Device)** 기반의 안전 시스템은 로봇의 자율 주행 알고리즘과는 독립적으로 작동하는 최상위 하드웨어 안전 계층(Safety Layer)이다.\n\n본 기술 백서는 AMR 운용 중 빈번하게 발생하는 **OSSD LIDAR ERROR [30020]**의 발생 원리, 센서의 물리적 감지 메커니즘, 그리고 시스템의 논리적 복구 절차를 심층적으로 분석하여, 단순한 장애 처리를 넘어 시스템의 안전 설계 철학을 이해하는 것을 목적으로 한다.\n\n---\n\n## 2. OSSD LIDAR 센싱 및 에러 [30020]의 논리적 정의\n\n### 2.1. OSSD의 작동 원리 및 Fail-Safe 설계\nOSSD는 일반적인 디지털 신호와 달리, 주기적인 펄스 테스트(Pulse Test)를 통해 회로 자체의 단선이나 단락(Short-circuit)을 실시간으로 감시하는 안전 출력 방식이다. AMR에 탑재된 LIDAR 센서는 **ToF(Time of Flight)** 방식을 이용하여 주변 환경을 스캐닝하며, 설정된 '안전 보호 영역(Protective Field)' 내에 물체가 감지되거나 센서 자체의 기능 저하가 발생할 경우, 즉시 OSSD 신호를 High(24V)에서 Low(0V)로 차단한다.\n\n### 2.2. 에러 코드 [30020]의 시스템적 의미\n**에러 코드 [30020]**은 단순한 장애물 감지를 넘어, AMR의 메인 제어기(Main Controller)가 안전 센서(LIDAR)로부터 **\"주행 불가능 상태(Safety Stop Condition)\"**라는 확정적 신호를 수신했음을 의미한다.\n이 코드가 트리거(Trigger)되는 논리적 흐름은 다음과 같다:\n1.  **감지(Detection):** LIDAR가 보호 영역 내의 간섭(장애물 또는 오염)을 감지.\n2.  **신호 차단(Signal Drop):** LIDAR의 OSSD 채널(A/B) 출력이 차단됨.\n3.  **인터락(Interlock):** AMR의 안전 PLC 또는 안전 릴레이가 이를 감지하여 모터 드라이버의 전력을 물리적으로 차단하는 **STO(Safe Torque Off)** 기능을 활성화.\n4.  **상태 천이(State Transition):** 상위 관제 시스템(ACS)에 [30020] 코드를 전송하고, 로봇은 '에러 상태(Error State)'로 락(Lock)이 걸림.\n\n---\n\n## 3. 물리적 발생 원인 및 공학적 분석\n\n에러 [30020]을 유발하는 물리적 현상은 크게 **외부 장애물 간섭**과 **광학적 노이즈(오염)** 두 가지로 분류된다.\n\n### 3.1. 동적/정적 장애물에 의한 보호 영역 침범\nLIDAR 센서는 AMR의 속도에 따라 가변적인 보호 영역(Protective Field)을 형성한다. 작업자나 타 설비가 이 영역(Zone) 내부로 진입하면, LIDAR는 반사된 레이저 펄스의 복귀 시간을 계산하여 거리를 측정하고, 이것이 임계값(Threshold) 미만일 경우 즉시 비상 정지 신호를 송출한다. 이는 물리적 충돌을 미연에 방지하기 위한 필수적인 기구학적 제약 조건이다.\n\n### 3.2. 센서 오염에 의한 광학적 산란(Scattering) 및 감쇠(Attenuation)\nBMA 공정 내의 미세 분진이나 유증기가 LIDAR의 렌즈(Window)에 부착될 경우, 발사된 레이저 빔은 정상적으로 투과되지 못하고 표면에서 난반사(Scattering)를 일으킨다.\n*   **현상:** 센서는 렌즈 표면의 이물질을 '아주 가까운 거리에 있는 장애물'로 오인하거나, 수신되는 광량이 기준치 이하로 떨어져 신뢰성 확보 실패로 판단한다.\n*   **결과:** 실제 장애물이 없음에도 불구하고, 시스템의 안전 무결성(Safety Integrity) 유지를 위해 [30020] 에러를 발생시키고 주행을 차단한다.\n\n---\n\n## 4. 시스템 복구 로직 및 운영 프로토콜\n\n시스템이 안전 락(Safety Lock) 상태인 [30020] 에러에 진입했을 때, 이를 해제하고 정상 운전(Normal Operation) 모드로 복귀하기 위해서는 엄격한 논리적 절차가 요구된다.\n\n### 4.1. 장애물 이격 및 히스테리시스(Hysteresis) 확보\n장애물 제거 시 **2m 이상의 이격 거리**를 요구하는 이유는 센서의 **히스테리시스 특성** 때문이다. 센서가 '안전함'으로 상태를 전환하기 위해서는 감지 임계값보다 더 넓은 여유 공간(Margin)이 확보되어야 한다. 장애물이 경계선에 머물러 있을 경우, 센서 신호가 On/Off를 반복하는 채터링(Chattering) 현상이 발생하여 시스템 불안정을 초래할 수 있다.\n\n### 4.2. 광학적 유지보수 (Cleaning)\n전용 클리너를 사용한 렌즈 세척은 광학적 투과율(Transmissivity)을 초기화하는 과정이다. 미세한 유막이라도 레이저의 굴절을 유발할 수 있으므로, 물리적 손상을 주지 않는 전용 도구를 사용하여 센서의 SNR(Signal-to-Noise Ratio)을 정상 범위로 복구해야 한다.\n\n### 4.3. 수동 리셋(RESET)의 논리적 기능\nAMR 측면의 RESET 버튼은 단순한 재시작 스위치가 아니다. 이는 안전 회로의 **'래치(Latch) 해제'** 신호이다.\n*   **작동 메커니즘:** 장애 요인이 제거되어 OSSD 신호가 복구되더라도, 안전 규격(ISO 13849-1 등)에 따라 시스템은 자동으로 재기동해서는 안 된다(재기동 방지, Anti-restart).\n*   **운영자의 역할:** 운영자가 육안으로 안전을 확인하고 RESET 버튼을 누르는 행위(Rising Edge Signal)가 입력되어야만, 안전 PLC는 비로소 STO를 해제하고 모터에 전력을 재공급한다.\n\n---\n\n## 5. 심화 장애 대응 및 하드웨어 진단\n\n### 5.1. 전원 재투입(Power Cycle)을 통한 펌웨어 초기화\n수동 조작 후에도 에러가 지속될 경우, AMR 전원 재투입이 필요하다. 이는 센서 내부의 DSP(Digital Signal Processor)와 통신 버퍼를 초기화하고, 센서의 자가 진단(Self-Test) 시퀀스를 처음부터 다시 수행하게 함으로써 일시적인 소프트웨어 글리치(Glitch)나 통신 동기화 오류를 해결한다.\n\n### 5.2. 하드웨어 결함 및 벤더 지원\n전원 재투입 후에도 [30020] 코드가 소거되지 않는다면, 이는 외부 환경 요인이 아닌 **하드웨어 자체의 영구적 결함(Permanent Failure)**일 가능성이 높다.\n*   **가능한 원인:** LIDAR 내부 발광/수광 소자의 수명 종료, OSSD 배선의 단선, 또는 내부 회로 기판의 손상.\n*   **조치:** 이 단계에서는 현장 운영자의 조치 범위를 벗어나므로, **HYUNDAI-WIA S/V(Service Vendor) 담당자**에게 이관하여 정밀 진단 및 부품 교체를 수행해야 한다.\n\n---\n\n## 6. 결론\nAMR의 **OSSD LIDAR ERROR [30020]**은 BMA 공정의 안전을 보장하기 위한 가장 핵심적인 방어 기제이다. 엔지니어는 이 에러를 단순한 '멈춤'으로 인식하지 않고, **[센서 감지] -> [OSSD 신호 차단] -> [안전 컨트롤러 래치] -> [운영자 확인 및 리셋]**으로 이어지는 일련의 안전 제어 루프(Safety Control Loop) 관점에서 이해하고 대응해야 한다. 이러한 체계적인 접근만이 공정의 가동률(Availability)과 작업자의 안전을 동시에 확보할 수 있다.",
        "questions": [
            "BMA 공정 자율주행 로봇(AMR)의 안전 무결성 보장을 위한 OSSD LIDAR 기반 장애 제어 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "OSSD(Output Signal Switching Device)의 펄스 테스트 및 ToF(Time of Flight) 감지 원리가 AMR의 안전 계층 내에서 STO(Safe Torque Off) 기능과 어떻게 상호작용하여 시스템적 안전을 구현하는지 공학적으로 분석하시오.",
            "에러 코드 [30020] 발생 시, 광학적 산란 현상부터 안전 PLC의 래치(Latch) 해제 및 수동 리셋에 이르기까지의 논리적 판단 과정과 재기동 방지를 위한 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 18,
        "preprocessed_group": "AMR의 Lidar에 감지된 물체가 로봇의 충돌 감지 영역(Safety Zone)과 겹쳐 PAUSED_BY_OBSTACLE 관련 알람이 발생한 경우, 작업자는 로봇 주변 및 도킹 구역 내 실제 장애물 유무를 확인하고 이를 제거해야 한다.\n\n도킹아웃 시 T-Zone 내 팔레트 등의 장애물이 감지되어 정지한 경우, 로봇 앞면과 옆면의 넓은 영역을 점검하여 장애물을 제거해야 한다.\n\n금속 설비에서 반사된 빛을 장애물로 오인하여 주행이 불가한 경우, 빛 반사가 의심되는 구역을 덮거나 비반사 필름을 부착하여 간섭을 차단해야 한다.\n\n도킹 시도 중 장애물 감지로 인해 자동 복구에 실패한 경우, 수동으로 도킹을 해제(Undocking)한 후 Web ACS에서 Call-Retry를 실행하여 재시도한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 자율주행 로봇(AMR)의 장애물 감지 메커니즘 및 예외 처리 아키텍처\n\n**작성자:** 수석 아키텍트 (Chief Architect)\n**대상:** 시스템 엔지니어 및 유지보수 담당자\n**주제:** Lidar 센서 기반의 환경 인식, 광학적 간섭 현상, 그리고 교착 상태(Deadlock) 해결을 위한 논리적 복구 절차\n\n---\n\n## 1. 서론: 안전 무결성과 가동률의 균형\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류의 핵심인 AMR(Autonomous Mobile Robot)은 고중량의 배터리 모듈을 이송하는 과정에서 밀리미터(mm) 단위의 정밀도와 절대적인 안전성을 동시에 요구받는다. 본 챕터에서는 AMR이 주행 및 도킹(Docking) 과정에서 주변 환경을 어떻게 인식(Perception)하고, 물리적/광학적 장애 요인에 대해 어떤 논리적 판단(Decision Making)을 수행하는지 심층 분석한다. 또한, 시스템이 자동 복구 불가능한 상태에 빠졌을 때 수행되는 수동 복구 절차의 엔지니어링 원리를 규명한다.\n\n---\n\n## 2. Lidar 기반의 공간 인식과 Safety Zone 메커니즘\n\n### 2.1. Point Cloud 데이터와 충돌 감지 영역의 상관관계\nAMR의 주행 제어 시스템은 2D/3D Lidar 센서를 통해 수집된 Point Cloud(점군) 데이터를 실시간으로 분석하여 SLAM(Simultaneous Localization and Mapping) 알고리즘을 수행한다. 이때 시스템은 로봇의 속도와 적재량에 따라 가변적으로 설정된 **'충돌 감지 영역(Safety Zone)'**을 모니터링한다.\n\n입력된 팩트에서 언급된 `PAUSED_BY_OBSTACLE` 알람은 단순한 정지가 아니다. 이는 Lidar가 방출한 레이저 펄스가 반사되어 돌아오는 시간(ToF: Time of Flight)을 계산한 결과, 특정 좌표의 객체가 사전에 정의된 Safety Zone 폴리곤(Polygon) 내부로 침입했음을 의미한다.\n\n1.  **감지(Detection):** Lidar 센서가 Safety Zone 내에서 임계값 이상의 반사 신호를 포착한다.\n2.  **트리거(Trigger):** 안전 PLC(Safety PLC)는 즉시 모터 드라이버에 STO(Safe Torque Off) 또는 SS1(Safe Stop 1) 신호를 인가하여 구동력을 차단한다.\n3.  **상태 전이(State Transition):** 로봇의 상태는 `RUNNING`에서 `PAUSED_BY_OBSTACLE`로 천이되며, 상위 관제 시스템(ACS)에 에러 코드를 전송한다.\n\n이 메커니즘은 물리적 충돌을 원천 차단하기 위한 하드웨어 레벨의 인터락(Interlock)이므로, 작업자는 단순히 알람을 리셋하는 것이 아니라, 로봇 주변 및 도킹 구역 내의 물리적 장애물을 제거하여 Lidar의 스캔 경로(Scan Path)를 확보해야만 시스템을 정상 상태로 복귀시킬 수 있다.\n\n---\n\n## 3. 도킹 프로세스(Docking/Undocking) 시의 운동학적 제약과 장애물 감지\n\n### 3.1. T-Zone 내의 동적 장애물과 사각지대\n도킹아웃(Docking Out) 시퀀스는 AMR이 설비와 물리적으로 결합되었다가 분리되는 과정으로, 매우 좁은 경로를 후진 또는 회전하며 빠져나와야 하는 고난이도의 운동학적(Kinematics) 제어가 필요하다. 이때 **T-Zone(Transfer Zone)**은 팔레트나 설비 구조물이 밀집해 있어 충돌 위험이 가장 높은 구역이다.\n\nAMR이 도킹아웃 중 정지했다면, 이는 로봇의 전면뿐만 아니라 측면(Side)에 장착된 보조 센서들이 회전 반경 내의 장애물(예: 비정상적으로 적재된 팔레트, 돌출된 설비 부품)을 감지했기 때문이다.\n\n*   **작동 원리:** 도킹 해제 시 로봇은 조향각을 크게 사용하여 T-Zone을 이탈하려 한다. 이때 차체 측면의 스윕 영역(Sweep Area)이 넓어지게 되는데, 센서 퓨전 알고리즘은 이 예상 경로 상에 장애물이 존재하는지 선제적으로 계산한다.\n*   **대응 프로토콜:** 장애물이 감지되면 로봇은 즉시 제동한다. 엔지니어는 로봇의 진행 방향(전면)뿐만 아니라, 회전 시 꼬리 부분이 닿을 수 있는 측면 및 후면의 넓은 영역을 포괄적으로 점검(Inspection)해야 한다. 이는 단일 센서가 아닌 멀티 센서 시스템이 복합적으로 작용한 결과이기 때문이다.\n\n---\n\n## 4. 광학적 노이즈: 금속 설비 반사(Reflection)와 다중 경로 간섭\n\n### 4.1. Specular Reflection(정반사)에 의한 허위 감지\nBMA 공정은 스테인리스 스틸이나 알루미늄과 같은 고반사율 금속 설비가 다수 존재한다. Lidar 센서는 물체 표면에서 난반사(Diffuse Reflection)되어 돌아오는 빛을 감지하도록 설계되었으나, 매끄러운 금속 표면은 거울처럼 빛을 정반사(Specular Reflection)시키는 특성이 있다.\n\n*   **현상 분석:** Lidar에서 발사된 레이저가 금속 설비에 반사되어 다른 방향으로 튀거나, 반사된 빛이 다시 센서로 돌아오지 않고 소실되는 현상이 발생한다. 또는, 반사된 빛이 엉뚱한 물체에 맞고 돌아올 경우, 센서는 실제보다 훨씬 먼 거리에 장애물이 있거나, 존재하지 않는 위치에 장애물이 있는 것으로 오인하는 **'고스트 현상(Ghost Effect)'**을 일으킨다.\n*   **시스템 반응:** 로봇은 이를 실제 장애물로 인식하여 회피 기동을 시도하거나, 주행 불가 판정을 내리고 정지한다.\n*   **공학적 솔루션:** 이는 소프트웨어 필터링만으로는 완벽한 제거가 어렵다. 따라서 물리적 조치가 필수적이다.\n    1.  **차폐(Masking):** 빛 반사가 의심되는 금속 표면을 불투명한 재질로 덮는다.\n    2.  **표면 처리:** 해당 구역에 **비반사 필름(Anti-reflective film)**을 부착하거나 무광 도료를 도포하여 정반사를 난반사로 유도, Lidar 센서가 올바른 거리 데이터를 수신할 수 있도록 광학적 환경을 개선해야 한다.\n\n---\n\n## 5. 교착 상태(Deadlock) 해결을 위한 수동 복구 및 재시도 로직\n\n### 5.1. 자동 복구 실패와 시스템 락(Lock)\nAMR은 장애물 감지로 인해 도킹에 실패할 경우, 일차적으로 자체 알고리즘을 통해 경로를 재탐색하거나 미세 조정을 시도하는 자동 복구(Auto-recovery) 루틴을 수행한다. 그러나 장애물이 지속적으로 감지되거나 위치 오차가 허용 범위를 초과하면, 시스템은 안전을 위해 모든 동작을 멈추는 **교착 상태(Deadlock)**에 진입한다.\n\n### 5.2. Manual Undocking 및 Web ACS Call-Retry 프로세스\n이 상태에서는 상위 시스템의 자동 명령만으로는 복구가 불가능하므로, 운영자의 개입을 통한 상태 초기화(Reset)가 필요하다.\n\n1.  **물리적 구속 해제 (Manual Undocking):**\n    *   자동 복구가 실패했다는 것은 로봇이 설비와 물리적으로 끼어있거나, 센서 데이터가 논리적으로 모순된 상태임을 의미한다.\n    *   작업자는 수동 조작을 통해 로봇을 도킹 스테이션에서 물리적으로 분리(Undocking)시켜, 센서가 주변 환경을 다시 명확하게 인식할 수 있는 위치로 이동시켜야 한다.\n\n2.  **논리적 상태 초기화 (Web ACS Call-Retry):**\n    *   물리적 위치가 확보되었다고 해서 로봇이 바로 움직이지 않는다. 제어 소프트웨어(ACS/MCS) 상에는 여전히 '작업 실패' 플래그가 남아있기 때문이다.\n    *   **Web ACS(Access Control System)** 인터페이스에서 **`Call-Retry`** 명령을 실행하는 것은 단순한 재시작이 아니다. 이는 현재 할당된 작업(Task)의 에러 스택을 비우고(Flush), 로봇의 위치 좌표와 상태 정보를 갱신(Update)한 뒤, 중단되었던 미션을 처음부터 다시 스케줄링하는 **'논리적 리셋'** 과정이다.\n\n### 5.3. 결론적 인과관계\n즉, **[장애물 감지 -> 자동 복구 실패 -> Deadlock]**의 흐름을 끊기 위해서는 **[수동 Undocking(물리적 해결) -> Call-Retry(논리적 해결)]**의 순차적인 절차가 필수적이다. 물리적 해결 없이 Retry만 시도할 경우 센서는 여전히 장애물을 감지하여 다시 에러를 발생시킬 것이며, 논리적 해결 없이 물리적 이동만 할 경우 시스템은 로봇의 위치를 소실(Lost)하게 된다.",
        "questions": [
            "BMA 자동화 시스템 내 자율주행 로봇(AMR)의 장애물 감지 메커니즘 및 예외 처리 아키텍처 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "Lidar 센서의 ToF(Time of Flight) 기반 공간 인식 과정과 Safety Zone 설정에 따른 안전 PLC의 인터락 작동 원리, 그리고 금속 설비의 정반사 현상이 센서 퓨전 알고리즘에 미치는 시스템적 상호작용을 공학적으로 분석하시오.",
            "장애물 감지로 인한 자동 복구 실패 시 발생하는 교착 상태(Deadlock) 상황 발생 시, 물리적 구속 해제와 Web ACS를 통한 논리적 리셋이 결합된 시스템의 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 19,
        "preprocessed_group": "[80026] PAUSE_BY_CAMERA_OBSTACLE 에러는 3D 카메라가 감지한 물체가 AMR의 충돌 감지 영역과 겹칠 때 발생하며, 주행 중에는 전면 장애물을, 도킹 중에는 도킹 위치까지의 장애물을 감지한다.\n\n해당 에러는 높이가 있는 공중의 객체도 감지하므로 바닥뿐만 아니라 상부의 장애물 유무를 함께 확인해야 한다.\n\n설비 HMI 패널 등이 AMR 도킹 위치로 돌출되어 장애물로 인식될 경우, 해당 패널의 위치를 이동시켜야 한다.\n\nAMR 주행 경로 상에 늘어진 케이블이나 호스 등의 방해물이 존재할 경우, 이를 즉시 제거해야 한다.\n\n자동 복구 실패 시, 작업자는 로봇 근처 및 도킹 구역 내부에 실제 장애물이 있는지 확인하고 이를 제거해야 한다.\n\n수동 조작이 필요한 경우, 도킹 아웃 시 로봇의 앞면과 옆면의 넓은 영역에서 감지되는 장애물을 모두 제거한 후 운행한다.",
        "textbook": "# 기술 백서: BMA 자동화 시스템의 3D 비전 기반 장애물 감지 및 안전 인터록 메커니즘\n\n## 1. 개요 (Overview)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류 자동화의 핵심인 AMR(Autonomous Mobile Robot)은 복잡한 제조 환경에서 안전하고 정밀한 주행을 보장하기 위해 다중 센서 퓨전(Multi-Sensor Fusion) 기술을 채택하고 있다. 특히, 2D LiDAR가 제공하는 평면적 위치 정보의 한계를 극복하기 위해 도입된 **3D 심도 카메라(Depth Camera)**는 공간의 체적(Volumetric) 정보를 실시간으로 분석하여 주행 경로상의 위험 요소를 사전에 차단한다.\n\n본 챕터에서는 AMR의 비전 시스템이 장애물을 인식하고 주행을 제어하는 논리적 프로세스를 심층 분석하며, 특히 **`[80026] PAUSE_BY_CAMERA_OBSTACLE`** 에러 코드가 발생하는 공학적 원리와 시스템의 대응 메커니즘, 그리고 이에 따른 물리적 환경 최적화 방안을 기술한다.\n\n---\n\n## 2. 3D 비전 센싱 아키텍처와 에러 코드 [80026]의 정의\n\n### 2.1. 에러의 본질: 시스템 방어 기제\n**`[80026] PAUSE_BY_CAMERA_OBSTACLE`**은 단순한 오류가 아니라, AMR의 상위 제어기(Main Controller)가 하위 모션 제어기(Motion Controller)에 보내는 **능동적 안전 인터록(Active Safety Interlock)** 신호이다. 이는 3D 카메라가 수집한 포인트 클라우드(Point Cloud) 데이터 내에서, 사전에 정의된 **충돌 감지 영역(Collision Detection Zone)**과 겹치는 객체(Object)가 식별되었을 때 트리거된다. 즉, 물리적 충돌이 발생하기 전, 시스템이 선제적으로 주행을 중단(Pause)시켜 설비와 배터리 모듈을 보호하는 방어 기제이다.\n\n### 2.2. 공간 인식의 차원 확장 (2D vs 3D)\n기존의 2D LiDAR 센서는 바닥으로부터 특정 높이(예: 20cm)의 단면만을 스캔하므로, 해당 평면 위나 아래에 존재하는 장애물은 인식하지 못하는 '맹점(Blind Spot)'을 가진다. 반면, 본 시스템의 3D 카메라는 **ToF(Time of Flight)** 또는 **스테레오 비전(Stereo Vision)** 방식을 통해 객체의 X, Y 좌표뿐만 아니라 Z축(높이) 정보까지 포함한 3차원 공간 맵을 생성한다. 따라서 `[80026]` 에러는 바닥에 놓인 물체뿐만 아니라, 공중에 돌출된 구조물까지 감지했을 때 발생하며, 이는 고가의 배터리 모듈을 적재한 AMR의 상부 충돌을 방지하는 데 결정적인 역할을 한다.\n\n---\n\n## 3. 작동 모드별 감지 로직 및 동적 ROI (Region of Interest)\n\nAMR의 운용 상태에 따라 3D 카메라의 감지 영역(ROI)은 동적으로 변화하며, 이에 따른 장애물 판별 알고리즘 또한 차별화된 로직을 수행한다.\n\n### 3.1. 일반 주행 모드 (Traveling Mode)\nAMR이 공정 간을 이동하는 고속 주행 상태에서는 **전면 투영 영역(Forward Projection Area)**이 주요 감시 대상이 된다.\n*   **작동 원리:** 로봇의 현재 속도 벡터($v$)와 제동 거리($d$)를 계산하여, 카메라의 감지 심도(Depth)를 가변적으로 조정한다.\n*   **트리거 조건:** 주행 경로(Path Planning) 상에 위치한 동적/정적 장애물이 안전 거리 이내로 진입하면, 시스템은 즉시 감속 프로파일을 생성하고 정지 명령을 내린다.\n\n### 3.2. 도킹 모드 (Docking Mode)\n설비와 물리적으로 접촉하거나 정밀하게 정렬해야 하는 도킹 시퀀스에서는 감지 로직이 더욱 엄격해진다.\n*   **작동 원리:** 도킹 위치까지의 진입 경로를 가상의 **'안전 터널(Safety Tunnel)'**로 설정한다. 이 터널은 AMR의 차체 폭(Width)과 적재된 배터리 모듈의 외형(Envelope)을 포함한 체적 공간이다.\n*   **트리거 조건:** 이 가상의 터널 내에 아주 미세한 장애물이라도 감지될 경우, 정밀 제어 실패나 설비 파손을 막기 위해 즉시 `[80026]`을 발생시키고 도킹 시퀀스를 중단한다.\n\n---\n\n## 4. 환경적 요인에 의한 간섭 및 물리적 인과관계\n\n`[80026]` 에러는 센서의 오작동보다는, AMR이 주행하는 물리적 환경과 로봇의 안전 기준(Safety Margin) 간의 **기하학적 충돌(Geometric Conflict)**에서 기인하는 경우가 많다.\n\n### 4.1. 상부 돌출 구조물 (Z-Axis Obstacles)\n3D 카메라는 바닥면(Ground Plane)을 기준으로 일정 높이 이상의 객체를 모두 장애물로 간주한다.\n*   **설비 HMI 패널:** 작업자의 편의를 위해 설치된 HMI 패널이나 모니터 암(Arm)이 AMR의 도킹 경로 상으로 돌출된 경우, 2D LiDAR는 이를 통과 가능한 공간으로 인식할 수 있으나, 3D 카메라는 이를 **'충돌 가능 객체'**로 판별한다.\n*   **해결책:** 이는 센서 감도 조절의 문제가 아니라 물리적 간섭의 문제이므로, 해당 패널을 AMR의 주행 엔벨로프(Envelope) 밖으로 이격(Retract)시키거나 설비 레이아웃을 수정하여 공간적 마진을 확보해야 한다.\n\n### 4.2. 비정형 장애물 (Unstructured Obstacles)\n공장 바닥에 불규칙하게 놓인 케이블, 호스, 혹은 늘어진 전선 등은 비전 시스템에 있어 **노이즈(Noise)**가 아닌 **실질적 위협(Threat)**으로 분류된다.\n*   **인식 메커니즘:** 가늘고 긴 케이블이라 하더라도 3D 카메라의 해상도 내에서 픽셀 군집(Pixel Cluster)을 형성하면, 장애물 회피 알고리즘은 이를 '주행 불가 영역(Untraversable Area)'으로 마킹한다.\n*   **운영 조치:** 이러한 물체는 AMR의 바퀴에 감겨 구동 모터의 과부하를 유발하거나, 배터리 모듈에 진동을 줄 수 있으므로 즉각적인 제거가 필수적이다.\n\n---\n\n## 5. 시스템 복구 프로세스 및 안전 프로토콜\n\n에러 발생 후 시스템을 정상화하는 과정은 단순한 리셋이 아니라, **'안전 상태 확인(Safety Verification) -> 경로 재계산(Path Replanning) -> 주행 재개(Resume)'**의 논리적 단계를 거친다.\n\n### 5.1. 자동 복구 및 실패 시나리오\n시스템은 일시적인 장애물(예: 지나가는 작업자)이 사라졌는지를 주기적으로 스캔하여 자동 복구를 시도한다. 그러나 장애물이 지속적으로 감지되어 자동 복구 타임아웃(Timeout)이 발생하면, 시스템은 **교착 상태(Deadlock)**를 방지하기 위해 작업자의 개입을 요청하는 알람을 송출한다.\n\n### 5.2. 수동 조작 및 도킹 아웃(Docking Out) 시퀀스\n작업자가 수동으로 장애물을 제거하고 로봇을 복구할 때, 특히 도킹 구역에서 빠져나오는(Docking Out) 상황에서는 다음의 공학적 주의사항이 요구된다.\n*   **전방위 감지 필요성:** 도킹 해제 시 로봇은 제자리 회전(Spot Turn)이나 후진, 혹은 사선 주행(Crab Walk) 등 복합적인 기동을 할 수 있다. 따라서 전면뿐만 아니라 측면(Side)의 사각지대(Blind Spot)까지 포함한 넓은 영역의 장애물을 제거해야 한다.\n*   **로직의 흐름:**\n    1.  작업자가 장애물(케이블, HMI 패널 등) 제거.\n    2.  에러 리셋 신호 인가.\n    3.  3D 카메라가 해당 영역을 재스캔(Rescan)하여 **점유 그리드 맵(Occupancy Grid Map)**을 클리어(Clear).\n    4.  상위 제어기가 주행 가능(Drivable) 상태를 확인 후 모터에 토크 인가.\n\n## 6. 결론\n\n`[80026] PAUSE_BY_CAMERA_OBSTACLE`은 AMR의 3D 비전 시스템이 수행하는 고도화된 공간 분석의 결과값이다. 엔지니어는 이 에러를 단순한 중단으로 인식해서는 안 되며, **Z축을 포함한 3차원 공간 내의 설비 간섭, 비정형 장애물의 존재, 그리고 도킹 정밀도 간의 상관관계**를 이해하고 현장을 최적화해야 한다. 이는 궁극적으로 BMA 공정의 가동률(Availability)을 높이고, 고가의 배터리 모듈과 자동화 설비를 보호하는 핵심적인 운영 원칙이다.",
        "questions": [
            "BMA 자동화 시스템의 3D 비전 기반 장애물 감지 및 안전 인터록 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "2D LiDAR와 차별화되는 3D 심도 카메라의 공간 인식 아키텍처가 주행 및 도킹 모드별 동적 ROI 설정과 결합하여 장애물을 판별하는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "[80026] PAUSE_BY_CAMERA_OBSTACLE 에러 코드 트리거 시, 상부 돌출 구조물이나 비정형 장애물과 같은 환경적 요인이 시스템의 안전 인터록에 미치는 논리적 판단 과정과 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 20,
        "preprocessed_group": "도킹 실패 및 센서 에러는 주로 로봇의 하드웨어인 IR 센서와 설비 측의 물리적 가이드인 도그플레이트 및 V마커 간의 정렬 문제로 인하여 발생한다.",
        "textbook": "# BMA 자동화 시스템의 정밀 도킹 메커니즘과 센서 퓨전(Sensor Fusion) 기반의 에러 인과성 분석\n\n## 1. 서론: 동적 주행과 정적 작업의 임계점\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 자동화 라인에서 AMR(Autonomous Mobile Robot)의 도킹(Docking) 프로세스는 단순한 '정지'가 아닌, 동적인 자율주행 시스템이 정적인 설비(Station)와 물리적/논리적으로 결합되는 가장 중요한 임계점(Critical Junction)이다.\n\n입력된 팩트에서 언급된 **도킹 실패 및 센서 에러**는 표면적으로는 장비의 오작동처럼 보일 수 있으나, 공학적 관점에서 분석하면 **로봇의 하드웨어(IR 센서)**와 **설비 측의 물리적 가이드(도그플레이트, V마커)** 사이의 **기하학적 정렬(Geometric Alignment) 불일치**가 시스템의 허용 공차(Tolerance)를 벗어날 때 발생하는 필연적인 안전 메커니즘의 발동 결과이다. 본 고에서는 이 현상이 발생하는 물리적 원리와 시스템 내부의 논리적 흐름을 심층적으로 분석한다.\n\n## 2. V마커(V-Marker) 기반의 정밀 측위와 기하학적 오차\n\nAMR이 설비에 접근할 때, 1차적인 정밀 유도는 **V마커(V-Marker)**를 통해 이루어진다. 이는 AMR의 네비게이션 알고리즘에 있어 '시각적 기준점(Visual Fiducial)' 역할을 수행한다.\n\n### 2.1. 작동 원리 (Mechanism)\nAMR에 탑재된 Lidar 또는 비전 센서는 설비 하단에 부착된 V마커의 기하학적 형상(V-Shape)을 스캔한다. 센서는 스캔된 포인트 클라우드(Point Cloud) 데이터를 분석하여 V마커의 꼭짓점과 각도를 추출하고, 이를 통해 설비 좌표계(Global Frame) 대비 로봇의 상대적 위치($x, y$)와 헤딩 각도($\\theta$, Yaw)를 실시간으로 연산한다. 이 과정은 로봇이 목표 지점에 정확히 진입하기 위한 피드백 제어 루프(Feedback Control Loop)의 핵심 입력값이 된다.\n\n### 2.2. 정렬 문제의 발생 원인 (Why it fails)\n**정렬 문제(Alignment Problem)**는 로봇의 진입 각도가 알고리즘이 허용하는 임계치를 초과하거나, V마커의 표면 상태가 불량할 때 발생한다.\n*   **광학적 노이즈:** V마커가 오염되거나 주변 조명에 의한 난반사가 발생할 경우, 센서는 V마커의 형상을 명확한 벡터로 인식하지 못한다.\n*   **좌표 변환 실패:** 인식된 마커의 위치와 로봇의 내부 지도(Map) 상의 예상 위치 간의 괴리가 발생하면, 로봇의 주행 제어기(Motion Controller)는 경로 보정을 시도한다. 그러나 이 보정값이 기구학적 제약(Kinematic Constraints)을 벗어나면 로봇은 정지하며 도킹 실패로 이어진다.\n\n## 3. IR 센서와 도그플레이트(Dog Plate)의 상호작용 및 신호 무결성\n\nV마커가 '접근'을 유도한다면, **IR 센서(Infrared Sensor)**와 **도그플레이트(Dog Plate)**는 도킹의 '완료'를 확정 짓는 물리적 핸드쉐이킹(Physical Handshaking) 장치이다.\n\n### 3.1. 광학적 반사 특성과 감지 원리\nAMR 측면에 장착된 IR 센서는 적외선 빔을 방사(Emitter)하고, 설비 측의 도그플레이트에서 반사되어 돌아오는 광량(Receiver)을 측정하여 거리를 감지하거나 접촉 여부를 판단한다. 도그플레이트는 IR 신호의 반사율(Reflectivity)을 극대화하도록 설계된 금속 또는 특수 재질의 플레이트이다.\n\n### 3.2. 정렬 불량에 따른 센서 에러 메커니즘\n입력 텍스트에서 언급된 **'센서 에러'**는 센서 자체의 고장보다는, 정렬 불량으로 인한 **신호 소실(Signal Loss)**인 경우가 대부분이다.\n*   **입사각(Angle of Incidence) 문제:** AMR이 설비와 완벽하게 평행하게 정렬되지 않고 약간의 비틀림(Yaw Error)이 발생한 상태로 진입했다고 가정해보자. 이 경우 IR 센서에서 발사된 빔은 도그플레이트에 수직으로 입사하지 못하고 비스듬히 반사되어, 수신부(Receiver)로 돌아오지 못하고 산란된다.\n*   **거리 공차 이탈:** 도그플레이트와 IR 센서 사이의 거리가 센서의 감지 유효 범위(Effective Range)를 벗어나면(너무 멀거나, 너무 가까워서 Blind Spot에 진입), 센서는 '물체 없음(False Negative)'으로 판독한다.\n\n## 4. 시스템 논리 흐름과 인과관계 (Chain of Causality)\n\n이러한 물리적 현상이 상위 제어 시스템(PLC 및 ACS)에서 어떻게 에러로 처리되는지, 그 논리적 인과관계는 다음과 같다.\n\n1.  **[Action] 도킹 시도:** AMR이 V마커를 인식하고 설비 도킹 위치로 진입한다.\n2.  **[Condition] 물리적 정렬 불량:** 바닥의 요철, 타이어의 슬립, 또는 제어 오차로 인해 AMR의 차체가 설비 가이드(도그플레이트)와 미세하게 어긋난다($\\Delta$Pose 발생).\n3.  **[Trigger] 센서 피드백 실패:**\n    *   Lidar는 V마커의 중심점을 특정하지 못해 정밀 위치 보정에 실패한다.\n    *   IR 센서는 도그플레이트로부터 반사 신호를 수신하지 못한다(Low Signal).\n4.  **[Logic] PLC 인터락(Interlock) 발동:** 설비의 메인 PLC는 \"AMR 도착 신호\"를 수신했음에도 불구하고, 물리적 정렬을 확인하는 \"IR 센서 감지 신호(On)\"가 들어오지 않음을 감지한다. 이는 잠재적인 충돌이나 배터리 모듈 이재(Transfer) 시의 낙하 사고를 유발할 수 있는 위험 상태로 간주된다.\n5.  **[Result] 에러 발생 및 시스템 정지:** PLC는 즉시 안전 로직을 수행하여 해당 공정의 작업을 차단하고, 관제 시스템(ACS)에 **도킹 실패(Docking Failure)** 또는 **센서 에러(Sensor Error)** 알람을 전송한다.\n\n## 5. 결론\n\n결국 BMA 공정에서 발생하는 도킹 및 센서 관련 에러는 단순한 부품의 고장이 아니라, **AMR(IR 센서)과 설비(도그플레이트, V마커) 간의 기하학적 정합성(Geometric Consistency)이 깨졌음을 알리는 시스템의 방어 기제**이다.\n\n엔지니어는 에러 코드 확인 시 단순히 센서를 교체하는 것에 그치지 않고, **V마커의 시인성 확보 여부**, **도그플레이트의 설치 각도**, 그리고 **AMR의 진입 경로 튜닝**을 통해 물리적 정렬 오차를 허용 공차 내로 진입시키는 근본적인 캘리브레이션(Calibration) 작업을 수행해야 한다.",
        "questions": [
            "BMA 자동화 시스템의 정밀 도킹 메커니즘과 센서 퓨전 기반의 에러 인과성 분석 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "V마커를 활용한 시각적 기준점 인식과 IR 센서 및 도그플레이트 간의 물리적 핸드쉐이킹이 전체 도킹 시스템 내에서 어떻게 상호작용하는지 그 흐름을 공학적으로 분석하시오.",
            "AMR의 진입 각도 이탈이나 광학적 노이즈로 인한 정렬 불량 상황 발생 시, PLC 인터락이 발동되는 논리적 판단 과정과 시스템의 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 21,
        "preprocessed_group": "[10015] Docking failure due to IR sensor detection failure 에러는 AMR 밑면에 부착된 IR 센서가 설비 스토퍼의 도그플레이트(Dog Plate)를 정상적으로 감지하지 못할 때 발생한다.\n\n도킹 실패의 주요 원인은 설비 도그플레이트의 파손, V-마커(V-Marker)의 정렬 불량, 또는 AMR IR 센서의 높이 설정 오류 및 동작 이상이다.\n\n자동 복구 실패 시, WEB ACS 상에서 AMR이 올바른 위치에 도킹되었다면 JOB CANCEL과 ERROR RESET을 실행한 후 상태를 After Docking으로 변경하여 작업을 완료 처리한다.\n\n수동 조작이 필요한 경우로서 AMR이 비정상적인 위치에 있다면, JOB CANCEL과 ERROR RESET 실행 후 Move 명령으로 AMR을 Docking-Out 시키고 상태를 Before로 변경하여 재시도를 준비한다.\n\n하드웨어 점검 시에는 도그플레이트의 파손 여부, V-마커의 기울어짐 상태, AMR 하단 IR 센서의 작동 여부 및 높이 적절성을 확인한다.\n\nWEB ACS를 통한 센서 신호 확인 시, 0.3T AMR은 후면 도킹만 가능하며 rear_docking_check_sensor와 front_docking_check_sensor2 항목이 모두 ON 상태여야 도킹 완료(DOCK OK)로 간주한다.\n\nWEB ACS를 통한 센서 신호 확인 시, 1T AMR은 전방 또는 후방 도킹 방향에 따라 front_docking_check_sensor1 또는 rear_docking_check_sensor가 ON 상태여야 도킹 완료(DOCK OK)로 간주한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 정밀 도킹 메커니즘과 센서 퓨전 아키텍처\n## Technical Whitepaper: Precision Docking Mechanism & Sensor Fusion Architecture\n\n### 1. 서론: 도킹 프로세스와 에러 [10015]의 시스템적 정의\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류의 핵심인 AMR(Autonomous Mobile Robot)은 단순한 운송 수단을 넘어, 설비와 물리적으로 결합(Docking)하여 공정을 수행하는 정밀 메카트로닉스 시스템입니다. 이 과정에서 발생하는 **[10015] Docking failure due to IR sensor detection failure** 에러는 단순한 센서 오작동이 아닌, **'AMR의 물리적 위치 정보'와 '설비의 수광부(Receiver) 간의 핸드쉐이킹(Handshaking) 실패'**를 의미하는 치명적 예외 상황(Critical Exception)입니다.\n\n본 챕터에서는 AMR 하부의 IR(Infrared) 센서와 설비 측 도그플레이트(Dog Plate) 간의 상호작용 원리를 광학적, 기구학적 관점에서 분석하고, 0.3T 및 1T 모델별로 상이한 센서 로직과 이에 따른 시스템 복구 전략(Recovery Strategy)을 심층적으로 다룹니다.\n\n---\n\n### 2. 광학적 정렬과 기구학적 상관관계 (Opto-Mechanical Alignment)\n\n#### 2.1. IR 센서와 도그플레이트의 상호작용 원리\nAMR의 도킹 시스템은 **조동(Coarse Positioning)**과 **미동(Fine Positioning)**의 2단계로 이루어집니다. 라이다(Lidar) 기반의 SLAM이 AMR을 설비 근처로 유도하면, 최종적인 물리적 결합 확인은 AMR 밑면에 부착된 IR 센서가 담당합니다.\n\n*   **작동 메커니즘:** IR 센서는 특정 파장(Wavelength)의 적외선을 방사(Emitter)하고, 설비 스토퍼에 장착된 **도그플레이트(Dog Plate)**에서 반사되어 돌아오는 광량을 수광부(Receiver)에서 감지합니다.\n*   **도그플레이트의 역할:** 도그플레이트는 단순한 금속판이 아니라, IR 신호의 난반사를 최소화하고 입사각에 따른 반사 효율을 극대화하도록 설계된 **기준 반사체(Reference Reflector)**입니다.\n*   **에러 발생 원리:** [10015] 에러는 수광된 IR 신호의 세기(Intensity)가 임계값(Threshold) 미만이거나, 신호가 전혀 감지되지 않을 때 트리거됩니다. 이는 물리적으로 AMR이 정해진 도킹 좌표(Coordinate)에 도달하지 못했거나, 광학적 경로(Optical Path)가 차단되었음을 시사합니다.\n\n#### 2.2. V-마커(V-Marker)와 주행 정밀도의 인과성\n도킹 실패의 근본 원인(Root Cause) 중 하나로 지목되는 **V-마커의 정렬 불량**은 AMR의 진입 벡터(Approach Vector)에 직접적인 영향을 미칩니다.\n\n*   **기하학적 오차의 증폭:** V-마커는 AMR의 라이다 센서가 인식하는 유도 표식입니다. 만약 V-마커가 물리적으로 기울어져 있거나 오염되어 있다면, AMR의 네비게이션 알고리즘은 잘못된 좌표를 목표점으로 계산합니다.\n*   **결과적 현상:** AMR은 자신의 위치가 정확하다고 판단하여 진입하지만, 실제로는 미세한 각도(Yaw) 틀어짐이나 측면 변위(Lateral Offset)가 발생합니다. 이로 인해 AMR 하부의 IR 센서가 도그플레이트의 유효 반사 영역(Effective Reflection Area)을 벗어나게 되어 [10015] 에러를 유발합니다. 즉, **네비게이션 단계의 오차가 센서 검증 단계의 실패로 전이**되는 구조입니다.\n\n---\n\n### 3. 차종별 센서 퓨전 로직 및 데이터 흐름 (Sensor Fusion Logic & Data Flow)\n\nAMR의 기종(Payload Capacity)에 따라 도킹을 판단하는 센서의 구성과 논리 회로(Logic Gate)가 상이하게 설계되어 있습니다. 이는 각 로봇의 기구학적 특성과 주행 방향성을 반영한 결과입니다.\n\n#### 3.1. 0.3T AMR: 단방향 도킹과 AND 로직\n0.3T 모델은 구조적으로 **후면 도킹(Rear Docking)**만을 지원하도록 설계되었습니다. 따라서 안전 무결성(Safety Integrity)을 확보하기 위해 이중화된 센서 검증 로직을 사용합니다.\n\n*   **논리 조건 (Boolean Logic):**\n    $$ \\text{Docking Status} = \\text{rear\\_docking\\_check\\_sensor} \\land \\text{front\\_docking\\_check\\_sensor2} $$\n*   **작동 원리:** WEB ACS(Automated Control System)는 두 개의 센서 신호가 **동시에 ON(High)** 상태가 될 때만 `DOCK OK` 플래그를 생성합니다.\n    *   `rear_docking_check_sensor`: 후면부가 설비에 밀착되었는지 확인.\n    *   `front_docking_check_sensor2`: 차체의 정렬 상태(Alignment)가 평행한지 보조적으로 검증.\n*   **시사점:** 두 센서 중 하나라도 OFF 상태라면, AMR이 비스듬하게 진입했거나 완전히 밀착되지 않은 상태로 간주하여 시스템은 도킹 완료 승인을 거부합니다.\n\n#### 3.2. 1T AMR: 양방향 도킹과 선택적 로직\n1T 모델은 고중량 배터리 모듈을 운송하며, 공정 효율을 위해 **전방(Front) 및 후방(Rear) 도킹**을 모두 지원합니다. 이에 따라 제어 시스템은 현재 수행 중인 작업(Job)의 방향성에 따라 센서 입력을 선택적으로 수용합니다.\n\n*   **논리 조건 (Conditional Logic):**\n    *   **Case A (전방 진입):** `front_docking_check_sensor1` == ON $\\rightarrow$ `DOCK OK`\n    *   **Case B (후방 진입):** `rear_docking_check_sensor` == ON $\\rightarrow$ `DOCK OK`\n*   **데이터 흐름:** PLC 또는 상위 제어기는 현재 AMR의 주행 모드(Direction Mode)를 변수로 가지고 있으며, 이에 맞춰 활성화할 센서 채널을 스위칭합니다. 이는 불필요한 센서 신호 간섭을 배제하고, 타겟 방향의 도킹 신뢰성을 확보하기 위한 알고리즘입니다.\n\n---\n\n### 4. 예외 처리 및 시스템 복구 전략 (Exception Handling & Recovery)\n\n[10015] 에러 발생 시, 시스템은 자동 복구를 시도하지만 실패할 경우 운영자의 개입을 통한 상태 머신(State Machine)의 강제 전이가 필요합니다. 이 과정은 물리적 상태와 논리적 상태의 동기화(Synchronization)를 목표로 합니다.\n\n#### 4.1. 논리적 강제 할당 (Logical Override)\nAMR이 물리적으로는 정확한 위치에 도킹되었으나, 센서 노이즈나 일시적 통신 지연으로 에러가 발생한 경우입니다.\n\n1.  **Job Cancel & Error Reset:** 현재 수행 중인 작업 큐(Queue)를 비우고, 에러 레지스터를 소거(Clear)하여 시스템을 대기 상태로 만듭니다.\n2.  **State Forcing (After Docking):** WEB ACS 상에서 AMR의 상태를 강제로 `After Docking`으로 변경합니다. 이는 **\"센서 검증 단계를 소프트웨어적으로 바이패스(Bypass)하고, 물리적 결합이 완료된 것으로 간주하라\"**는 명령입니다. 이를 통해 공정 중단 없이 다음 시퀀스(배터리 로딩/언로딩)로 진입할 수 있습니다.\n\n#### 4.2. 물리적 재시도 (Physical Retry)\nAMR이 도그플레이트를 벗어난 위치(비정상 위치)에 정지해 있는 경우, 소프트웨어적 조치만으로는 해결이 불가능합니다.\n\n1.  **Docking-Out (Move 명령):** `Move` 명령을 통해 AMR을 도킹 스테이션에서 물리적으로 이탈시킵니다. 이는 잘못된 진입 벡터를 초기화하고, 새로운 경로 계획(Path Planning)을 수립하기 위한 공간을 확보하는 과정입니다.\n2.  **State Initialization (Before):** 상태를 `Before`로 변경하여, AMR이 도킹 시퀀스를 처음부터(V-마커 인식 단계부터) 다시 수행하도록 로직을 리셋합니다.\n\n#### 4.3. 하드웨어 유지보수 프로토콜\n반복적인 [10015] 에러는 하드웨어의 열화나 파손을 시사합니다. 엔지니어는 다음 항목에 대한 정밀 검사를 수행해야 합니다.\n\n*   **도그플레이트 무결성:** 표면 스크래치나 파손은 IR 반사율을 저하시키므로 교체가 필요합니다.\n*   **V-마커 기하학적 정렬:** 레이저 레벨기 등을 이용하여 마커의 수직/수평 기울기를 교정해야 합니다.\n*   **IR 센서 캘리브레이션:** 센서의 설치 높이(Z축)는 초점 거리(Focal Length)와 직결되므로, 설계 사양에 맞는 정확한 높이 조절이 필수적입니다.\n\n### 5. 결론\n\n[10015] 에러는 AMR과 설비 간의 물리적 인터페이스가 불일치할 때 발생하는 시스템의 방어 기제입니다. 엔지니어는 단순한 에러 소거를 넘어, IR 센서의 광학적 특성, 0.3T/1T 모델별 센서 로직의 차이, 그리고 V-마커와 도그플레이트 간의 기구학적 정렬 상태를 종합적으로 이해하고 접근해야 합니다. 이러한 시스템적 사고(System Thinking)만이 BMA 공정의 가동률(Availability)을 극대화하는 핵심 열쇠가 될 것입니다.",
        "questions": [
            "BMA 자동화 시스템의 AMR 정밀 도킹 메커니즘과 센서 퓨전 아키텍처 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR 하부 IR 센서와 설비 측 도그플레이트 간의 광학적 상호작용 원리 및 V-마커의 기하학적 정렬이 전체 도킹 시스템의 진입 벡터에 미치는 영향력을 공학적으로 분석하시오.",
            "[10015] 도킹 실패 에러 발생 시, AMR 기종별(0.3T, 1T) 센서 로직의 차이에 따른 시스템의 논리적 판단 과정과 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 22,
        "preprocessed_group": "AMR의 도킹 시도 중 진입 각도(Heading)가 허용 오차 범위를 초과하여 도킹이 중단된 경우, WEB ACS에서 Job Cancel을 클릭하여 작업을 취소한다.\n\n자동 복구 실패 시, AMR을 수동(Manual/JOG)으로 조작하여 도킹 스테이션에서 완전히 빠져나오도록(Docking-Out) 조치한다.\n\n수동 조작이 완료된 후에는 CALL-RETRY를 클릭하여 AMR의 도킹을 처음부터 다시 시도한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: AMR 정밀 도킹 메커니즘과 예외 상황 복구 프로토콜\n**Technical Whitepaper: Precision Docking Mechanisms and Exception Recovery Protocols in AMR Systems**\n\n---\n\n## 1. 서론: 정밀 도킹의 기구학적 제약과 시스템 안전성\nBMA(Battery Module Assembly) 공정 내 물류 자동화의 핵심인 AMR(Autonomous Mobile Robot)은 단순한 이송을 넘어, 설비와의 물리적 접촉(Charging, Loading/Unloading)을 수행해야 합니다. 이 과정에서 가장 임계적인 변수는 로봇의 위치($x, y$)와 더불어 **진입 각도(Heading, $\\theta$)**의 정합성입니다.\n\n본 챕터에서는 AMR이 도킹 스테이션에 진입할 때 발생하는 헤딩(Heading) 오차의 발생 원인과 이를 제어하는 ACS(Autonomous Control System)의 논리적 흐름, 그리고 자동 복구 실패 시 수행되는 수동 개입(Manual Intervention)의 공학적 원리를 심층적으로 분석합니다.\n\n---\n\n## 2. 도킹 진입 각도(Heading) 오차와 안전 인터록(Safety Interlock)\nAMR이 도킹 스테이션의 V-Marker 또는 반사판(Reflector)을 인식하고 접근할 때, 시스템은 실시간으로 로봇의 현재 자세(Current Pose)와 목표 자세(Target Pose) 간의 편차를 계산합니다.\n\n### 2.1. 헤딩 오차의 발생 메커니즘\n도킹 시도는 고정밀 제어가 요구되는 작업입니다. 그러나 바닥의 마찰 계수 변화, 바퀴의 미세한 슬립(Slip), 혹은 IMU(관성 측정 장치)의 드리프트(Drift) 현상으로 인해 로봇의 실제 진입 각도가 허용 오차(Tolerance Threshold) 범위를 초과하는 현상이 발생할 수 있습니다.\n\n*   **기하학적 불일치:** AMR의 충전 단자나 컨베이어 벨트가 설비와 정확히 맞물리기 위해서는 $\\theta$ 값이 허용 오차(예: $\\pm 1^\\circ$ 이내)로 수렴해야 합니다.\n*   **인터록 발동:** 만약 진입 각도가 이 범위를 초과할 경우, 물리적 충돌이나 커넥터 파손을 방지하기 위해 로봇의 모션 제어기(Motion Controller)는 즉시 구동 모터에 정지 신호를 인가합니다. 이는 시스템 보호를 위한 **Fail-Safe** 동작입니다.\n\n### 2.2. WEB ACS를 통한 작업 취소(Job Cancel)의 논리적 의미\n도킹이 중단된 상태에서 시스템은 '에러(Error)' 상태로 래치(Latch)됩니다. 이때 운영자가 **WEB ACS** 인터페이스에서 **Job Cancel**을 실행하는 것은 단순한 취소가 아니라 다음과 같은 시스템 리셋 과정을 의미합니다.\n\n1.  **명령 큐(Command Queue) 소거:** 현재 수행 불가능한 도킹 명령을 메모리에서 삭제하여, 로봇이 잘못된 경로 계산을 반복하는 것을 방지합니다.\n2.  **상태 천이(State Transition):** 로봇의 상태를 'Error'에서 'Idle(대기)' 또는 'Ready' 상태로 강제 전환하여 새로운 명령을 수신할 수 있는 논리적 준비 상태로 만듭니다.\n\n---\n\n## 3. 교착 상태(Deadlock)와 수동 조작(Manual/JOG)을 통한 물리적 복구\n시스템의 자동 복구 알고리즘(Auto-Recovery)이 실패하는 주된 이유는 로봇이 **'기구학적 교착 상태(Kinematic Deadlock)'**에 빠졌기 때문입니다.\n\n### 3.1. 자동 복구 실패의 원인: 국소 최저점(Local Minima)\n도킹 스테이션 내부는 공간이 협소하여 장애물 회피를 위한 경로 생성(Path Planning)이 제한적입니다. 헤딩 오차로 멈춘 위치가 센서의 사각지대(Blind Spot)이거나, 회전 반경이 확보되지 않는 위치일 경우, 자율 주행 알고리즘은 유효한 탈출 경로를 계산하지 못하고 제자리에서 연산을 반복하는 무한 루프(Local Minima)에 빠지게 됩니다.\n\n### 3.2. 수동 조작(Manual/JOG)의 공학적 원리\n이러한 교착 상태를 해소하기 위해 **수동(Manual/JOG)** 모드로 전환하는 것은, 로봇의 제어 권한을 '자율 주행 알고리즘(Closed-Loop Control)'에서 '운영자 직접 제어(Open-Loop Control)'로 이관하는 것을 의미합니다.\n\n*   **알고리즘 바이패스(Bypass):** 장애물 감지 및 경로 생성 로직을 일시적으로 우회하여, 운영자가 조이스틱이나 UI 버튼을 통해 모터에 직접 PWM 신호를 인가합니다.\n*   **Docking-Out (물리적 이탈):** 운영자는 로봇을 후진 또는 회전시켜 도킹 스테이션의 간섭 영역(Interference Zone)에서 완전히 벗어나게 합니다. 이는 로봇의 Lidar 센서가 주변 지형지물(Feature)을 다시 온전하게 스캔할 수 있는 **'인식 가능한 공간(Recognizable Space)'**을 확보하기 위함입니다.\n\n---\n\n## 4. 시스템 재초기화 및 재진입 프로토콜 (CALL-RETRY)\n로봇이 도킹 스테이션에서 물리적으로 이탈(Docking-Out)하여 안전한 위치를 확보했다면, 시스템은 다시 자율 주행 모드로 복귀해야 합니다. 이때 수행하는 **CALL-RETRY** 명령은 단순한 재시도가 아닌, 전체 도킹 시퀀스의 **재초기화(Re-initialization)** 과정입니다.\n\n### 4.1. 위치 재추정(Relocalization)과 경로 재생성\n**CALL-RETRY** 신호가 인가되면 AMR 내부의 내비게이션 스택은 다음과 같은 순차적 로직을 수행합니다.\n\n1.  **글로벌 로컬라이제이션(Global Localization):** 현재 위치의 Lidar 스캔 데이터를 저장된 맵(Map) 데이터와 대조하여, 로봇의 절대 좌표($x, y, \\theta$)를 다시 확정합니다. 수동 조작 중 발생했을 수 있는 위치 오차(Odometry Error)를 보정하는 단계입니다.\n2.  **궤적 재계산(Trajectory Replanning):** 현재 위치에서 도킹 스테이션의 타겟 지점까지의 최적 경로를 다시 생성합니다. 이때 초기 진입 실패의 원인이었던 진입 각도를 수정하여, 더 완만한 곡률(Curvature)을 가진 진입 경로를 계획합니다.\n3.  **핸드쉐이킹 재시도:** 상위 관제 시스템(ACS) 및 설비 PLC와 통신을 재개하여 도킹 작업의 시작을 알리고, 정밀 주행 모드로 전환합니다.\n\n### 4.2. 결론\n따라서, \"Job Cancel $\\rightarrow$ Manual/JOG Docking-Out $\\rightarrow$ CALL-RETRY\"로 이어지는 일련의 과정은 단순한 에러 조치 매뉴얼이 아닙니다. 이는 **[소프트웨어적 리셋] $\\rightarrow$ [물리적 교착 상태 해소] $\\rightarrow$ [알고리즘 재초기화]**라는 논리적 인과관계에 기반하여, 자동화 시스템의 연속성과 안전성을 보장하는 표준 엔지니어링 프로토콜입니다.",
        "questions": [
            "BMA 자동화 시스템 내 AMR의 정밀 도킹 메커니즘과 예외 상황 발생 시의 복구 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "도킹 진입 과정에서 발생하는 헤딩(Heading) 오차의 기구학적 발생 원인과, 이를 보정하기 위한 ACS의 논리적 상태 천이 및 위치 재추정(Relocalization) 시스템적 상호작용을 공학적으로 분석하시오.",
            "기구학적 교착 상태(Kinematic Deadlock)로 인한 자동 복구 실패 상황 발생 시, 수동 조작을 통한 알고리즘 바이패스와 CALL-RETRY 명령이 시스템을 재초기화하는 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 23,
        "preprocessed_group": "AMR이 도킹 시도 중 맵(Map) 상의 티칭 좌표와 로봇 센서가 실제로 감지한 V-마커(V-Marker)의 위치가 일치하지 않아 도킹 대상을 찾지 못할 경우 [80018] ERROR_DOCK_NOT_FIND 에러가 발생한다.\n\nV-마커(V-Marker)가 수평 또는 수직 방향으로 정렬되지 않고 비뚤어지면 AMR의 도킹 실패 원인이 되며, 작업자는 이동 중 V-마커를 밟거나 강한 충격을 주어 위치가 변형되지 않도록 주의해야 한다.\n\n자동 복구 실패 시, 작업자는 WEB ACS에서 Job Cancel을 클릭하여 작업을 취소한 후 AMR을 수동으로 조작하여 도킹 스테이션에서 빠져나와(Docking-Out) 도킹 전(Before Docking) 상태로 되돌려야 한다.\n\n동일한 도킹 에러가 반복적으로 발생하는 경우, V-마커(V-Marker)의 정렬 상태를 교정하거나 마커를 교체해야 한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 정밀 도킹 메커니즘과 예외 처리 아키텍처\n\n## 1. 서론: 자율주행 로봇의 정밀 측위와 도킹 알고리즘\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정에서 운용되는 AMR(Autonomous Mobile Robot)은 단순한 물류 이송을 넘어, 고중량의 배터리 모듈을 마이크로미터 단위의 정밀도로 설비에 인계해야 하는 고난도 작업을 수행합니다. 이 과정에서 가장 핵심적인 기술은 **'정밀 도킹(Precision Docking)'**입니다.\n\n일반 주행 시 AMR은 SLAM(Simultaneous Localization and Mapping) 기술을 통해 자신의 위치를 추정하지만, 설비와의 물리적 접촉이 이루어지는 도킹 단계에서는 더욱 높은 신뢰성을 요구합니다. 이를 위해 시스템은 **V-마커(V-Marker)**라는 수동형 광학/형상 기준점(Fiducial Marker)을 활용하여, '글로벌 맵 좌표(Global Map Coordinate)'와 '로컬 센싱 데이터(Local Sensing Data)' 간의 정합성을 실시간으로 검증합니다.\n\n본 챕터에서는 도킹 프로세스 중 발생하는 위치 인식 불일치 현상인 `[80018] ERROR_DOCK_NOT_FIND`의 발생 메커니즘과 물리적 원인, 그리고 시스템의 논리적 복구 절차에 대해 심층적으로 기술합니다.\n\n---\n\n## 2. 도킹 에러 [80018]의 논리적 인과관계 및 발생 메커니즘\n\n### 2.1. 좌표 정합성 검증 프로세스 (Coordinate Matching Process)\nAMR이 도킹 스테이션에 접근할 때, 내장된 내비게이션 컨트롤러는 두 가지 데이터 소스를 비교합니다.\n1.  **티칭 좌표(Teaching Coordinate):** 시스템 구축 시 엔지니어가 사전에 정의한 이상적인 도킹 위치 (Global Map 상의 데이터).\n2.  **센싱 좌표(Sensing Coordinate):** AMR의 LiDAR 또는 비전 센서가 실시간으로 스캔하여 획득한 V-마커의 상대적 위치 및 각도.\n\n정상적인 시나리오에서 AMR은 센서로 인식한 V-마커의 형상을 기반으로 자신의 위치 오차를 미세 보정(Fine-tuning)하며 진입합니다.\n\n### 2.2. [80018] ERROR_DOCK_NOT_FIND의 트리거 조건\n`[80018] ERROR_DOCK_NOT_FIND` 에러는 단순한 '탐색 실패'가 아니라, **\"예측된 모델과 관측된 데이터 간의 불일치(Mismatch)\"**를 의미합니다. 시스템 내부 로직은 다음과 같은 순서로 이 에러를 트리거합니다.\n\n1.  **Scan & Extract:** AMR이 도킹 모드에 진입하여 전방의 V-마커 형상을 스캔합니다.\n2.  **Feature Matching:** 스캔된 포인트 클라우드(Point Cloud) 데이터에서 'V'자 형태의 기하학적 특징을 추출합니다.\n3.  **Threshold Validation:** 추출된 특징점이 사전에 티칭된 좌표 범위(Tolerance) 내에 존재하는지 연산합니다.\n4.  **Exception Throw:** 만약 감지된 마커의 위치가 허용 임계값을 벗어나거나, 노이즈로 인해 V자 형상을 특정할 수 없는 경우, 내비게이션 알고리즘은 **\"유효한 타겟 없음(Target Invalid)\"**으로 판정하고 즉시 `[80018]` 예외 코드를 송출합니다.\n\n이는 잘못된 위치로 진입하여 고가의 배터리 모듈이나 설비와 충돌하는 것을 방지하기 위한 **Fail-Safe(안전 차단)** 메커니즘의 일환입니다.\n\n---\n\n## 3. 물리적 변수: V-마커의 기하학적 무결성과 센서 데이터의 왜곡\n\n### 3.1. V-마커의 공학적 특성과 정렬의 중요성\nV-마커는 AMR의 LiDAR 센서가 입사각에 따른 반사파를 분석하여 거리와 각도를 계산할 수 있도록 특수하게 설계된 반사판 혹은 형상물입니다. 따라서 마커의 **기하학적 무결성(Geometric Integrity)**은 도킹 성공의 필수 조건입니다.\n\n*   **수평/수직 정렬(Alignment):** 마커는 바닥면과 완벽한 수직을 이루고, 진입 경로와 정확한 각도로 정렬되어야 합니다.\n*   **형상 인식 알고리즘:** AMR은 마커의 꺾인 각도(V-Shape)와 깊이(Depth) 정보를 통해 자신의 헤딩(Heading) 각도를 계산합니다.\n\n### 3.2. 물리적 변형에 의한 데이터 왜곡\n현장 데이터 분석 결과, `[80018]` 에러의 주된 물리적 원인은 **마커의 변형**입니다.\n*   **외력에 의한 변형:** 작업자가 이동 중 마커를 밟거나, 지게차 등 다른 물류 장비가 강한 충격을 가할 경우 마커의 미세한 휨(Bending)이나 비틀림(Torsion)이 발생합니다.\n*   **센싱 실패:** 육안으로는 미미해 보이는 변형이라도, 고정밀 LiDAR 센서 입장에서는 반사되는 레이저의 산란 패턴이 달라지게 됩니다. 이는 알고리즘이 해당 물체를 \"정상적인 V-마커\"로 인식하지 못하고 \"장애물\" 또는 \"노이즈\"로 분류하게 만들어 도킹 시도를 중단시킵니다.\n\n따라서, 반복적인 에러 발생 시 소프트웨어적 튜닝보다는 마커의 물리적 상태를 점검하고 교정(Calibration)하거나 교체하는 하드웨어 유지보수가 선행되어야 합니다.\n\n---\n\n## 4. 시스템 복구 프로토콜 및 상태 머신(State Machine) 리셋\n\n자동 복구(Auto-Recovery) 알고리즘이 실패하여 교착 상태(Deadlock)에 빠진 경우, 운영자는 시스템의 상태 머신을 초기화하기 위해 다음과 같은 수동 복구 절차를 수행해야 합니다.\n\n### 4.1. 논리적 리셋: WEB ACS를 통한 Job Cancel\n상위 관제 시스템인 **WEB ACS(Activity Control System)**에서의 `Job Cancel` 명령은 단순한 취소가 아닙니다.\n*   **Command Queue Flushing:** 현재 AMR에 할당된 도킹 명령 스택을 강제로 비웁니다(Flush).\n*   **Error Flag Reset:** PLC 및 로봇 제어기에 설정된 `[80018]` 에러 플래그를 소거(Clear)하여, 로봇이 다시 제어 가능한 'Idle' 상태로 전환되도록 합니다.\n\n### 4.2. 물리적 리셋: 수동 조작 및 Docking-Out\n논리적 리셋 후에도 로봇은 여전히 '에러가 발생한 물리적 위치'에 머물러 있습니다. 이 위치에서는 센서 데이터의 신뢰성을 담보할 수 없으므로, 위치 재설정(Relocalization)이 필요합니다.\n\n1.  **Manual Operation:** 작업자는 AMR을 수동 조작 모드로 전환합니다.\n2.  **Docking-Out:** 로봇을 도킹 스테이션의 간섭 영역 밖으로 물리적으로 이동시킵니다.\n3.  **State Restoration:** 로봇을 **'도킹 전(Before Docking)'** 상태의 위치로 되돌립니다. 이는 로봇이 주변의 랜드마크를 다시 스캔하여 자신의 전역 위치(Global Localization)를 확정하고, 깨끗한 상태에서 도킹 알고리즘을 처음부터 다시 수행할 수 있도록 하는 **'콜드 스타트(Cold Start)'** 전략입니다.\n\n## 5. 결론\n\n`[80018] ERROR_DOCK_NOT_FIND`는 AMR 시스템이 설비와의 정밀 도킹을 수행하기 위해 요구하는 엄격한 기하학적 조건이 충족되지 않았음을 알리는 신호입니다. 이는 센서, 알고리즘, 그리고 물리적 환경(V-마커)의 상호작용 결과입니다.\n\n엔지니어는 이 에러를 단순한 작동 멈춤으로 인식해서는 안 되며, **V-마커의 물리적 정렬 상태가 시스템의 데이터 무결성에 미치는 영향**을 이해해야 합니다. 주기적인 마커 관리와 정확한 복구 프로토콜 준수만이 BMA 공정의 가동률(Availability)과 안전을 보장할 수 있습니다.",
        "questions": [
            "BMA 공정 내 AMR의 정밀 도킹 메커니즘과 V-마커 기반의 위치 보정 시스템, 그리고 예외 상황 발생 시의 복구 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "도킹 과정에서 LiDAR 센서가 획득한 포인트 클라우드 데이터와 사전 티칭된 좌표 모델 간의 정합성을 검증하는 알고리즘의 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "[80018] ERROR_DOCK_NOT_FIND 에러 발생 시 V-마커의 기하학적 변형이 데이터 왜곡에 미치는 영향과, 이를 해결하기 위한 논리적 판단 과정 및 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 24,
        "preprocessed_group": "AMR의 기구적 특성인 Box Conveyor 또는 Pallet Lift 방식에 따라 발생하는 모델별 특화 에러를 확인하고, 자동 복구 실패 시 각 기구부의 특성에 맞는 조치 방법을 수행한다.",
        "textbook": "# BMA 물류 자동화 시스템의 기구적 아키텍처와 에러 핸들링 메커니즘 (Mechanical Architecture and Error Handling Mechanisms)\n\n## 1. 서론: 이종(Heterogeneous) 기구 시스템의 통합 제어 전략\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류 자동화는 단순한 자재의 이동을 넘어, 공정의 사이클 타임(Cycle Time)과 생산 수율을 결정짓는 핵심 요소이다. 이 시스템의 중추인 AMR(Autonomous Mobile Robot)은 운송 대상물의 물리적 특성과 공정 요구사항에 따라 크게 **Box Conveyor** 타입과 **Pallet Lift** 타입이라는 상이한 기구적(Mechanical) 아키텍처로 이원화되어 운영된다.\n\n본 장에서는 이 두 가지 기구적 특성이 시스템 제어 로직(Control Logic) 및 센서 데이터 처리(Sensor Data Processing)와 어떻게 상호작용하는지 분석하고, 각 모델별로 발생하는 특화 에러의 공학적 원인과 이에 따른 복구 프로토콜의 논리적 인과관계를 심층적으로 기술한다.\n\n---\n\n## 2. Box Conveyor 타입 AMR: 수평 이송 동기화와 핸드쉐이킹 로직\n\n### 2.1. 기구적 작동 원리 및 데이터 흐름\nBox Conveyor 타입 AMR은 배터리 모듈이나 부품이 담긴 트레이(Tray)를 설비(Equipment)와 AMR 간에 수평으로 이송(Transfer)하는 역할을 수행한다. 이 과정은 단순한 모터 구동이 아닌, AMR의 PLC와 설비 측 PLC 간의 정밀한 **핸드쉐이킹(Handshaking) 프로토콜**에 의해 제어된다.\n\n1.  **물리 계층 (Physical Layer):** 롤러(Roller) 또는 벨트 구동 모터가 마찰력을 이용하여 트레이를 이동시킨다. 이때 트레이의 진입/진출 시점은 광전 센서(Photoelectric Sensor)를 통해 실시간으로 감지된다.\n2.  **논리 계층 (Logical Layer):** AMR은 설비에 도킹(Docking) 후 `Ready_to_Transfer` 신호를 송출하고, 설비로부터 `Ready_to_Receive` 신호를 수신해야만 구동 모터에 전원을 인가한다.\n\n### 2.2. 모델별 특화 에러의 인과관계 분석\nBox Conveyor 방식에서 발생하는 에러는 주로 **'신호 동기화 실패'** 또는 **'물리적 걸림(Jamming)'**에 기인한다.\n\n*   **이송 타임아웃 (Transfer Timeout):**\n    *   **현상:** 모터가 구동되었음에도 불구하고, 지정된 시간($T_{limit}$) 내에 트레이가 목표 센서 위치에 도달하지 못함.\n    *   **공학적 원인:** 트레이 하부와 롤러 간의 마찰 계수 부족(Slip 발생), 트레이의 기구적 변형으로 인한 가이드 간섭, 또는 모터의 토크(Torque) 부족이 원인이 된다.\n    *   **시스템 판단:** 제어기는 이를 물리적 이송 실패로 간주하여 즉시 구동을 중단하고 에러 플래그(Flag)를 생성한다. 이는 무리한 구동으로 인한 트레이 파손이나 낙하를 방지하기 위한 안전 로직(Fail-safe Logic)이다.\n\n*   **센서 정합성 오류 (Sensor Mismatch):**\n    *   **현상:** 입/출력 센서가 동시에 감지되거나, 논리적으로 불가능한 시퀀스로 센서가 트리거되는 경우.\n    *   **원인:** 센서 표면의 오염(먼지, 오일)으로 인한 난반사 또는 트레이의 위치가 어중간하게 걸쳐 있는 상태(Floating State)에서 발생한다.\n\n---\n\n## 3. Pallet Lift 타입 AMR: 수직 하중 제어와 무게중심 역학\n\n### 3.1. 기구적 작동 원리 및 데이터 흐름\nPallet Lift 타입 AMR은 고중량의 배터리 팩이나 대형 팔레트를 들어 올려(Jack-up) 이동하는 방식을 취한다. 이는 Z축 제어(Vertical Control)가 핵심이며, 유압 또는 전동 액추에이터(Actuator)를 통해 리프팅 플레이트를 승하강시킨다.\n\n1.  **물리 계층 (Physical Layer):** 리프트 기구부는 고하중을 지지하기 위해 높은 기어비(Gear Ratio)를 가진 모터나 유압 실린더를 사용한다. 리프트의 상한(Top)과 하한(Bottom)은 리미트 스위치(Limit Switch) 또는 엔코더(Encoder) 값을 통해 제어된다.\n2.  **역학적 고려 (Dynamics):** 리프팅 시 팔레트의 무게중심(Center of Gravity, CoG)이 AMR의 기저면(Base of Support) 내에 위치해야 전복을 방지할 수 있다.\n\n### 3.2. 모델별 특화 에러의 인과관계 분석\nPallet Lift 방식의 에러는 **'Z축 위치 제어 실패'** 및 **'하중 불균형'**과 밀접한 관련이 있다.\n\n*   **리프팅/하강 타임아웃 (Lifting/Lowering Timeout):**\n    *   **현상:** 리프트 동작 명령 후 일정 시간 내에 리미트 스위치 신호가 입력되지 않음.\n    *   **공학적 원인:** 적재된 배터리의 하중이 액추에이터의 정격 용량을 초과하여 모터가 구속(Stall)되거나, 기구부의 윤활 부족으로 인한 마찰력 증대가 원인일 수 있다. 또한, 배터리 적재 위치가 편중되어 리프트 가이드에 편하중(Eccentric Load)이 걸려 기구적 끼임(Binding)이 발생했을 가능성이 높다.\n    *   **시스템 판단:** 시스템은 이를 액추에이터 과부하 상태로 판단하여 전원을 차단, 모터 소손 및 유압 누유를 방지한다.\n\n*   **팔레트 안착 감지 실패 (Pallet Detection Failure):**\n    *   **현상:** 리프트 상승 시 팔레트가 감지되지 않거나, 하강 후에도 팔레트가 분리되지 않음.\n    *   **원인:** AMR이 팔레트 하부로 진입할 때의 위치 정밀도(Navigation Accuracy) 오차로 인해 리프트 포인트가 어긋났거나, 팔레트 자체의 치수 변형이 원인이다.\n\n---\n\n## 4. 시스템 복구 전략: 자동 복구의 한계와 수동 조치 프로토콜\n\n시스템은 에러 발생 시 1차적으로 소프트웨어 레벨의 **자동 복구(Auto-recovery)**를 시도한다. 이는 일시적인 통신 지연이나 센서 노이즈를 필터링하기 위해 에러 카운트를 리셋하고 동작을 재시도(Retry)하는 로직이다. 그러나 기구적 특성에 기인한 물리적 결함은 소프트웨어 리셋만으로 해결되지 않으며, 반복적인 재시도는 하드웨어 손상을 가중시킬 수 있다.\n\n따라서 자동 복구 실패 시, 시스템은 **교착 상태(Deadlock)**를 선언하고 운영자의 개입을 요청하는 알람을 송출한다. 이때 수행되는 조치 방법은 각 기구부의 특성에 따라 엄격히 구분된다.\n\n### 4.1. Box Conveyor 타입 조치 메커니즘\n*   **물리적 간섭 제거:** 운영자는 트레이가 가이드 레일에 끼어 있는지 확인하고, 물리적 힘을 가해 정위치로 정렬(Re-alignment)해야 한다. 이는 센서의 광로(Optical Path)를 확보하여 PLC가 트레이의 위치를 '정상'으로 인식하게 만들기 위함이다.\n*   **잔류 구동력 해제:** 모터의 프리휠(Free-wheel) 모드를 활성화하거나 브레이크를 수동으로 해제하여 잼(Jam) 상태를 푼다.\n\n### 4.2. Pallet Lift 타입 조치 메커니즘\n*   **Z축 초기화:** 리프트가 어중간한 높이에서 멈춘 경우, 강제 하강(Manual Lowering) 밸브나 조작 스위치를 통해 리프트를 완전히 하강시켜 기구적 원점(Home Position)을 다시 잡아야 한다. 이는 AMR의 주행 안정성을 확보하기 위한 필수 선결 조건이다.\n*   **편하중 교정:** 팔레트가 비스듬하게 들려 있는 경우, 이를 바닥에 다시 안착시킨 후 AMR의 진입 위치를 재조정(Relocalization)하여 무게중심을 맞춘 뒤 리프팅을 재시도해야 한다.\n\n결론적으로, BMA 공정의 안정적인 운영을 위해서는 AMR의 기구적 타입(Conveyor vs. Lift)에 따른 물리적 특성을 명확히 이해하고, 에러 코드 이면에 숨겨진 역학적/제어적 원인을 분석하여 적절한 물리적 개입을 수행하는 것이 필수적이다.",
        "questions": [
            "BMA 공정 내 Box Conveyor 및 Pallet Lift 타입 AMR의 기구적 아키텍처와 에러 핸들링 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "Box Conveyor의 핸드쉐이킹 프로토콜과 Pallet Lift의 Z축 하중 제어 방식이 각 시스템 내에서 물리 계층 및 논리 계층과 어떻게 상호작용하는지 그 공학적 원리를 분석하시오.",
            "이송 타임아웃이나 리프팅 과부하 등 기구적 특성에 따른 에러 상황 발생 시, 시스템의 논리적 판단 과정과 단계별 복구 프로토콜 및 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 25,
        "preprocessed_group": "0.3T AMR(Box Conveyor)에서 단순 작업 중단이나 박스 끼임이 발생하여 자동 복구가 실패한 경우, 작업자는 AMR 또는 설비 HMI를 조작하고 Payload를 수동으로 설정하여 조치한다.",
        "textbook": "# BMA 공정 자동화 시스템 기술 백서: 0.3T AMR 예외 처리 및 상태 동기화 메커니즘\n\n## 1. 서론: 물류 자동화의 연속성과 예외 상황의 본질\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 0.3T AMR(Autonomous Mobile Robot)은 배터리 모듈 박스를 이송하는 핵심 매개체로서, 설비와 설비 사이를 연결하는 '동적 컨베이어(Dynamic Conveyor)' 역할을 수행한다. 특히 Box Conveyor 타입의 AMR은 정지 상태의 설비와 물리적으로 도킹(Docking)하여 물류를 이관하는데, 이 과정은 기계적 정밀도와 통신 프로토콜의 완벽한 동기화를 요구한다.\n\n그러나 실제 공정 환경에서는 물리적 마찰, 센서 오차, 통신 지연 등으로 인해 '박스 끼임(Box Jamming)'이나 '단순 작업 중단'과 같은 비정형적인 예외 상황이 발생한다. 본 챕터에서는 이러한 물리적 오류가 발생했을 때 시스템이 자동 복구(Auto-Recovery)에 실패하는 공학적 원인을 분석하고, 작업자의 HMI(Human-Machine Interface) 개입을 통해 시스템의 논리적 상태(Logical State)와 물리적 상태(Physical State)를 재동기화(Resynchronization)하는 메커니즘을 심층적으로 다룬다.\n\n---\n\n## 2. 물리적 교착 상태(Physical Deadlock)와 자동 복구 실패의 원인\n\n### 2.1. 박스 끼임(Jamming)의 역학적 분석\n0.3T AMR의 상부 컨베이어 모듈과 지상 설비의 컨베이어가 핸드쉐이킹(Handshaking)을 통해 구동될 때, 이송되는 박스는 두 설비 사이의 미세한 단차나 정렬 오차(Misalignment)로 인해 물리적 저항을 받을 수 있다.\n*   **마찰 계수의 급증:** 박스가 이송 구간의 가이드 레일에 걸리거나 비정상적인 각도로 진입할 경우, 마찰 계수가 급격히 상승하며 모터에 과부하(Overload)가 걸린다.\n*   **센서 데이터의 불일치:** 일반적으로 컨베이어 끝단에는 물체 감지를 위한 광전 센서(Photoelectric Sensor)가 배치된다. 박스가 끼여서 센서의 감지 영역(Field of View)을 부분적으로만 가리거나, 진입 시간(Time-of-Flight)이 허용 임계치를 초과할 경우, PLC(Programmable Logic Controller)는 이를 '비정상 상태'로 판정한다.\n\n### 2.2. 자동 복구(Auto-Recovery) 알고리즘의 한계\n시스템은 일시적인 통신 오류나 경미한 센서 노이즈에 대해서는 재시도(Retry) 로직을 통해 자동 복구를 시도한다. 그러나 물리적 끼임이 발생한 경우, 시스템은 안전을 위해 자동 복구를 중단하고 **'에러 래치(Error Latch)'** 상태로 전환된다.\n*   **안전 인터록(Safety Interlock):** 박스가 끼인 상태에서 모터를 강제로 구동하면 배터리 모듈의 파손이나 설비의 기계적 손상을 초래할 수 있다. 따라서 과전류(Overcurrent)나 위치 제어 오차(Position Error)가 감지되면, 시스템은 즉시 구동 전원을 차단하고 상위 제어기(ACS/MCS)에 '복구 불가능(Unrecoverable)' 플래그를 전송한다.\n*   **상태 불확실성(State Uncertainty):** 자동 복구가 실패하는 가장 큰 이유는 시스템이 현재 박스의 위치를 확신할 수 없기 때문이다. 박스가 AMR에 있는지, 설비에 있는지, 아니면 그 중간에 걸쳐 있는지 센서만으로는 판단이 모호한 '그레이존(Gray Zone)'에 빠지게 된다.\n\n---\n\n## 3. HMI를 통한 수동 개입과 제어권 이양 (Human-in-the-Loop)\n\n자동 복구가 불가능한 교착 상태에서 시스템은 **'Human-in-the-Loop'** 프로토콜을 활성화한다. 이는 알고리즘의 판단을 유보하고, 상황 판단 능력이 있는 작업자에게 제어 권한(Authority)을 이양하는 과정이다.\n\n### 3.1. 제어 신호의 흐름 (Data Flow)\n작업자가 AMR 본체의 조작 패널이나 설비의 HMI를 통해 개입할 때, 데이터 흐름은 다음과 같이 변경된다.\n1.  **인터럽트 발생:** 작업자의 조작 신호는 기존의 자동 주행 및 이재(Transfer) 로직을 중단시키는 최우선 순위 인터럽트(Interrupt)로 처리된다.\n2.  **강제 구동(Jog Operation):** 작업자는 끼어있는 박스를 제거하거나 정위치시키기 위해 컨베이어 모터를 수동으로 구동(Jogging)한다. 이때 안전 센서의 일부 기능은 '바이패스(Bypass)' 모드로 동작하여, 에러 상태에서도 모터가 움직일 수 있도록 허용한다.\n\n---\n\n## 4. Payload 상태 재설정: 논리적 데이터 정합성 확보\n\n단순히 물리적으로 박스를 제거하거나 위치를 바로잡는 것만으로는 시스템이 정상화되지 않는다. 가장 중요한 단계는 **'Payload(적재물) 상태의 수동 설정'**이다. 이는 시스템의 '디지털 트윈(Digital Twin)' 정보를 물리적 현실과 일치시키는 과정이다.\n\n### 4.1. Payload 비트(Bit)의 중요성\nAMR과 상위 관제 시스템(ACS)은 로봇의 상태를 정의하는 상태 머신(State Machine)을 공유한다. 여기서 `HasPayload` (또는 `Loaded`) 비트는 로봇의 다음 행동을 결정하는 핵심 변수다.\n*   **Payload = True (1):** 로봇은 '배출(Unloading)' 목적지로 이동해야 한다.\n*   **Payload = False (0):** 로봇은 '투입(Loading)' 목적지로 이동해야 한다.\n\n### 4.2. 상태 불일치(State Discrepancy)의 위험성\n박스 끼임 사고 후, 물리적으로는 박스를 제거했으나 시스템 메모리 상에는 여전히 `Payload = True`로 남아있을 수 있다 (또는 그 반대). 이 상태에서 시스템을 재가동하면 치명적인 논리적 오류가 발생한다.\n*   **Phantom Load 시나리오:** 실제로는 박스가 없는데 시스템은 있다고 판단하여, 빈 로봇이 배출구로 이동해 허공에 박스를 내려놓는 동작을 수행한다.\n*   **Double Loading 시나리오:** 실제로는 박스가 있는데 시스템은 없다고 판단하여, 이미 박스가 있는 로봇 위에 설비가 또 다른 박스를 밀어 넣으려 시도한다. 이는 심각한 충돌 사고로 이어진다.\n\n### 4.3. 수동 설정(Manual Set)의 메커니즘\n작업자가 HMI를 통해 Payload 상태를 수동으로 설정(Set/Reset)하는 행위는, PLC 및 ACS의 데이터베이스에 있는 해당 AMR의 상태 레지스터 값을 강제로 덮어쓰기(Overwrite)하는 과정이다.\n1.  **시각적 검증:** 작업자는 육안으로 AMR 위에 박스가 있는지 확인한다.\n2.  **상태 주입:** HMI에서 'Payload 있음' 또는 '없음'을 선택한다.\n3.  **동기화 완료:** 이 신호는 즉시 상위 시스템으로 전송되어, 로봇의 논리적 상태를 물리적 상태와 1:1로 매핑(Mapping)시킨다.\n4.  **프로세스 재개:** 데이터 정합성이 확보된 후, 시스템은 에러를 클리어(Clear)하고 중단되었던 시퀀스(Sequence)를 현재 상태에 맞춰 재계산하여 작업을 재개한다.\n\n## 5. 결론\n\n0.3T AMR의 박스 끼임 및 작업 중단 시 수행하는 'HMI 조작 및 Payload 수동 설정'은 단순한 에러 리셋 절차가 아니다. 이는 **물리적 센싱의 한계로 인해 붕괴된 시스템의 데이터 정합성(Data Integrity)을 인간의 인지 능력을 빌려 복원하는 엔지니어링 프로세스**이다. 이 과정을 통해 자동화 시스템은 논리적 모순 없이 안전하게 다음 공정 사이클로 진입할 수 있게 된다.",
        "questions": [
            "BMA 공정 내 0.3T AMR의 박스 끼임 예외 처리 및 Payload 상태 동기화 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "물리적 교착 상태 발생 시 광전 센서의 감지 임계치 초과가 PLC의 에러 래치 상태로 전환되는 과정과, 이후 Human-in-the-Loop 프로토콜을 통한 제어권 이양의 공학적 작동 원리를 분석하시오.",
            "물리적 박스 제거 후 시스템 내 Payload 비트의 논리적 정합성이 결여되었을 때 발생하는 팬텀 로드(Phantom Load) 및 이중 적재(Double Loading) 상황의 인과관계와, 이를 방지하기 위한 수동 상태 주입(Manual Set)의 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 26,
        "preprocessed_group": "0.3T AMR(Box Conveyor)의 컨베이어 이송 중 박스 끼임 현상이나 작업 지연 알람으로 인해 단순 작업 중단이 발생한 경우, 0.3T AMR HMI 화면 좌측 하단의 Main 버튼(F1)을 클릭한 후 화면 중앙의 RESUME 버튼을 눌러 작업을 재개한다.",
        "textbook": "**BMA 자동화 시스템 기술 백서: AMR 예외 상황 처리 및 프로세스 복구 메커니즘**\n\n---\n\n### 1. 서론: 물류 자동화의 연속성과 예외 처리의 중요성\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 핵심은 배터리 모듈의 정밀 조립과 이를 뒷받침하는 물류의 연속성(Continuity)에 있다. 특히 0.3T 급 AMR(Autonomous Mobile Robot)은 Box Conveyor 모듈을 탑재하여 공정 간 자재를 이송하는 혈관과 같은 역할을 수행한다. 그러나 실제 제조 환경에서는 물리적 간섭(Physical Interference)이나 공정 타이밍 불일치(Timing Mismatch)로 인한 일시적 중단이 필연적으로 발생한다. 본 장에서는 0.3T AMR의 컨베이어 이송 중 발생하는 '박스 끼임(Box Jamming)' 및 '작업 지연(Task Latency)' 상황을 시스템 아키텍처 관점에서 분석하고, 이를 해소하기 위한 논리적 복구 절차(Logical Recovery Procedure)인 'RESUME' 기능의 공학적 메커니즘을 상세히 기술한다.\n\n### 2. 장애 발생 메커니즘: 물리적 끼임과 논리적 타임아웃\n\nAMR의 운용 중 발생하는 중단 현상은 크게 물리적 요인과 논리적 요인으로 구분된다.\n\n#### 2.1. 물리적 요인: 박스 끼임 (Mechanical Jamming)\n0.3T AMR 상단에 탑재된 롤러 컨베이어(Roller Conveyor)와 지상 설비(Station) 간의 핸드쉐이킹(Handshaking) 과정에서, 이송되는 박스의 정렬 불량(Misalignment)이나 마찰 계수의 변화로 인해 박스가 이송 구간 사이에 걸리는 현상이 발생할 수 있다.\n*   **토크 리미트(Torque Limit) 감지:** 컨베이어 모터는 박스가 걸려 회전 저항이 급격히 증가할 경우, 과전류(Overcurrent)를 방지하기 위해 설정된 토크 한계치에서 구동을 멈춘다. 이는 모터 소손을 막기 위한 하드웨어 레벨의 보호 회로(Protection Circuit) 동작이다.\n*   **센서 차단 지속:** 이송 구간의 포토 센서(Photoelectric Sensor)가 예상 시간보다 길게 물체를 감지하고 있을 경우, 시스템은 이를 '이송 완료'가 아닌 '끼임(Jam)'으로 판정한다.\n\n#### 2.2. 논리적 요인: 작업 지연 (Task Latency & Timeout)\n물리적 접촉이 없더라도, 상위 관제 시스템(ACS/MCS)이나 PLC로부터 내려온 작업 지시(Task Order)가 정해진 시간 윈도우(Time Window) 내에 완료되지 않을 경우 알람이 발생한다.\n*   **동기화 실패:** AMR이 도착 신호를 보냈으나 설비 측에서 준비 신호(Ready Signal)를 늦게 보내거나, 네트워크 패킷 지연(Latency)으로 인해 통신 타임아웃(Communication Timeout)이 발생하면 시스템은 안전을 위해 프로세스를 일시 정지(Suspend) 상태로 전환한다.\n\n### 3. 시스템 복구 아키텍처: RESUME 기능의 작동 원리\n\n단순한 물리적 조치(예: 끼인 박스 제거)만으로는 시스템이 자동으로 재가동되지 않는다. AMR의 제어기(Controller)는 현재 상태를 '에러(Error)' 또는 '일시 정지(Paused)' 상태로 유지하며, 명시적인 운영자의 개입(Operator Intervention)을 기다린다. 이때 수행하는 HMI(Human Machine Interface) 조작은 단순한 버튼 클릭이 아닌, 시스템의 상태 머신(State Machine)을 전이시키는 트리거 역할을 한다.\n\n#### 3.1. HMI 인터페이스 접근 및 신호 입력\n운영자가 0.3T AMR의 HMI 화면 좌측 하단 **[Main] 버튼(F1)**을 클릭하는 행위는, 현재 출력되고 있는 알람 레이어(Alarm Layer)나 모니터링 화면에서 벗어나, 로봇의 제어 권한을 행사할 수 있는 최상위 루트 메뉴(Root Menu)로 진입함을 의미한다. 이는 로봇에게 \"관찰 모드에서 제어 모드로 전환하라\"는 인터럽트(Interrupt) 신호를 보내는 것과 같다.\n\n#### 3.2. RESUME 명령의 논리적 처리 과정 (Internal Logic)\n화면 중앙의 **[RESUME] 버튼**을 누를 때, 내부 제어 시스템에서는 다음과 같은 일련의 논리적 연산이 수행된다.\n\n1.  **안전 인터록 확인 (Safety Interlock Check):**\n    *   RESUME 신호가 인가되는 즉시, 시스템은 먼저 안전 레이저 스캐너(Safety Laser Scanner)와 비상 정지(E-Stop) 버튼의 상태를 스캔한다. 물리적인 위험 요소가 제거되었는지(예: 사람이 감지 영역 내에 없는지)를 1차적으로 검증한다.\n2.  **에러 플래그 소거 (Error Flag Clearance):**\n    *   단순 작업 중단(Warning Level)으로 분류된 알람 코드를 레지스터에서 소거(Clear)한다. 이는 시스템을 'Fault' 상태에서 'Idle' 또는 'Ready' 상태로 복귀시키는 리셋 과정이다.\n3.  **컨텍스트 복원 (Context Restoration):**\n    *   가장 중요한 단계로, AMR은 중단 직전의 작업 메모리(Task Memory)를 호출한다. \"어떤 박스를, 어디로 이송 중이었는가?\"에 대한 데이터(Job ID, Source/Destination Node)를 다시 로드한다.\n    *   시스템은 작업을 처음부터 다시 시작(Restart)하는 것이 아니라, 중단된 시점의 시퀀스(Sequence)를 이어가는(Resume) 방식을 택한다. 이는 데이터 정합성을 유지하고 중복 작업을 방지하기 위함이다.\n4.  **구동 명령 재인가 (Actuation Trigger):**\n    *   모든 논리적 검증이 끝나면, PLC는 모터 드라이버에 다시 구동 신호(Enable Signal)를 보낸다. 컨베이어 벨트가 다시 회전하거나, AMR이 주행 경로(Path)를 재탐색하여 이동을 시작한다.\n\n### 4. 결론 및 운영 제언\n\n0.3T AMR의 [Main] -> [RESUME] 절차는 단순한 조작법처럼 보이지만, 그 이면에는 **'장애 감지(Detection) -> 안전 정지(Safe Stop) -> 상태 초기화(Reset) -> 작업 문맥 복구(Context Resume)'**로 이어지는 정교한 제어 루프가 존재한다.\n\n엔지니어는 이 과정이 단순한 기계적 재시동이 아니라, **중단된 소프트웨어 스레드(Thread)를 다시 활성화하고 상위 관제 시스템과의 데이터 동기화를 재수립하는 과정**임을 이해해야 한다. 따라서 RESUME 버튼을 누르기 전, 반드시 물리적 장애 요인(박스 끼임 등)이 완벽히 제거되었는지 육안으로 확인해야 하며, 이를 무시하고 강제 복구를 시도할 경우 모터 과부하 또는 2차적인 시스템 락(System Lock)이 발생할 수 있음을 인지해야 한다.",
        "questions": [
            "BMA 공정 내 0.3T AMR의 예외 상황 처리 및 RESUME 기능을 통한 프로세스 복구 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "박스 이송 중 발생하는 토크 리미트 감지와 포토 센서 데이터의 상관관계를 분석하고, RESUME 명령 시 시스템의 상태 머신(State Machine)이 전이되는 공학적 작동 원리와 시스템적 상호작용을 분석하시오.",
            "물리적 박스 끼임이나 논리적 타임아웃 상황 발생 시, 안전 인터록 확인부터 컨텍스트 복원(Context Restoration)에 이르기까지 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 27,
        "preprocessed_group": "설비 문제로 인해 0.3T AMR(Box Conveyor)이 도킹하지 못하고 대기하여 후속 AMR의 이동 경로를 방해하는 경우, 설비 HMI의 AMR INTERFACE 메뉴에서 Call Cancel, Call Create Pause 활성화(ON), Work Reset을 순서대로 실행한 후 0.3T AMR을 MS25(회수 포트)로 복귀시킨다.\n\n설비 점검이 완료되면 0.3T AMR(Box Conveyor)의 Check and Call을 실행하고 Create Pause를 비활성화(OFF)하며, 긴급한 상황이 발생할 경우 HMI의 Call Priority 버튼을 사용하여 0.3T AMR을 우선 호출한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 자율 물류 로봇(AMR)의 예외 상황 처리 및 트래픽 제어 메커니즘\n\n## 1. 서론: BMA 공정 내 0.3T AMR의 역할과 도킹 시스템의 복잡성\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정에서 운용되는 **0.3T AMR(Box Conveyor Type)**은 배터리 셀과 모듈을 공정 간 이송하는 핵심 물류 자원입니다. 이 로봇은 단순한 주행을 넘어, 설비(Facility)와의 정밀한 물리적 도킹(Docking)을 수행해야 합니다.\n\n도킹 프로세스는 AMR의 위치 제어 시스템과 설비의 PLC(Programmable Logic Controller) 간의 엄격한 **핸드쉐이킹(Handshaking)** 프로토콜을 기반으로 합니다. 그러나 설비 측의 기구적 오작동, 센서 정렬 불량, 또는 통신 레이턴시(Latency)로 인해 도킹 시퀀스가 완료되지 못할 경우, AMR은 안전 인터락(Safety Interlock)에 의해 해당 위치에서 대기(Standby) 상태로 전환됩니다.\n\n본 챕터에서는 이러한 교착 상태(Deadlock)가 전체 물류 흐름에 미치는 영향을 분석하고, 이를 해소하기 위한 논리적 제어 시퀀스(Call Cancel, Pause, Reset)와 시스템 복구 메커니즘을 아키텍처 관점에서 상세히 기술합니다.\n\n---\n\n## 2. 교착 상태(Deadlock) 발생 메커니즘과 트래픽 병목 현상\n\n### 2.1. 도킹 실패와 노드 점유(Node Occupation)\nAMR 관제 시스템(ACS: AMR Control System)은 공장 바닥을 노드(Node)와 엣지(Edge)로 구성된 그래프(Graph) 형태로 인식합니다. 0.3T AMR이 설비 문제로 도킹에 실패하여 특정 위치에 정지하게 되면, 해당 로봇은 시스템상에서 **'작업 중(Busy)'** 상태를 유지하며 해당 노드를 점유하게 됩니다.\n\n### 2.2. 경로 계획 실패의 연쇄 작용\n단일 AMR의 정체는 단순히 해당 로봇의 가동 중단에 그치지 않습니다. 후속 AMR들은 경로 계획 알고리즘(Path Planning Algorithm)에 의해 점유된 노드를 우회하려 시도하지만, BMA 공정의 협소한 레이아웃 특성상 우회 경로가 확보되지 않는 경우가 빈번합니다. 이는 결과적으로 다수의 AMR이 연쇄적으로 멈춰서는 **트래픽 병목(Traffic Bottleneck)** 현상을 유발하며, 전체 공정의 Takt Time(목표 생산 시간) 준수에 치명적인 영향을 미칩니다.\n\n---\n\n## 3. 예외 상황 처리를 위한 논리적 제어 시퀀스 (Logical Control Sequence)\n\n설비 문제로 인한 정체 발생 시, 운영자는 HMI(Human Machine Interface)를 통해 시스템의 상태를 강제로 천이(State Transition)시켜야 합니다. 이 과정은 단순한 조작이 아닌, **ACS 서버와 설비 PLC 간의 데이터 동기화를 초기화하는 과정**입니다.\n\n### 3.1. Step 1: Call Cancel (미션 할당 취소)\n가장 먼저 수행되는 `Call Cancel` 명령은 상위 관제 시스템(ACS)에 현재 AMR에게 할당된 미션 ID(Mission ID)를 파기하도록 요청하는 인터럽트 신호입니다.\n*   **작동 원리:** ACS는 해당 AMR의 상태를 '작업 중'에서 '대기(Idle)' 또는 '에러(Error)' 상태로 변경하며, 점유하고 있던 논리적 자원(Logical Resource)을 해제합니다. 이는 후속 명령을 받아들일 준비를 하는 첫 단계입니다.\n\n### 3.2. Step 2: Call Create Pause 활성화 (신규 요청 차단)\n`Call Create Pause`를 **ON**으로 설정하는 것은 시스템의 **입력 큐(Input Queue)를 동결**시키는 행위입니다.\n*   **Why:** 문제가 해결되지 않은 상태에서 설비 PLC가 계속해서 자재 공급/배출 요청(Call)을 생성하면, ACS의 작업 대기열(Job Queue)에 수행 불가능한 미션이 누적됩니다(Stack Overflow 방지).\n*   **Mechanism:** 이 기능은 PLC의 미션 생성 트리거 로직을 비활성화(Disable)하여, 물리적 조치가 완료될 때까지 시스템이 불필요한 연산을 수행하지 않도록 제어합니다.\n\n### 3.3. Step 3: Work Reset (PLC 레지스터 초기화)\n`Work Reset`은 설비 PLC 내부의 상태 머신(State Machine)을 초기화하는 과정입니다.\n*   **Data Flow:** 도킹 실패 시 PLC의 특정 메모리 주소에는 '에러 코드'나 '진행 중' 플래그(Flag)가 1(High)로 설정되어 있습니다. Reset 신호는 이 레지스터 값을 0(Low)으로 소거(Clear)하여, 설비가 AMR을 인식하지 않던 초기 상태(Initial State)로 되돌립니다.\n\n### 3.4. Step 4: MS25(회수 포트)로의 물리적 복귀\n논리적 초기화가 완료된 후, 0.3T AMR을 **MS25(회수 포트)**로 이동시킵니다.\n*   **공학적 의미:** MS25는 시스템상에서 **'안전 지대(Safe Harbor)'** 또는 **'유지보수 노드(Maintenance Node)'**로 정의됩니다. 문제의 AMR을 메인 주행 경로(Main Path)에서 물리적으로 격리시킴으로써, 후속 AMR들이 정상적인 경로 계획을 수립하고 이동할 수 있도록 공간적 자원을 확보하는 절차입니다.\n\n---\n\n## 4. 시스템 정상화 및 우선순위 스케줄링 (System Restoration & Priority Scheduling)\n\n설비 점검 및 물리적 장애 요인이 제거된 후, 시스템을 정상 가동 모드로 복구하는 절차는 데이터 무결성을 검증하고 작업 효율을 최적화하는 방향으로 설계되었습니다.\n\n### 4.1. Check and Call (통신 링크 재검증)\n`Check and Call` 기능은 설비와 ACS 간의 통신 링크를 테스트하는 'Ping'과 유사한 역할을 수행함과 동시에, 유효한 작업 요청이 있는지 확인합니다.\n*   **작동 원리:** 설비 PLC는 센서 데이터를 기반으로 자재 유무를 다시 확인하고, 정상일 경우 정식으로 미션 요청 패킷을 ACS로 전송합니다. 이는 시스템이 '준비 완료(Ready)' 상태임을 검증하는 절차입니다.\n\n### 4.2. Create Pause 비활성화 (OFF)\n`Create Pause`를 **OFF**로 전환하면, 동결되었던 미션 생성 로직이 해제됩니다. PLC는 다시 실시간으로 공정 상태를 모니터링하며 필요한 시점에 자동으로 AMR 호출 신호를 생성하기 시작합니다.\n\n### 4.3. Call Priority (우선순위 스케줄링 알고리즘)\n긴급 상황 발생 시 사용하는 `Call Priority` 버튼은 ACS의 작업 스케줄러(Job Scheduler)에 개입하여 **FIFO(First-In-First-Out, 선입선출)** 원칙을 일시적으로 무시합니다.\n*   **알고리즘 메커니즘:** 일반적인 상황에서 AMR 미션은 생성된 순서대로 처리됩니다. 그러나 Priority 기능이 활성화되면, 해당 0.3T AMR의 미션에 **가중치(Weight)**를 부여하거나 **우선순위 플래그(Priority Flag)**를 최상위로 설정합니다.\n*   **효과:** 스케줄러는 대기 중인 다른 미션보다 해당 AMR의 작업을 최우선으로 처리하여 배차(Dispatching)합니다. 이는 설비 장애로 인해 지연된 공정 시간을 만회하고, 전체 라인의 밸런싱(Line Balancing)을 신속하게 회복하기 위한 전략적 기능입니다.\n\n---\n\n## 5. 결론\n\nBMA 공정의 0.3T AMR 제어 시스템은 단순한 이동 명령을 넘어, 설비와의 유기적인 상호작용과 예외 상황에 대한 견고한(Robust) 복구 로직을 포함하고 있습니다. 엔지니어는 `Cancel` -> `Pause` -> `Reset`으로 이어지는 논리적 흐름이 **시스템의 데이터 정합성을 유지**하기 위한 필수 과정임을 이해해야 하며, `MS25`로의 회피 기동이 **물리적 트래픽 관리**의 핵심임을 인지해야 합니다. 최종적으로 `Call Priority`를 통한 스케줄링 최적화는 자동화 시스템의 가동률(Availability)을 극대화하는 마지막 퍼즐입니다.",
        "questions": [
            "BMA 공정 내 0.3T AMR의 자율 물류 운용과 설비 도킹 시스템의 예외 상황 처리 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR 관제 시스템(ACS)의 노드 점유 방식과 설비 PLC 간의 핸드쉐이킹 프로토콜이 전체 물류 흐름 내에서 어떻게 상호작용하며, 도킹 실패 시 발생하는 트래픽 병목 현상의 공학적 메커니즘을 분석하시오.",
            "설비 오작동으로 인한 교착 상태 발생 시, Call Cancel부터 Work Reset 및 MS25 회피 기동에 이르기까지 시스템의 단계별 논리적 판단 과정과 데이터 정합성 유지를 위한 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 28,
        "preprocessed_group": "0.3T AMR(Box Conveyor)이 2열 공급 임무 수행 중 설비 포트의 물품 포화(Port Full)로 인해 작업을 수행하지 못하는 경우, WEB ACS에서 JOB Cancel과 Error Reset을 실행한 후 0.3T AMR HMI의 Manual 모드 인터페이스 화면에서 Close ALL을 클릭하여 열려 있는 컨베이어 도어를 모두 닫고 다시 AUTO 모드로 전환해야 하며, 설비 HMI에서 Call Cancel과 Work Reset을 거쳐 WEB ACS를 통해 Call Retry를 수행해야 한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 물류 흐름 제어 및 예외 상황 복구 메커니즘\n\n## 1. 서론: 0.3T AMR 기반의 자재 공급 아키텍처\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 효율성은 자재의 적시 공급(JIT: Just-In-Time)에 의해 결정됩니다. 이 중 **0.3T AMR(Autonomous Mobile Robot)**은 소형 부품 및 박스 단위의 자재를 이송하는 핵심 모듈로, 상부에는 **Box Conveyor** 시스템이 탑재되어 있습니다.\n\n본 챕터에서는 0.3T AMR이 '2열 공급 임무(2-row Supply Mission)'를 수행하는 과정에서 발생하는 **'설비 포트 포화(Port Full)'** 현상을 시스템 아키텍처 관점에서 분석합니다. 특히, 물리적 센서 신호가 상위 관제 시스템(ACS)의 논리적 판단에 미치는 영향과, 교착 상태(Deadlock)를 해소하기 위한 다층적(Multi-layered) 복구 프로토콜의 공학적 원리를 심층적으로 기술합니다.\n\n---\n\n## 2. 논리적 교착 상태(Logical Deadlock)의 발생 메커니즘\n\n### 2.1 포트 포화(Port Full)와 핸드쉐이킹(Handshaking) 실패\nAMR과 설비(Equipment) 간의 자재 이송은 정밀한 **핸드쉐이킹 프로토콜**에 의해 제어됩니다. 0.3T AMR이 2열 공급 위치에 도착하면, 다음과 같은 순차적 데이터 검증이 이루어집니다.\n\n1.  **도착 확인:** AMR이 RFID 또는 Lidar 매칭을 통해 정차 위치(Node)에 도달했음을 알립니다.\n2.  **상태 질의:** AMR은 설비 PLC(Programmable Logic Controller)에 `Ready_To_Unload` 신호를 송신합니다.\n3.  **조건 검증:** 설비 측 센서(Photoelectric Sensor 등)가 투입 포트(Port)의 점유 상태를 스캔합니다.\n\n이때, 선행 공정의 지연이나 배출 병목 현상으로 인해 포트에 이미 물품이 적재되어 있는 경우, 설비 PLC는 `Port_Full` 플래그(Flag)를 `True`로 설정합니다. 이에 따라 설비는 AMR에게 `Enable_Unload` 신호를 반환하지 않으며, 물리적 이송 절차는 즉시 중단됩니다.\n\n### 2.2 시스템 인터록(Interlock)과 에러 상태 전이\n`Port_Full` 신호가 감지되면 시스템은 안전을 위해 **인터록(Interlock)**을 작동시킵니다. 이는 물리적 충돌(AMR이 이미 있는 자재 위에 박스를 밀어 넣는 사고)을 방지하기 위한 필수적인 방어 기제입니다. 그러나 이로 인해 AMR은 다음과 같은 딜레마에 빠지게 됩니다.\n\n*   **임무 미완수:** 자재를 내리지 못했으므로 임무 완료(Job Complete) 신호를 생성할 수 없습니다.\n*   **이동 불가:** 컨베이어 도어가 개방된 상태이거나, 도킹 시퀀스 중이므로 주행 안전 로직에 의해 이동이 제한됩니다.\n\n이 상태는 자동화 로직 스스로 해결할 수 없는 **'예외적 정지(Exception Stop)'** 상태이며, 운영자의 개입을 통한 상태 머신(State Machine)의 강제 리셋이 요구됩니다.\n\n---\n\n## 3. 다층적 시스템 복구 프로토콜 (System Recovery Protocol)\n\n복구 절차는 단순히 에러를 지우는 것이 아니라, **ACS(논리 계층) - AMR(물리/제어 계층) - 설비(인터페이스 계층)** 간의 동기화를 다시 맞추는 과정입니다.\n\n### 3.1 WEB ACS 레벨: 논리적 점유 해제\n가장 먼저 수행해야 할 작업은 상위 관제 시스템인 **WEB ACS**에서의 조치입니다.\n\n*   **JOB Cancel (작업 취소):** 현재 할당된 '2열 공급 임무'를 논리적으로 소멸시킵니다. 이는 데이터베이스 상에서 해당 AMR에 할당된 Task ID를 삭제하고, 시스템이 해당 AMR을 '작업 중'이 아닌 '대기' 또는 '에러' 상태로 인지하게 만듭니다.\n*   **Error Reset (에러 리셋):** ACS 서버와 AMR 간 통신에서 발생한 알람 비트(Alarm Bit)를 클리어(Clear)합니다. 이를 통해 소프트웨어적인 통신 차단을 해제합니다.\n\n### 3.2 AMR HMI 레벨: 물리적 안전 회로 복구\n논리적 에러가 해제되었더라도, AMR의 하드웨어 상태는 여전히 '작업 중'일 수 있습니다. 특히 Box Conveyor의 도어(Door) 상태가 핵심입니다.\n\n1.  **Manual 모드 전환:** 자동 제어 루프(Auto Control Loop)를 차단하고, 운영자가 직접 액추에이터(Actuator)에 접근할 수 있는 권한을 획득합니다.\n2.  **Close ALL (도어 폐쇄 명령):**\n    *   **작동 원리:** 컨베이어 도어는 단순한 덮개가 아니라, AMR의 주행 가능 여부를 결정하는 **하드웨어 안전 회로(Safety Circuit)**의 스위치 역할을 합니다. 도어가 열려 있으면(Open), 안전 PLC는 이를 '불안전 상태'로 간주하여 구동 모터(Traction Motor)의 전원을 차단합니다.\n    *   **필요성:** 따라서 `Close ALL` 명령을 통해 모든 도어를 물리적으로 닫아야만 안전 회로가 연결(Closed Loop)되고, 주행 시스템이 활성화될 준비를 마칩니다.\n3.  **AUTO 모드 복귀:** 도어가 닫힌 후 다시 AUTO 모드로 전환하면, AMR은 대기 상태(Idle)로 돌아가 ACS의 새로운 명령을 수신할 준비를 합니다.\n\n### 3.3 설비 HMI 및 재할당: 프로세스 동기화\n마지막으로 자재를 받을 예정이었던 설비 측의 상태를 초기화해야 합니다.\n\n*   **Call Cancel & Work Reset:** 설비 PLC는 여전히 \"자재가 오고 있다\"는 정보를 기억하고 있을 수 있습니다(Latching). 설비 HMI에서 `Call Cancel`과 `Work Reset`을 수행하는 것은 PLC 내부의 레지스터(Register) 값을 초기화하여, 이전의 실패한 핸드쉐이킹 기록을 삭제하는 과정입니다.\n*   **Call Retry (재호출):** 모든 시스템(ACS, AMR, 설비)이 초기 상태(Initial State)로 동기화되었습니다. 이제 WEB ACS를 통해 `Call Retry`를 수행하면, 시스템은 새로운 작업 지시(Job Order)를 생성하고, 가용한 0.3T AMR을 다시 할당하여 공급 프로세스를 처음부터 재시작합니다.\n\n---\n\n## 4. 결론\n\n0.3T AMR의 2열 공급 중단 현상은 단순한 오류가 아니라, 물리적 공간의 제약(Port Full)을 시스템이 안전하게 방어하는 과정에서 발생하는 정상적인 인터록 작용입니다.\n\n복구 과정의 핵심은 **[논리적 임무 취소(ACS)] → [물리적 안전장치 체결(AMR Door Close)] → [설비 수신 대기 상태 초기화(Equipment Reset)]**로 이어지는 인과적 순서를 준수하는 것입니다. 이 순서가 지켜지지 않을 경우, 시스템은 데이터 불일치(Data Inconsistency)나 안전 회로 개방으로 인해 또 다른 에러를 유발할 수 있습니다. 엔지니어는 이러한 데이터 흐름과 기구적 안전 메커니즘의 상관관계를 명확히 이해하고 대응해야 합니다.",
        "questions": [
            "0.3T AMR 기반의 자재 공급 아키텍처와 포트 포화(Port Full) 시 발생하는 시스템 복구 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR과 설비 PLC 간의 핸드쉐이킹 프로토콜 과정에서 물리적 센서 데이터가 상위 관제 시스템(ACS)의 논리적 판단에 미치는 영향과 시스템적 상호작용을 공학적으로 분석하시오.",
            "설비 포트 포화로 인한 논리적 교착 상태(Deadlock) 발생 시, 안전 인터록이 발동되는 원인과 이를 해소하기 위한 다층적 복구 단계의 논리적 판단 과정 및 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 29,
        "preprocessed_group": "0.3T AMR(Box Conveyor)이 2열 공급 미션 중 1단 작업만 수행하고 알람이 발생하여 정지한 경우, WEB ACS에서 해당 JOB을 Cancel하고 Error Reset을 수행한 뒤, 0.3T AMR HMI를 Manual 모드로 전환하여 'Close all door'로 도어를 닫고 다시 AUTO 모드로 전환한다. 이후 WEB ACS의 Conveyor 탭 내 Payload Setting에서 공급하지 못한 자재는 '1EA – Full', 공급 완료된 칸은 '1EA – None'으로 수정한 후 JOB Complete(강제 완료)를 클릭하며, 설비 HMI에서 Call Cancel과 Work Reset을 차례로 수행한 뒤 WEB ACS를 AUTO Mode로 복귀시킨다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 다단 공급 공정 내 비동기적 예외 상황 처리 및 데이터 동기화 메커니즘\n\n## 1. 개요 (Overview)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화 시스템은 정밀한 시퀀스 제어(Sequence Control)에 기반하여 운영된다. 특히 **0.3T AMR(Box Conveyor Type)**이 수행하는 '2열 공급 미션(2-Row Supply Mission)'은 단일 작업이 아닌, 복수의 시퀀스가 연속적으로 발생하는 복합 프로세스이다.\n\n본 챕터에서는 0.3T AMR이 다단 공급 작업 중 물리적/논리적 오류로 인해 **'1단 작업 완료 후 2단 작업 미수행 상태'**에서 정지했을 때 발생하는 시스템의 교착 상태(Deadlock)를 분석한다. 또한, 이를 해소하기 위해 **WEB ACS(Autonomous Control System)**, **AMR HMI**, 그리고 **설비 PLC** 간의 유기적인 복구 절차(Recovery Procedure)와 그 이면에 존재하는 데이터 동기화(Data Synchronization) 및 인터락(Interlock) 메커니즘을 심층적으로 기술한다.\n\n---\n\n## 2. 시스템 아키텍처 및 장애 발생 메커니즘 (System Architecture & Failure Analysis)\n\n### 2.1. 다단 공급 미션의 시퀀스 구조\n0.3T AMR의 2열 공급 미션은 논리적으로 `[Approach] -> [Handshake 1] -> [Action 1: 1열 공급] -> [Re-alignment] -> [Handshake 2] -> [Action 2: 2열 공급] -> [Departure]`의 순차적 상태 머신(State Machine)으로 구성된다.\n\n입력된 상황인 **\"1단 작업만 수행하고 알람 발생 후 정지\"**는 `Action 1` 완료 후 `Action 2`로 전이(Transition)하는 과정에서 예외(Exception)가 발생했음을 의미한다. 이는 주로 다음과 같은 원인에 기인한다.\n*   **센서 데이터 불일치:** 1단 공급 후 AMR의 위치 보정(Relocalization)을 위한 LiDAR 스캔 매칭 실패.\n*   **통신 타임아웃:** 설비 PLC와의 2차 핸드쉐이킹(Handshaking) 신호 지연.\n*   **하드웨어 인터락:** 모터 과부하 또는 도어 센서의 비정상 신호 감지.\n\n이때 시스템은 안전 무결성(Safety Integrity)을 보장하기 위해 즉시 **Fail-Safe** 모드로 진입하며, AMR은 현재 위치에서 기동을 멈추고 상위 관제 시스템(ACS)에 에러 코드를 송출한다.\n\n---\n\n## 3. 제어 시스템 개입 및 논리적 연결 해제 (Control System Intervention)\n\n장애 발생 시, 물리적 복구에 앞서 논리적 연결 고리를 끊는 작업이 선행되어야 한다.\n\n### 3.1. WEB ACS 내 JOB Cancel 및 Error Reset\nWEB ACS 상의 **JOB Cancel** 명령은 현재 실행 중인 미션의 패킷 전송을 중단하고, 해당 AMR에 할당된 작업 ID(Task ID)를 소멸시키는 과정이다. 이는 잘못된 명령이 지속적으로 재전송(Retransmission)되어 시스템 부하를 가중시키는 것을 방지한다.\n\n이어지는 **Error Reset**은 소프트웨어 레벨의 에러 레지스터(Error Register)를 '0'으로 초기화하는 과정이다. 이는 AMR의 제어기(Controller)가 'Fault' 상태에서 'Idle' 또는 'Ready' 상태로 전환될 수 있도록 논리적 플래그(Flag)를 해제하는 역할을 한다.\n\n---\n\n## 4. 물리적 상태 복구 및 하드웨어 인터락 제어 (Physical State Recovery)\n\n논리적 에러가 소거되었더라도, 물리적 상태(하드웨어)가 안전 조건에 부합하지 않으면 시스템은 재가동되지 않는다.\n\n### 4.1. Manual 모드 전환 및 도어 제어 (Door Interlock Mechanism)\n0.3T AMR은 박스 컨베이어 타입으로, 자재의 낙하 방지 및 작업자 안전을 위해 도어(Door)가 장착되어 있다. 자동(AUTO) 모드에서 에러가 발생하여 정지한 경우, 안전 PLC 로직에 의해 도어 개폐 권한이 잠길(Lock) 수 있다.\n\n*   **Manual 모드 전환:** 운영자가 HMI를 통해 Manual 모드로 전환하는 것은 상위 제어기(ACS)의 개입을 차단하고, 로컬 제어권(Local Control Authority)을 확보하는 행위이다.\n*   **'Close all door' 명령:** 도어가 열려 있는 상태는 시스템상 '주행 불가(Not Ready to Move)' 상태로 정의된다. 도어를 강제로 닫음으로써 도어 리미트 스위치(Limit Switch) 또는 마그네틱 센서 회로를 폐쇄(Close Circuit)하여, 로봇이 주행 가능한 물리적 조건을 충족시킨다.\n*   **AUTO 모드 복귀:** 물리적 안전 조건이 확보된 후 다시 AUTO 모드로 전환함으로써, AMR 내부의 내비게이션 알고리즘과 ACS 통신 모듈을 재활성화한다.\n\n---\n\n## 5. 데이터 정합성 확보: Payload Setting (Data Synchronization)\n\n이 절차에서 가장 핵심적인 공학적 처리는 **물리적 현실(Physical Reality)과 시스템 데이터(Digital Twin) 간의 동기화**이다.\n\n### 5.1. 부분 작업 완료에 따른 데이터 불일치\nAMR은 2열 공급 미션 중 1열만 공급하고 멈췄으므로, 물리적으로는 자재의 절반은 설비에 투입되었고, 나머지 절반은 AMR에 남아있다. 그러나 시스템(ACS)은 미션이 비정상 종료되었으므로, 해당 자재의 상태를 정확히 인지하지 못하거나 '전체 미공급' 또는 '전체 공급'으로 잘못 판단할 수 있다.\n\n### 5.2. Payload Setting 수정의 논리적 의미\nWEB ACS의 Conveyor 탭에서 수행하는 데이터 수정 작업은 다음과 같은 논리적 확정을 의미한다.\n\n*   **'1EA – Full' (공급하지 못한 자재):** AMR 내부에 실재하는 잔여 자재를 시스템에 인식시킨다. 이를 통해 추후 해당 AMR이 복귀했을 때, 시스템은 \"빈 차\"가 아닌 \"자재가 있는 상태\"로 인식하여 적절한 하역(Unloading) 미션을 생성하거나 재고 관리에 반영할 수 있다.\n*   **'1EA – None' (공급 완료된 칸):** 이미 설비로 투입된 자재 슬롯을 '비어 있음'으로 마킹한다. 만약 이를 수정하지 않으면, 시스템은 이미 빈 공간에 대해 \"자재가 있다\"고 판단하여 중복 공급 명령을 내리거나 재고 수량 오류(Phantom Inventory)를 발생시킬 수 있다.\n\n이후 **JOB Complete(강제 완료)**를 클릭하는 것은, 실제 미션 수행 여부와 관계없이 해당 트랜잭션을 강제로 종결(Commit)시켜 시스템의 상태를 'Busy'에서 'Available'로 전환하는 트리거(Trigger) 역할을 한다.\n\n---\n\n## 6. 설비 연동 해제 및 시스템 정상화 (Handshake Termination & Restoration)\n\n마지막으로, AMR과 상호작용하던 설비(Equipment) 측의 교착 상태를 해결해야 한다.\n\n### 6.1. 설비 HMI: Call Cancel 및 Work Reset\nAMR이 작업을 중단했더라도, 자재를 요청한 설비의 PLC는 여전히 AMR로부터 '작업 완료(Process Complete)' 신호를 기다리는 **Wait State**에 머물러 있을 가능성이 높다.\n\n*   **Call Cancel:** 설비가 상위 시스템에 보낸 자재 요청 신호(Request Signal)를 철회하여, 설비가 더 이상 AMR을 기다리지 않도록 한다.\n*   **Work Reset:** 설비 내부의 작업 시퀀스를 초기화한다. 이는 설비가 '자재 투입 중'이라는 임시 상태에서 벗어나, 다시 초기 대기 상태(Idle)로 돌아가게 함으로써 다음 작업을 수행할 준비를 마치는 과정이다.\n\n### 6.2. WEB ACS AUTO Mode 복귀\n모든 물리적, 논리적, 데이터적 조치가 완료되면 WEB ACS를 최종적으로 AUTO Mode로 복귀시킨다. 이로써 전체 관제 시스템은 해당 AMR을 다시 가용 자원(Available Resource)으로 인식하고, 스케줄링 알고리즘에 따라 새로운 미션을 할당할 수 있는 상태가 된다.\n\n---\n\n## 7. 결론 (Conclusion)\n\n0.3T AMR의 다단 공급 중단 상황에 대한 복구 절차는 단순한 재부팅이 아니다. 이는 **1) 제어권의 회수 및 재할당, 2) 하드웨어 안전 인터락의 해제, 3) 물리적 자재 흐름과 논리적 데이터의 동기화, 4) 설비와 로봇 간의 통신 핸드쉐이크 초기화**라는 4단계의 공학적 프로세스가 유기적으로 결합된 시스템 엔지니어링의 전형이다. 엔지니어는 이 인과관계를 명확히 이해함으로써 데이터 무결성을 해치지 않고 시스템을 안전하게 복구할 수 있다.",
        "questions": [
            "BMA 자동화 시스템 내 0.3T AMR의 다단 공급 공정 중 발생하는 비동기적 예외 상황 처리 및 데이터 동기화 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "0.3T AMR의 2열 공급 미션 수행 중 상태 머신(State Machine)의 전이 과정과, 에러 발생 시 Fail-Safe 모드 진입을 유발하는 센서 및 통신 계층의 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "1단 작업 완료 후 정지된 AMR의 물리적 자재 상태와 ACS 디지털 데이터 간의 불일치가 시스템 교착 상태를 유발하는 논리적 인과관계 및 Payload Setting을 통한 데이터 정합성 확보 과정의 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 30,
        "preprocessed_group": "0.3T AMR(Box Conveyor)이 2열 회수 미션 수행 중 해당 회수 포트에 빈 박스(Empty Box)가 없어 작업을 수행할 수 없는 경우, 자동 복구 실패 시 설비 HMI에서 Call Cancel과 Work Reset을 실행하고 WEB ACS에서 JOB Cancel, Error Reset, Conveyor 탭의 Payload All Clear 설정을 순차적으로 진행한 후 Job complete와 Auto Mode를 적용한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: AMR 예외 상황 처리 및 시스템 동기화 메커니즘\n\n## 1. 서론: 0.3T AMR Box Conveyor의 운영 컨텍스트\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류의 핵심 축을 담당하는 **0.3T AMR(Autonomous Mobile Robot)**은 Box Conveyor 타입으로 설계되어, 배터리 셀 및 모듈 부품이 적재된 박스를 이송하는 임무를 수행한다. 특히 **'2열 회수 미션(2-row Retrieval Mission)'**은 AMR이 지정된 포트(Port)에 진입하여, 2열로 정렬된 적재 공간에서 빈 박스(Empty Box)를 회수하여 배출하는 고난이도의 시퀀스 제어를 요구한다.\n\n본 챕터에서는 AMR이 회수 미션을 수행하기 위해 포트에 도착했으나, 물리적으로 **빈 박스가 존재하지 않아(No Empty Box)** 발생하는 논리적 교착 상태(Logical Deadlock)를 분석한다. 또한, 이를 해소하기 위해 설비 HMI(Human Machine Interface)와 WEB ACS(Activity Control System) 간의 **상태 동기화(State Synchronization)** 및 **데이터 정합성(Data Integrity)**을 복구하는 엔지니어링 메커니즘을 심층적으로 기술한다.\n\n---\n\n## 2. 에러 발생 메커니즘: 물리 계층과 논리 계층의 불일치\n\n### 2.1. 센서 피드백과 인터록(Interlock) 차단\nAMR이 회수 포트에 도킹(Docking)하면, 1차적으로 AMR 상단의 **Lidar** 또는 **광전 센서(Photoelectric Sensor)**가 타겟 대상인 빈 박스의 유무를 스캔한다. 정상적인 시퀀스라면 센서는 박스의 반사파를 감지하여 PLC(Programmable Logic Controller)에 `Box_Present` 신호를 송신하고, 이를 트리거(Trigger)로 하여 컨베이어 구동 및 리프팅 동작이 시작된다.\n\n그러나 **'빈 박스 없음(Empty Box Missing)'** 상황은 시스템 입장에서 치명적인 예외 상황이다.\n1.  **물리적 현상:** 센서가 허공을 스캔하여 `Signal_Low` (물체 없음) 상태를 유지한다.\n2.  **논리적 판단:** PLC의 래더 로직(Ladder Logic) 상에서 `Pick-up` 동작을 수행하기 위한 **AND 조건(AMR Ready & Box Present)**이 성립되지 않는다.\n3.  **결과:** 시스템은 하드웨어 보호를 위해 모터 구동을 차단하는 **인터록(Interlock)**을 발동시키며, 미션 수행이 불가능함을 알리는 에러 상태로 천이한다.\n\n### 2.2. 자동 복구 실패와 교착 상태 (Deadlock)\n시스템은 일시적인 센서 노이즈나 통신 지연을 배제하기 위해 수차례 재시도(Retry) 알고리즘을 수행한다. 이 과정에서도 박스가 감지되지 않으면 **'자동 복구 실패(Auto-Recovery Failed)'**로 판정한다. 이때 AMR은 미션을 포기하지도, 수행하지도 못하는 **'좀비 프로세스(Zombie Process)'** 상태에 빠지게 되며, 상위 관제 시스템인 ACS는 해당 로봇을 '작업 중(Busy)'으로 인식하여 다른 작업을 할당하지 못하는 자원 낭비가 발생한다.\n\n---\n\n## 3. 시스템 복구 프로세스 및 데이터 흐름 분석\n\n이러한 교착 상태를 해제하기 위해서는 **Edge Layer(설비/AMR)**와 **Server Layer(ACS)** 양쪽에서 순차적인 상태 초기화가 필요하다.\n\n### 3.1. Edge Layer 복구: 설비 HMI 제어 (Call Cancel & Work Reset)\n가장 먼저 물리적 접점인 설비 HMI에서 제어권을 행사해야 한다.\n\n*   **Call Cancel (호출 취소):**\n    *   **Why:** 포트 측 PLC가 AMR에게 보낸 \"박스를 가져가라\"는 요청 신호(Request Signal)가 여전히 `Active (High)` 상태로 유지되고 있다. 이를 강제로 `Low`로 떨어뜨리지 않으면, 에러를 리셋해도 즉시 다시 잘못된 미션을 요청하게 된다.\n    *   **Mechanism:** HMI에서 Call Cancel을 실행하면, PLC의 미션 큐(Mission Queue)에서 해당 요청 비트가 소거(Clear)되어 AMR과의 논리적 연결 고리를 끊는다.\n\n*   **Work Reset (작업 초기화):**\n    *   **Why:** AMR 내부 컨트롤러는 현재 '작업 수행 중'이라는 플래그(Flag)를 메모리에 저장하고 있다.\n    *   **Mechanism:** Work Reset 신호는 AMR의 내부 레지스터를 초기화하여, 현재 진행 중이던 시퀀스 스텝(Sequence Step)을 0으로 되돌린다. 이는 로봇을 **'대기 상태(Idle State)'**로 전환하기 위한 전제 조건이다.\n\n### 3.2. Server Layer 복구: WEB ACS 동기화 (JOB Cancel & Payload Clear)\n로컬 설비가 초기화되었더라도, 전체를 관장하는 ACS 서버의 데이터베이스(DB)에는 여전히 해당 미션이 '진행 중'이며, AMR이 '박스를 적재했을 수도 있는 불확실한 상태'로 남아 있다. 이를 해결하기 위해 WEB ACS에서의 조작이 필수적이다.\n\n*   **JOB Cancel (작업 취소):**\n    *   **Mechanism:** ACS 스케줄러에게 해당 Job ID를 강제 종료하도록 명령한다. 이는 서버가 점유하고 있던 AMR의 리소스 할당을 해제(Release)하여, 로봇이 새로운 명령을 받을 수 있는 상태로 만든다.\n\n*   **Error Reset (에러 리셋):**\n    *   **Mechanism:** 시스템 전반에 전파된 알람(Alarm) 로그를 아카이빙하고, 현재 활성화된 에러 비트를 소거한다.\n\n*   **Conveyor 탭 - Payload All Clear (적재 정보 소거):**\n    *   **Critical Logic:** 이 단계가 기술적으로 가장 중요하다. 에러 발생 시점(박스를 집으려던 순간)에 따라, ACS의 **디지털 트윈(Digital Twin)** 상에서는 AMR이 박스를 이미 적재한 것(`Loaded`)으로 잘못 기록될 수 있다.\n    *   **Data Flow:** 실제 물리적 로봇은 빈 상태(`Empty`)이므로, `Payload All Clear` 명령을 통해 DB 상의 가상 상태(Virtual State)를 물리적 상태(Physical State)와 강제로 일치시킨다. 이 과정이 생략되면, AMR은 빈 손으로 다음 공정(배출 포트)으로 이동하거나, 박스가 있다고 착각하여 중복 적재 사고를 유발할 수 있다.\n\n---\n\n## 4. 시스템 정상화: Job Complete 및 Auto Mode 복귀\n\n모든 데이터 정합성이 확보된 후, 시스템을 다시 자동화 루프(Loop)에 태우는 최종 단계이다.\n\n1.  **Job Complete (작업 완료 처리):**\n    *   취소된 작업을 시스템 로그 상에서 '완료' 또는 '종료'로 마킹하여, 해당 트랜잭션을 닫는다(Close Transaction). 이는 데이터베이스의 무결성을 유지하고 추후 데이터 분석 시 에러로 중단된 작업임을 명확히 하기 위함이다.\n\n2.  **Auto Mode 적용:**\n    *   AMR과 설비의 제어 모드를 Manual에서 Auto로 전환한다.\n    *   **Handshaking 재개:** Auto Mode가 활성화되는 즉시, AMR은 ACS 서버에 Heartbeat 신호를 보내며 \"가용 상태(Available)\"임을 알린다. ACS는 스케줄링 알고리즘에 따라 대기 중인 다음 미션을 해당 AMR에 할당함으로써 공정은 정상 궤도로 복귀한다.\n\n## 5. 결론\n\n0.3T AMR의 '빈 박스 없음' 에러 처리는 단순한 조작 실수가 아닌, **물리적 센싱 실패가 상위 시스템의 논리적 오류로 전파되는 과정**을 보여준다. 따라서 복구 절차는 **[설비 요청 취소] -> [로봇 내부 상태 초기화] -> [서버 미션 삭제] -> [데이터 정합성 보정(Payload Clear)]**이라는 엄격한 인과관계 순서를 따라야 하며, 이를 통해 시스템의 안전성과 데이터 무결성을 동시에 확보할 수 있다.",
        "questions": [
            "BMA 공정 내 0.3T AMR의 '2열 회수 미션' 수행 중 발생하는 예외 상황 대응 및 시스템 동기화 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR이 회수 포트에 도킹한 후 Lidar 및 광전 센서를 통해 빈 박스 유무를 판별하는 과정과, PLC 래더 로직 상에서 인터록(Interlock)이 발동되는 하드웨어-소프트웨어 간의 시스템적 상호작용을 공학적으로 분석하시오.",
            "회수 대상 물체 부재로 인한 '논리적 교착 상태(Deadlock)' 발생 시, 데이터 정합성 확보를 위해 Edge Layer(HMI)와 Server Layer(ACS)에서 수행되는 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 31,
        "preprocessed_group": "0.3T AMR(Box Conveyor)이 2열 회수 미션 중 1단 작업만 완료하고 알람이 발생한 경우, 작업자는 설비 HMI에서 Call Cancel과 Work Reset을 실행하고 WEB ACS에서 JOB Cancel과 Error Reset을 수행한 뒤, 0.3T AMR HMI를 Manual 모드로 전환하여 적재 위치 확인 및 Conveyor Door를 모두 닫고, WEB ACS의 Payload Setting을 #1: Empty, #2: None으로 수정한 후 MS25(회수 포트) 메뉴에서 Select Unload 1을 클릭하고 0.3T AMR HMI를 다시 AUTO 모드로 전환하여 조치한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 다단 회수 공정의 예외 처리 및 상태 동기화 메커니즘\n\n## 1. 서론: 다단(Multi-Stage) 미션의 복잡성과 교착 상태(Deadlock)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류의 핵심인 **0.3T AMR(Box Conveyor Type)**은 단일 지점 이동뿐만 아니라, 한 번의 미션(Job)으로 복수의 적재 위치를 순회하는 '다단 회수(Multi-Row Retrieval)' 로직을 수행합니다. 특히 **2열 회수 미션(2-Row Retrieval Mission)**은 AMR이 첫 번째 포트에서 자재를 적재(Loading)한 후, 즉시 두 번째 포트로 이동하여 추가 적재를 수행하는 연속적인 시퀀스 제어(Sequential Control)를 요구합니다.\n\n그러나 1단 작업만 완료된 시점에서 하드웨어 알람이나 통신 타임아웃이 발생할 경우, 시스템은 심각한 **논리적 교착 상태(Logical Deadlock)**에 빠지게 됩니다. 물리적 로봇은 '작업 중(Busy)' 상태이지만, 상위 관제 시스템은 '미션 미완료(Incomplete)'로 인지하여 다음 명령을 내릴 수도, 현재 명령을 취소할 수도 없는 '좀비 프로세스(Zombie Process)' 상태가 형성됩니다.\n\n본 챕터에서는 0.3T AMR이 2열 회수 미션 중단 시 수행해야 하는 복구 절차를 통해, **로컬 제어기(PLC/HMI)와 상위 관제(ACS) 간의 데이터 동기화(Data Synchronization)** 및 **안전 인터락(Safety Interlock) 메커니즘**을 심층 분석합니다.\n\n---\n\n## 2. 제어 계층별 에러 소거 및 핸드쉐이킹 초기화\n\n장비의 알람을 해제하는 과정은 단순히 경고등을 끄는 것이 아니라, 분산된 제어 시스템 간의 **통신 핸드쉐이킹(Handshaking) 고리를 끊고 초기화**하는 과정입니다.\n\n### 2.1 로컬 제어기(Local Controller) 레벨의 조치: HMI\n작업자가 설비 HMI에서 수행하는 **Call Cancel**과 **Work Reset**은 AMR 내부의 PLC(Programmable Logic Controller) 레지스터를 직접 제어합니다.\n*   **Call Cancel:** AMR이 현재 수행 중인 미션 ID(Mission ID)를 휘발성 메모리에서 삭제하여, 로봇이 더 이상 해당 작업을 수행할 의무가 없음을 선언합니다.\n*   **Work Reset:** 구동 모터, 컨베이어 모터, 센서 등의 액추에이터(Actuator)에 인가된 '동작 유지(Hold)' 신호를 차단하고, 에러가 래치(Latch)된 메모리 비트를 강제로 `0`(False)으로 전환합니다. 이는 물리적 구동부의 즉각적인 정지를 보장합니다.\n\n### 2.2 상위 관제(Supervisory) 레벨의 조치: WEB ACS\n로컬 조치만으로는 상위 시스템인 ACS(Activity Control System)의 작업 큐(Job Queue)에 남아 있는 명령을 삭제할 수 없습니다.\n*   **JOB Cancel:** ACS 서버의 데이터베이스 내에서 해당 AMR에 할당된 작업 스케줄을 강제로 철회합니다. 이를 수행하지 않으면, AMR이 복구되자마자 ACS는 중단되었던(실패했던) 작업을 다시 할당하여 동일한 에러를 재발시킬 위험이 있습니다.\n*   **Error Reset:** ACS와 AMR 간의 통신 프로토콜 상에서 발생한 '에러 플래그(Error Flag)'를 서버 측에서 소거하여, 해당 AMR을 '가용 가능(Available)' 상태로 전환할 준비를 마칩니다.\n\n---\n\n## 3. 물리적 안전 인터락과 수동 제어 권한의 확보\n\n시스템의 논리적 에러를 소거한 후에는 물리적 상태를 점검해야 합니다. 이 과정에서 **Manual 모드 전환**과 **Conveyor Door** 조작은 필수적인 공학적 전제 조건을 가집니다.\n\n### 3.1 제어 권한의 이양 (Auto to Manual)\n0.3T AMR HMI를 **Manual 모드**로 전환하는 것은 ACS의 자동 라우팅(Routing) 알고리즘으로부터 로봇의 제어권을 박탈하여 작업자에게 이양하는 행위입니다. 이는 복구 작업 중 ACS가 원격으로 로봇을 구동시켜 발생할 수 있는 충돌 사고를 원천 차단하는 **Fail-Safe** 설계의 일환입니다.\n\n### 3.2 안전 인터락 회로 (Safety Interlock Circuit)\n**\"Conveyor Door를 모두 닫고\"**라는 절차는 단순한 정리가 아닙니다. BMA 공정의 AMR은 안전 규격(ISO 13849-1 등)에 따라 도어가 열려 있을 경우(Open Loop), 안전 PLC가 모터 구동 전원을 물리적으로 차단(STO: Safe Torque Off)하도록 설계되어 있습니다.\n따라서 도어를 닫는 행위는 리미트 스위치(Limit Switch) 또는 마그네틱 센서의 회로를 닫아(Close Loop), 안전 PLC에게 **\"기구적으로 안전한 상태임\"**을 알리고 모터 구동 락(Lock)을 해제하는 필수적인 하드웨어 리셋 과정입니다.\n\n---\n\n## 4. 데이터 정합성(Data Integrity) 확보와 논리적 상태 재정의\n\n가장 중요한 단계는 물리적 현실(Physical Reality)과 시스템 상의 데이터(Digital Twin)를 일치시키는 과정입니다. 2열 회수 중단 시, AMR에는 자재가 있을 수도, 없을 수도 있는 불확실한 상태가 됩니다.\n\n### 4.1 Payload Setting의 재정의 (#1: Empty, #2: None)\nWEB ACS 상에서 Payload 정보를 수정하는 것은 시스템의 **상태 추정(State Estimation) 오류를 보정**하는 과정입니다.\n*   **#1: Empty:** 1번 슬롯을 '비어 있음'으로 설정합니다.\n*   **#2: None:** 2번 슬롯을 '존재하지 않음' 또는 '사용 안 함'으로 설정합니다.\n\n**Why? (공학적 이유):**\n실제 자재가 있더라도 시스템 상에서 이를 `Empty`로 강제 설정하는 이유는 **MS25(회수 포트)**에서의 강제 배출(Unload) 로직을 트리거하기 위함입니다. 만약 시스템이 현재 상태를 `Occupied(적재됨)`로 인식하고 있다면, 특정 에러 상황에서는 \"이미 적재되어 있으므로 추가 작업을 거부\"하거나 \"목적지 정보 소실로 인한 대기\" 상태에 빠질 수 있습니다.\n따라서 데이터를 `Empty`로 초기화하여 시스템을 **'명령 수신 대기(Idle)'** 상태로 만든 후, 강제 명령을 주입할 수 있는 논리적 빈 공간을 확보하는 것입니다.\n\n---\n\n## 5. 프로세스 재개 및 정상화 (Recovery Execution)\n\n모든 준비가 완료되면, 시스템을 다시 자동화 루프(Automation Loop)로 복귀시킵니다.\n\n### 5.1 MS25 Select Unload 1 명령의 의미\n**MS25(회수 포트)** 메뉴에서 **Select Unload 1**을 클릭하는 것은 ACS에게 \"현재 AMR의 위치나 상태와 무관하게, 즉시 MS25 포트로 이동하여 1번 슬롯의 컨베이어를 구동(Unload)하라\"는 **최우선 순위 인터럽트 명령(High-Priority Interrupt Command)**을 생성하는 것입니다.\n앞서 Payload를 `Empty`로 설정했기 때문에, ACS는 충돌 없이 새로운 Unload 미션을 생성하여 AMR에 할당할 수 있게 됩니다.\n\n### 5.2 Auto 모드 복귀와 시스템 재동기화\n마지막으로 0.3T AMR HMI를 **AUTO 모드**로 전환하면, 로봇은 다시 ACS의 관제 하에 들어갑니다. 이때 로봇은 대기 중이던 'MS25 Unload' 명령을 수신(Download)하고, 즉시 해당 미션을 수행합니다. 이 과정을 통해 멈춰있던 자재 흐름이 해소되고, AMR은 정상적인 작업 사이클로 복귀하게 됩니다.\n\n---\n\n## 요약 (Conclusion)\n\n0.3T AMR의 2열 회수 미션 중단 시 복구 절차는 단순한 조작의 나열이 아닙니다. 이는 **① 로컬/글로벌 제어기의 에러 래치 해제, ② 하드웨어 안전 인터락(Door)의 복구, ③ 데이터 정합성(Payload)의 강제 동기화, ④ 강제 배출 명령(Unload)을 통한 프로세스 리셋**이라는 4단계의 논리적 인과관계를 통해 시스템의 무결성을 회복하는 고도의 엔지니어링 프로세스입니다.",
        "questions": [
            "BMA 자동화 시스템 내 0.3T AMR의 다단 회수 공정 중 발생하는 예외 처리 및 상태 동기화 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "2열 회수 미션 중단 시 로컬 제어기(PLC/HMI)와 상위 관제 시스템(ACS) 간의 핸드쉐이킹 초기화 과정 및 안전 PLC의 인터락 회로가 시스템 구동 락을 해제하는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "다단 미션 실패로 인한 논리적 교착 상태 발생 시, Payload 정보를 'Empty'로 강제 재정의해야 하는 데이터 정합성 측면의 근본 원인과 이것이 MS25 강제 배출 로직을 트리거하는 과정의 논리적 판단 과정 및 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 32,
        "preprocessed_group": "1T AMR(Pallet Lift)이 설비에 도킹했음에도 설비 측의 비정상적인 PLC 신호로 인해 작업을 시작하지 못하고 시간 초과 알람이 발생하는 경우, 자동 복구 실패 시 WEB ACS에서 Job Cancel과 Error Reset을 실행하고 설비 HMI에서 Work Reset을 통해 신호를 초기화한 뒤 WEB ACS에서 AMR 상태를 After Docking으로 변경하여 미션을 재시도하거나 완료 처리한다.",
        "textbook": "# BMA 공정 자동화 시스템 기술 백서: AMR-설비 간 인터페이스 및 예외 처리 메커니즘\n\n## 1. 서론: 이기종 시스템 간의 상호운용성 (Interoperability)과 동기화 과제\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 핵심은 고중량의 배터리 모듈을 이송하는 **1T AMR(Pallet Lift)**과 이를 가공·조립하는 고정형 설비 간의 정밀한 협업에 있다. 이 두 시스템은 물리적으로는 독립된 개체이나, 논리적으로는 하나의 유기체처럼 동작해야 한다.\n\n본 챕터에서는 1T AMR이 설비에 물리적으로 도킹(Docking)을 완료했음에도 불구하고, **PLC(Programmable Logic Controller)** 레벨의 신호 불일치로 인해 발생하는 **'핸드쉐이킹 타임아웃(Handshaking Timeout)'** 현상을 심층 분석한다. 또한, 이러한 교착 상태(Deadlock)를 해소하기 위해 상위 관제 시스템(**WEB ACS**)과 로컬 제어기(**HMI**) 간의 데이터 흐름을 어떻게 재동기화(Resynchronization)하는지, 그 공학적 원리와 복구 프로토콜을 상세히 기술한다.\n\n---\n\n## 2. 도킹 프로세스와 PLC 신호 무결성 (Signal Integrity)\n\n### 2.1 물리적 도킹과 논리적 도킹의 괴리\n1T AMR이 설비의 도킹 스테이션에 진입하면, AMR은 자신의 위치 좌표와 자세(Pose)가 허용 공차(Tolerance) 내에 있음을 확인하고 정지한다. 이것이 **'물리적 도킹'**의 완료이다. 그러나 공학적 관점에서 작업의 시작은 **'논리적 도킹'**, 즉 AMR과 설비 PLC 간의 신호 교환(Handshaking)이 완료된 시점을 의미한다.\n\n정상적인 시퀀스라면 다음과 같은 흐름이 발생해야 한다:\n1.  **AMR:** `In_Position` 신호 송신 (나 도착했음)\n2.  **PLC:** 센서(Photo/Limit Switch)를 통해 AMR 감지 및 `Ready_to_Work` 신호 송신 (작업 준비 완료)\n3.  **AMR:** 작업 시작 (Lift Up/Down 등)\n\n### 2.2 비정상 PLC 신호와 타임아웃 (Timeout) 메커니즘\n입력된 상황인 \"설비 측의 비정상적인 PLC 신호\"는 주로 다음과 같은 원인으로 발생한다:\n*   **신호 바운싱(Bouncing):** 센서 노이즈로 인해 High/Low 신호가 불안정하게 진동하는 경우.\n*   **로직 불일치(Logic Mismatch):** 설비가 이전 작업의 종료 플래그(Flag)를 소거(Clear)하지 못해 `Ready` 상태로 전이되지 못하는 경우.\n\n이때 시스템은 무한 대기 상태를 방지하기 위해 **'Watchdog Timer'**를 가동한다. 지정된 시간($T_{limit}$) 내에 PLC로부터 유효한(Valid) 신호가 수신되지 않으면, 시스템은 이를 통신 장애 혹은 설비 고장으로 간주하고 **시간 초과 알람(Timeout Alarm)**을 트리거한다. 이는 불확실한 상태에서 고중량 배터리를 이송할 때 발생할 수 있는 물리적 사고를 예방하기 위한 **Fail-Safe(안전 모드)** 설계의 일환이다.\n\n---\n\n## 3. 자동 복구 실패와 수동 복구 프로토콜의 아키텍처\n\n자동 복구(Auto-Recovery) 로직이 실패했다는 것은, 일시적인 통신 지연(Transient Fault)이 아니라 시스템의 상태 레지스터(State Register)가 꼬여있는 영구적 오류(Persistent Fault) 상태임을 시사한다. 따라서 엔지니어는 **ACS(상위 관제)**와 **HMI(로컬 제어)** 양단에서 강제적인 상태 초기화(State Reset)를 수행해야 한다.\n\n### 3.1 WEB ACS: 작업 취소(Job Cancel)와 에러 리셋\n가장 먼저 수행되는 `Job Cancel`과 `Error Reset`은 관제 시스템의 **명령 큐(Command Queue)**를 비우는 과정이다.\n*   **작동 원리:** 현재 ACS는 AMR에게 \"작업 수행 중\"이라는 상태를 부여하고 있다. 하지만 현장의 AMR은 에러로 멈춰 있다. 이 불일치를 해소하기 위해, 현재 할당된 미션 ID를 강제로 만료(Expire)시키고, AMR의 소프트웨어적 상태를 '에러(Error)'에서 '대기(Idle)' 혹은 '준비(Ready)' 상태로 천이시킨다. 이는 상위 시스템이 잘못된 명령을 지속적으로 재전송하는 것을 차단한다.\n\n### 3.2 설비 HMI: Work Reset을 통한 PLC 레지스터 초기화\nACS에서의 조치가 '소프트웨어적 초기화'라면, 설비 HMI에서의 `Work Reset`은 **'하드웨어 로직의 초기화'**이다.\n*   **데이터 흐름:** 운영자가 HMI에서 Reset을 입력하면, 이 신호는 PLC의 특정 메모리 주소(M-Bit 등)를 트리거한다.\n*   **내부 로직:** PLC는 이 신호를 받자마자 현재 진행 중이던 시퀀스(Step Number)를 0 또는 초기 단계로 강제 복귀시킨다. 이 과정에서 이전에 문제가 되었던 '비정상 신호(Latching된 에러 비트)'가 소거(Clear)되며, 설비는 다시 외부 장비(AMR)의 신호를 받아들일 수 있는 **수용성(Receptivity)**을 회복한다.\n\n---\n\n## 4. 상태 동기화(State Synchronization)와 미션 재개\n\n### 4.1 'After Docking' 상태 변경의 공학적 의미\n복구의 마지막 단계에서 WEB ACS를 통해 AMR의 상태를 `After Docking`으로 변경하는 것은 단순한 상태 표시 변경이 아니다. 이는 **'가상 상태 주입(Virtual State Injection)'** 기법에 해당한다.\n\n*   **Why?** AMR은 이미 물리적으로 설비 앞에 도착해 있다. 만약 시스템을 완전히 초기화하여 처음부터 다시 시작하게 한다면, AMR은 후진하여 도킹 위치를 벗어났다가 다시 진입해야 한다. 이는 불필요한 에너지 소모이자 사이클 타임(Cycle Time)의 손실이다.\n*   **How:** 엔지니어는 시스템에게 \"AMR은 이미 도킹 주행을 성공적으로 마쳤다\"라는 사실(Fact)을 강제로 입력한다. 즉, `After Docking` 상태로 변경함으로써, 제어 알고리즘의 포인터를 '도킹 주행(Navigation)' 단계가 아닌, 그 다음 단계인 **'작업 수행(Action Execution)'** 단계로 점프시킨다.\n\n### 4.2 미션 재시도(Retry) 및 완료 처리\n상태 동기화가 완료되면 두 가지 시나리오가 가능하다:\n1.  **미션 재시도:** PLC와 AMR의 통신 채널이 깨끗해졌으므로, 다시 핸드쉐이킹을 시도하여 작업을 수행한다.\n2.  **완료 처리:** 만약 실제로는 작업이 이미 수행되었으나 신호만 누락된 경우라면, 시스템 상에서 강제로 '완료' 처리하여 데이터 정합성(Data Consistency)을 맞춘다.\n\n---\n\n## 5. 결론\n\n1T AMR의 도킹 후 타임아웃 에러에 대한 복구 절차는 단순한 에러 코드 삭제가 아니다. 이는 **[물리적 위치] - [PLC 신호 상태] - [ACS 논리 상태]**라는 3계층의 불일치를 해소하는 과정이다.\n\n1.  **ACS Reset:** 상위 관제 시스템의 명령 루프를 끊고,\n2.  **HMI Reset:** 하위 설비 제어기의 꼬인 신호 비트를 소거하며,\n3.  **Status Change (After Docking):** 물리적 현실(이미 도킹됨)과 논리적 순서(작업 시작 전)를 동기화하여 효율성을 극대화한다.\n\n이러한 체계적인 복구 메커니즘은 BMA 공정의 가동률(Availability)을 유지하고, 자동화 시스템의 신뢰성을 보장하는 핵심 아키텍처이다.",
        "questions": [
            "BMA 공정 자동화 시스템 내 1T AMR과 설비 간 인터페이스 및 예외 처리 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR의 물리적 도킹 완료 후 PLC와의 핸드쉐이킹 과정에서 발생하는 신호 무결성 검증 체계와 Watchdog Timer를 활용한 Fail-Safe 시스템의 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "설비 측의 비정상 PLC 신호로 인한 핸드쉐이킹 타임아웃 발생 시, WEB ACS의 가상 상태 주입과 HMI의 레지스터 초기화가 데이터 정합성을 회복하는 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 33,
        "preprocessed_group": "1T AMR(Pallet Lift)이 BSA Outlet, BMA Outlet, BPA Empty SKID Outlet 구역에 도킹하였으나 지게차 작업 등 작업자 간섭으로 인해 들어 올릴 제품(Work)이 없어 작업 지연이 발생하는 경우, 자동 복구 실패 시 설비 HMI에서 Call Cancel 및 Work Reset을 수행하고 WEB ACS에서 Job Cancel, Error Reset, After Docking 순으로 조작하여 조치한다.\n\n알람 발생 후 해당 포트에 제품이 다시 준비되어 작업 재개가 가능한 경우, 수동 조작이 필요한 상황에서 설비 HMI의 Work Reset을 수행하고 WEB ACS에서 Job Cancel, Error Reset, After Docking 순으로 조작하여 공정을 재개한다.",
        "textbook": "# BMA 공정 내 이기종 시스템 간 예외 상황 처리 및 복구 메커니즘: 1T AMR과 설비 간 핸드쉐이킹(Handshaking) 실패를 중심으로\n\n## 1. 서론: 물류 자동화의 접점과 불확실성 관리\n현대자동차그룹의 BMA(Battery Module Assembly) 공정은 정밀한 조립 라인과 유연한 물류 시스템이 결합된 복합 엔지니어링 환경입니다. 특히 **1T AMR(Autonomous Mobile Robot, Pallet Lift Type)**이 운영되는 **BSA Outlet, BMA Outlet, BPA Empty SKID Outlet** 구역은 고정된 설비(Static Equipment)와 이동형 로봇(Dynamic Robot)이 물리적, 논리적으로 결합되는 '임계 접점(Critical Interface)'입니다.\n\n이 구역에서는 PLC(Programmable Logic Controller) 기반의 설비 제어와 ACS(AGV Control System) 기반의 로봇 관제가 밀리초(ms) 단위로 동기화되어야 합니다. 그러나 지게차 작업과 같은 비정형적인 인간 개입(Human Intervention)은 시스템이 예측하지 못한 '물리적 공백'을 초래하며, 이는 논리적 교착 상태(Deadlock)를 유발합니다. 본 챕터에서는 이러한 예외 상황 발생 시 시스템 내부에서 일어나는 데이터 흐름과, 이를 해소하기 위한 복구 프로토콜의 공학적 원리를 심층 분석합니다.\n\n---\n\n## 2. 도킹 시나리오와 'Work' 부재의 인과관계 분석\n\n### 2.1. 정상 도킹 프로세스와 센서 퓨전\n정상적인 시나리오에서 1T AMR이 해당 Outlet에 도킹(Docking)한다는 것은 단순한 정차가 아닙니다. 이는 AMR의 위치 보정 센서(Lidar 또는 V-Marker 인식)가 설비와의 정렬 오차를 허용 범위(Tolerance) 내로 맞추고, 상위 관제 시스템(ACS)에 \"Arrived\" 신호를 송신했음을 의미합니다. 이후 AMR은 리프트(Lift)를 상승시켜 팔레트(Work)를 적재하려 시도합니다. 이때 시스템은 다음과 같은 센서 피드백을 기대합니다.\n*   **하중 감지:** 리프트 모터의 전류 부하(Current Load) 상승 감지.\n*   **광학 센서:** 팔레트 유무 확인을 위한 Photoelectric Sensor의 빔 차단(Beam Break).\n\n### 2.2. 외부 간섭에 의한 논리적 불일치 (Logical Discrepancy)\n문제는 **지게차 작업 등 작업자 간섭**으로 인해 물리적인 제품(Work)이 제거되었을 때 발생합니다.\n1.  **ACS/PLC의 기대 상태(Expected State):** 공정 데이터 상 해당 포트에는 배터리 모듈 또는 공(Empty) 스키드가 존재함. AMR에게 \"Pick-up\" 명령 하달.\n2.  **물리적 실제 상태(Actual State):** 작업자에 의해 제품이 이미 반출됨.\n3.  **결과:** AMR은 도킹에 성공했으나, 리프팅 과정에서 허공을 가르거나(No Load), 센서가 물체를 감지하지 못합니다.\n\n이 불일치는 시스템에 **'작업 지연(Job Delay)'**이라는 현상으로 나타나며, 내부적으로는 **자동 복구(Auto-recovery) 알고리즘의 실패**로 이어집니다. 자동 복구는 통상적인 통신 에러나 일시적 센서 노이즈를 해결하기 위해 설계되었으나, '물리적 대상의 소실'은 소프트웨어적 재시도(Retry)만으로는 해결할 수 없는 치명적 오류(Fatal Error)로 분류되기 때문입니다.\n\n---\n\n## 3. 시스템 복구 아키텍처: 계층별 조작의 공학적 의미\n\n자동 복구가 불가능한 상황에서 엔지니어는 **설비(Local)**와 **관제(Global)** 두 계층에서 동기화된 조작을 수행해야 합니다. 이 과정은 꼬여버린 데이터의 매듭을 풀고, 시스템의 상태 머신(State Machine)을 초기화하는 과정입니다.\n\n### 3.1. 설비(Equipment) 레벨의 조치: HMI 조작\n설비 HMI(Human Machine Interface)에서의 조작은 로컬 PLC의 레지스터(Register) 값을 직접 제어합니다.\n\n*   **Call Cancel (호출 취소):**\n    *   **Why?** 설비 PLC는 제품이 없는데도 계속해서 \"AMR이 필요하다\"는 요청 신호(Request Bit)를 상위 시스템에 보내고 있을 가능성이 높습니다.\n    *   **Mechanism:** 이 조작은 PLC 내의 `AMR_Call_Req` 비트를 `False(0)`로 강제 전환합니다. 이는 \"더 이상 로봇이 필요하지 않음\"을 선언하여, 불필요한 로봇 배차를 원천 차단합니다.\n*   **Work Reset (작업 초기화):**\n    *   **Why?** 설비는 제품이 반출되었음을 인지하지 못하고, 여전히 \"제품 있음(Work Present)\" 상태로 래치(Latch)되어 있을 수 있습니다.\n    *   **Mechanism:** 해당 포트의 재고 상태 메모리를 소거(Clear)합니다. 이는 센서 값을 재판독(Re-scan)하게 하거나, 강제로 \"Empty\" 상태로 전환하여 설비와 실제 물리적 환경 간의 동기화를 맞춥니다.\n\n### 3.2. 관제(Control) 레벨의 조치: WEB ACS 조작\n로컬 설비가 정리되었다면, 이제 '멍하니 서 있는' AMR과 이를 관리하는 ACS 서버의 논리를 수정해야 합니다.\n\n*   **Job Cancel (작업 취소):**\n    *   **Mechanism:** ACS의 스케줄러(Scheduler)에서 해당 AMR에 할당된 `Mission ID`를 삭제합니다. 이 과정이 선행되지 않으면, AMR은 에러가 클리어되더라도 다시 \"없는 제품\"을 가지러 가려는 유령 작업(Ghost Job)을 수행하려 할 것입니다.\n*   **Error Reset (에러 리셋):**\n    *   **Mechanism:** AMR과 ACS 데이터베이스에 기록된 알람 플래그(Alarm Flag)를 소거합니다. 이는 로봇을 'Fault' 상태에서 'Idle' 또는 'Ready' 상태로 전환하기 위한 준비 단계입니다.\n*   **After Docking (도킹 후 처리):**\n    *   **Why & How:** 가장 중요한 단계입니다. AMR은 현재 물리적으로는 도킹 위치에 있지만, 논리적으로는 \"작업 실패\" 상태입니다. 단순히 에러만 끄면 로봇은 자신이 도킹 중인지, 주행 중인지 판단하지 못할 수 있습니다.\n    *   `After Docking` 명령은 시스템에게 **\"도킹 절차는 (성공이든 실패든) 종료되었으니, 다음 시퀀스(Undocking 또는 복귀)로 강제 전이하라\"**는 신호를 보냅니다. 이는 로봇이 제자리에서 맴돌거나 급발진하는 것을 방지하고, 안전하게 포트를 빠져나오게 하는 **상태 전이(State Transition) 트리거** 역할을 합니다.\n\n---\n\n## 4. 시나리오별 복구 프로토콜의 차이와 논리적 타당성\n\n### 4.1. 시나리오 A: 제품 소실로 인한 작업 중단 (Empty Load)\n제품이 사라져 작업을 진행할 수 없는 경우, 시스템의 목표는 **\"AMR을 빈손으로 안전하게 철수시키는 것\"**입니다.\n1.  **HMI (Call Cancel + Work Reset):** 설비가 더 이상 로봇을 부르지 않게 하고, 제품이 없음을 확정합니다.\n2.  **ACS (Job Cancel -> Error Reset -> After Docking):** 할당된 임무를 파기하고, 로봇을 에러 상태에서 해제한 뒤, 도킹 구역에서 빠져나오게 합니다.\n\n### 4.2. 시나리오 B: 제품 재준비 후 작업 재개 (Retry Logic)\n알람 발생 후, 작업자가 다시 제품을 포트에 채워 넣어(Reloading) 공정을 재개해야 하는 상황입니다. 이때는 `Call Cancel`을 수행하지 않는 것이 핵심입니다.\n1.  **HMI (Work Reset Only):**\n    *   `Call Cancel`을 생략하는 이유는, 설비가 여전히 \"AMR이 필요함\"을 유지해야 하기 때문입니다.\n    *   `Work Reset`을 수행하여 설비가 새로 적재된 제품을 센서를 통해 다시 인식(Re-recognition)하도록 유도합니다. 이는 PLC가 \"아, 이제 진짜 제품이 있구나\"라고 판단하게 하는 트리거가 됩니다.\n2.  **ACS (Job Cancel -> Error Reset -> After Docking):**\n    *   기존의 '실패한 작업(Failed Job)'은 이미 오염된 데이터이므로 `Job Cancel`로 폐기해야 합니다.\n    *   이후 시스템이 정상화되면, 설비의 살아있는 Call 신호에 의해 ACS는 새로운 `Mission ID`를 생성하여 작업을 처음부터 다시 시작하거나, 대기 중인 AMR에게 즉시 재할당합니다.\n\n## 5. 결론\nBMA 공정의 1T AMR 시스템에서 발생하는 'Work 부재' 오류는 단순한 기계적 결함이 아니라, **물리적 환경의 변화를 사이버 시스템(Cyber-Physical System)이 실시간으로 반영하지 못해 발생하는 지연(Latency)**입니다.\n\n제시된 복구 절차는 **Local HMI를 통한 물리적 상태의 재정의(Redefinition)**와 **Global ACS를 통한 논리적 임무의 재설정(Reset)**을 순차적으로 수행함으로써, 시스템의 무결성을 확보하고 안전하게 공정을 재개하는 표준화된 알고리즘입니다. 엔지니어는 이 순서가 단순한 매뉴얼이 아니라, 시스템 내부의 데이터 래치(Latch)와 인터락(Interlock)을 순차적으로 해제하는 논리적 열쇠임을 이해해야 합니다.",
        "questions": [
            "BMA 공정 내 1T AMR과 설비 간 핸드쉐이킹 실패 시 발생하는 논리적 교착 상태와 계층별 복구 프로토콜에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR 도킹 시나리오에서 리프트 모터의 전류 부하 및 광학 센서 피드백이 전체 ACS/PLC 제어 시스템 내에서 어떻게 상호작용하며 물리적 상태를 검증하는지 그 작동 원리를 공학적으로 분석하시오.",
            "지게차 작업 등 외부 간섭으로 인한 '물리적 제품 소실' 상황 발생 시, 시스템이 '작업 지연'을 인지하고 Fatal Error로 처리하는 논리적 판단 과정과 HMI/ACS를 통한 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 34,
        "preprocessed_group": "1T AMR(Pallet Lift)의 리프트 Up/Down 작업 후 SKID 휨 등으로 인해 제품 감지 센서가 미감지되어 자동 복구가 실패한 경우, WEB ACS에서 Job Cancel, Error Reset, Lift down을 수행하고 설비 HMI에서 Call Cancel과 Work Reset을 거쳐 AMR을 점검 장소로 이동시킨 후 작업자가 지게차로 해당 PLT를 수동 배출한다.\n\n1T AMR(Pallet Lift)의 Loading 작업 중 센서 조정이 필요하여 자동 복구가 실패한 경우, WEB ACS에서 JOB Cancel, Work Reset, Lift down을 수행하고 설비 HMI에서 Call Cancel과 Work Reset을 거친 뒤 AMR을 점검 장소로 이동시켜 센서를 점검하며 해당 SKID 이송을 위해 다른 AMR을 할당한다.\n\n1T AMR(Pallet Lift)의 Unload 작업 중 센서 조정이 필요하거나 잔류 감지 오류로 인해 자동 복구가 실패한 경우, WEB ACS에서 Job Cancel, Error Reset, Lift down, Job Complete(강제 완료), Payload Clear(적재물 없음 처리)를 수행하고 설비 HMI에서 Work Reset을 거친 뒤 AMR을 점검 장소로 이동시켜 센서를 점검한다.",
        "textbook": "# BMA 공정 내 1T AMR 리프트 시스템의 예외 처리 및 복구 프로토콜에 관한 기술 백서\n\n**작성자:** 수석 아키텍트 (Chief Architect)\n**주제:** 1T AMR(Pallet Lift)의 물리적/센서적 이상 상황에 따른 시스템 복구 메커니즘 및 데이터 흐름 분석\n\n---\n\n## 1. 서론: 자동화 물류 시스템의 불확실성과 제어 계층\n\nBMA(Battery Module Assembly) 공정의 핵심 물류를 담당하는 1T AMR(Autonomous Mobile Robot)은 단순한 이송 장치가 아니라, 물리적 환경(Physical Layer)과 논리적 제어(Logical Layer)가 실시간으로 상호작용하는 Cyber-Physical System(CPS)의 단말입니다. 특히 고중량의 배터리 모듈을 적재한 Pallet(PLT)를 리프팅(Lifting)하는 과정은 기구학적 정밀도와 센서 데이터의 신뢰성이 극도로 요구되는 작업입니다.\n\n본 챕터에서는 1T AMR 운용 중 발생할 수 있는 대표적인 세 가지 교착 상태(Deadlock) 시나리오를 분석합니다. 물리적 변형(Skid 휨), 센서 정렬 오차, 그리고 잔류 데이터 불일치 상황에서 시스템이 어떻게 안전을 확보하고 논리적 정합성을 복구하는지, 그 심층적인 작동 원리를 기술합니다.\n\n---\n\n## 2. 기구적 변형에 의한 감지 실패와 수동 배출 메커니즘 (Scenario A)\n\n### 2.1. 문제의 공학적 배경: Skid의 탄성 변형과 센서 사각지대\n1T급 고중량 화물을 지지하는 Skid는 반복적인 하중 스트레스로 인해 미세한 기구적 변형(Deformation)이나 휨(Bending) 현상이 발생할 수 있습니다. AMR의 리프트 상단에 장착된 **제품 감지 센서(Product Detection Sensor)**는 일반적으로 광학적 방식(Photoelectric)이나 근접 유도형(Inductive Proximity) 방식을 사용합니다.\n\n정상적인 조건에서 이 센서는 Skid의 특정 지점을 타겟팅하여 적재 여부를 판단합니다. 그러나 Skid가 허용 공차(Tolerance) 이상으로 휘어질 경우, 센서의 빔(Beam)이 타겟을 벗어나거나 반사각이 틀어지게 됩니다. 이로 인해 실제로는 제품이 존재함에도 불구하고 센서 신호(Digital Input)가 `Low(0)` 상태를 유지하는 **False Negative(미감지)** 오류가 발생합니다.\n\n### 2.2. 시스템 교착 상태와 자동 복구 실패\nPLC(Programmable Logic Controller)는 리프트 동작(Up/Down) 완료 후 센서 값을 확인하여 다음 시퀀스로 넘어가는 **Handshaking** 구조를 가집니다. 센서가 제품을 감지하지 못하면 PLC는 \"리프트 동작은 완료되었으나 대상물이 확인되지 않음\"이라는 논리적 모순에 빠지게 되며, 이는 안전을 위해 자동 복구(Auto-recovery) 루틴을 차단하고 에러 상태로 락(Lock)을 겁니다.\n\n### 2.3. 복구 프로토콜 및 데이터 흐름\n이 상황은 단순한 소프트웨어 리셋으로 해결할 수 없는 '물리적 결함'이 원인이므로, 다음과 같은 다층적 복구 절차가 수행됩니다.\n\n1.  **WEB ACS (Global Control Layer):**\n    *   **Job Cancel:** 현재 AMR에 할당된 미션 큐(Mission Queue)를 삭제하여 상위 시스템의 대기 상태를 해제합니다.\n    *   **Error Reset & Lift Down:** AMR의 에러 레지스터를 소거하고, 무게 중심을 낮추어 안전을 확보하기 위해 리프트를 하강시킵니다. 이는 AMR 이동 시 전복 위험을 방지하기 위한 필수적인 물리적 안전 조치입니다.\n2.  **설비 HMI (Local Control Layer):**\n    *   **Call Cancel & Work Reset:** 설비 측 PLC가 AMR을 호출(Call)했던 신호를 취소하고, 해당 공정의 작업 메모리를 초기화합니다. 이를 통해 설비는 AMR이 없는 초기 상태(Idle)로 복귀합니다.\n3.  **물리적 배출 (Physical Intervention):**\n    *   AMR은 자체 주행이 가능하더라도 적재된 화물의 상태가 불안정(Skid 휨)하므로, 즉시 **점검 장소(Maintenance Area)**로 이동합니다.\n    *   **지게차 수동 배출:** 휘어진 Skid는 자동화 설비 내에서 재사용 시 잼(Jam)이나 낙하 사고를 유발할 수 있습니다. 따라서 작업자가 지게차를 이용해 해당 PLT를 물리적으로 제거(Manual Extraction)하여 공정 라인에서 영구히 배제시키는 것이 이 프로토콜의 핵심입니다.\n\n---\n\n## 3. 로딩 공정 내 센서 오정렬과 자원 재할당 로직 (Scenario B)\n\n### 3.1. 센서 정렬(Alignment)의 중요성\nLoading 작업은 설비(Conveyor/Station)와 AMR 간의 정밀한 도킹(Docking)을 요구합니다. 이때 사용되는 센서는 수 밀리미터(mm) 단위의 위치 정밀도를 가져야 합니다. 그러나 바닥의 평탄도(Flatness) 문제나 AMR 서스펜션의 노후화 등으로 인해 센서의 광축(Optical Axis)이 미세하게 틀어질 경우, 설비와 AMR 간의 **인터락(Interlock)** 신호 교환이 실패합니다.\n\n### 3.2. 복구 전략: 가용성(Availability) 유지를 위한 자원 교체\n이 경우, 문제의 원인이 화물(Skid)이 아닌 **AMR 자체의 센서 하드웨어**에 있을 확률이 높습니다. 따라서 시스템은 해당 AMR을 '신뢰할 수 없는 자원(Unreliable Resource)'으로 분류하고 격리 조치합니다.\n\n1.  **WEB ACS 조치:**\n    *   **Job Cancel & Work Reset:** 현재 수행 중인 로딩 작업을 중단하고 논리적 연결을 끊습니다.\n    *   **Lift Down:** 안전한 이동을 위해 리프트를 하강합니다.\n2.  **설비 HMI 조치:**\n    *   **Call Cancel & Work Reset:** 설비 입장에서 \"AMR 도착 실패\"로 간주하고 요청을 초기화합니다.\n3.  **자원 재할당 (Resource Reallocation):**\n    *   문제의 AMR은 **점검 장소**로 이동하여 센서 캘리브레이션(Calibration) 절차를 밟습니다.\n    *   **핵심 로직:** ACS는 해당 SKID 이송 임무(Task)가 아직 완료되지 않았음을 인지하고, 즉시 **다른 가용 AMR(Alternative AMR)**을 호출하여 작업을 재할당합니다. 이는 공정의 **Throughput(처리량)** 저하를 최소화하기 위한 스케줄링 알고리즘의 동작입니다.\n\n---\n\n## 4. 언로딩 공정의 잔류 감지 오류와 논리적 상태 동기화 (Scenario C)\n\n### 4.1. 잔류 감지(Residual Detection)와 데이터 무결성\nUnload 작업 후 AMR은 빈 상태(Empty)여야 합니다. 그러나 센서의 노이즈나 이물질로 인해 \"화물이 남아있음\"으로 오인식(False Positive)하거나, 반대로 화물이 있는데 없다고 인식하는 오류가 발생할 수 있습니다. 이는 **물리적 상태(Physical State)**와 시스템 상의 **데이터 상태(Logical State)**가 불일치하는 심각한 문제입니다.\n\n### 4.2. 강제 상태 동기화 (Forced State Synchronization)\n자동 복구가 실패했다는 것은 센서 피드백만으로는 실제 상태를 확정할 수 없음을 의미합니다. 따라서 운영자의 판단 하에 시스템의 데이터를 강제로 수정하는 절차가 필요합니다.\n\n1.  **WEB ACS (Data Override):**\n    *   **Job Cancel & Error Reset:** 에러 상황을 해제합니다.\n    *   **Lift Down:** 이동 준비 상태로 전환합니다.\n    *   **Job Complete (강제 완료):** 시스템 상에서 해당 작업이 '실패'가 아닌 '완료'된 것으로 처리합니다. 이는 상위 MES(Manufacturing Execution System)에 작업 완료 신호를 보내 공정 흐름이 막히지 않게 하기 위함입니다.\n    *   **Payload Clear (적재물 없음 처리):** 이것이 가장 중요한 단계입니다. AMR 내부 메모리나 ACS 데이터베이스 상에 남아있는 \"적재물 있음(Payload: 1)\" 플래그를 강제로 \"없음(Payload: 0)\"으로 덮어씁니다(Overwrite). 이를 수행하지 않으면 AMR은 자신이 화물을 들고 있다고 판단하여 다음 이동 명령을 거부하거나 충돌 방지 로직에 의해 제자리에서 정지하게 됩니다.\n2.  **설비 HMI:**\n    *   **Work Reset:** 설비 측의 언로딩 완료 신호를 초기화합니다.\n3.  **사후 조치:**\n    *   데이터상으로는 '빈 차'가 된 AMR을 점검 장소로 이동시켜, 실제 센서가 왜 오작동했는지(먼지, 파손, 전압 불안정 등)를 정밀 진단합니다.\n\n---\n\n## 5. 결론\n\nBMA 공정의 1T AMR 시스템에서 발생하는 에러 복구 프로세스는 단순히 알람을 끄는 행위가 아닙니다. 이는 **1) 물리적 안전 확보(Lift Down), 2) 논리적 교착 상태 해제(Job/Call Cancel), 3) 데이터 무결성 복구(Payload Clear), 4) 공정 연속성 유지(AMR 재할당)**라는 네 가지 엔지니어링 원칙이 순차적으로 적용되는 정교한 알고리즘입니다.\n\n운영자와 엔지니어는 각 단계가 시스템의 어느 레이어(ACS, HMI, Physical)에 영향을 미치는지 명확히 이해하고, 특히 'Payload Clear'와 같은 데이터 오버라이드 명령이 갖는 논리적 파급력을 인지한 상태에서 복구 작업을 수행해야 합니다.",
        "questions": [
            "BMA 공정 내 1T AMR 리프트 시스템의 예외 처리 시나리오별 복구 프로토콜과 데이터 흐름 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "Skid의 탄성 변형이나 센서 광축 오정렬이 발생했을 때, 제품 감지 센서와 PLC 간의 Handshaking 실패가 전체 제어 시스템의 교착 상태로 이어지는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "언로딩 공정 후 물리적 상태와 논리적 데이터의 불일치가 발생했을 때, Payload Clear를 통한 강제 상태 동기화가 시스템 무결성 유지에 미치는 영향과 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 35,
        "preprocessed_group": "1T AMR의 리프트 구동 중 상한(Up) 또는 하한(Down) 센서가 감지되지 않아 동작이 멈춘 경우, Loading 작업 시에는 WEB ACS에서 Job Cancel, Error Reset, Lift down을 순차적으로 실행하고 설비 HMI에서 Call Cancel과 Work Reset을 수행한 후 1T AMR을 점검 장소로 이동하여 센서를 점검한다.\n\n1T AMR의 리프트 구동 중 상한(Up) 또는 하한(Down) 센서가 감지되지 않아 동작이 멈춘 경우, Unloading 작업 시에는 WEB ACS에서 Job Cancel, Error Reset, Lift down, Job Complete, Payload Clear를 순차적으로 실행하고 설비 HMI에서 Work Reset을 수행한 후 1T AMR을 점검 장소로 이동하여 센서를 점검한다.\n\n수동 조작이 필요한 경우, 점검이 완료된 1T AMR은 반드시 이상 유무를 확인한 후 후공정에 투입한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: AMR 리프트 제어 시스템의 예외 처리 및 복구 메커니즘\n## (Technical Whitepaper: Exception Handling & Recovery Logic for AMR Lift Control System)\n\n### 1. 서론: 리프트 피드백 루프와 센서 의존성 (Lift Feedback Loop & Sensor Dependency)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내 물류의 핵심인 **1T AMR(Autonomous Mobile Robot)**은 고중량 배터리 모듈의 적재(Loading) 및 하역(Unloading)을 위해 수직 리프트 메커니즘을 사용합니다. 이 시스템은 정밀한 위치 제어를 위해 **폐루프 제어(Closed-loop Control)** 방식을 채택하고 있으며, 리프트의 물리적 한계점 도달 여부를 판단하기 위해 **상한(Up) 및 하한(Down) 리미트 센서(Limit Sensor)**에 전적으로 의존합니다.\n\n정상적인 시퀀스에서 AMR의 MCU(Main Control Unit)가 리프트 모터에 구동 신호를 인가하면, 리프트는 목표 지점으로 이동하고 해당 위치의 센서가 트리거(Trigger)됨으로써 동작 완료 신호(Complete Signal)를 생성합니다. 그러나 기구적 걸림, 센서 오작동, 또는 통신 지연으로 인해 지정된 시간 내에 센서 신호가 감지되지 않을 경우, 시스템은 이를 **'위치 결정 실패(Positioning Failure)'**로 간주하고 즉시 구동을 중단하여 하드웨어 손상을 방지합니다.\n\n본 챕터에서는 이러한 센서 감지 실패 시, 공정의 데이터 무결성(Data Integrity)을 유지하고 시스템을 안전하게 복구하기 위한 **ACS(Automated Control System) 및 HMI(Human Machine Interface) 레벨의 논리적 복구 절차**를 심층 분석합니다.\n\n---\n\n### 2. Loading 프로세스 중 센서 에러 발생 시의 복구 로직 (Recovery Logic during Loading)\n\nLoading 작업은 설비(Station)에서 AMR로 자재를 이재하는 과정입니다. 이 단계에서 리프트 센서 에러가 발생하면, 설비와 AMR 간의 **핸드쉐이킹(Handshaking)**이 비정상적으로 단절된 상태가 됩니다. 따라서 복구의 핵심은 '작업 요청의 취소'와 '설비 대기 상태의 해제'입니다.\n\n#### 2.1. ACS 레벨: 작업 할당 해제 및 물리적 안정화\n1.  **Job Cancel (작업 취소):**\n    *   **Why:** Loading 실패 시, ACS 상에서 해당 AMR은 여전히 '작업 수행 중(Busy)' 상태로 잠겨 있습니다. 이를 해제하지 않으면 시스템은 해당 자재가 이송 중이라고 잘못 판단하게 됩니다.\n    *   **Mechanism:** `Job Cancel` 명령은 ACS의 스케줄러에게 해당 미션이 실패했음을 알리고, 할당된 자재 ID와 AMR ID 간의 논리적 연결(Binding)을 강제로 끊습니다.\n2.  **Error Reset (에러 리셋):**\n    *   **Why:** AMR 내부의 PLC 레지스터에 기록된 에러 플래그(Error Flag)를 소거하여 제어권을 회복합니다.\n3.  **Lift Down (리프트 하강):**\n    *   **Engineering Principle:** 리프트가 상승 중 멈췄거나 어정쩡한 위치에 있을 경우, AMR의 무게 중심(Center of Gravity)이 높아져 주행 안정성이 저하됩니다. 점검 장소로 이동하기 전, 리프트를 기구적 최하단으로 복귀시켜 주행 중 전복 위험을 제거하고 진동에 의한 2차 손상을 방지합니다.\n\n#### 2.2. 설비 HMI 레벨: 인터페이스 동기화\n1.  **Call Cancel (호출 취소):**\n    *   **Logic:** 설비는 자재를 내보내기 위해 AMR을 호출(Call)한 상태입니다. AMR이 에러로 인해 작업을 수행할 수 없으므로, 설비 측 PLC에 유지되고 있는 'AMR 요청 신호'를 소거해야 합니다.\n2.  **Work Reset (작업 리셋):**\n    *   **Logic:** 설비와 AMR 간의 인터페이스 신호(예: Ready, Busy, Complete)를 초기화합니다. 이를 통해 설비는 다음 AMR이 도착할 때까지 대기 상태(Idle)로 안전하게 복귀합니다.\n\n---\n\n### 3. Unloading 프로세스 중 센서 에러 발생 시의 복구 로직 (Recovery Logic during Unloading)\n\nUnloading 작업은 AMR이 적재한 자재를 설비로 투입하는 과정입니다. 이 시나리오의 복구 로직이 Loading과 가장 크게 다른 점은 **'데이터(Payload)의 처리'** 방식입니다.\n\n#### 3.1. ACS 레벨: 가상 데이터(Digital Twin)와 물리적 상태의 분리\nUnloading 중 에러가 발생했을 때, 물리적으로 자재가 AMR에 남아있는지 혹은 설비에 걸쳐있는지는 현장 상황에 따라 다릅니다. 그러나 시스템 관제 측면에서는 해당 주문(Job)을 종결시켜야만 다음 프로세스로 넘어갈 수 있습니다.\n\n1.  **Job Cancel & Error Reset:** Loading 시와 동일하게 현재 수행 중인 미션의 실행을 중단하고 제어권을 확보합니다.\n2.  **Lift Down:** 안전한 이동을 위해 리프트를 하강시킵니다.\n3.  **Job Complete (작업 강제 완료):**\n    *   **Critical Logic:** Unloading 실패 시 단순히 Cancel만 수행하면, ACS는 AMR이 여전히 자재를 가지고 있다고 판단하여 재작업을 지시할 수 있습니다. 센서 고장 상태에서 재작업은 불가능하므로, 시스템적으로는 해당 Job이 완료된 것으로 처리하여 트랜잭션을 닫습니다.\n4.  **Payload Clear (페이로드 소거):**\n    *   **Data Flow:** AMR의 메모리상에 존재하는 '자재 정보(Payload Data)'를 삭제합니다.\n    *   **Mechanism:** 이는 물리적으로 자재가 없어졌음을 의미하는 것이 아니라, **\"이 AMR은 논리적으로 빈(Empty) 상태이므로, 정비 후 즉시 다른 작업에 투입될 수 있음\"**을 시스템에 선언하는 절차입니다. 실제 자재의 처리는 수동으로 이루어지지만, 데이터상으로는 AMR을 초기화하여 전산상의 유령 재고(Ghost Inventory) 발생을 방지합니다.\n\n#### 3.2. 설비 HMI 레벨: 수취 대기 상태 해제\n1.  **Work Reset:** 설비는 자재를 받기 위해 대기 중이던 시퀀스를 초기화합니다. 이를 통해 설비는 에러가 발생한 AMR을 무시하고, 수동 투입이나 다음 AMR의 진입을 허용할 수 있는 상태가 됩니다.\n\n---\n\n### 4. 물리적 점검 및 프로세스 재진입 (Physical Inspection & Process Re-entry)\n\n소프트웨어적인 리셋이 완료된 후, 1T AMR은 점검 장소(Maintenance Area)로 이동합니다. 이 단계는 자동화 영역에서 수동(Manual) 영역으로 전환되는 지점입니다.\n\n#### 4.1. 센서 시스템의 공학적 점검 포인트\n단순한 육안 검사가 아닌, 센서의 전기적/기계적 특성을 검증해야 합니다.\n*   **광학적 간섭(Optical Interference):** 포토 센서(Photo Sensor) 방식일 경우, 렌즈 표면의 오염이나 외부 조명에 의한 노이즈가 없는지 확인합니다.\n*   **히스테리시스(Hysteresis) 및 정렬:** 근접 센서(Proximity Sensor)의 경우, 감지 거리(Sensing Distance) 내에 타겟(Dog)이 정확히 진입하는지, 기구적 유격으로 인해 감지 범위를 벗어나지 않는지 확인합니다.\n*   **배선 무결성(Wiring Integrity):** 리프트의 반복적인 상하 운동으로 인해 케이블 단선이나 커넥터 접촉 불량이 발생했는지 도통 테스트를 수행합니다.\n\n#### 4.2. 프로세스 재투입의 전제 조건\n수동 조작이 개입된 장비는 시스템의 신뢰성을 일시적으로 상실한 상태입니다. 따라서 **\"반드시 이상 유무를 확인한 후 후공정에 투입한다\"**는 원칙은 단순한 권고가 아닌, **시스템 안전 무결성 수준(Safety Integrity Level)**을 유지하기 위한 필수 절차입니다.\n*   정비 완료 후, 작업자는 수동 모드에서 리프트를 상/하한 끝까지 구동하여 센서 신호가 PLC I/O 모듈에 정확히 입력(On/Off)되는지 검증해야 합니다.\n*   이 검증이 완료되어야만 AMR을 Auto Mode로 전환하여 ACS의 관제 하에 다시 배치할 수 있습니다.\n\n---\n\n### 요약 (Summary)\n\n1T AMR의 리프트 센서 에러 대응 프로세스는 단순한 알람 해제가 아닙니다. 이는 **1) AMR의 기구적 안전 확보(Lift Down), 2) 상위 시스템(ACS)의 데이터 정합성 유지(Job Cancel/Complete, Payload Clear), 3) 설비(Station)와의 인터페이스 동기화(Work Reset)**가 유기적으로 결합된 고도의 논리적 시퀀스입니다. 특히 Loading과 Unloading 상황에 따라 자재 데이터(Payload) 처리 방식을 달리함으로써, 물리적 에러가 전산 시스템의 데이터 오류로 전파되는 것을 차단하도록 설계되었습니다.",
        "questions": [
            "BMA 공정 내 1T AMR 리프트 제어 시스템의 예외 처리 및 복구 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "리프트 피드백 루프 내 상/하한 리미트 센서와 MCU 간의 폐루프 제어(Closed-loop Control) 작동 원리와, 센서 감지 실패 시 ACS 및 HMI 레벨에서 발생하는 시스템적 상호작용을 공학적으로 분석하시오.",
            "Loading 및 Unloading 프로세스 중 위치 결정 실패(Positioning Failure) 상황 발생 시, 데이터 무결성 유지를 위한 페이로드 소거(Payload Clear) 및 인터페이스 동기화 로직의 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 36,
        "preprocessed_group": "1T AMR(Pallet Lift)의 물리적 센서 정상 작동 여부를 진단하기 위해서는 WEB ACS에서 해당 AMR을 클릭한 후 Information 탭의 Category를 IO로 변경하여 mobis_1ton_onboard_sensor 1/2(제품 감지) 및 mobis_1ton_lift_up/down_sensor(리프트 위치) 항목의 점등 상태(ON/OFF)를 확인한다.",
        "textbook": "# 1T 중하중 AMR의 I/O 신호 모니터링 및 센서 데이터 정합성 검증 메커니즘\n\n## 1. 서론: BMA 공정 내 AMR 센서 네트워크의 중요성\n현대자동차그룹 BMA(Battery Module Assembly) 공정에서 운용되는 **1T AMR(Pallet Lift Type)**은 고중량의 배터리 모듈을 이송하는 핵심 자산입니다. 이 로봇이 자율주행과 작업을 수행하기 위해서는 물리적 환경을 디지털 신호로 변환하는 센서 시스템의 신뢰성이 필수적입니다. 특히, 적재물의 유무를 판단하는 **Onboard Sensor**와 리프트의 기구학적 위치를 결정하는 **Lift Sensor**는 AMR의 안전 로직(Safety Logic)을 구성하는 최하위 레이어(Physical Layer)의 핵심 요소입니다. 본 장에서는 WEB ACS(Autonomous Control System)를 통해 이러한 물리적 센서의 상태를 원격으로 진단하는 아키텍처와 데이터 흐름, 그리고 각 센서 신호가 갖는 공학적 의미를 심층적으로 분석합니다.\n\n## 2. 시스템 아키텍처 및 데이터 흐름 (Data Topology)\nAMR의 물리적 센서가 감지한 신호가 관제 시스템(ACS)의 UI에 표출되기까지는 다단계의 데이터 파이프라인을 거칩니다.\n\n1.  **Physical Sensing (Edge Layer):** AMR 기체에 부착된 광전 센서(Photoelectric Sensor)나 근접 센서(Proximity Sensor)가 물리적 현상(물체 감지, 금속판 접근 등)을 감지하여 아날로그 신호를 디지털 비트(0 또는 1)로 변환합니다.\n2.  **Internal PLC Processing:** 변환된 신호는 AMR 내부의 PLC(Programmable Logic Controller) 또는 임베디드 제어기의 I/O 모듈로 입력됩니다. 이때 신호는 디바운싱(Debouncing) 처리를 거쳐 노이즈가 제거된 확정적 상태로 레지스터에 저장됩니다.\n3.  **Network Transmission:** AMR의 온보드 PC는 주기적으로(수 ms 단위) 내부 상태 데이터를 패킷화하여 무선 네트워크(Wi-Fi/5G)를 통해 ACS 서버로 전송합니다.\n4.  **Visualization (Application Layer):** **WEB ACS**는 수신된 패킷을 파싱(Parsing)하여 데이터베이스를 갱신하고, 이를 웹 클라이언트의 **Information 탭** 내 **IO 카테고리**에 실시간으로 매핑(Mapping)하여 시각화합니다.\n\n따라서 운영자가 WEB ACS에서 확인하는 점등 상태(ON/OFF)는 단순한 화면상의 그래픽이 아니라, 현장 로봇의 물리적 센서 상태를 실시간으로 반영하는 **디지털 트윈(Digital Twin)** 데이터입니다.\n\n## 3. 적재물 감지 및 안전 인터록: `mobis_1ton_onboard_sensor`\n**`mobis_1ton_onboard_sensor 1/2`** 항목은 AMR 상단부의 팔레트 적재 여부를 판단하는 이중화된 센서 시스템입니다.\n\n*   **작동 원리 (Mechanism):** 통상적으로 광학적 반사(Reflective) 방식이나 투과(Through-beam) 방식을 사용하여, 팔레트가 안착되었을 때 광로(Light Path)가 차단되거나 반사되는 변화를 감지합니다. '1/2'로 구분된 것은 센서의 이중화(Redundancy) 또는 전/후방 감지를 통해 적재물이 올바른 위치에 정렬(Alignment)되었는지 교차 검증하기 위함입니다.\n*   **논리적 인과관계 (Logical Causality):**\n    *   **[조건]** AMR이 적재 위치로 이동하여 리프트를 상승시킴.\n    *   **[트리거]** 팔레트가 AMR 상판에 접촉.\n    *   **[로직 수행]** `mobis_1ton_onboard_sensor 1`과 `2`가 동시에 High(ON) 신호를 출력해야 함.\n    *   **[결과]** 시스템은 'Loaded(적재됨)' 상태로 천이(Transition)하고 주행 명령을 허용함.\n    *   **[예외 처리]** 만약 실제 팔레트가 있는데도 해당 센서가 OFF로 표시된다면, 이는 센서의 렌즈 오염, 배선 단선, 또는 센서 파손을 의미합니다. 이 경우 시스템은 'Phantom Empty(유령 공차)' 상태가 되어, 이미 적재된 상태에서 또 다른 화물을 적재하려 시도하는 치명적인 충돌 사고를 유발할 수 있으므로 즉각적인 하드웨어 점검이 요구됩니다.\n\n## 4. 리프트 기구학적 상태 검증: `mobis_1ton_lift_up/down_sensor`\n**`mobis_1ton_lift_up/down_sensor`**는 리프트 메커니즘의 수직 위치를 확정하는 리미트 스위치(Limit Switch) 또는 유도형 근접 센서(Inductive Proximity Sensor)의 신호를 나타냅니다.\n\n*   **기구학적 제약 (Kinematic Constraints):** 1T급 고중량 AMR은 무게 중심(Center of Gravity) 변화에 민감합니다. 따라서 주행 중 리프트가 어중간한 위치에 있는 것을 방지하기 위해, 리프트는 반드시 '완전 상승(Full Up)' 또는 '완전 하강(Full Down)' 상태에서만 안정적인 동작이 보장됩니다.\n*   **상태 결정 로직:**\n    *   **Lift Up Sensor (ON) & Down Sensor (OFF):** 리프트가 상단 기계적 한계점에 도달하여 고정됨. (이송 모드)\n    *   **Lift Up Sensor (OFF) & Down Sensor (ON):** 리프트가 하단에 완전히 수납됨. (공차 이동 또는 진입 모드)\n    *   **Lift Up Sensor (OFF) & Down Sensor (OFF):** 리프트가 승강 동작 중이거나(Transient State), 센서/모터 계통에 에러가 발생하여 위치를 특정할 수 없는 상태(Unknown State).\n*   **진단 프로세스:** WEB ACS 상에서 해당 센서의 점등 상태를 확인하는 것은 단순한 위치 확인을 넘어, **모션 제어의 완결성**을 검증하는 절차입니다. 예를 들어, 리프트 상승 명령을 내렸음에도 `mobis_1ton_lift_up_sensor`가 ON 되지 않는다면, 이는 유압/전동 액추에이터의 출력 부족이나 기구적 걸림(Jamming) 현상이 발생했음을 시사합니다.\n\n## 5. 결론: 원격 진단 프로토콜의 의의\nWEB ACS의 **Information > IO** 탭을 통한 진단은 엔지니어가 현장에 직접 가지 않고도 AMR의 신경망(Neural Network)이라 할 수 있는 I/O 레벨을 투시할 수 있게 해줍니다.\n엔지니어는 `mobis_1ton_onboard_sensor`와 `mobis_1ton_lift_up/down_sensor`의 비트(Bit) 변화를 모니터링함으로써, 상위 제어 시스템의 소프트웨어 오류인지, 아니면 말단 센서의 물리적 고장인지를 명확히 구분(Isolation)할 수 있습니다. 이는 다운타임을 최소화하고 BMA 공정의 가동률(Availability)을 유지하는 유지보수 전략의 핵심적인 첫 단계입니다.",
        "questions": [
            "BMA 공정 내 1T 중하중 AMR의 I/O 신호 모니터링 시스템 및 센서 데이터 정합성 검증 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR 기체에서 감지된 물리적 센서 신호가 PLC 디바운싱을 거쳐 WEB ACS 인터페이스에 디지털 트윈 데이터로 매핑되기까지의 단계별 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "적재물 감지 센서(Onboard Sensor)의 불일치나 리프트 위치 센서(Lift Up/Down Sensor)의 동시 OFF와 같은 예외 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 37,
        "preprocessed_group": "1T AMR(Pallet Lift)의 리프트 Up/Down 동작 완료 후 시스템상에서 작업 완료 처리가 되지 않는 경우, 1T AMR은 장비(EQP) 측의 'Unload REQ / Load REQ' 신호를 정상적으로 수신하지 못한 상태이므로 자동 복구 실패 시 WEB ACS에서 Job Cancel 및 Error Reset을 수행한 뒤 AMR을 작업 전 상태로 원복하고 After Docking 상태로 변경하여 PLC Manager Interface를 통해 수동으로 인터페이스 신호를 점검해야 한다.",
        "textbook": "# [Technical Whitepaper] 고중량 자율주행 로봇(1T AMR)의 리프트 구동 메커니즘과 신호 동기화 실패에 따른 예외 처리 아키텍처\n\n**작성자:** BMA 자동화 시스템 수석 아키텍트\n**대상:** 시스템 엔지니어, 유지보수 담당자, 자동화 제어 연구원\n\n---\n\n## 1. 서론: BMA 공정 내 1T AMR의 역할과 리프트 제어의 중요성\n\n현대자동차그룹의 BMA(Battery Module Assembly) 공정에서 1T AMR(Autonomous Mobile Robot)은 배터리 모듈이 적재된 고중량 팔레트를 이송하는 핵심 물류 설비입니다. 1톤에 달하는 하중을 지지하며 정밀하게 도킹(Docking)하고, 리프트(Lift)를 승하강(Up/Down)시키는 과정은 단순한 기계적 움직임을 넘어, 설비(Equipment, EQP)와 로봇 간의 고도화된 통신 프로토콜에 의해 제어됩니다.\n\n본 챕터에서는 1T AMR이 리프트 동작을 물리적으로 완료했음에도 불구하고, 시스템 논리상 '작업 미완료' 상태로 잔존하는 현상의 기술적 원인을 분석하고, 이에 대한 다층적(Multi-layered) 복구 메커니즘을 시스템 아키텍처 관점에서 서술합니다.\n\n---\n\n## 2. 신호 인터페이스와 핸드쉐이킹(Handshaking) 프로토콜의 공학적 이해\n\n### 2.1. EQP-AMR 간 신호 교환 메커니즘\nAMR이 설비(EQP) 앞에서 팔레트를 내려놓거나(Unload) 싣는(Load) 행위는 물리적 접촉 이전에 논리적 합의가 선행되어야 합니다. 이를 위해 PLC(Programmable Logic Controller)와 AMR 제어기는 산업용 무선 네트워크를 통해 **핸드쉐이킹(Handshaking)** 프로토콜을 수행합니다.\n\n*   **Unload REQ / Load REQ 신호의 정의:** 설비(EQP)가 AMR에게 \"작업을 수행해도 좋다\"고 허가함과 동시에 작업을 요청하는 트리거(Trigger) 신호입니다.\n*   **동기화의 중요성:** 이 신호는 단순한 On/Off 비트가 아닙니다. AMR의 리프트 액추에이터(Actuator)가 동작하기 위한 **필수 전제 조건(Pre-condition)**이자, 안전 인터록(Safety Interlock)의 핵심 키(Key)입니다.\n\n### 2.2. 신호 수신 실패(Signal Loss)의 원인과 결과\n입력된 상황과 같이 리프트 동작은 물리적으로 수행되었으나 시스템 완료 처리가 되지 않는 현상은, **'동작 완료 보고(Action Complete Report)'** 단계에서 EQP 측의 `Unload REQ` 또는 `Load REQ` 신호가 비정상적으로 소실(Drop)되거나, AMR이 이를 인지하지 못하는 **통신 비동기화(Desynchronization)** 상태에서 기인합니다.\n\n1.  **타이밍 불일치(Timing Mismatch):** 리프트가 상한/하한 리미트 스위치(Limit Switch)에 도달하는 시점과, PLC가 신호를 유지(Holding)하는 시간(Duration) 사이에 오차가 발생할 경우, AMR은 \"명령은 받았으나 유효한 신호가 유지되지 않음\"으로 판단하여 프로세스를 일시 정지(Suspend)합니다.\n2.  **교착 상태(Deadlock) 발생:** AMR 내부 로직은 `REQ` 신호가 `High` 상태일 때만 다음 시퀀스(작업 완료 패킷 전송)로 넘어가도록 설계되어 있습니다. 따라서 신호 수신에 실패하면 AMR은 물리적으로는 작업을 마쳤으나, 논리적으로는 무한 대기 상태(Wait State)에 빠지게 됩니다.\n\n---\n\n## 3. 관제 시스템(ACS)을 통한 논리적 복구 프로세스\n\n물리적 장비와 논리적 상태의 괴리(Discrepancy)가 발생했을 때, 하위 레벨(AMR 자체 제어기)에서의 자동 복구가 실패한다면 상위 레벨 시스템인 **WEB ACS(Auto Control System)**의 개입이 필수적입니다.\n\n### 3.1. Job Cancel: 프로세스 스레드(Thread) 강제 종료\nACS에서의 `Job Cancel` 명령은 단순히 작업을 취소하는 것이 아니라, AMR의 메인 컨트롤러에서 실행 중인 **작업 스레드(Task Thread)를 강제로 킬(Kill)**하는 행위입니다.\n*   **작동 원리:** 교착 상태에 빠진 논리 연산을 중단시키고, AMR이 점유하고 있던 시스템 리소스와 통신 세션을 해제하여 제어권을 다시 대기 상태(Idle)로 돌려놓습니다.\n\n### 3.2. Error Reset: 레지스터 초기화\n`Error Reset`은 AMR 내부의 **폴트 레지스터(Fault Register)** 값을 `0`으로 소거(Clear)하는 과정입니다.\n*   **데이터 흐름:** ACS(Reset 명령) → 무선 네트워크 → AMR 제어기(Error Code 메모리 주소 접근) → 비트 소거.\n*   이 과정이 선행되지 않으면, AMR은 안전상의 이유로 어떠한 구동 명령(모터 구동, 리프트 조작 등)도 거부하는 'Safety Stop' 모드를 유지하게 됩니다.\n\n---\n\n## 4. 물리적 상태 원복 및 인터페이스 정합성 검증\n\n논리적 에러가 소거되었다 하더라도, AMR의 물리적 위치와 리프트 상태는 여전히 불확실한 상태입니다. 따라서 엔지니어는 다음과 같은 절차를 통해 시스템의 **무결성(Integrity)**을 확보해야 합니다.\n\n### 4.1. 작업 전 상태 원복 및 After Docking 상태 천이\nAMR을 재가동하기 위해서는 로봇의 상태를 시스템이 인지 가능한 **'결정론적 상태(Deterministic State)'**로 되돌려야 합니다.\n*   **작업 전 상태 원복:** 리프트가 어중간한 위치에 있거나 팔레트가 불안정하게 적재된 경우, 이를 수동 조작을 통해 초기 위치(Home Position)로 물리적으로 복귀시킵니다.\n*   **After Docking 상태 변경:** 이는 AMR의 네비게이션 알고리즘에게 \"현재 위치는 설비 도킹 직후의 좌표이며, 다음 명령을 수행할 준비가 되었다\"는 것을 알리는 **논리적 위치 초기화** 과정입니다. 이를 통해 AMR은 자신의 전역 좌표(Global Localization)를 재확인합니다.\n\n### 4.2. PLC Manager Interface를 통한 비트 레벨 진단\n최종적으로, 문제가 되었던 `Unload REQ / Load REQ` 신호가 왜 수신되지 않았는지를 규명하기 위해 **PLC Manager Interface**를 활용한 심층 진단이 수행되어야 합니다.\n\n*   **수동 인터페이스 점검의 목적:**\n    *   단순히 에러를 지우는 것을 넘어, PLC의 I/O 맵(Map)을 직접 모니터링합니다.\n    *   설비(EQP)가 실제로 신호를 송출하고 있는지(Output Bit Check), AMR의 통신 모듈이 이를 수신하고 있는지(Input Bit Check)를 **비트(Bit) 단위로 대조**합니다.\n*   **진단 메커니즘:** 엔지니어는 PLC Manager 툴을 통해 강제로 신호를 트리거링(Forcing)하거나, 신호의 파형을 분석하여 노이즈, 배선 불량, 혹은 통신 모듈의 고장 여부를 판별합니다.\n\n---\n\n## 5. 결론\n\n1T AMR의 리프트 동작 후 작업 완료 처리 실패는 단순한 기계적 오류가 아닌, **물리적 구동(Actuation)과 논리적 신호(Signal) 간의 비동기화**에서 발생하는 복합적인 문제입니다.\n\n이를 해결하기 위해서는 **[ACS를 통한 논리적 리셋] -> [물리적 상태의 안전한 원복] -> [PLC 레벨의 신호 무결성 검증]**이라는 체계적인 복구 프로토콜을 준수해야 합니다. 이러한 절차는 시스템의 가동 중단 시간(Downtime)을 최소화할 뿐만 아니라, 고중량 배터리 모듈을 다루는 공정의 안전성을 담보하는 핵심 엔지니어링 원칙입니다.",
        "questions": [
            "BMA 공정 내 고중량 자율주행 로봇(1T AMR)의 리프트 구동 메커니즘과 신호 비동기화에 따른 예외 처리 아키텍처 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "설비(EQP)와 AMR 간의 핸드쉐이킹 프로토콜에서 Unload/Load REQ 신호가 리프트 액추에이터 구동 및 안전 인터록과 결합되는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "리프트 동작 완료 후 신호 소실(Signal Loss)로 인한 교착 상태(Deadlock) 발생 시, ACS를 통한 논리적 복구와 PLC Manager를 이용한 비트 레벨 진단 과정의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 38,
        "preprocessed_group": "현장 운영자는 Operational Manual을 통해 설비(EQP) 및 시스템(ACS)을 제어하고, AMR의 센서 및 도킹 설비를 유지보수한다.",
        "textbook": "# BMA 자동화 시스템의 운영 역학 및 유지보수 프로토콜: 제어 논리와 물리적 인터페이스의 상관관계\n\n## 1. 서론: Human-in-the-Loop 시스템의 아키텍처적 의의\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정은 고도의 자동화가 이루어진 환경이나, 시스템의 가용성(Availability)과 신뢰성(Reliability)을 최상으로 유지하기 위해서는 운영자(Operator)의 개입이 필수적인 **Human-in-the-Loop** 구조를 기반으로 한다. 여기서 '운영 매뉴얼(Operational Manual)'은 단순한 지침서가 아니라, 시스템 설계자가 의도한 **결정론적(Deterministic) 제어 로직**을 현장에 구현하기 위한 표준 프로토콜 정의서로 해석되어야 한다. 본 장에서는 운영자가 ACS(Automated Control System)와 EQP(Equipment)를 제어할 때 발생하는 데이터 흐름과, AMR(Autonomous Mobile Robot)의 센서 및 도킹 설비 유지보수가 시스템 전체의 엔트로피 제어에 미치는 공학적 영향을 심층 분석한다.\n\n## 2. ACS 및 EQP 제어의 논리적 인과관계와 데이터 흐름\n\n### 2.1. 명령 하달의 메커니즘 (Command Dispatch Mechanism)\n운영자가 매뉴얼에 따라 ACS 인터페이스를 통해 특정 명령(예: 작업 할당, 경로 재설정, 긴급 정지 등)을 입력하는 행위는 시스템 아키텍처 관점에서 **최상위 어플리케이션 레이어(Application Layer)의 트리거**로 작용한다.\n\n1.  **입력 및 유효성 검증:** 운영자의 입력 값은 ACS 서버 내의 미들웨어에서 1차적인 유효성 검증(Validation)을 거친다. 이는 입력된 명령이 현재 공정의 상태(State)와 논리적으로 충돌하지 않는지(예: 이미 작업 중인 로봇에 중복 할당 방지)를 판단하는 과정이다.\n2.  **패킷 변환 및 전송:** 검증된 명령은 산업용 통신 프로토콜(TCP/IP 또는 전용 무선 프로토콜)을 통해 데이터 패킷으로 캡슐화되어 현장의 EQP(설비 PLC) 또는 AMR의 제어기로 전송된다.\n3.  **물리적 구동 (Actuation):** EQP는 수신된 디지털 신호를 물리적 구동 신호(전압/전류)로 변환하여 모터, 컨베이어, 리프트 등을 제어한다.\n\n이 과정에서 운영 매뉴얼의 준수는 **데이터 무결성(Data Integrity)**을 보장하는 핵심 요소다. 매뉴얼을 벗어난 비표준 조작은 시스템의 예외 처리(Exception Handling) 범위를 벗어난 '정의되지 않은 상태(Undefined State)'를 유발하여, 교착 상태(Deadlock)나 통신 타임아웃을 초래할 수 있다.\n\n### 2.2. 피드백 루프와 상태 동기화\n제어는 일방향이 아니다. EQP와 ACS는 끊임없이 상태 정보를 주고받는 **핸드쉐이킹(Handshaking)** 과정을 수행한다. 운영자가 시스템을 모니터링하고 제어한다는 것은, 실시간으로 업데이트되는 설비의 센서 데이터(위치, 속도, 에러 코드)가 시각화된 GUI를 통해 인지되고, 다시 운영자의 판단을 거쳐 시스템에 피드백되는 **폐루프 제어(Closed-loop Control)** 시스템의 일부가 됨을 의미한다.\n\n## 3. AMR 센서 시스템의 공학적 특성과 유지보수의 중요성\n\nAMR이 BMA 공정 내에서 자율주행을 수행하기 위해서는 주변 환경을 인지하고 자신의 위치를 추정(Localization)해야 한다. 이 과정에서 센서(Lidar, Safety Scanner, Camera 등)의 물리적 상태는 주행 알고리즘의 정확도에 결정적인 영향을 미친다.\n\n### 3.1. 광학 센서의 작동 원리와 노이즈\n대부분의 AMR은 **ToF(Time of Flight)** 방식이나 위상 변위(Phase Shift) 방식을 사용하는 Lidar 센서를 기반으로 SLAM(Simultaneous Localization and Mapping)을 수행한다.\n*   **작동 원리:** 센서는 레이저 펄스를 발사하고 물체에 반사되어 돌아오는 시간을 측정하여 거리를 계산한다. 이를 통해 생성된 점군 데이터(Point Cloud)를 사전에 저장된 맵(Map)과 대조하여 현재 위치를 파악한다.\n*   **오염의 영향:** 공정 중 발생하는 분진이나 오일 미스트가 센서의 렌즈 표면에 부착될 경우, 레이저의 산란(Scattering)이나 굴절을 유발한다. 이는 거리 측정 데이터에 노이즈를 발생시키며, 알고리즘은 이를 장애물로 오인하거나(False Positive), 특징점(Feature) 매칭 실패로 인한 **위치 소실(Localization Lost)** 현상을 초래한다.\n\n따라서 운영자의 주기적인 센서 유지보수(Cleaning & Calibration)는 단순한 청소 작업이 아니라, **신호 대 잡음비(SNR, Signal-to-Noise Ratio)를 확보**하여 주행 알고리즘의 연산 신뢰성을 보장하는 필수적인 엔지니어링 절차다.\n\n## 4. 도킹 설비(Docking Facilities)의 정밀도와 시스템 안정성\n\nAMR이 배터리 모듈을 이송하거나 충전을 위해 스테이션에 접근할 때, **도킹(Docking)**은 기계적 정밀도와 전기적 연결이 동시에 요구되는 임계 프로세스다.\n\n### 4.1. 기구적 정렬(Mechanical Alignment)과 허용 오차\n도킹 설비는 AMR과 물리적으로 접촉하거나 근접하여 작업을 수행한다. 이때 시스템은 허용 오차(Tolerance) 범위 내에서 정렬(Alignment)되어야 한다.\n*   **유지보수의 필요성:** 반복적인 도킹 충격이나 진동으로 인해 설비의 기준점(Reference Point)이 미세하게 틀어질 수 있다. 물리적 위치가 소프트웨어상의 좌표와 불일치하게 되면, AMR은 도킹 시도를 반복하다가 **서보 모터 과부하**나 **도킹 타임아웃 에러**를 발생시킨다.\n\n### 4.2. 전기적/통신 인터페이스의 안정성\n충전 도크나 컨베이어 인터페이스에서는 전력 전송 및 광통신(Optical Communication)이 이루어진다. 도킹 설비의 접점 마모나 이물질 오염은 접촉 저항을 증가시켜 **전압 강하(Voltage Drop)**를 유발하거나, 통신 패킷 손실을 야기한다. 운영자가 수행하는 도킹 설비 유지보수는 이러한 물리적 열화(Degradation)를 사전에 차단하여, 시스템 전체의 **가동률(Operation Rate)** 저하를 방지하는 예방 보전(Preventive Maintenance)의 핵심 활동이다.\n\n## 5. 결론\n\n요약하자면, 현장 운영자가 수행하는 제어 및 유지보수 활동은 BMA 자동화 시스템의 **논리적 두뇌(ACS/Software)**와 **물리적 신체(EQP/Hardware)**를 연결하고 동기화하는 과정이다. 운영 매뉴얼에 기반한 정확한 제어는 소프트웨어 로직의 무결성을 보장하며, 센서 및 도킹 설비에 대한 정밀한 유지보수는 하드웨어의 물리적 신뢰성을 확보하여, 결과적으로 전체 공정의 연속성과 안전성을 담보하는 기반이 된다.",
        "questions": [
            "BMA 공정 자동화 시스템의 운영 역학 및 유지보수 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR의 Lidar 센서가 SLAM 알고리즘을 통해 위치를 추정하는 작동 원리와, 센서 오염이 신호 대 잡음비(SNR) 및 주행 시스템에 미치는 공학적 상호작용을 분석하시오.",
            "도킹 설비의 기구적 정렬 불일치나 접점 마모 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 39,
        "preprocessed_group": "EQP HMI의 AMR Interface 메뉴는 설비 화면 우측에 위치하며, 작업자가 AMR 관련 핵심 기능을 조작하고 구체적인 운영 시나리오에 따라 설비를 제어하는 용도로 사용한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: EQP HMI 기반의 AMR 제어 인터페이스 아키텍처\n\n## 1. 개요: 인간-기계 상호작용(HMI)의 전략적 위치\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 자동화 라인에서 **EQP HMI(Equipment Human-Machine Interface)**는 단순한 시각화 도구가 아닙니다. 이는 정적인 설비(Static Equipment)와 동적인 자율주행 로봇(AMR) 간의 비동기적 프로세스를 동기화하고, 시스템의 결정론적(Deterministic) 제어 루프에 인간 운영자의 판단을 개입시키는 최상위 **제어 관문(Control Gateway)** 역할을 수행합니다.\n\n특히 **AMR Interface 메뉴**는 물리적 설비와 이동형 로봇 사이의 논리적 결합을 관장하는 핵심 모듈로, 설비 화면의 우측에 배치되어 운영 효율성과 안전성을 극대화하도록 설계되었습니다. 본 장에서는 이 인터페이스의 설계 철학, 데이터 흐름 메커니즘, 그리고 시나리오 기반 제어 논리에 대해 심층적으로 분석합니다.\n\n---\n\n## 2. UI/UX 설계 공학: 우측 배치의 인체공학적 및 기능적 함의\n\nEQP HMI 내에서 AMR Interface 메뉴가 **설비 화면 우측(Right-side Layout)**에 위치하는 것은 단순한 디자인적 선택이 아닌, 산업 공학적 인지 모델에 기반한 설계입니다.\n\n1.  **정보의 계층적 분리 (Hierarchical Separation):**\n    일반적으로 HMI의 좌측 및 중앙 영역은 설비의 상태 모니터링(Monitoring), 센서 데이터 시각화, 공정 진행률 등 '읽기 전용(Read-only)' 정보가 주를 이룹니다. 반면, 우측 영역은 작업자의 능동적 개입이 필요한 '제어(Control)' 및 '조작(Manipulation)' 영역으로 정의됩니다. 이러한 공간적 분리는 긴급 상황 시 작업자가 시각적 탐색 시간을 최소화하고 즉각적으로 제어 패널에 접근할 수 있도록 돕습니다.\n\n2.  **작업 동선과 조작의 직관성:**\n    대다수 작업자의 오른손잡이 성향과 터치스크린 패널의 물리적 위치를 고려할 때, 우측 배치는 조작 피로도를 낮추고 입력 오류(Human Error)를 방지하는 Fitts's Law(피츠의 법칙)에 부합하는 설계입니다. 이는 AMR과 설비 간의 도킹(Docking)이나 자재 이재(Transfer)와 같은 정밀한 타이밍이 요구되는 시점에서의 조작 신뢰성을 보장합니다.\n\n---\n\n## 3. 제어 메커니즘과 데이터 흐름 (Control Mechanism & Data Flow)\n\n작업자가 AMR Interface 메뉴를 통해 명령을 하달할 때, 시스템 내부에서는 다층적인 데이터 트랜잭션이 발생합니다. 이 과정은 **[User Input] -> [PLC Logic] -> [Network Layer] -> [AMR Controller]**의 순서로 진행되며, 각 단계는 엄격한 인과관계에 의해 작동합니다.\n\n### 3.1 입력 신호의 디지털 변환 및 래칭 (Latching)\n작업자가 HMI 상의 버튼(예: AMR 호출, 에러 리셋)을 터치하면, HMI 소프트웨어는 이를 즉시 PLC(Programmable Logic Controller)의 특정 메모리 주소(Bit Memory)에 '1' 신호(High Signal)로 기록합니다. 이 신호는 일시적인 펄스(Pulse) 형태일 수 있으나, PLC 내부 로직에서는 안정적인 명령 수행을 위해 자기 유지 회로(Self-holding circuit) 등을 통해 해당 명령을 **래칭(Latching)**하여 유효한 상태로 유지합니다.\n\n### 3.2 설비-로봇 간 핸드쉐이킹 (Handshaking Protocol)\nAMR Interface의 핵심 기능은 설비와 AMR 간의 통신 프로토콜을 제어하는 것입니다.\n*   **트리거(Trigger):** 작업자의 조작은 설비가 AMR 관제 시스템(ACS/MCS)으로 송신하는 통신 패킷의 헤더(Header)를 생성하거나 상태 플래그(Status Flag)를 변경하는 트리거 역할을 합니다.\n*   **인터락(Interlock) 해제:** 예를 들어, AMR이 설비에 진입하지 못하고 대기 중인 경우, 작업자의 조작은 물리적 안전 센서(Safety Curtain 등)나 논리적 인터락 조건을 강제로 재확인하거나 우회(Bypass)하여 프로세스를 재개시키는 권한을 갖습니다.\n\n---\n\n## 4. 운영 시나리오 기반의 제어 논리 (Scenario-based Control Logic)\n\n입력 텍스트에서 언급된 \"구체적인 운영 시나리오에 따라 설비를 제어한다\"는 문장은 시스템이 단순한 On/Off 제어가 아닌, **상태 머신(State Machine)** 기반의 복합 제어를 수행함을 의미합니다.\n\n### 4.1 예외 상황 처리 (Exception Handling) 및 교착 상태 해결\nBMA 공정은 수많은 변수(배터리 셀의 전압 특성, AMR의 배터리 잔량, 무선 통신 음영 지역 등)에 노출되어 있습니다. 자동화 로직이 예상치 못한 변수로 인해 **교착 상태(Deadlock)**에 빠졌을 때, AMR Interface는 이를 해결하는 '마스터 키' 역할을 합니다.\n*   **Why:** 자동화 시스템은 사전에 정의된 로직(Ladder Logic) 내에서만 작동하므로, 정의되지 않은 에러(Undefined Error) 발생 시 스스로 복구할 수 없습니다.\n*   **How:** 작업자는 인터페이스를 통해 현재 시나리오 단계(Step Number)를 초기화하거나, 강제로 다음 단계로 건너뛰게(Step Advance) 함으로써 논리적 루프를 끊고 공정 흐름을 정상화합니다.\n\n### 4.2 비정상 종료 후의 재동기화 (Resynchronization)\nAMR이 비상 정지(E-Stop) 후 복구되었거나, 네트워크 단절 후 재연결되었을 때, 설비(EQP)와 AMR은 서로의 작업 진행 상태를 모르는 '정보 비대칭' 상태에 놓입니다. 이때 AMR Interface 메뉴는 양측의 상태 데이터를 비교하고, 작업자가 수동으로 **'원점 복귀(Homing)'** 또는 **'작업 재개(Resume)'** 명령을 내림으로써 시스템 간의 동기화를 다시 맞추는 기능을 수행합니다.\n\n## 5. 결론\n\n요약하자면, EQP HMI의 AMR Interface 메뉴는 단순한 조작 패널을 넘어, **BMA 공정의 물리적 계층(Physical Layer)과 논리적 제어 계층(Logical Control Layer)을 매개하는 필수적인 인터페이스**입니다. 설비 화면 우측에 배치된 이 인터페이스를 통해 작업자는 복잡한 자동화 알고리즘의 블랙박스 내부를 제어하고, 다양한 운영 시나리오에서 발생할 수 있는 엔트로피(무질서도)를 관리 가능한 수준으로 통제하게 됩니다.",
        "questions": [
            "BMA 공정 내 EQP HMI 기반의 AMR 제어 인터페이스 아키텍처와 설계 철학 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "HMI 상의 사용자 입력이 PLC 래칭을 거쳐 AMR 컨트롤러로 전달되는 데이터 트랜잭션 과정과, 설비-로봇 간 핸드쉐이킹 프로토콜의 공학적 작동 원리를 분석하시오.",
            "시스템이 정의되지 않은 에러로 인해 교착 상태(Deadlock)에 빠졌을 때, AMR 인터페이스를 통한 논리적 루프 해제 과정과 비정상 종료 후의 재동기화 대응 메커니즘을 상세히 서술하시오."
        ]
    },
    {
        "id": 40,
        "preprocessed_group": "EQP HMI의 Call Cancel 기능은 설비에서 이미 생성된 AMR 호출(Call)을 취소하는 기능이며, 반드시 AMR이 도킹하기 전에 수행해야 한다.\n\n수동 조작이 필요한 경우, EQP HMI 우측의 Call Cancel 버튼을 클릭한 후 좌측 하단의 화살표(>)를 눌러 명령을 실행하며, 상태창에서 Response Call Cancel 및 Bit Clear(Request ID, Call Request, Call Response, Robot Assigned, Call Cancel)를 확인한다.\n\n차종 교체 시 설비를 AUTO에서 Manual로 전환하여 신규 차종으로 변경했음에도 신규 콜이 생성되지 않는 경우, Call Cancel을 실행하여 이전 차종의 콜을 삭제한 후 작업을 시작한다.\n\n시업 및 라인 재개 시 작업자가 수동으로 재공을 조절하거나 재고 조사 후 설비 상태가 변경되어 이전 공급 콜이 유지되는 경우, Call Cancel을 실행하여 잘못된 콜을 삭제한다.\n\n라인 점검 중 설비 에러 조치 지연으로 인해 대기 중인 AMR이 물류 정체를 유발하는 경우, Call Cancel을 실행하여 해당 AMR을 복귀시킨다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: AMR 관제 프로토콜 및 예외 처리 메커니즘\n\n## 1. 서론: 비동기식 물류 제어와 Call Cancel의 정의\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화 시스템은 설비(Equipment), PLC(Programmable Logic Controller), 그리고 AMR(Autonomous Mobile Robot) 간의 정교한 핸드쉐이킹(Handshaking) 프로토콜을 기반으로 작동한다. 이 중 **Call Cancel** 기능은 단순한 작업 취소 명령이 아니라, 시스템 내에서 발생한 논리적 교착 상태(Deadlock)나 데이터 불일치(Data Inconsistency)를 해소하기 위한 **최상위 인터럽트(Interrupt) 신호**로 정의된다.\n\n본 챕터에서는 EQP HMI(Human-Machine Interface)를 통해 수행되는 Call Cancel의 아키텍처적 작동 원리, 비트(Bit) 단위의 데이터 흐름, 그리고 공학적 인과관계에 따른 적용 시나리오를 심층적으로 분석한다.\n\n---\n\n## 2. 시스템 아키텍처와 데이터 흐름 (System Architecture & Data Flow)\n\n### 2.1. 제어 계층 구조와 신호 전달 체계\nAMR의 호출과 취소는 단방향 명령이 아닌, 설비(PLC)와 관제 시스템(ACS/MCS) 간의 양방향 통신에 의해 이루어진다. EQP HMI에서 Call Cancel 명령이 인가되면, 시스템은 다음과 같은 논리적 절차를 수행한다.\n\n1.  **Application Layer (HMI):** 운영자가 'Call Cancel' 버튼과 실행 명령(>)을 입력하면, HMI는 PLC의 특정 메모리 주소에 할당된 `Call Cancel Bit`를 `1(High)`로 트리거한다.\n2.  **Control Layer (PLC):** PLC는 이 신호를 감지하고, 현재 활성화된 `Call Request` 신호를 강제로 `0(Low)`으로 떨어뜨리는 로직을 수행한다. 이는 전기적 신호의 차단이 아닌, 논리적 플래그(Logical Flag)의 리셋을 의미한다.\n3.  **Network Layer (ACS/MCS):** 상위 관제 시스템은 PLC의 상태 변화를 폴링(Polling)하거나 이벤트 방식으로 수신하여, 해당 설비로 배정되었거나 이동 중인 AMR에게 '임무 중단(Abort Task)' 명령을 하달한다.\n\n### 2.2. 메모리 레지스터의 동기화와 Bit Clear 메커니즘\nCall Cancel의 핵심은 단순히 로봇을 멈추는 것이 아니라, 설비와 관제 시스템 간의 **데이터 정합성(Data Integrity)**을 확보하는 데 있다. 텍스트에 언급된 `Response Call Cancel` 및 `Bit Clear` 과정은 다음의 데이터 필드들이 초기화됨을 의미한다.\n\n*   **Request ID:** 각 물류 명령에 부여된 고유 식별자(UUID 등)를 소거하여, 시스템이 이미 처리된 명령을 중복 수행하지 않도록 방지한다.\n*   **Call Request / Call Response:** 설비가 로봇을 부르는 신호(Request)와 관제 시스템이 이를 수락했다는 응답(Response)의 연결 고리를 끊는다.\n*   **Robot Assigned:** 특정 AMR이 해당 설비에 배차(Dispatching)되었다는 점유 상태를 해제한다. 이를 통해 해당 AMR은 '유휴(Idle)' 상태로 전환되어 다른 임무를 수행할 수 있게 된다.\n*   **Call Cancel:** 취소 명령 자체가 수행 완료되었음을 확인하고, 해당 비트 역시 최종적으로 클리어(Clear)된다.\n\n이 모든 비트가 `0`으로 클리어되는 것을 확인하는 절차는, 차기 명령(Next Command)이 **Rising Edge(신호가 0에서 1로 변하는 시점)** 트리거를 통해 정상적으로 생성될 수 있도록 '논리적 빈 캔버스'를 만드는 필수적인 과정이다.\n\n---\n\n## 3. 물리적 제약 조건과 안전 메커니즘 (Physical Constraints & Safety)\n\n### 3.1. 도킹(Docking) 전 취소의 공학적 필연성\n입력 데이터는 \"반드시 AMR이 도킹하기 전에 수행해야 한다\"고 명시하고 있다. 이는 로봇 공학 및 센서 퓨전(Sensor Fusion) 관점에서 매우 중요한 제약 사항이다.\n\n*   **정밀 제어 모드 진입:** AMR이 설비에 접근하여 도킹 시퀀스에 진입하면, 주행 알고리즘은 일반적인 경로 주행(Global Path Planning)에서 정밀 위치 보정(Local Path Planning) 모드로 전환된다. 이때 Lidar나 Vision 센서는 설비의 V-Marker나 형상을 mm 단위로 스캔하며 피드백 제어 루프(Feedback Control Loop)를 형성한다.\n*   **상태 불일치 위험:** 도킹 프로세스 중에 Call Cancel을 강제할 경우, 물리적으로는 로봇이 설비와 결합(Latching)되거나 근접해 있지만, 논리적으로는 임무가 없는 상태가 되는 **'좀비 상태(Zombie State)'**가 발생할 수 있다. 이는 설비가 로봇이 없다고 판단하여 기구부를 작동시키거나, 로봇이 갑작스럽게 경로를 이탈하려다 설비와 충돌하는 물리적 사고로 이어질 수 있다.\n\n따라서 Call Cancel은 AMR이 설비의 물리적 작업 영역(Work Envelope)에 완전히 진입하여 하드웨어적 인터랙션을 시작하기 전 단계인 **'접근(Approach)' 단계까지만 유효**하도록 설계되어야 한다.\n\n---\n\n## 4. 운영 시나리오별 인과관계 분석 (Operational Causality)\n\nCall Cancel 기능은 단순 오조작 수정뿐만 아니라, 공정의 유연성(Flexibility)과 가용성(Availability)을 유지하기 위한 전략적 도구로 활용된다.\n\n### 4.1. 차종 교체(Model Change) 시의 데이터 잔존 문제\n*   **현상:** 설비를 AUTO에서 Manual로 전환하여 차종을 변경했음에도 신규 콜이 생성되지 않음.\n*   **원인 (Why):** PLC의 메모리 레지스터에 이전 차종(Old Model)에 대한 `Call Request` 정보가 잔존(Stale Data)해 있기 때문이다. PLC 로직은 일반적으로 상태 변화(State Change)를 감지하여 동작하는데, 이전 데이터가 클리어되지 않으면 새로운 차종 데이터가 입력되어도 이를 '새로운 요청'으로 인식하지 못한다.\n*   **해결 원리 (How):** Call Cancel을 실행하면 잔존하던 이전 차종의 콜 데이터와 관련 비트들이 강제로 소거(Flush)된다. 이로써 레지스터가 `Null` 상태가 되며, 이후 신규 차종 설정 시 발생하는 신호를 유효한 '신규 트리거'로 인식하게 된다.\n\n### 4.2. 재공 조절 및 설비 상태 불일치 (CPS Synchronization)\n*   **현상:** 작업자가 수동으로 자재를 투입하거나 제거(재고 조사 등)한 후, 설비는 여전히 자재 공급을 요청하는 콜을 유지함.\n*   **원인 (Why):** **사이버-물리 시스템(CPS)**의 동기화 실패다. 물리적 세계(Real World)에서는 자재가 채워졌으나, 사이버 세계(Cyber World/PLC)의 데이터는 여전히 '자재 부족(Empty)' 상태를 가리키고 있다. 센서가 자재 유무를 실시간으로 감지하더라도, 이미 발신된 물류 요청(Call)은 별도의 프로세스로 관리되므로 자동으로 취소되지 않는다.\n*   **해결 원리 (How):** Call Cancel은 물리적 상태와 논리적 상태의 불일치를 해소하는 강제 동기화 도구로 작용한다. 잘못된 공급 요청을 삭제함으로써, 불필요한 AMR의 이동을 방지하고 물류 효율을 최적화한다.\n\n### 4.3. 라인 점검 및 에러로 인한 물류 정체 (Traffic Management)\n*   **현상:** 설비 에러 조치가 지연되어 대기 중인 AMR이 물류 동선을 점유, 전체 라인의 정체(Congestion) 유발.\n*   **원인 (Why):** AMR은 목적지(Node)가 점유 불가능 상태일 경우, 해당 노드 진입 전 대기하거나 우회 경로를 탐색한다. 설비 에러가 장기화되면 해당 AMR은 경로 상의 특정 엣지(Edge)를 지속적으로 점유하게 되며, 이는 그래프 이론(Graph Theory)에 따라 다른 AMR의 경로 생성까지 방해하는 **교착 상태(Deadlock)**를 유발한다.\n*   **해결 원리 (How):** Call Cancel을 실행하면 해당 AMR의 목적지 정보가 삭제된다. 관제 시스템(ACS)은 임무가 취소된 AMR에게 '대기 장소 복귀' 또는 '다음 임무 수행' 명령을 내리게 된다. 결과적으로 점유되었던 노드와 엣지가 해방(Release)되어 전체 물류 네트워크의 흐름이 정상화된다.\n\n---\n\n## 5. 결론\n\nEQP HMI의 Call Cancel 기능은 단순한 취소 버튼이 아니라, **BMA 공정의 논리적 무결성을 유지하고 물리적 충돌을 예방하며 물류 흐름을 최적화하는 핵심 제어 장치**이다. 엔지니어는 이 기능이 PLC 레지스터의 비트 단위 조작을 통해 시스템의 상태(State)를 초기화한다는 점과, 도킹 시퀀스 및 센서 피드백 루프와의 간섭을 피하기 위해 물리적 제약 조건을 준수해야 함을 명확히 이해하고 운영해야 한다.",
        "questions": [
            "BMA 공정 내 AMR 관제 프로토콜의 핵심인 'Call Cancel' 기능의 아키텍처와 데이터 정합성 유지 메커니즘에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "HMI에서 발생한 취소 신호가 PLC 제어 계층을 거쳐 ACS/MCS 관제 시스템으로 전달되는 비트 단위의 데이터 흐름과, AMR의 주행 모드 전환에 따른 시스템적 상호작용을 공학적으로 분석하시오.",
            "차종 교체나 설비 에러 등 CPS 동기화 실패 상황 발생 시, Call Cancel이 논리적 교착 상태를 해소하는 판단 과정과 물리적 충돌 방지를 위한 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 41,
        "preprocessed_group": "EQP HMI의 Call Create Pause 기능은 설비가 자재 투입 또는 배출 조건을 충족하더라도 AMR 호출 신호를 생성하지 않도록 제어하는 기능이다.\n\n이미 AMR 호출이 생성된 상태에서 호출을 취소하고자 할 때는 Call Create Pause 대신 Call Cancel 기능을 사용해야 한다.\n\n수동 조작이 필요한 경우, 설비 HMI 우측의 Call Create Pause 버튼을 클릭하여 버튼이 활성화(ON)된 상태를 확인한다.\n\nAMR 자동 공급이 불필요한 리워크 제품 연속 투입 시에는 Call Create Pause 기능을 활성화하여 호출 생성을 차단한다.\n\n작업자가 지게차 등을 이용해 수동으로 자재를 투입하거나 배출하는 동안에는 Call Create Pause 기능을 사용하여 설비의 자동 호출 신호 생성을 일시 정지한다.",
        "textbook": "# BMA 공정 내 하이브리드 자재 핸들링을 위한 신호 제어 및 인터록(Interlock) 메커니즘\n\n## 1. 개요 (Introduction)\n\n현대자동차그룹의 BMA(Battery Module Assembly) 공정은 고도의 자동화를 지향하나, 공정의 유연성(Flexibility)과 예외 상황 처리를 위해 인간 작업자와 자율주행 로봇(AMR)이 공존하는 하이브리드 운영 환경을 전제로 설계되었다. 설비(Equipment)와 물류 제어 시스템(ACS/MCS) 간의 통신 프로토콜에서 가장 중요한 요소 중 하나는 **'자재 요청 신호의 결정론적 제어(Deterministic Control)'**이다.\n\n본 챕터에서는 설비의 물리적 상태(자재 유무)와 무관하게 상위 시스템으로의 호출 신호를 논리적으로 차단하거나, 이미 발행된 명령을 철회하는 **'Call Create Pause'** 및 **'Call Cancel'** 기능의 아키텍처적 작동 원리와 데이터 흐름을 심층 분석한다.\n\n---\n\n## 2. 신호 마스킹(Signal Masking) 아키텍처: Call Create Pause\n\n### 2.1. 논리적 작동 원리 (Logical Mechanism)\n일반적인 자동화 로직에서 설비(EQP)는 센서 데이터(Photo sensor, Limit switch 등)를 기반으로 자재의 투입(Input) 필요성이나 배출(Output) 준비 완료 상태를 감지한다. 통상적으로 이 조건이 `TRUE`가 되면 PLC(Programmable Logic Controller)는 즉시 상위 관제 시스템(ACS)으로 AMR 호출 트리거(Trigger)를 송신한다.\n\n그러나 **'Call Create Pause'** 기능은 이 자동화 루프 내에 **소프트웨어적 인터록(Software Interlock)**을 형성한다. 엔지니어링 관점에서 이 기능은 PLC 로직 상의 **AND 게이트** 조건으로 작용한다.\n\n*   **기본 로직:** `[자재 센서 감지] → [AMR 호출 신호 생성]`\n*   **Call Create Pause 적용 로직:** `[자재 센서 감지] AND [NOT Call Create Pause] → [AMR 호출 신호 생성]`\n\n즉, EQP HMI(Human Machine Interface)를 통해 작업자가 'Call Create Pause' 버튼을 활성화(ON)하면, 설비 내부의 레지스터(Register) 값이 변경되어 자재 센서가 물리적으로 자재 부족을 감지하더라도 AMR 호출 신호의 생성을 논리적으로 차단(Masking)한다. 이는 시스템이 물리적 센서 값보다 운영자의 개입(Intervention) 신호를 우선순위에 두도록 설계되었음을 의미한다.\n\n### 2.2. 데이터 흐름과 상태 동기화\n1.  **조작(Action):** 운영자가 설비 HMI 우측의 'Call Create Pause' 버튼을 클릭한다.\n2.  **신호 처리(Processing):** HMI는 연결된 PLC의 특정 메모리 주소(Bit Memory)를 `1` (High) 상태로 래치(Latch)한다.\n3.  **결과(Result):** 설비 제어 프로그램은 매 스캔 타임(Scan Time)마다 해당 비트를 확인하며, 활성화되어 있을 경우 자재 요청 플래그(Flag)가 `SET` 되는 것을 방지한다.\n\n---\n\n## 3. 태스크 수명 주기 관리: Pause와 Cancel의 인과적 차이\n\n시스템 엔지니어는 **'사전 차단(Prevention)'**과 **'사후 철회(Abortion)'**의 개념을 명확히 구분해야 한다. 현장에서 빈번히 발생하는 운영 오류는 이 두 기능의 시퀀스적 차이를 이해하지 못하는 데서 기인한다.\n\n### 3.1. 교착 상태(Deadlock) 방지를 위한 Call Cancel\n'Call Create Pause'는 신호가 생성되기 **전(Pre-trigger)** 단계의 제어 장치이다. 이미 설비가 자재 부족을 감지하고 ACS에 AMR 배차 요청을 전송한 상태(Post-trigger)라면, 'Call Create Pause'를 뒤늦게 활성화하더라도 이미 생성된 태스크(Task)에는 영향을 미치지 않는다.\n\n이미 생성된 호출은 ACS의 작업 큐(Job Queue)에 등록되어 유휴(Idle) 상태의 AMR에 할당되었거나 할당 대기 중인 상태이다. 이를 무효화하기 위해서는 **'Call Cancel'** 기능을 사용하여 ACS와의 핸드쉐이킹(Handshaking)을 통해 해당 태스크 ID를 명시적으로 삭제(Kill)해야 한다. 만약 이를 수행하지 않고 물리적으로 자재를 투입해버리면, 뒤늦게 도착한 AMR은 자재가 이미 존재하는 설비 앞에서 대기하거나 에러를 발생시키는 논리적 충돌이 발생한다.\n\n---\n\n## 4. 운영 시나리오별 시스템 거동 분석\n\n### 4.1. 리워크(Rework) 제품 연속 투입 시나리오\n리워크 공정은 표준화된 자동화 흐름(Standard Process Flow)에서 벗어난 예외적 상황이다. 리워크 제품은 이미 공정 내에 존재했던 자재이거나, 별도의 검사 대기 장소에서 수급되므로 외부 물류 창고에서 자재를 가져오는 AMR의 자동 공급이 불필요하다.\n\n*   **Why:** 만약 이 상황에서 'Call Create Pause'를 활성화하지 않으면, 설비는 리워크 제품 처리가 끝날 때마다 빈 공간을 감지하고 불필요한 AMR을 지속적으로 호출하게 된다. 이는 물류 트래픽(Traffic)을 증가시키고 가용 AMR 자원을 낭비하게 만든다.\n*   **How:** 기능을 활성화함으로써 설비는 '자동 모드'를 유지하면서도 물류 요청 로직만 '수동 모드'로 전환되는 **부분적 격리(Partial Isolation)** 상태가 된다.\n\n### 4.2. 이종 장비(지게차) 개입 시 안전 확보\n지게차와 같은 유인 운송 장비(Manned Material Handling Equipment)가 설비 포트(Port)에 접근하여 수동으로 자재를 투입/배출하는 경우, 시스템은 AMR의 접근을 원천 봉쇄해야 한다.\n\n*   **공학적 배경:** AMR은 LiDAR와 안전 센서를 통해 장애물을 감지하지만, 지게차와 같은 동적 장애물과의 혼재 작업은 충돌 위험 및 경로 계산(Path Planning)의 복잡성을 야기한다.\n*   **시스템적 방어:** 작업자가 지게차 작업을 위해 'Call Create Pause'를 활성화하면, 이는 단순한 신호 차단을 넘어 **'영역 점유(Zone Occupation)'**의 의미를 갖는다. 시스템적으로 해당 설비로의 AMR 경로 생성을 억제함으로써, 물리적 충돌 가능성을 제어 로직 단계에서 사전에 제거하는 안전장치(Failsafe) 역할을 수행한다.\n\n## 5. 결론\n\nEQP HMI의 **Call Create Pause** 기능은 단순한 일시 정지 버튼이 아니다. 이는 BMA 공정의 완전 자동화 루프 내에서 인간의 판단을 시스템 로직에 주입(Inject)할 수 있는 최상위 권한의 인터페이스이다. 엔지니어는 이 기능이 **신호 생성의 억제(Pause)**와 **기 생성된 신호의 철회(Cancel)**라는 서로 다른 시퀀스 상에서 동작함을 이해하고, 공정의 상황(정상 운전, 리워크, 수동 조작)에 맞춰 데이터 흐름을 제어해야 한다.",
        "questions": [
            "BMA 공정 내 하이브리드 자재 핸들링을 위한 신호 제어 및 인터록(Interlock) 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "PLC 로직 상의 AND 게이트를 활용한 'Call Create Pause'의 신호 마스킹 아키텍처와, 이것이 상위 관제 시스템(ACS) 및 설비 HMI 간의 데이터 흐름 속에서 어떻게 상호작용하는지 공학적으로 분석하시오.",
            "리워크 제품 투입이나 유인 지게차 개입 등 예외 상황 발생 시, 'Call Create Pause'와 'Call Cancel' 기능이 시스템의 논리적 충돌 및 물리적 사고를 방지하는 단계별 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 42,
        "preprocessed_group": "EQP HMI의 Call Priority(우선 호출) 기능은 특정 설비의 호출을 최우선 순위로 설정하여 대기 중인 AMR을 가장 먼저 할당받게 하는 기능이다.\n\nEQP HMI의 Call Priority 기능은 1회만 활성화되며, 해당 작업 완료 후 다음 호출부터는 정상 우선순위(Priority)가 적용된다.\n\n수동 조작이 필요한 경우, 설비 HMI 우측의 Call Priority 버튼을 클릭하고 좌측 하단의 화살표(>)를 눌러 명령을 실행한 뒤 상태창에서 활성화 여부를 확인한다.\n\n긴급 자재 공급이 필요하거나 NG 팔레트, 셀 공팔레트, BMA 완제품 및 공팔레트가 배출되지 않아 설비 막힘(Blocking)이 발생한 경우, EQP HMI의 Call Priority 기능을 사용하여 긴급 배출을 수행한다.",
        "textbook": "# BMA 공정 물류 최적화를 위한 동적 자원 할당: EQP HMI Call Priority 메커니즘\n\n## 1. 서론: 비동기 물류 환경에서의 우선순위 스케줄링 필요성\n\n현대자동차그룹의 BMA(Battery Module Assembly) 공정은 수많은 공정 설비와 이를 연결하는 AMR(Autonomous Mobile Robot) 간의 유기적인 협업으로 이루어진다. 일반적인 상황에서 ACS(AMR Control System)는 **FIFO(First-In-First-Out)** 또는 **최단 거리 기반의 휴리스틱(Heuristic) 알고리즘**을 통해 운송 명령을 처리한다. 그러나 공정 내 특정 설비에서 병목(Bottleneck) 현상이 발생하거나 긴급한 자재 투입이 요구되는 비정상 상황(Abnormal Condition)에서는, 정해진 순서를 건너뛰고 가용 자원(AMR)을 즉시 할당해야 할 공학적 필요성이 대두된다.\n\n**EQP HMI의 Call Priority(우선 호출)** 기능은 이러한 상황에 대응하기 위해 설계된 **'소프트웨어적 인터럽트(Software Interrupt)'** 메커니즘이다. 이는 시스템의 기본 스케줄링 로직을 일시적으로 오버라이드(Override)하여, 특정 설비의 요청을 최상위 큐(Queue)로 격상시키는 핵심적인 관제 프로토콜이다.\n\n---\n\n## 2. Call Priority의 아키텍처 및 데이터 흐름 (Data Flow)\n\nCall Priority 기능은 단순한 버튼 조작이 아니라, **[EQP HMI] → [Equipment PLC] → [ACS/MCS] → [AMR]**로 이어지는 다층적 데이터 핸드쉐이킹(Handshaking) 과정을 통해 수행된다.\n\n1.  **트리거 인가 (Triggering):**\n    운영자가 설비 HMI 우측의 `Call Priority` 버튼을 활성화하고 명령 실행(>)을 입력하면, HMI는 설비 제어 PLC의 특정 메모리 주소(Bit)를 `1(High)`로 셋팅한다.\n2.  **우선순위 격상 요청 (Priority Escalation Request):**\n    설비 PLC는 상위 관제 시스템인 ACS/MCS로 전송하는 통신 패킷 내의 'Priority Flag'를 활성화하여 작업을 요청한다.\n3.  **스케줄링 재연산 (Rescheduling):**\n    ACS는 수신된 수많은 작업 요청(Task Pool) 중 Priority Flag가 활성화된 작업을 감지한다. 스케줄러는 기존의 대기열(Waiting Queue) 순서를 무시하고, 해당 작업을 **'긴급(Urgent)'** 상태로 분류하여 할당 리스트의 최상단(Top of Heap)으로 이동시킨다.\n4.  **자원 할당 및 실행 (Resource Allocation):**\n    시스템은 현재 'Idle(대기)' 상태이거나 가장 먼저 작업을 마칠 예정인 AMR을 검색하여, 해당 설비로 즉시 배차(Dispatch)한다.\n\n---\n\n## 3. 단발성(One-shot) 활성화 로직과 자원 기아(Starvation) 방지\n\nCall Priority 기능의 가장 중요한 설계 철학은 **'1회성(One-time Activation)'** 원칙이다.\n\n*   **작동 원리:**\n    Call Priority를 통해 할당된 AMR이 해당 작업을 완료(Task Complete)하는 순간, 시스템은 해당 설비의 우선순위 플래그를 자동으로 소거(Clear)하고 `Normal Priority` 상태로 복귀시킨다.\n*   **공학적 배경 (Why?):**\n    만약 우선순위 설정이 영구적으로 유지된다면, 특정 설비가 한정된 자원인 AMR을 독점하는 현상이 발생한다. 이는 운영체제(OS) 이론에서의 **'자원 기아(Resource Starvation)'** 상태와 유사하며, 결과적으로 다른 설비들의 물류 흐름이 막혀 전체 라인의 밸런스가 붕괴되는 심각한 교착 상태(Deadlock)를 초래할 수 있다. 따라서 시스템은 1회 실행 후 반드시 초기화되도록 설계되어, 전체 공정의 공평성(Fairness)과 처리량(Throughput)을 보장한다.\n\n---\n\n## 4. 병목 해결을 위한 운영 시나리오 및 인과 분석\n\nCall Priority는 주로 공정의 흐름이 막히는 **블로킹(Blocking)** 현상을 해소하거나, 라인이 멈출 위기인 **자재 결핍(Starvation)** 상황에서 사용된다.\n\n### 4.1. 설비 막힘(Blocking) 해소: 배출 포트의 긴급 소거\nBMA 공정 설비는 배출 포트(Output Port)에 완성품이나 공팔레트가 적재되어 있으면, 다음 작업을 시작할 수 없는 구조적 특성을 가진다.\n*   **상황:** NG 팔레트, 셀 공팔레트, BMA 완제품 등이 배출되지 않아 설비 가동이 중단됨.\n*   **메커니즘:** 운영자가 Call Priority를 실행하면, ACS는 즉시 AMR을 투입하여 배출 포트의 적재물을 수거한다.\n*   **결과:** 물리적 공간이 확보됨에 따라 설비의 인터락(Interlock)이 해제되고, 설비는 즉시 다음 사이클을 재개하여 가동률(Availability) 저하를 방지한다.\n\n### 4.2. 긴급 자재 공급: 라인 스톱 방지\n*   **상황:** 투입 포트(Input Port)의 자재가 소진되어 설비가 유휴 상태(Idle)로 전환될 위기.\n*   **메커니즘:** Call Priority를 통해 자재 창고나 전공정에서 대기 중인 자재를 최우선으로 운송한다.\n*   **결과:** JIT(Just-In-Time) 원칙에 따라 자재가 끊김 없이 공급되어 연속 생산성을 유지한다.\n\n---\n\n## 5. HMI 조작 인터페이스와 시스템 피드백\n\n시스템의 신뢰성을 확보하기 위해 운영자의 조작은 명확한 시각적 피드백을 동반해야 한다.\n\n1.  **명령 입력:** 운영자는 HMI 우측의 `Call Priority` 버튼을 선택(Select)하고, 좌측 하단의 화살표(>) 버튼을 눌러 **'명령 실행(Execute)'** 신호를 인가한다. 이는 오조작을 방지하기 위한 '선택 후 실행(Select-then-Execute)' 안전 절차이다.\n2.  **상태 확인:** 명령이 ACS에 정상적으로 수신되고 스케줄러에 반영되면, HMI 상태창(Status Window)의 인디케이터가 변경된다. 운영자는 이를 통해 시스템이 자신의 '긴급 요청'을 인지했음을 확신할 수 있다.\n\n## 결론\n\nEQP HMI의 Call Priority 기능은 단순한 편의 기능이 아니라, 자동화된 BMA 공정에서 발생할 수 있는 **물류의 불확실성과 병목 현상을 실시간으로 제어하기 위한 핵심적인 예외 처리(Exception Handling) 루틴**이다. 엔지니어는 이 기능이 시스템의 자원 분배 로직에 미치는 영향을 정확히 이해하고, 전체 라인의 효율성을 해치지 않는 범위 내에서 전략적으로 활용해야 한다.",
        "questions": [
            "BMA 공정 물류 최적화를 위한 'EQP HMI Call Priority' 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "EQP HMI에서 인가된 우선순위 격상 요청이 PLC와 ACS를 거쳐 AMR의 스케줄링 힙(Heap) 최상단에 반영되는 과정의 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "특정 설비의 자원 독점으로 인한 자원 기아(Starvation) 및 교착 상태(Deadlock) 발생 가능성 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 43,
        "preprocessed_group": "EQP HMI의 Forced Docking(강제 도킹) 기능은 설비와 AMR의 Call Type이 일치하지 않더라도 강제로 도킹 및 작업을 진행하게 하는 기능이다.\n\nForced Docking 기능은 1회만 활성화되며, 다음 도킹 시점부터는 설비와 AMR의 Call Type 일치 여부를 확인하는 정상 로직이 다시 적용된다.\n\n수동 조작이 필요한 경우, 설비 HMI 우측의 Forced Docking 버튼을 클릭한 후 좌측 상태창에서 Call Request, Call Response, Robot Assigned 상태를 확인한다.\n\n타 라인 긴급 지원이나 리워크 투입을 위해 기존 라인의 콜을 무시하고 다른 라인의 AMR을 수동으로 투입해야 하는 경우 Forced Docking 기능을 사용한다.\n\nBSA #1라인 자동 공급 중 작업을 취소하고 BSA #2라인에 강제로 수동 공급하려는 경우, BSA #1라인의 Call Cancel을 실행하여 기존 콜을 제거한 후 BSA #2라인에서 Forced Docking 또는 Priority를 실행한다.\n\n지게차를 이용해 수동으로 자재를 투입할 때 컨베이어가 작동하지 않는 경우, HMI에서 컨베이어 수동 구동을 실시한다.\n\n공 팔레트 회수 미션이 생성된 상태에서 지게차로 팔레트를 먼저 회수한 경우, 배출부의 Call Cancel을 실행하여 기존 콜을 제거해야 한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서 (Technical Whitepaper)\n\n## Section: 비동기적 예외 상황 제어 및 강제 도킹(Forced Docking) 프로토콜 아키텍처\n\n### 1. 개요 (Overview)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화 시스템은 기본적으로 **결정론적(Deterministic) 알고리즘**에 의해 운영됩니다. 설비(Equipment)와 AMR(Autonomous Mobile Robot)은 사전에 정의된 `Call Type`이라는 식별자를 통해 상호 검증(Handshaking)을 수행하며, 이 정보가 일치할 때만 물리적인 도킹(Docking)과 자재 이재(Transfer)가 승인됩니다.\n\n그러나 실제 제조 현장에서는 긴급 리워크(Rework), 라인 간 자재 유용, 센서 오작동 등 표준 프로세스를 벗어난 **비동기적 예외 상황(Asynchronous Exception)**이 필연적으로 발생합니다. 본 챕터에서는 이러한 예외 상황에서 시스템의 교착 상태(Deadlock)를 방지하고 유연한 운영을 보장하기 위해 설계된 **Forced Docking(강제 도킹)** 메커니즘과 수동 개입(Manual Intervention) 시의 데이터 흐름 및 논리적 인과관계를 심층 분석합니다.\n\n---\n\n### 2. Forced Docking의 논리적 구조와 작동 원리 (Mechanism of Forced Docking)\n\n#### 2.1. Call Type 불일치와 프로토콜 오버라이드 (Protocol Override)\n표준 운영 절차(SOP)에서 설비의 PLC(Programmable Logic Controller)와 AMR의 제어기는 통신 수립 단계에서 서로의 `Call Type`을 비교합니다. 예를 들어, 설비가 'Type A' 배터리 모듈을 요청했으나 AMR이 'Type B'를 적재하고 있다면, 시스템은 안전을 위해 도킹 시퀀스를 차단(Interlock)합니다.\n\n**Forced Docking** 기능은 이러한 하드 코딩된 안전 로직을 일시적으로 우회하는 **프로토콜 오버라이드(Protocol Override)** 기법입니다.\n*   **작동 원리:** 운영자가 EQP HMI(Human Machine Interface)에서 Forced Docking 신호를 인가하면, PLC 내부의 비교 로직(Comparator Logic)은 `Call Type`의 일치 여부를 무시하고 도킹 승인 플래그(Docking Approval Flag)를 `TRUE`로 강제 변환합니다.\n*   **데이터 흐름:** `HMI Input` → `PLC Register (Force Bit Set)` → `ACS/MCS (Exception Log)` → `AMR Controller (Docking Command)`\n\n이 기능은 주로 타 라인 긴급 지원이나, 전산상 정보와 물리적 자재 정보가 일시적으로 불일치하는 리워크 자재 투입 시에 필수적인 유연성을 제공합니다.\n\n#### 2.2. 단발성 트리거(One-Shot Trigger)와 안전 메커니즘\nForced Docking은 시스템의 무결성을 해칠 수 있는 강력한 권한이므로, **'1회성 활성화(One-time Activation)'** 원칙에 따라 설계되었습니다.\n*   **Auto-Reset Logic:** 강제 도킹을 통해 한 번의 미션이 완료(Task Complete)되거나 도킹 시퀀스가 종료되는 즉시, PLC는 Forced Docking 활성화 비트를 자동으로 소거(Clear)합니다.\n*   **Why?** 만약 이 기능이 영구적으로 켜져 있다면(Latched), 향후 발생할 수 있는 이종 자재의 오투입이나 규격이 맞지 않는 팔레트의 진입을 시스템이 걸러내지 못하여 설비 파손이나 화재 위험을 초래할 수 있습니다. 따라서 시스템은 매 도킹 종료 시마다 '정상 검증 로직(Normal Validation Logic)'으로 자동 복귀(Fallback)하도록 설계되었습니다.\n\n#### 2.3. 상태 모니터링 (State Monitoring)\n수동 조작 시 엔지니어는 HMI의 시각적 피드백을 통해 시스템의 내부 상태를 확인해야 합니다. Forced Docking 버튼 클릭 후, 시스템은 다음의 순차적 상태 변화를 거칩니다.\n1.  **Call Request:** 설비가 자재를 요청하거나 배출 의사를 ACS(AMR Control System)에 송신한 상태.\n2.  **Robot Assigned:** ACS가 가용 가능한 AMR을 선정하여 해당 미션을 할당한 상태.\n3.  **Call Response:** AMR이 미션을 수락하고 설비와의 통신 핸드쉐이킹을 시작한 상태.\n\n이 3단계의 상태 천이가 HMI 좌측 상태창에 명확히 표시되어야만, 물리적인 도킹 프로세스가 정상적으로 시작되었음을 의미합니다.\n\n---\n\n### 3. 다중 라인 간 자원 재할당 및 교착 상태 해결 (Resource Reallocation & Deadlock Resolution)\n\n#### 3.1. 교차 라인 지원 시나리오 (Cross-Line Support)\nBSA #1라인의 자재 공급을 중단하고, 해당 자원을 BSA #2라인으로 긴급 투입해야 하는 상황을 가정해 봅시다. 이는 단순한 물리적 이동이 아니라, 시스템 상의 **논리적 토큰(Logical Token)**을 이동시키는 과정입니다.\n\n*   **문제 상황 (Conflict):** BSA #1라인에 이미 `Call Request`가 생성되어 있다면, 시스템은 해당 위치로 AMR을 보내기 위해 대기 중인 상태(Queueing)입니다. 이때 물리적으로 AMR을 BSA #2로 보내려 하면, 시스템은 \"할당된 미션 위치(#1)와 현재 위치(#2)의 불일치\"로 인해 에러를 발생시키거나 AMR을 다시 #1로 복귀시키려 할 것입니다.\n*   **해결 로직 (Resolution Sequence):**\n    1.  **Call Cancel (BSA #1):** 먼저 BSA #1라인의 HMI에서 `Call Cancel`을 실행합니다. 이는 ACS의 작업 큐(Task Queue)에서 BSA #1을 향한 미션 토큰을 **파기(Destroy)**하는 과정입니다. 이를 통해 시스템의 자원 점유를 해제합니다.\n    2.  **Forced Docking / Priority (BSA #2):** 이후 BSA #2라인에서 `Forced Docking` 또는 `Priority` 명령을 실행합니다. 이는 새로운 미션 토큰을 생성하고, 가용해진 AMR을 즉시 BSA #2로 할당(Assign)하도록 스케줄러의 우선순위를 재조정합니다.\n\n이 절차를 준수하지 않을 경우, 시스템은 존재하지 않는 작업(#1)을 수행하려는 '유령 미션(Phantom Mission)' 상태와 실제 작업(#2) 사이에서 논리적 충돌을 일으켜 교착 상태(Deadlock)에 빠지게 됩니다.\n\n---\n\n### 4. 물리적 개입과 논리적 상태의 동기화 (Synchronization of Physical & Logical States)\n\n자동화 시스템에서 가장 위험한 순간은 **'물리적 상태(Physical Reality)'와 '제어기 상의 데이터(Logical State)'가 불일치할 때**입니다. 지게차(Forklift) 등을 이용한 수동 작업(Manual Operation)은 이러한 불일치를 유발하는 주된 원인입니다.\n\n#### 4.1. 컨베이어 수동 구동 (Manual Conveyor Actuation)\n지게차를 이용해 자재를 투입할 때, 설비의 입구 센서(Photo-eye Sensor)가 AMR의 진입 패턴과 다르게 반응하거나, PLC가 AMR과의 통신 연결을 대기하느라 컨베이어 모터를 구동하지 않는 경우가 발생합니다.\n*   **엔지니어링 대응:** 이 경우 HMI를 통해 **컨베이어 수동 구동**을 실시해야 합니다. 이는 센서 트리거 조건이나 상위 시스템의 인터락(Interlock) 신호를 우회하여, 모터 드라이버(Inverter/Servo)에 직접 구동 명령(Run Command)을 인가하는 행위입니다. 이를 통해 물리적으로 자재를 설비 내부로 진입시켜 센서가 자재를 감지하게 함으로써, 시스템의 상태를 '대기'에서 '작업 중'으로 강제 동기화시킵니다.\n\n#### 4.2. 공 팔레트 회수와 유령 미션 제거 (Empty Pallet Recovery)\n시스템 상에 '공 팔레트 회수 미션'이 생성되었다는 것은, PLC가 배출부 센서를 통해 \"팔레트가 존재함(Bit = 1)\"을 인지하고 AMR을 호출했음을 의미합니다.\n*   **시나리오:** 이때 지게차가 AMR보다 먼저 도착하여 팔레트를 수동으로 회수해버리면, 물리적 공간은 비어있지만(Bit = 0), 시스템의 미션 큐에는 여전히 \"팔레트를 가지러 가라\"는 명령이 남아있게 됩니다.\n*   **결과:** AMR이 도착했을 때 팔레트가 없으므로, AMR의 라이다(LiDAR)나 근접 센서는 타겟을 찾지 못해 'Pick-up Error'를 발생시키거나 허공에 도킹을 시도하는 사고가 발생할 수 있습니다.\n*   **필수 조치:** 따라서 물리적 회수가 선행된 경우, 반드시 배출부 HMI에서 **`Call Cancel`**을 실행해야 합니다. 이는 시스템에게 \"물리적 객체가 제거되었으니, 논리적 미션도 취소하라\"는 신호를 보내, 데이터와 현실 세계의 정합성(Consistency)을 맞추는 필수적인 엔지니어링 절차입니다.",
        "questions": [
            "BMA 공정 자동화 시스템의 비동기적 예외 상황 제어 및 강제 도킹(Forced Docking) 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "Forced Docking 시 발생하는 프로토콜 오버라이드 메커니즘과 PLC 내부의 비교 로직이 ACS/AMR 제어기와 상호작용하여 도킹 승인 플래그를 생성하는 공학적 과정을 분석하시오.",
            "물리적 자재 회수와 시스템 미션 큐 간의 불일치로 인한 '유령 미션(Phantom Mission)' 발생 시, 시스템의 논리적 판단 과정과 데이터 정합성을 확보하기 위한 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 44,
        "preprocessed_group": "AMR이 BMA 배출 라인에서 품질 검사를 위해 정차하거나 수동 위치 조정이 필요한 경우, WEB ACS에서 해당 AMR 호기를 선택하고 BMA 배출 포트에서 Docking-OUT이 완전히 완료된 것을 확인한 후 JOB CANCEL을 클릭한다.\n\n도킹 아웃 도중 JOB CANCEL을 클릭하면 PLC 신호 꼬임(Interface Error)이 발생할 수 있으므로 주의해야 하며, 수동 조작이 필요한 경우 Unlock 버튼을 클릭하여 JOG 버튼을 활성화한 뒤 키보드나 화면 버튼으로 주변 장애물에 주의하며 운전한다.\n\n수동 조작 및 검사가 완료된 후에는 CALL-RETRY 버튼을 클릭하여 AMR을 BMA 배출에서 BMA 자동창고로 이동하는 자동 미션으로 복귀시킨다.",
        "textbook": "# BMA 공정 내 AMR 예외 상황 처리 및 수동 제어 아키텍처: 논리적 인과관계와 데이터 흐름 분석\n\n## 1. 서론: BMA 배출 라인의 공정 특성과 AMR 제어의 복잡성\n\n현대자동차그룹의 BMA(Battery Module Assembly) 공정은 고전압 배터리 모듈을 다루는 만큼, 정밀도와 안전성이 최우선시되는 환경입니다. 이 공정의 배출 라인(Discharge Line)은 완성된 모듈이 다음 단계인 자동창고(Auto Warehouse)로 이송되기 직전의 관문으로, 품질 검사(Quality Assurance)를 위한 무작위 샘플링이나 설비 이슈로 인한 예외적 정차가 빈번히 발생합니다.\n\n본 챕터에서는 BMA 배출 라인에서 AMR(Autonomous Mobile Robot)의 임무를 중단(Job Cancel)하고 수동으로 제어(Manual Jog)한 뒤, 다시 자동화 흐름으로 복귀(Call-Retry)시키는 일련의 과정에 숨겨진 시스템 아키텍처와 공학적 메커니즘을 심층 분석합니다.\n\n---\n\n## 2. 임무 중단(Job Cancel) 시퀀스와 상태 동기화 메커니즘\n\n### 2.1. WEB ACS와 AMR 간의 명령 체계\nWEB ACS(Activity Control System)는 전체 AMR 군집을 관장하는 상위 제어 시스템입니다. 운영자가 특정 AMR 호기를 선택하여 `JOB CANCEL` 명령을 내리는 것은 단순한 정지 신호가 아니라, AMR의 **작업 큐(Task Queue)**를 소거하고 현재 수행 중인 미션의 상태(State)를 강제로 초기화하는 고수준(High-level) 인터럽트 요청입니다.\n\n### 2.2. Docking-OUT 완료 대기의 공학적 필연성\n운영 매뉴얼에서 **\"BMA 배출 포트에서 Docking-OUT이 완전히 완료된 것을 확인한 후\"** 명령을 실행하라고 명시한 이유는 AMR과 설비(PLC) 간의 물리적, 논리적 결합 특성 때문입니다.\n\n1.  **물리적 구속(Physical Constraint):** AMR이 도킹 스테이션에 진입해 있는 상태(Docking-IN)에서는 충전 단자나 데이터 통신 포트, 혹은 정밀 정차를 위한 기구적 가이드가 AMR과 물리적으로 접촉해 있을 가능성이 높습니다. 이 상태에서 소프트웨어적으로 미션을 취소하면, AMR은 즉시 다음 명령을 수행하려 하거나 제어권이 해제되면서 미세한 움직임이 발생할 수 있으며, 이는 설비 파손으로 이어질 수 있습니다.\n2.  **논리적 인터록(Logical Interlock):** 도킹 구역은 설비 PLC와 AMR이 가장 긴밀하게 통신하는 'Critical Zone'입니다. AMR이 도킹 해제(Docking-OUT) 동작을 수행하여 안전 구역(Safe Zone)으로 완전히 빠져나오지 않은 상태는, 시스템상에서 여전히 '설비 점유 중(Occupied)'으로 인식됩니다.\n\n따라서 Docking-OUT 완료 확인은 AMR이 물리적/논리적으로 설비의 영향권에서 완전히 벗어나 **독립적인 제어 객체(Independent Control Object)**가 되었음을 검증하는 필수적인 절차입니다.\n\n---\n\n## 3. PLC 신호 교착(Deadlock)과 인터페이스 에러의 원인 분석\n\n### 3.1. 비동기적 명령 실행에 따른 경쟁 상태(Race Condition)\n도킹 아웃(Docking-OUT)이 진행 중인 찰나에 `JOB CANCEL`을 클릭할 경우 발생하는 **PLC 신호 꼬임(Interface Error)**은 전형적인 **경쟁 상태(Race Condition)**에 기인합니다.\n\n*   **정상 시퀀스:**\n    1.  AMR: \"나 나간다(Undocking Start)\" 신호 송신.\n    2.  PLC: \"확인, 안전 센서 해제(Area Clear)\" 응답.\n    3.  AMR: 이동 완료 후 \"도킹 아웃 완료(Undocking Complete)\" 신호 송신.\n    4.  PLC: 해당 포트 상태를 '비어 있음(Empty)'으로 갱신.\n\n*   **에러 발생 메커니즘 (도중 Cancel 시):**\n    AMR이 이동 중(Step 1~3 사이)에 ACS가 `JOB CANCEL`을 통해 AMR의 로직을 리셋해버리면, AMR은 PLC에게 보내야 할 마지막 \"완료 신호(Handshake Signal)\"를 보내지 않고 유휴(Idle) 상태로 전환됩니다.\n    반면, 설비의 PLC는 여전히 AMR로부터 \"완료 신호\"가 오기만을 기다리는 **무한 대기(Infinite Wait)** 상태에 빠지거나, 타임아웃(Timeout) 로직에 의해 비정상 종료 처리를 하게 됩니다.\n\n### 3.2. 시스템적 결과: 인터페이스 에러\n이러한 신호 불일치는 상위 시스템(ACS)과 하위 시스템(PLC/AMR) 간의 데이터 정합성을 깨뜨립니다. 이를 현장 용어로 '신호 꼬임'이라 표현하지만, 공학적으로는 **\"비동기 통신 실패에 의한 교착 상태(Deadlock caused by Asynchronous Communication Failure)\"**입니다. 이 상태가 되면 해당 포트는 논리적으로 '사용 중'으로 잠겨버려, 다른 AMR의 진입을 막거나 설비 전체의 알람을 유발하게 됩니다.\n\n---\n\n## 4. 수동 제어(Manual Jog) 시스템의 작동 원리와 안전 설계\n\n### 4.1. 제어 권한의 이양 (Unlock & JOG Activation)\n`Unlock` 버튼을 클릭하는 행위는 시스템의 제어 권한(Control Authority)을 **알고리즘(Autonomous Algorithm)**에서 **인간 운영자(Human Operator)**로 이양하는 절차입니다.\n평상시 AMR은 라이다(LiDAR)와 SLAM(Simultaneous Localization and Mapping) 알고리즘에 의해 자신의 위치를 파악하고 경로를 생성하지만, JOG 모드가 활성화되면 이러한 자율 주행 로직은 비활성화(Bypass)되고, 운영자의 키보드 입력이 모터 드라이버에 직접적인 속도/방향 벡터(Velocity Vector) 명령으로 변환되어 전달됩니다.\n\n### 4.2. 원격 제어(Teleoperation)의 지연 시간과 인지 부하\nWEB ACS를 통한 원격 제어는 [입력 장치] -> [ACS 서버] -> [무선 네트워크(Wi-Fi/5G)] -> [AMR 컨트롤러] -> [구동 모터]의 긴 데이터 경로를 거칩니다. 이 과정에서 필연적으로 **네트워크 레이턴시(Latency)**가 발생합니다.\n운영자가 화면을 보고 멈춤 버튼을 눌렀을 때, 실제 로봇이 멈추기까지 수십~수백 밀리초(ms)의 지연이 발생할 수 있습니다. 따라서 \"주변 장애물에 주의하며 운전\"하라는 지침은 단순한 주의 사항이 아니라, 이러한 **통신 지연을 고려한 예측 운전(Predictive Control)**이 필요함을 의미합니다.\n\n### 4.3. 안전 레이어의 지속성\n중요한 점은 수동 조작 중이라 하더라도 최하위 레벨의 **하드웨어 안전 장치(Safety PLC & Safety LiDAR)**는 여전히 활성 상태를 유지한다는 것입니다. 운영자의 실수로 장애물에 접근하더라도, 안전 라이다의 보호 필드(Protective Field)가 침범되면 하드웨어적으로 전력을 차단하여 충돌을 방지합니다. 하지만, 사각지대나 상단 장애물은 라이다가 감지하지 못할 수 있으므로 운영자의 시각적 확인이 필수적입니다.\n\n---\n\n## 5. 시스템 복구 및 미션 재할당 (Call-Retry 메커니즘)\n\n### 5.1. 상태 재설정 및 위치 재초기화\n수동 조작 및 검사가 완료된 후 `CALL-RETRY` 버튼을 클릭하는 것은 시스템의 **복구 루틴(Recovery Routine)**을 트리거하는 행위입니다.\n이 명령이 실행되면 시스템은 다음의 절차를 수행합니다:\n1.  **위치 검증(Relocalization):** 수동으로 이동된 AMR의 현재 좌표를 다시 스캔하여 맵(Map) 상의 위치와 매칭합니다.\n2.  **상태 동기화(State Synchronization):** AMR의 상태를 'Manual'에서 'Auto'로 전환하고, ACS에 'Available' 상태임을 알립니다.\n\n### 5.2. 미션 재개: BMA 배출에서 자동창고로\n`CALL-RETRY`는 단순히 멈췄던 곳에서 다시 시작하는 것이 아닙니다. 시스템은 현재 AMR이 적재하고 있는 배터리 모듈의 정보(Lot ID 등)를 확인하고, 원래의 목적지였던 **BMA 자동창고(Auto Warehouse)**로 향하는 최적 경로를 다시 계산(Re-planning)합니다.\n이 과정에서 BMA 배출 포트의 PLC와 다시 통신을 시도하여, 이전에 발생했을지 모르는 인터페이스 에러 플래그를 클리어(Clear)하고 정상적인 물류 흐름(Material Flow)을 재개하게 됩니다.\n\n---\n\n## 6. 결론\n\nBMA 공정에서의 AMR 수동 조작 절차는 단순한 운전이 아니라, **[ACS-AMR-PLC]**로 연결된 복잡한 제어 루프의 상태를 안전하게 전환하고 복구하는 과정입니다.\n1.  **Docking-OUT 확인**은 물리적/논리적 충돌을 방지하는 안전장치이며,\n2.  **적절한 시점의 JOB CANCEL**은 PLC와의 통신 교착 상태를 예방하는 핵심입니다.\n3.  **JOG 운전** 시에는 통신 지연을 고려한 인간의 인지적 판단이 요구되며,\n4.  **CALL-RETRY**를 통해 시스템은 비로소 정상적인 자동화 사이클로 복귀합니다.\n\n엔지니어는 이러한 내부 메커니즘을 이해함으로써, 단순한 조작 실수가 전체 라인의 셧다운(Shutdown)으로 이어지는 것을 방지하고 시스템의 가동률(Availability)을 극대화할 수 있습니다.",
        "questions": [
            "BMA 배출 라인 내 AMR의 임무 중단, 수동 제어 및 시스템 복구 프로세스 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR의 자율 주행 알고리즘이 수동 조작(Manual Jog) 모드로 전환될 때의 제어권 이양 메커니즘과, 네트워크 레이턴시 및 하드웨어 안전 레이어가 시스템적 상호작용에 미치는 영향을 공학적으로 분석하시오.",
            "도킹 아웃(Docking-OUT) 미완료 상태에서 임무 중단 명령이 실행될 때 발생하는 PLC 신호 교착(Deadlock)의 근본 원인과, 이로 인한 인터페이스 에러 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 45,
        "preprocessed_group": "AMR Sensor 점검 및 V-marker ASSY 상태 관리 시, 차상 제품감지센서는 FESTO 사의 SOEG-RTH-M18-PS-K-2L 모델을 2개 사용하며, 리프트용 근접센서는 FESTO 사의 SIEH-M12B-PS-S-L 모델을 2개 사용하고, 도킹용 근접센서는 AUTONICS 사의 PRT12-8DN2 모델을 2개 사용한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: AMR 센서 네트워크 및 상태 관리 메커니즘\n\n## 1. 서론: 사이버-물리 시스템(CPS)으로서의 AMR 센서 아키텍처\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내에서 운용되는 자율주행 로봇(AMR)은 단순한 운송 수단이 아닌, 물리적 환경을 인지하고 논리적 판단을 수행하는 **사이버-물리 시스템(Cyber-Physical System)**으로 정의된다. AMR이 복잡한 공정 내에서 안전하고 정밀하게 임무를 수행하기 위해서는 자기 위치 인식(Localization), 적재물 상태 감지(Payload Monitoring), 그리고 설비 간 인터페이스(Docking Interface)가 유기적으로 결합되어야 한다.\n\n본 챕터에서는 AMR의 핵심 감각 기관에 해당하는 **차상 제품감지**, **리프트 구동 제어**, **도킹 정밀도 제어**를 담당하는 센서들의 공학적 작동 원리와 시스템 통합 로직을 심층 분석한다. 특히 V-marker ASSY를 통한 거시적 위치 인식(Global Localization)과 상호보완적으로 작동하는 근접/광학 센서들의 미시적 제어(Micro-Control) 메커니즘에 주목한다.\n\n---\n\n## 2. 광학적 적재물 검증 시스템 (Optical Payload Verification)\n\n### 2.1 하드웨어 사양 및 선정 배경\nAMR 상단에 적재되는 배터리 모듈 및 팩의 유무를 판단하기 위해 **FESTO 사의 SOEG-RTH-M18-PS-K-2L** 모델이 2개 배치된다. 이 센서는 확산 반사형(Diffuse Reflection) 광전 센서로, BMA 공정의 특수성을 고려하여 선정되었다.\n\n*   **작동 원리 (Physics):** 센서의 투광부에서 방출된 적외선(Infrared) 또는 가시광선 빔이 대상 물체(배터리 모듈) 표면에 반사되어 수광부로 되돌아오는 광량을 측정한다.\n*   **배경 억제 (Background Suppression, BGS):** 모델명 'RTH'는 배경 억제 기능을 시사한다. 공장 천장의 조명이나 지나가는 작업자 등 배경 노이즈를 광학적 삼각 측량 원리를 통해 필터링하고, 설정된 감지 거리 내의 물체(배터리)만을 유효 신호로 인식한다.\n\n### 2.2 논리적 인과관계 및 데이터 흐름\n시스템은 단일 센서의 오작동(False Positive/Negative)을 방지하기 위해 2개의 센서를 **AND 논리** 또는 **교차 검증(Cross-Validation)** 방식으로 운용한다.\n\n1.  **트리거 (Trigger):** AMR이 적재 스테이션에 도착하거나 이송 명령을 수신하면 PLC는 센서 전원을 활성화한다.\n2.  **신호 처리 (Signal Processing):**\n    *   두 센서 모두 'High' 신호를 출력할 경우: PLC는 `Payload_Status = LOADED`로 레지스터를 갱신한다.\n    *   신호 불일치 발생 시: 시스템은 이를 '적재 불량' 또는 '센서 에러'로 간주하고 ACS(Agile Control System)에 경보를 전송하며 주행을 불허한다.\n3.  **안전 인터록 (Safety Interlock):** 주행 중 센서 신호가 순간적으로 'Low'로 떨어질 경우(채터링 제외), 시스템은 배터리 낙하 또는 위치 이탈로 간주하여 즉시 **비상 정지(E-Stop)** 루틴을 수행한다. 이는 물리적 사고를 미연에 방지하는 핵심 로직이다.\n\n---\n\n## 3. 리프트 키네마틱스 피드백 제어 (Lift Kinematics Feedback Control)\n\n### 3.1 하드웨어 사양 및 선정 배경\nAMR의 리프트 구동부에는 **FESTO 사의 SIEH-M12B-PS-S-L** 유도형 근접 센서(Inductive Proximity Sensor) 2개가 장착된다. 이는 리프트의 상한(Top Limit)과 하한(Bottom Limit)을 물리적으로 감지하여 모터의 오버런(Over-run)을 방지하는 역할을 한다.\n\n*   **작동 원리 (Physics):** 센서 헤드에서 고주파 자기장을 형성한다. 리프트의 금속 구조물(Target)이 자기장 내로 진입하면 전자기 유도 현상에 의해 금속 표면에 **와전류(Eddy Current)**가 발생한다. 이로 인한 발진 회로의 에너지 손실(진폭 감소)을 감지하여 스위칭 신호를 생성한다.\n*   **내환경성:** 광학 센서와 달리 유분, 먼지 등의 오염에 강하므로 구동부 내부와 같이 유지보수가 까다로운 위치에 적합하다.\n\n### 3.2 폐루프 제어 메커니즘 (Closed-Loop Control Mechanism)\n이 센서들은 단순한 위치 감지를 넘어 리프트 모터 제어의 **피드백 루프(Feedback Loop)**를 구성한다.\n\n1.  **동작 개시:** 상위 제어기(PLC)가 리프트 상승 명령(`Lift_Up_Cmd`)을 내리면 모터가 구동된다.\n2.  **임계점 도달:** 리프트가 상승하여 상한 센서(SIEH-M12B)의 감지 거리(Sn) 내에 진입하면, 센서의 출력 트랜지스터가 도통(ON)된다.\n3.  **제어 개입:** PLC는 이 신호를 인터럽트(Interrupt)로 받아들여 즉시 모터 전원을 차단하고 브레이크를 체결한다.\n4.  **논리적 교착 방지:** 만약 상승 명령 중 하한 센서가 계속 감지되거나, 일정 시간 내에 상한 센서 신호가 입력되지 않으면(Time-out), 시스템은 **기구적 끼임(Mechanical Jam)**으로 판단하여 `Lift_Fault` 에러를 발생시킨다.\n\n---\n\n## 4. 정밀 도킹 인터페이스 및 핸드쉐이킹 (Precision Docking & Handshaking)\n\n### 4.1 하드웨어 사양 및 선정 배경\n설비와의 물리적 도킹 정합성을 판단하기 위해 **AUTONICS 사의 PRT12-8DN2** 근접 센서 2개가 사용된다. 이 모델은 상대적으로 긴 감지 거리를 가지며, 설비 측의 도킹 플레이트나 특정 금속 마커를 인식한다.\n\n*   **V-Marker와의 상관관계:** AMR은 주행 중 **Lidar 센서**를 통해 V-Marker를 스캔하여 자신의 위치를 추정(SLAM)한다. 그러나 Lidar 기반의 위치 인식은 수~수십 mm의 오차를 가질 수 있다.\n*   **역할 분담:** V-Marker가 '근처까지의 접근(Navigation)'을 담당한다면, PRT12-8DN2 센서는 '최종 접촉 확인(Validation)'을 담당한다.\n\n### 4.2 설비 간 핸드쉐이킹 프로토콜 (Equipment Handshaking Protocol)\n이 센서는 AMR과 지상 설비(Conveyor 등) 간의 자재 이송 시 **논리적/물리적 안전장치**로 작동한다.\n\n1.  **접근 (Approach):** AMR이 도킹 스테이션에 진입한다.\n2.  **정렬 확인 (Alignment Check):** AMR이 정지한 후, 좌/우측에 배치된 2개의 PRT12-8DN2 센서가 모두 설비 측 타겟을 감지해야 한다.\n    *   *Case A (정상):* 두 센서 모두 ON → \"정위치 도킹 완료\" 판정.\n    *   *Case B (비정상):* 한쪽만 ON 또는 모두 OFF → \"정렬 불량(Misalignment)\" 판정.\n3.  **데이터 흐름 및 허가:** 정위치 신호가 PLC 내부 로직을 통과하면, AMR은 상위 관제 시스템(ACS) 또는 설비 PLC에 `Ready_To_Transfer` 신호를 송신한다.\n4.  **이송 개시:** 설비는 이 신호를 수신한 후에만 컨베이어를 가동한다. 이 센서 신호가 없다면 물리적으로 컨베이어 가동이 차단(Interlock)되어, 배터리 모듈이 바닥으로 추락하는 사고를 원천 봉쇄한다.\n\n---\n\n## 5. 결론: 다층적 센서 퓨전(Sensor Fusion)을 통한 신뢰성 확보\n\nBMA 공정의 AMR 시스템은 단일 센서에 의존하지 않는다. **FESTO SOEG** 시리즈를 통한 적재물의 광학적 검증, **FESTO SIEH** 시리즈를 통한 기구학적 한계 제어, 그리고 **AUTONICS PRT** 시리즈를 통한 설비 간 정밀 인터페이스가 결합되어 시스템의 **결정론적(Deterministic) 동작**을 보장한다.\n\n엔지니어는 단순한 에러 코드 확인을 넘어, 각 센서가 담당하는 물리적 현상(빛의 반사, 전자기 유도)과 이에 따른 논리적 흐름(인터록, 핸드쉐이킹)을 이해함으로써, 시스템의 가동률을 극대화하고 잠재적인 다운타임을 최소화할 수 있다.",
        "questions": [
            "BMA 공정 내 AMR의 센서 아키텍처, 적재물 검증 시스템, 리프트 제어 및 도킹 인터페이스 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "광학적 배경 억제(BGS) 기술과 전자기 유도 기반의 와전류 감지 원리가 AMR의 적재물 확인 및 리프트 피드백 루프 내에서 어떻게 시스템적 상호작용을 수행하는지 공학적으로 분석하시오.",
            "도킹 과정에서의 정렬 불량(Misalignment)이나 리프트 동작 중 타임아웃(Time-out) 상황 발생 시 시스템의 논리적 판단 과정과 안전 인터록 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 46,
        "preprocessed_group": "자동 복구 실패 시, 작업자는 1T AMR 차상에 설치된 제품감지센서의 상태를 점검하고 필요에 따라 감도 및 위치를 조정한다.",
        "textbook": "# 1T AMR 적재 상태 감지 시스템의 물리적 정합성 및 센서 캘리브레이션 메커니즘\n**(Physical Integrity and Sensor Calibration Mechanism of 1T AMR Loading State Detection System)**\n\n### 1. 서론: 자동 복구 프로세스의 한계와 물리 계층(Physical Layer)의 중요성\n\nBMA(Battery Module Assembly) 공정 내에서 운용되는 1T AMR(Autonomous Mobile Robot)은 상위 관제 시스템(ACS/MCS) 및 PLC와의 통신을 통해 자신의 상태를 실시간으로 보고합니다. 시스템 운영 중 발생하는 에러에 대해 소프트웨어적인 '자동 복구(Auto-recovery)' 루틴은 통신 타임아웃이나 일시적인 로직 교착 상태(Logic Deadlock)를 해소하는 데 유효합니다.\n\n그러나 **자동 복구가 실패한다는 것**은 에러의 원인이 논리적(Logical) 영역이 아닌 **물리적(Physical) 영역**에 잔존하고 있음을 시사합니다. 특히 AMR 차상에 설치된 **제품감지센서(Product Detection Sensor)**는 로봇이 실제 배터리 모듈을 적재하고 있는지(Loaded) 혹은 공차 상태인지(Unloaded)를 판별하는 최하위단의 'Ground Truth(실제값)'를 제공합니다. 이 센서의 신호가 물리적 요인으로 인해 불안정할 경우, 상위 제어기의 어떠한 리셋 명령도 유효한 상태 전이를 이끌어낼 수 없습니다. 따라서 엔지니어는 소프트웨어적 대응을 멈추고 하드웨어 캘리브레이션 단계로 진입해야 합니다.\n\n### 2. 제품감지센서의 공학적 작동 원리와 신호 무결성\n\n1T AMR 차상에 탑재된 제품감지센서는 통상적으로 광전 센서(Photoelectric Sensor) 방식을 채택하여, 투광부에서 발사된 빛이 적재된 배터리 모듈 표면에 반사되어 수광부로 되돌아오는 광량의 변화를 감지합니다. 이 과정에서 센서는 아날로그적인 광학 신호를 디지털(Boolean: 0 or 1) 신호로 변환하여 PLC로 전송합니다.\n\n이때 센서의 신호 무결성(Signal Integrity)을 저해하는 요인은 다음과 같습니다:\n\n*   **광학적 특성 변화:** 배터리 모듈의 케이싱 재질(알루미늄, 플라스틱 등)이나 표면의 거칠기, 색상에 따라 반사율(Reflectivity)이 달라집니다.\n*   **기하학적 오차:** AMR이 트레이에 도킹하는 과정에서 미세한 조향 오차가 발생하거나, 트레이 자체의 정렬이 틀어진 경우 센서의 지향각(Beam Angle)이 타겟을 벗어날 수 있습니다.\n\n자동 복구가 실패하는 상황은 주로 센서가 **'임계 영역(Threshold Zone)'**에서 진동하고 있을 때 발생합니다. 즉, 센서가 물체를 감지한 것인지 아닌지 모호한 전압 레벨을 출력하거나, 노이즈로 인해 On/Off 신호가 고속으로 채터링(Chattering)하는 경우, PLC는 이를 유효한 적재 신호로 확정할 수 없어 에러 상태를 유지하게 됩니다.\n\n### 3. 감도(Sensitivity) 및 위치(Position) 보정의 기술적 메커니즘\n\n작업자에 의한 센서 점검 및 조정은 단순한 유지보수 행위가 아니라, 시스템의 **신호 대 잡음비(SNR: Signal-to-Noise Ratio)를 최적화하는 엔지니어링 과정**입니다.\n\n#### 3.1. 위치 조정 (Geometric Alignment)\n위치 조정은 센서의 **광축(Optical Axis)**을 재정렬하는 과정입니다.\n*   **작동 원리:** 센서의 투광 빔이 배터리 모듈의 가장 평탄하고 반사율이 균일한 지점(Target Spot)에 정확히 입사되도록 센서 브라켓의 각도와 높이를 물리적으로 수정합니다.\n*   **목적:** 난반사(Diffuse Reflection)에 의한 신호 손실을 최소화하고, 배경 물체(Background Object)가 아닌 실제 타겟(배터리 모듈)만을 감지 영역(Field of View) 내에 두기 위함입니다.\n\n#### 3.2. 감도 조정 (Sensitivity Calibration)\n감도 조정은 센서 내부의 **수광 임계값(Threshold Level)**을 튜닝하는 과정입니다.\n*   **작동 원리:** 센서 후면의 가변 저항(Potentiometer)을 조절하여, 수광부로 들어오는 빛의 양이 어느 수준일 때 '감지(ON)'로 판정할지 결정합니다. 이를 통해 **히스테리시스(Hysteresis)** 구간을 최적화합니다.\n*   **조정 로직:**\n    *   **감도 증대:** 배터리 모듈의 표면이 어둡거나 거리가 멀어 반사광이 약할 때 수행합니다. 단, 과도하게 높일 경우 주변의 먼지나 AMR 구조물에 반응하는 오작동(False Positive)이 발생할 수 있습니다.\n    *   **감도 감소:** 주변 조명이 강하거나, 타겟이 아닌 배경 물체까지 감지될 때 수행하여 노이즈를 제거합니다.\n\n### 4. 결론: 물리적 보정을 통한 시스템 정상화\n\n결과적으로, 자동 복구 실패 시 수행하는 센서 점검 및 조정은 **[물리적 광학 환경 개선] -> [센서 출력 전압 안정화] -> [PLC 입력 모듈의 명확한 High/Low 신호 인식] -> [시스템 에러 클리어 및 시퀀스 재개]**로 이어지는 인과 사슬의 첫 단추입니다.\n\n엔지니어는 이 과정을 통해 AMR이 \"적재 상태임\"을 확정적인 데이터로 상위 시스템에 전달할 수 있도록 보장하며, 이는 전체 BMA 공정의 물류 흐름이 교착 상태(Deadlock)에 빠지지 않게 하는 핵심적인 하드웨어 인터벤션(Intervention)입니다.",
        "questions": [
            "1T AMR 적재 상태 감지 시스템의 물리적 정합성 및 센서 캘리브레이션 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR 차상 광전 센서의 광학적 특성과 수광 임계값 튜닝이 PLC 입력 신호의 무결성을 확보하는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "소프트웨어적 자동 복구 루틴이 실패하는 물리적 임계 영역(Threshold Zone) 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 47,
        "preprocessed_group": "1. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor(호기: R_107~135)를 분해할 경우, T-렌치를 사용하여 커버(1)은 2.5mm, 커버(2)는 3mm 나사를 풀고 센서가 낙하하지 않도록 주의하며 제거한다.\n\n2. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 동작 상태는 후면 LED를 통해 확인하며, 대기 시에는 녹색 LED가 점등되고 감지 시에는 녹색과 노란색 LED가 동시에 점등된다.\n\n3. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 감지 높이를 조정할 경우, 일자 정밀드라이버를 사용하여 반시계 방향으로 최소 높이를 설정한 후 시계 방향으로 돌려가며 높이를 맞춘다.\n\n4. BMA SKID에 장착된 콘-타입(Cone Type) AMR Sensor의 권장 세팅 높이는 20 ~ 25 mm이다.\n\n5. BSA SKID에 장착된 콘-타입(Cone Type) AMR Sensor는 프레임이 없는 구조이므로 PLT 하부 커버를 감지할 수 있도록 95 ~ 100 mm 높이로 설정한다.\n\n6. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 감지 높이를 100mm 초과로 설정할 경우, 리프트가 하강한 상태에서도 제품을 오감지할 수 있으므로 주의한다.\n\n7. BMA/BSA SKID용 콘-타입(Cone Type) AMR Sensor의 조립 완료 후 수동 확인이 필요한 경우, WEB ACS의 Information 내 IO 탭에서 onboard_sensor_1(전방) 및 onboard_sensor_2(후방)의 상태가 감지 시 녹색, 미검출 시 빨간색으로 표시되는지 확인한다.",
        "textbook": "# BMA/BSA 공정 자동화 시스템 기술 백서\n## Section 4. Payload Detection System & Sensor Architecture\n\n### 4.1 개요 (Overview)\n현대자동차그룹 BMA(Battery Module Assembly) 및 BSA(Battery System Assembly) 공정 내에서 운용되는 AMR(Autonomous Mobile Robot, 호기: R_107~135)은 단순한 물류 이송을 넘어, 적재된 배터리 모듈 및 시스템의 존재 여부를 실시간으로 판단하는 지능형 에지(Edge) 디바이스 역할을 수행한다. 본 챕터에서는 AMR의 적재 상태(Payload Status)를 결정짓는 핵심 컴포넌트인 **'콘-타입(Cone Type) AMR Sensor'**의 물리적 아키텍처, 신호 처리 로직, 그리고 관제 시스템(ACS)과의 데이터 연동 메커니즘을 심층적으로 분석한다.\n\n---\n\n### 4.2 물리적 아키텍처 및 유지보수 프로토콜 (Physical Architecture & Maintenance)\n\n콘-타입 AMR 센서는 진동과 충격이 빈번한 주행 환경에서도 정밀한 감지 성능을 유지하기 위해 견고한 하우징과 이중 체결 구조를 채택하고 있다. 엔지니어링 관점에서 이 센서의 유지보수는 단순한 부품 교체가 아닌, 센서의 기하학적 정렬(Geometric Alignment)을 보존하는 정밀 작업으로 간주되어야 한다.\n\n1.  **하우징 분해 및 체결 역학:**\n    센서 모듈에 접근하기 위해서는 외부 충격으로부터 센서를 보호하는 커버(Cover)의 제거가 선행되어야 한다. 설계상 두 가지 규격의 체결 부품이 사용되는데, **커버(1)은 2.5mm**, **커버(2)는 3mm** 규격의 T-렌치를 사용하여 분해한다. 이는 각 커버가 받는 구조적 응력(Stress)의 차이를 반영한 설계로, 규정된 토크와 공구를 사용하지 않을 경우 나사산의 마모나 하우징의 미세 변형을 초래할 수 있다.\n2.  **낙하 방지 및 센서 보호:**\n    센서 유닛은 미세한 광학계 또는 전자기장 코일을 내장하고 있어 물리적 충격(G-force)에 매우 취약하다. 따라서 나사 제거 시 센서가 자중에 의해 급격히 이탈하여 낙하하지 않도록 지지하는 것이 필수적이다. 낙하로 인한 충격은 내부 소자의 캘리브레이션 값을 영구적으로 틀어지게 하여, 복구 불가능한 감지 오류를 유발할 수 있다.\n\n---\n\n### 4.3 신호 처리 및 시각적 피드백 로직 (Signal Processing & Feedback Logic)\n\n센서는 내부의 감지 회로(Detection Circuitry)를 통해 수집된 아날로그 신호를 디지털 논리(0 또는 1)로 변환하여 출력한다. 이 과정에서 현장 엔지니어가 센서의 동작 상태를 즉각적으로 인지할 수 있도록 후면 LED를 통한 시각적 디버깅 인터페이스를 제공한다.\n\n*   **대기 상태 (Idle State - Logic 0):** 전원이 정상적으로 공급되고 있으나 감지 대상이 없는 경우, **녹색 LED**만이 점등된다. 이는 센서의 전원부(Power Unit)와 제어 보드가 정상 작동 중임을 의미하는 'Heartbeat' 신호 역할을 한다.\n*   **감지 상태 (Active State - Logic 1):** 타겟 물체가 임계값(Threshold) 내로 진입하면, 센서는 트리거 신호를 발생시키며 **녹색 LED와 노란색 LED가 동시에 점등**된다.\n    *   **논리적 해석:** 녹색(Power Good) + 노란색(Signal Output)의 조합은 센서가 전기적으로 건전하며, 동시에 논리적으로 'True' 신호를 송출하고 있음을 나타낸다. 만약 물체가 있음에도 노란색 LED가 점등되지 않는다면, 이는 감도 설정 오류나 소자 불량을 의미한다.\n\n---\n\n### 4.4 감도 튜닝 및 캘리브레이션 메커니즘 (Calibration Dynamics)\n\n센서의 감지 거리는 고정된 값이 아니며, 가변 저항(Potentiometer)을 통해 아날로그 게인(Gain)을 조절함으로써 설정된다. 이는 현장의 다양한 조도, 반사율, 기구적 공차에 대응하기 위한 필수적인 튜닝 과정이다.\n\n1.  **초기화 및 히스테리시스 제어:**\n    일자 정밀드라이버를 사용하여 조정 나사를 **반시계 방향(CCW)**으로 끝까지 회전시키면 감지 임계값이 최소화(초기화)된다. 이후 **시계 방향(CW)**으로 서서히 회전시키며 목표 거리에 도달했을 때 출력이 발생하도록 설정한다.\n2.  **공학적 의의:**\n    이러한 튜닝 방식은 센서의 히스테리시스(Hysteresis) 특성을 고려한 것이다. 최소 감도에서 시작하여 점진적으로 감도를 높이는 방식은 노이즈에 의한 오작동(False Positive)을 배제하고, 가장 안정적인 동작 점(Operating Point)을 찾는 데 유리하다.\n\n---\n\n### 4.5 공정별 기하학적 설정 및 파라미터 최적화 (Operational Parameters by Process)\n\nBMA와 BSA 공정은 취급하는 배터리 모듈의 형상과 이를 적재하는 SKID의 구조가 상이하다. 따라서 센서의 감지 높이(Sensing Height)는 각 공정의 물리적 특성에 맞춰 엄격하게 관리되어야 한다.\n\n#### 4.5.1 BMA SKID 설정 (Short-Range Detection)\n*   **권장 설정:** 20 ~ 25 mm\n*   **설계 근거:** BMA SKID는 상대적으로 컴팩트하며 센서와 타겟(SKID 하부) 간의 간격이 좁다. 20~25mm의 설정은 근거리에서의 확실한 감지를 보장하며, 주변 구조물에 의한 난반사나 간섭을 최소화하는 최적의 거리이다.\n\n#### 4.5.2 BSA SKID 설정 (Long-Range Detection)\n*   **권장 설정:** 95 ~ 100 mm\n*   **설계 근거:** BSA SKID는 프레임이 없는(Frameless) 구조적 특성을 가지며, 센서가 감지해야 할 대상인 PLT(Pallet) 하부 커버까지의 거리가 멀다. 따라서 감지 범위를 약 100mm까지 확장하여, 물리적 프레임이 부재한 공간을 통과해 타겟을 정확히 포착할 수 있도록 튜닝해야 한다.\n\n---\n\n### 4.6 오작동 시나리오 및 인과관계 분석 (Error Propagation Analysis)\n\n센서의 감지 높이 설정이 엔지니어링 한계치를 초과할 경우, 시스템은 심각한 논리적 오류에 직면하게 된다. 특히 **100mm를 초과하여 설정하는 경우** 다음과 같은 인과 사슬(Chain of Causality)에 의해 오작동이 발생한다.\n\n1.  **조건(Condition):** 센서의 감지 임계값이 100mm를 초과하여 과도하게 설정됨.\n2.  **트리거(Trigger):** AMR의 리프트(Lift)가 하강하여 제품과 이격된 상태(Safe State)가 됨.\n3.  **현상(Phenomenon):** 과도한 감지 범위로 인해, 리프트가 하강했음에도 불구하고 센서의 빔(Beam)이나 필드가 상단에 위치한 제품(또는 SKID)을 여전히 감지함.\n4.  **결과(Result - False Positive):**\n    *   **물리적 상태:** 리프트 하강 (이송 준비 완료 또는 대기).\n    *   **센서 논리:** \"물체 감지됨\" (리프트 상승 상태로 오인 가능).\n5.  **시스템 영향:** PLC 또는 상위 제어기는 \"리프트가 내려갔는데 제품이 감지된다\"는 모순된 신호를 수신하게 되며, 이는 공정 로직의 교착 상태(Deadlock)나 예기치 않은 에러 알람을 유발한다. 따라서 100mm라는 상한선은 단순한 권장치가 아닌, 기구학적 안전 마진(Safety Margin)이 포함된 임계값이다.\n\n---\n\n### 4.7 데이터 흐름 및 시스템 레벨 검증 (Data Flow & System Verification)\n\n물리적 센서의 설치와 튜닝이 완료되면, 해당 신호가 상위 관제 시스템까지 정확하게 전달되는지 검증하는 절차가 필요하다. 이 데이터 흐름은 **[Physical Sensor] -> [AMR Controller] -> [Wireless Network] -> [ACS Server] -> [Web Client]**의 경로를 따른다.\n\n1.  **IO 매핑 및 시각화:**\n    WEB ACS(Automated Control System)의 Information 패널 내 **IO 탭**은 AMR의 내부 레지스터 상태를 시각화하여 보여준다.\n    *   **onboard_sensor_1:** 전방(Front) 센서 데이터 매핑\n    *   **onboard_sensor_2:** 후방(Rear) 센서 데이터 매핑\n2.  **상태 검증 로직:**\n    *   **녹색 (Green):** Bit 1 (High). 물체가 감지됨을 의미.\n    *   **빨간색 (Red):** Bit 0 (Low). 미검출 상태를 의미.\n    *   **검증 절차:** 현장에서 수동으로 타겟을 센서 앞에 위치시켰을 때, ACS 화면상의 인디케이터가 빨간색에서 녹색으로 즉시 전환되는지 확인해야 한다. 이 과정에서 지연(Latency)이나 불일치가 발생한다면, 이는 센서 자체의 문제가 아니라 통신 네트워크 패킷 손실이나 PLC IO 매핑 오류일 가능성을 시사한다.",
        "questions": [
            "BMA/BSA 공정 자동화 시스템 내 AMR의 Payload Detection System 및 센서 아키텍처 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "콘-타입(Cone Type) AMR 센서의 물리적 체결 구조와 가변 저항을 이용한 캘리브레이션 메커니즘이 전체 시스템의 감지 정밀도 및 데이터 신뢰성에 미치는 영향을 공학적으로 분석하시오.",
            "센서의 감지 임계값이 100mm를 초과하여 설정될 경우, 리프트 하강 상태에서 발생하는 False Positive 오류의 인과관계와 이로 인한 제어 시스템의 논리적 판단 과정 및 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 48,
        "preprocessed_group": "1. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서를 분해할 때는 상부 커버 제거, Push 버튼 제거, 센서 브라켓 제거 순서로 탈거한다.\n2. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서 동작 상태는 LED가 녹색일 때 대기, 녹색과 노란색이 동시에 점등될 때 동작 중임을 나타낸다.\n3. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서 감지 범위는 센서 버튼을 누른 상태에서 감지가 확인되는 지점까지 조정하며, 권장 설정 높이는 5mm이다.\n4. 셀 공급 및 회수용 Type B 어태치-타입 AMR(R_101~106)의 센서 조립 완료 후에는 WEB ACS의 IO 탭을 통해 정상 동작 여부를 최종 확인한다.",
        "textbook": "# BMA 공정 자동화 시스템 기술 백서: Type B AMR 센서 아키텍처 및 신호 처리 프로토콜\n\n## 1. 개요 (Overview)\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 핵심 물류를 담당하는 **Type B 어태치-타입 AMR(R_101~106)**은 셀(Cell) 공급 및 회수라는 미션 크리티컬(Mission-Critical)한 작업을 수행한다. 이 로봇의 정밀한 동작을 보장하는 것은 하부의 구동 모터뿐만 아니라, 환경 정보를 수집하고 피드백을 제공하는 **센서 시스템(Sensor System)**의 신뢰성에 달려 있다.\n\n본 챕터에서는 R_101~106 호기에 탑재된 센서 모듈의 기구적 설계(Mechanical Design), 신호 처리 로직(Signal Processing Logic), 캘리브레이션 물리학(Calibration Physics), 그리고 상위 관제 시스템(WEB ACS)과의 데이터 동기화 메커니즘을 심층적으로 분석한다.\n\n---\n\n## 2. 센서 모듈의 기구적 아키텍처와 유지보수 프로토콜 (Mechanical Architecture)\n\n### 2.1. 계층적 조립 구조와 보호 설계\nType B AMR의 센서 모듈은 공장 내의 진동, 분진, 그리고 물리적 충격으로부터 정밀 전자 부품을 보호하기 위해 다층(Multi-layer) 구조로 설계되었다. 유지보수 시 수행되는 분해 절차(상부 커버 → Push 버튼 → 센서 브라켓)는 단순한 순서가 아니라, 각 부품의 **구조적 의존성(Structural Dependency)**과 **응력 분산(Stress Distribution)**을 고려한 공학적 프로토콜이다.\n\n1.  **상부 커버 (Top Cover):** 최상단에 위치하여 외부의 물리적 충격과 이물질(Contaminants) 유입을 1차적으로 차단하는 쉴드(Shield) 역할을 수행한다. 이를 가장 먼저 제거하는 이유는 내부의 정밀 제어부에 접근하기 위한 물리적 경로(Access Path)를 확보하고, 하위 부품에 가해지는 체결 압력을 해제하기 위함이다.\n2.  **Push 버튼 (Actuator Interface):** 센서의 입력 트리거 역할을 하는 기구물이다. 브라켓 제거 전 버튼을 먼저 탈거해야 하는 이유는, 브라켓 탈거 시 발생할 수 있는 비틀림 모멘트(Torsional Moment)가 버튼의 힌지나 스프링 메커니즘에 전달되어 소성 변형(Plastic Deformation)을 일으키는 것을 방지하기 위함이다.\n3.  **센서 브라켓 (Sensor Bracket):** 센서 본체를 AMR 프레임에 고정하며, 센서의 지향각(Orientation)과 위치 정밀도를 결정하는 기준점(Reference Point)이다.\n\n이러한 역순 분해(Reverse-Assembly) 로직을 준수하지 않을 경우, 센서의 광학축이나 기계적 접점이 미세하게 틀어져 재조립 후 **센싱 오차(Sensing Error)**를 유발할 수 있다.\n\n---\n\n## 3. 신호 처리 로직과 시각적 상태 진단 (Signal Processing & Visual Diagnostics)\n\n### 3.1. 이중 상태 표시(Dual-State Indication) 메커니즘\nAMR의 센서는 내부의 연산 상태를 외부 엔지니어에게 직관적으로 전달하기 위해 LED 인디케이터를 활용한다. 이는 단순한 점등이 아니라, 센서 내부 회로의 **전원 무결성(Power Integrity)**과 **트리거 로직(Trigger Logic)** 상태를 대변한다.\n\n*   **대기 상태 (Standby Mode) - Green LED:**\n    *   **의미:** 센서에 정격 전압(Vcc)이 인가되었으며, 내부의 MCU(Micro Controller Unit) 또는 비교기(Comparator) 회로가 정상적으로 초기화(Initialization) 되었음을 의미한다.\n    *   **진단:** 만약 녹색등이 점등되지 않는다면, 이는 전원 공급 라인의 단선(Open Circuit)이나 센서 내부 레귤레이터의 파손을 시사한다.\n\n*   **동작 상태 (Active Mode) - Green + Yellow LED:**\n    *   **작동 원리:** 센서가 타겟을 감지하여 내부 임계값(Threshold)을 초과하는 신호를 생성했을 때 발생한다. 이때 센서는 출력 트랜지스터(NPN/PNP)를 스위칭하여 신호 라인(Signal Line)의 전위를 변경한다.\n    *   **논리적 결합:** 녹색(전원 정상)과 노란색(신호 출력)이 동시에 점등되는 것은 **AND 게이트** 논리와 유사하다. 즉, \"시스템이 건강하며(Green), 유효한 객체를 감지했다(Yellow)\"는 확정적 신호를 나타낸다. 이는 오작동(False Positive)과 실제 감지를 구분하는 중요한 시각적 디버깅 도구로 활용된다.\n\n---\n\n## 4. 캘리브레이션 물리학과 감지 임계값 설정 (Calibration Physics)\n\n### 4.1. 감지 범위(Sensing Range)와 히스테리시스(Hysteresis)\n센서의 감도 조절은 AMR이 주행 중 주변 환경을 얼마나 민감하게 받아들일지를 결정하는 핵심 파라미터 튜닝 과정이다. \"센서 버튼을 누른 상태에서 감지가 확인되는 지점\"을 찾는 과정은 센서의 **동작점(Operating Point)**을 티칭(Teaching)하는 과정이다.\n\n### 4.2. 5mm 설정 높이의 공학적 근거\n권장 설정 높이인 **5mm**는 임의의 수치가 아니라, 센서의 **신호 대 잡음비(SNR: Signal-to-Noise Ratio)**와 **기구적 공차(Mechanical Tolerance)**를 고려한 최적의 안전 마진(Safety Margin)이다.\n\n*   **Why 5mm? (최적화 이론):**\n    *   **Too High (> 5mm):** 감지 거리가 너무 멀어지면, 바닥의 요철이나 주변 설비의 반사광 등 노이즈(Noise)를 타겟으로 오인할 확률이 기하급수적으로 증가한다. 이는 AMR의 불필요한 급정지(Phantom Stop)를 유발하여 공정 사이클 타임(Cycle Time)을 저하시킨다.\n    *   **Too Low (< 5mm):** 감지 거리가 너무 짧으면, AMR이 고속 주행 중 발생할 수 있는 진동(Vibration)이나 타겟 물체의 위치 오차로 인해 감지 실패(Missed Detection)가 발생할 수 있다. 이는 물리적 충돌(Collision) 사고로 이어질 수 있는 위험한 상태다.\n    *   따라서 5mm는 노이즈를 필터링하면서도 확실한 감지를 보장하는 **히스테리시스 구간의 중앙값**으로 설계된 수치이다.\n\n---\n\n## 5. 시스템 통합 및 데이터 무결성 검증 (System Integration & Verification)\n\n### 5.1. 물리 계층에서 어플리케이션 계층으로의 데이터 흐름\n센서의 물리적 조립과 캘리브레이션이 완료되었다고 해서 시스템이 완성된 것은 아니다. 최종적으로 **WEB ACS(Automated Control System)**를 통한 검증은 물리적 신호가 디지털 데이터로 변환되어 관제 서버까지 도달하는 **전체 데이터 파이프라인(End-to-End Data Pipeline)**의 무결성을 확인하는 절차다.\n\n1.  **Sensing (Physical Layer):** R_101~106의 센서가 5mm 거리 내의 물체를 감지하고 전기적 신호(High/Low)를 생성한다.\n2.  **Processing (Control Layer):** AMR 내부의 PLC 또는 로컬 컨트롤러가 이 전기적 신호를 입력받아 I/O 메모리 맵의 특정 비트(Bit)를 1로 세트(Set)한다.\n3.  **Transmission (Network Layer):** 이 상태 정보는 무선 네트워크(Wi-Fi/5G)를 통해 ACS 서버로 전송된다.\n4.  **Visualization (Application Layer):** WEB ACS의 **IO 탭**은 수신된 패킷을 파싱(Parsing)하여 화면상의 인디케이터를 갱신한다.\n\n### 5.2. IO 탭 확인의 중요성\n현장에서 센서 LED가 정상 작동하더라도, 통신 모듈의 지연(Latency)이나 매핑(Mapping) 오류로 인해 ACS 상에서는 감지되지 않은 것으로 표시될 수 있다. 따라서 WEB ACS IO 탭에서의 최종 확인은 **\"하드웨어 동작\"과 \"소프트웨어 인식\"의 동기화(Synchronization)**를 보증하는 최종 관문(Final Gate)이다. 이 단계가 통과되어야만 R_101~106 AMR은 자동화 모드(Auto Mode)로 투입되어 안전하게 셀 공급 및 회수 임무를 수행할 수 있다.",
        "questions": [
            "BMA 공정 자동화 시스템의 Type B AMR(R_101~106) 센서 아키텍처 및 신호 처리 프로토콜 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR 센서 모듈의 다층 구조적 의존성과 이중 상태 표시(Dual-State Indication) 메커니즘이 전체 시스템의 제어 신호 무결성에 기여하는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "센서 감지 임계값 설정 시 5mm의 안전 마진을 벗어날 경우 발생하는 물리적·논리적 에러 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 49,
        "preprocessed_group": "자동 복구 실패 시, 작업자는 AMR 리프트 및 도킹 장치에 부착된 근접센서의 감지 상태와 이물질 부착 여부를 직접 점검해야 한다.",
        "textbook": "# BMA 공정 자동화 시스템 기술 백서: 센서 피드백 루프와 예외 상황 처리 메커니즘\n\n## 1. 서론: 자동 복구 프로세스의 한계와 물리적 개입의 필요성\n\nBMA(Battery Module Assembly) 공정 내에서 운용되는 AMR(Autonomous Mobile Robot)은 고도의 자율성을 갖추고 있으나, 모든 예외 상황을 소프트웨어적으로 해결할 수는 없다. 시스템은 에러 발생 시 1차적으로 **자동 복구(Auto-recovery)** 로직을 수행한다. 이는 PLC(Programmable Logic Controller)가 일시적인 통신 지연이나 센서의 노이즈로 인한 오작동을 배제하기 위해, 해당 명령을 재송신하거나 센서 값을 리폴링(Re-polling)하는 과정이다.\n\n그러나 이 자동 복구 시퀀스가 실패했다는 것은, 시스템이 논리적 오류(Logical Error)가 아닌 **물리적 장애(Physical Obstruction)** 또는 **하드웨어적 불일치(Hardware Discrepancy)** 상태에 직면했음을 의미한다. 이 단계에서 시스템은 안전을 위해 교착 상태(Deadlock)로 전환되며, 운영자에 의한 물리적 검증(Physical Verification) 프로세스가 필수적으로 요구된다. 본 장에서는 자동 복구 실패 시 가장 빈번한 원인인 리프트 및 도킹 장치의 센서 시스템과 이물질 간섭의 공학적 상관관계를 분석한다.\n\n## 2. 리프트 및 도킹 시스템의 센서 아키텍처와 작동 원리\n\nAMR의 리프트(Lift)와 도킹(Docking) 유닛은 기구학적 정밀도가 요구되는 서브시스템이다. 이들의 동작 완료 여부를 판단하기 위해 시스템은 주로 **근접 센서(Proximity Sensor)**를 활용한다.\n\n### 2.1. 유도형 근접 센서(Inductive Proximity Sensor)의 원리\nBMA 공정의 금속성 기구부 감지에는 주로 유도형 근접 센서가 사용된다. 이 센서는 고주파 자기장을 형성하고, 금속 물체(타겟)가 접근할 때 발생하는 와전류(Eddy Current) 손실을 감지하여 스위칭 신호를 생성한다.\n*   **정상 작동 메커니즘:** 리프트가 상승하여 지정된 높이에 도달하거나, 도킹 장치가 설비와 결합하면 금속 타겟이 센서의 감지 거리(Sensing Distance, Sn) 내로 진입한다. 이때 센서 내부 발진 회로의 진폭이 감쇠하며 'ON' 신호를 PLC로 송출한다.\n*   **피드백 루프:** PLC는 구동 모터에 전력을 인가한 후, 특정 시간(Time window) 내에 이 센서의 피드백 신호가 High 상태로 전환되기를 기다린다.\n\n### 2.2. 센서 데이터와 물리적 상태의 불일치\n자동 복구가 실패하는 핵심 원인은 **'구동 명령은 수행되었으나, 피드백 신호가 돌아오지 않는 경우'**이다. 즉, 리프트는 물리적으로 상승했으나 센서가 이를 감지하지 못하거나, 반대로 리프트가 하강했음에도 센서가 여전히 감지 상태를 유지하는 경우이다. 이러한 신호 불일치는 시스템이 현재 AMR의 물리적 형상(Configuration)을 확정할 수 없게 만들어, 다음 시퀀스로의 전이를 차단(Interlock)한다.\n\n## 3. 환경적 요인에 의한 신호 왜곡: 이물질(Foreign Matter)의 영향\n\n공정 환경에서 발생하는 먼지, 오일 미스트, 혹은 배터리 셀 제조 과정의 부산물 등 **이물질(Foreign Matter)**은 센서의 정밀도를 저하시키는 주된 외란(Disturbance) 요인이다.\n\n### 3.1. 유전율 변화와 감지 오류\n만약 정전용량형(Capacitive) 센서가 사용되는 구간이라면, 센서 표면에 부착된 이물질은 유전율(Permittivity)을 변화시킨다. 이는 타겟 물체가 없음에도 불구하고 마치 물체가 있는 것처럼 인식하게 만드는 **거짓 양성(False Positive)** 신호를 유발할 수 있다.\n\n### 3.2. 물리적 차폐와 감지 거리 감소\n유도형 센서의 경우, 비금속성 이물질이 두껍게 퇴적되면 센서 표면과 타겟 금속 사이의 물리적 거리를 강제로 이격시킨다.\n*   **히스테리시스(Hysteresis) 구간 이탈:** 센서가 안정적으로 물체를 감지하기 위해서는 타겟이 히스테리시스 구간 안쪽으로 확실히 진입해야 한다. 그러나 이물질로 인해 타겟이 감지 한계선(Threshold) 근처에 머물게 되면, 미세한 진동에도 신호가 ON/OFF를 반복하는 **채터링(Chattering)** 현상이 발생하거나, 아예 감지에 실패하는 **거짓 음성(False Negative)**이 발생한다.\n\n## 4. 운영자 개입을 통한 시스템 무결성 복구 절차\n\n자동 복구 실패 알람은 시스템이 스스로 판단할 수 있는 논리적 임계치를 초과했음을 알리는 신호이다. 따라서 작업자의 개입은 단순한 '청소'가 아니라, **시스템의 물리적 상태(Physical State)와 디지털 상태(Digital State)를 동기화(Synchronization)**하는 과정으로 해석되어야 한다.\n\n1.  **물리적 검증 (Visual & Tactile Inspection):**\n    작업자는 리프트 및 도킹 부위의 근접 센서 위치를 육안으로 확인한다. 이는 센서가 파손되었는지, 혹은 이물질에 의해 가려져 있는지(Occlusion)를 판단하는 과정이다.\n\n2.  **외란 제거 (Elimination of Disturbance):**\n    센서 표면의 이물질을 제거하는 행위는 센서의 전자기장 혹은 정전용량 필드를 초기 설계 상태로 복원하는 엔지니어링 조치이다. 이를 통해 센서의 감지 거리(Sn)를 정상 범위로 회복시킨다.\n\n3.  **상태 동기화 및 리셋 (State Synchronization & Reset):**\n    이물질 제거 후 센서가 정상적으로 타겟을 인식하여 LED 인디케이터가 점등되면, 하드웨어 레벨에서의 신호 복구가 완료된 것이다. 이후 작업자가 시스템 리셋을 수행하면, PLC는 센서 값을 다시 읽어들여(Re-read), 현재 AMR의 상태가 '준비(Ready)' 또는 '완료(Complete)'임을 확정하고 중단되었던 시퀀스를 재개한다.\n\n결론적으로, 자동 복구 실패 시 수행하는 센서 및 이물질 점검은 단순한 유지보수 행위가 아니라, **센서 피드백 루프의 신뢰성을 물리적으로 복원하여 시스템의 교착 상태를 해제하는 필수적인 디버깅 절차**이다.",
        "questions": [
            "BMA 공정 자동화 시스템의 센서 피드백 루프 메커니즘과 이물질 간섭에 따른 예외 상황 처리 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "유도형 및 정전용량형 근접 센서의 물리적 작동 원리가 AMR의 리프트·도킹 서브시스템 내에서 PLC 피드백 루프와 어떻게 상호작용하며 시스템적 무결성을 유지하는지 공학적으로 분석하시오.",
            "자동 복구 시퀀스 실패 시 발생하는 신호 불일치(False Positive/Negative) 상황에서 시스템의 논리적 판단 과정과 운영자 개입을 통한 물리적·디지털 상태 동기화 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 50,
        "preprocessed_group": "AMR 리프트 UP/DOWN 센서의 점검을 위해 2.5mm T-렌치를 사용하여 보전용 커버를 탈거한 후 리프트 동작 시 센서 LED의 점등 여부를 확인한다.\n\n수동 조작이 필요한 경우, 17mm 스패너로 고정 너트를 풀어 AMR 리프트 센서와 검출체(프레임) 간의 거리를 2mm로 조정한다.\n\nAMR 리프트 센서의 높이 조정이 필요한 경우, Down 센서를 기준으로 Up 센서까지의 거리를 100mm가 되도록 녹색 표시 볼트를 이용하여 조정한다.",
        "textbook": "# BMA 공정 자동화 시스템 기술 백서: AMR 리프트 메커니즘의 센서 보정 및 기구학적 동기화\n\n## 1. 서론: 리프트 시스템의 정밀 제어와 센서 피드백의 중요성\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내에서 운용되는 AMR(Autonomous Mobile Robot)은 단순한 물류 이송 수단을 넘어, 배터리 모듈을 각 공정 스테이션에 정확히 인계(Handover)하는 능동적 액추에이터 역할을 수행합니다. 특히 AMR의 리프트(Lift) 모듈은 배터리 팔레트의 수직 하중을 지지하고, 스테이션과의 도킹 높이를 제어하는 핵심 기구부입니다.\n\n이 리프트 시스템의 신뢰성은 모터의 토크 제어뿐만 아니라, 현재 위치를 물리적으로 확정하는 **리미트 센서(Limit Sensor)의 정밀도**에 전적으로 의존합니다. 본 챕터에서는 AMR 리프트의 상/하한(Up/Down) 위치 결정 로직과 이를 뒷받침하는 물리적 센서의 보정(Calibration) 메커니즘, 그리고 기구학적 허용 오차(Tolerance) 설정의 공학적 배경을 심층적으로 다룹니다.\n\n---\n\n## 2. 물리 계층(Physical Layer)의 접근성 및 신호 무결성 검증\n\nAMR은 공정 내 분진, 진동, 그리고 잠재적인 물리적 충격으로부터 내부 전자 부품을 보호하기 위해 견고한 하우징으로 설계되어 있습니다. 리프트 제어 로직의 디버깅이나 유지보수 시, 엔지니어는 가장 먼저 물리적 센서가 제어기(Controller)로 올바른 신호를 송출하고 있는지 확인해야 합니다.\n\n### 2.1 하우징 탈거 및 육안 진단 (Visual Diagnostics)\n리프트 센서 어셈블리는 보전용 커버 내부에 위치하며, 이는 **2.5mm T-렌치**를 사용하는 규격화된 체결 방식으로 보호됩니다. 커버를 탈거하는 행위는 단순히 부품을 노출시키는 것이 아니라, 시스템의 **블랙박스(Black-box) 영역을 화이트박스(White-box) 상태로 전환**하는 절차입니다.\n\n이 단계에서 엔지니어는 리프트 동작 시 센서 후면부의 **LED 점등 여부**를 확인해야 합니다. 이 LED는 단순한 조명이 아니라, 센서 내부의 비교기(Comparator) 회로가 검출체(Target)를 인식하여 출력 트랜지스터(NPN/PNP)가 스위칭되었음을 알리는 **디지털 I/O 상태 표시기**입니다.\n*   **LED On:** 센서가 검출체를 인식하여 'High' (또는 설정에 따라 'Low') 신호를 PLC나 상위 제어기로 송출 중임.\n*   **LED Off:** 검출체가 감지 범위 밖이거나, 전원 공급/회로에 이상이 있음.\n\n이러한 시각적 피드백은 소프트웨어 디버깅 이전에 하드웨어 레벨의 신호 무결성(Signal Integrity)을 검증하는 첫 번째 관문입니다.\n\n---\n\n## 3. 유도형 근접 센서의 감지 원리와 간극(Gap) 제어\n\nAMR 리프트 센서는 주로 금속 물체를 비접촉으로 감지하는 **유도형 근접 센서(Inductive Proximity Sensor)** 방식을 채택합니다. 이 센서는 고주파 자기장을 형성하고, 검출체(금속 프레임)가 접근할 때 발생하는 와전류(Eddy Current) 손실을 감지하여 스위칭 동작을 수행합니다. 따라서 센서 헤드와 검출체 간의 물리적 거리는 시스템의 안정성을 결정짓는 가장 중요한 변수입니다.\n\n### 3.1 감지 거리(Sensing Distance)의 최적화: 2mm의 공학적 의미\n시스템 사양서에서 규정하는 **2mm**의 간극은 임의의 수치가 아닙니다. 이는 센서의 **표준 검출 거리(Sn, Nominal Sensing Distance)**와 **히스테리시스(Hysteresis)** 특성을 고려하여 산출된 최적의 동작점(Operating Point)입니다.\n\n*   **Why 2mm?**\n    *   **Signal Stability:** 간극이 2mm를 초과할 경우, 자기장의 세기가 약해져 센서가 검출체를 인식하지 못하거나(False Negative), 진동에 의해 신호가 끊기는 채터링(Chattering) 현상이 발생하여 리프트가 동작 중 급정지하는 에러를 유발할 수 있습니다.\n    *   **Collision Avoidance:** 반대로 간극이 너무 좁으면, AMR 주행 중 발생하는 미세한 진동이나 기구적 유격으로 인해 센서 헤드와 프레임이 물리적으로 충돌하여 센서 파손을 초래할 수 있습니다.\n\n### 3.2 기구적 보정 절차 (Mechanical Calibration)\n센서 위치의 미세 조정이 필요한 경우, 엔지니어는 **17mm 스패너**를 사용하여 고정 너트(Lock Nut)를 풀어야 합니다. 이 너트는 진동 환경에서도 센서의 위치가 변하지 않도록 축력을 유지하는 역할을 합니다. 너트를 푼 상태에서 센서 바디를 전후진시켜 프레임과의 거리를 정확히 2mm로 맞춘 후 다시 체결함으로써, 센서의 전자기적 감지 영역(Sensing Zone) 내에 검출체가 확실히 위치하도록 보장합니다.\n\n---\n\n## 4. 리프트 스트로크(Stroke) 정의와 기구학적 동기화\n\n리프트 시스템은 '완전히 내려간 상태(Down)'와 '완전히 올라간 상태(Up)'라는 두 가지 이산적인 상태(Discrete State)를 가집니다. 이 두 상태 사이의 물리적 이동 거리를 **스트로크(Stroke)**라고 하며, BMA 공정의 AMR은 이 스트로크가 **100mm**로 설계되어 있습니다.\n\n### 4.1 수직 변위 제어 로직 (Vertical Displacement Logic)\n리프트의 상하 운동은 모터의 회전 운동을 선형 운동으로 변환하는 메커니즘(예: 볼 스크류, 시저 리프트 등)에 의해 수행됩니다. 이때 제어 시스템은 엔코더(Encoder) 값뿐만 아니라, 절대적인 물리 위치를 확정하기 위해 Up/Down 센서를 참조합니다.\n\n*   **Down Sensor:** 리프트의 원점(Home Position, 0mm)을 정의합니다. AMR이 주행 모드일 때 무게 중심을 낮추기 위한 기준점입니다.\n*   **Up Sensor:** 작업 위치(Working Position, 100mm)를 정의합니다. 배터리 모듈을 스테이션에 도킹하거나 이재(Transfer)하기 위한 높이입니다.\n\n### 4.2 센서 간 거리 조정과 표준화 (Standardization)\n리프트 센서의 높이 조정 시, **Down 센서를 기준(Reference)**으로 삼고 **Up 센서까지의 수직 거리를 100mm**가 되도록 설정해야 합니다. 이는 리프트가 기구적으로 100mm만큼 상승했을 때, 정확히 Up 센서가 트리거(Trigger)되어 모터 구동을 멈추게 하기 위함입니다.\n\n*   **오차 발생 시의 문제점:**\n    *   **거리 < 100mm:** 리프트가 충분히 상승하지 못해 배터리 팔레트가 스테이션 컨베이어와 충돌하거나, 이재 실패가 발생합니다.\n    *   **거리 > 100mm:** 리프트가 기구적 한계점(Mechanical Hard Stop)까지 상승하여 모터 과부하(Overload)나 기구부 파손을 유발할 수 있습니다.\n\n이러한 정밀 조정을 돕기 위해 시스템은 **녹색 표시 볼트(Green Marking Bolt)**를 가이드로 제공합니다. 이 볼트는 작업자 간의 편차를 줄이고(Poka-yoke), 육안으로도 센서 위치의 정합성을 1차적으로 판단할 수 있게 하는 시각적 기준점 역할을 수행합니다.\n\n## 5. 결론\n\nAMR 리프트 시스템의 안정적인 운용은 **2.5mm T-렌치**를 통한 접근, **17mm 스패너**를 이용한 **2mm 간극**의 정밀 조정, 그리고 **100mm 스트로크**를 정의하는 센서 간의 기구학적 동기화에 의해 달성됩니다. 이러한 일련의 조정 과정은 단순한 부품 교체가 아니라, 전자기적 신호 검출(Sensing)과 기계적 구동(Actuation) 사이의 인과관계를 일치시키는 **시스템 최적화(System Optimization)** 과정임을 명심해야 합니다.",
        "questions": [
            "BMA 공정 자동화 시스템 내 AMR 리프트 메커니즘의 센서 보정 및 기구학적 동기화 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "유도형 근접 센서의 전자기적 감지 원리와 2mm 간극(Gap) 설정이 리프트 시스템의 신호 무결성 및 기구적 안전성에 미치는 영향과 시스템적 상호작용을 공학적으로 분석하시오.",
            "리프트 스트로크 설정 오차로 인한 기구적 한계점 도달이나 이재 실패 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 51,
        "preprocessed_group": "1T AMR의 도킹 검지 센서는 전방과 후방에 각 1개씩 장착되어 있으며, 0.3T AMR의 도킹 검지 센서는 후방에 2개 장착되어 있다.\n\nAMR 도킹 검지 센서의 높이를 조정할 경우, 지면으로부터 16mm(브라켓 기준 19mm) 높이에 세팅용 지그(Zig)를 배치하고 센서 높이를 맞춘 후 너트를 체결하여 고정한다.\n\nAMR 도킹 검지 센서의 동작을 확인하는 경우, 실제 도킹 포인트에 진입하여 ACS(AMR Control System)의 IO 탭에서 센서 감지 여부를 점검한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 정밀 도킹 메커니즘 및 센서 캘리브레이션 아키텍처\n**Technical Whitepaper: Precision Docking Mechanism and Sensor Calibration Architecture in BMA Automation**\n\n---\n\n## 1. 개요 (Overview)\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 효율성은 물류의 흐름을 담당하는 AMR(Autonomous Mobile Robot)의 정밀한 주행과 도킹(Docking) 능력에 의해 결정된다. AMR이 목적지에 도달하는 과정은 SLAM(Simultaneous Localization and Mapping) 기반의 라이다(Lidar) 항법을 통해 이루어지지만, 설비와의 물리적 접촉 및 전력 충전, 자재 이재(Transfer)를 위한 최종 단계인 **'파인 포지셔닝(Fine Positioning)'**은 별도의 **도킹 검지 센서(Docking Detection Sensor)** 시스템에 의존한다.\n\n본 챕터에서는 페이로드(Payload)별 AMR(1T/0.3T)의 센서 토폴로지 차이, 기하학적 캘리브레이션(Geometric Calibration) 원리, 그리고 ACS(AMR Control System)를 통한 신호 무결성 검증 프로세스를 심층적으로 분석한다.\n\n---\n\n## 2. 페이로드별 센서 토폴로지 및 아키텍처 (Sensor Topology by Payload)\n\nAMR의 기구학적 특성과 운용 목적에 따라 도킹 센서의 배치(Configuration)는 상이하게 설계되었다. 이는 로봇의 주행 방향성(Bidirectionality)과 도킹 정밀도 요구사항을 반영한 결과이다.\n\n### 2.1. 1T AMR: 양방향 도킹 아키텍처 (Bidirectional Docking Architecture)\n고중량 배터리 모듈을 운송하는 **1T(1000kg) AMR**은 공정 효율을 극대화하기 위해 전진 및 후진 입출고가 모두 가능한 구조를 채택하고 있다.\n*   **센서 구성:** 전방(Front) 1개, 후방(Rear) 1개.\n*   **설계 의도:** 1T AMR은 좁은 통로에서의 회전 반경 제약을 극복하기 위해, 설비에 전면으로 진입하거나 후면으로 진입하는 시나리오를 모두 수행해야 한다. 따라서 전/후방에 각각 독립적인 도킹 센서를 배치하여, 어느 방향으로 진입하더라도 설비와의 상대적 거리를 정밀하게 측정하고 도킹 완료 신호(Docking Complete Signal)를 생성할 수 있도록 설계되었다.\n\n### 2.2. 0.3T AMR: 후방 집중형 정밀 도킹 (Rear-Focused Precision Docking)\n상대적으로 경량 자재나 부품을 운송하는 **0.3T(300kg) AMR**은 특정 방향(주로 후방)으로의 도킹 안정성을 강화하는 데 초점을 맞춘다.\n*   **센서 구성:** 후방(Rear) 2개.\n*   **설계 의도:** 단일 센서가 아닌 **듀얼 센서(Dual Sensor)** 시스템을 후방에 집중 배치한 것은 **'자세 제어(Pose Estimation)'**의 정밀도를 높이기 위함이다. 두 개의 센서가 동시에 설비의 타겟을 감지해야만 도킹 성공으로 판정하는 **AND 로직**을 적용함으로써, AMR이 설비에 비스듬히 진입(Skewed Approach)했을 때 발생할 수 있는 물리적 정렬 오차를 미연에 방지한다. 이는 경량 AMR이 가질 수 있는 주행 중 미세한 미끄러짐이나 진동에 대한 보정 메커니즘으로 작용한다.\n\n---\n\n## 3. 센서 캘리브레이션의 공학적 원리 (Engineering Principles of Calibration)\n\n도킹 센서는 AMR과 지상 설비 간의 '핸드셰이킹(Handshaking)'을 담당하는 물리 계층(Physical Layer)의 핵심 부품이다. 따라서 센서의 높이 설정은 단순한 조립이 아닌, 광학적/전자기적 감지 영역(Sensing Zone)을 최적화하는 정밀 튜닝 과정이다.\n\n### 3.1. 수직 오프셋(Vertical Offset)과 신호 대 잡음비(SNR)\n센서의 높이를 조정할 때 **지면으로부터 16mm**라는 수치는 경험적 데이터와 센서의 빔(Beam) 특성을 고려하여 도출된 최적값(Golden Value)이다.\n*   **16mm (Ground Reference):** 지면 반사 노이즈(Ground Reflection Noise)를 회피하면서도, 설비 측 타겟(반사판 또는 마그네틱)을 가장 안정적으로 감지할 수 있는 높이이다. 너무 낮으면 바닥의 요철을 오인식할 수 있고, 너무 높으면 도킹 스테이션의 감지 범위를 벗어날 위험이 있다.\n*   **19mm (Bracket Reference):** 브라켓 하단 기준 19mm는 센서 하드웨어의 마운팅 공차를 고려한 기구적 기준점이다.\n\n### 3.2. 표준화된 캘리브레이션 프로세스 (Standardized Calibration Process)\n인적 오류(Human Error)를 배제하고 전단말의 균일한 성능을 보장하기 위해 **세팅용 지그(Setting Zig)**를 활용한 표준화 절차를 따른다.\n1.  **기준면 설정:** 지그를 센서 하단에 배치하여 물리적인 16mm 높이(Reference Plane)를 강제한다. 이는 가상의 기준선이 아닌 물리적 구속을 통해 정밀도를 확보하는 방식이다.\n2.  **정렬 및 고정:** 센서의 광축(Optical Axis)이 지그와 평행을 이루도록 조정한 후 너트를 체결한다. 이때 너트의 체결 토크(Torque)는 주행 중 진동에 의해 센서 높이가 변동(Drift)되지 않도록 관리되어야 한다.\n\n---\n\n## 4. 시스템 통합 검증 및 데이터 흐름 (System Integration & Data Flow)\n\n하드웨어적인 설치가 완료된 후, 시스템은 물리적 신호가 상위 관제 시스템까지 정확하게 전달되는지 검증하는 **E2E(End-to-End) 테스트**를 수행해야 한다.\n\n### 4.1. 실제 환경 기반의 검증 (In-Situ Verification)\n단순히 센서 앞에 물체를 두어 LED가 켜지는 것을 확인하는 것만으로는 불충분하다. 반드시 **실제 도킹 포인트(Actual Docking Point)**에 진입하여 검증해야 한다.\n*   **이유(Why):** 실제 공정 환경에는 주변 설비의 금속성 난반사, 조도 변화, 바닥의 평탄도 등 실험실 환경에서는 예측할 수 없는 외란(Disturbance)이 존재한다. AMR이 실제 도킹 위치에 정차했을 때 센서가 타겟을 정확히 지향하는지 확인하는 과정은 이러한 환경 변수를 검증하는 단계이다.\n\n### 4.2. ACS IO 탭을 통한 논리적 연결성 확인 (Logical Connectivity via ACS)\n검증의 최종 단계는 물리적 감지가 디지털 신호로 변환되어 관제 시스템에 도달하는 전체 데이터 파이프라인을 확인하는 것이다.\n*   **데이터 흐름(Data Flow):**\n    1.  **Sensor:** 도킹 타겟 감지 (Analog/Digital Signal 발생)\n    2.  **AMR Controller:** 신호 수신 및 내부 로직 처리 (PLC/PC)\n    3.  **Wireless Network:** Wi-Fi/5G를 통해 상태 패킷 전송\n    4.  **ACS Server:** 패킷 수신 및 데이터베이스 업데이트\n    5.  **ACS UI (IO Tab):** 운영자에게 시각적 상태 표시 (ON/OFF)\n*   **판정 기준:** AMR이 도킹 위치에 물리적으로 도달했음에도 ACS의 **IO 탭(Input/Output Monitoring Tab)**에서 센서 감지 신호가 'ON'으로 전환되지 않는다면, 이는 센서 고장이 아닌 네트워크 지연(Latency)이나 AMR 내부 컨트롤러의 I/O 매핑 오류일 가능성을 시사한다. 즉, 이 과정은 하드웨어와 소프트웨어 간의 인터페이스 정합성을 최종 승인하는 절차이다.",
        "questions": [
            "BMA 자동화 시스템의 AMR 정밀 도킹 메커니즘 및 센서 캘리브레이션 아키텍처 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "페이로드별 센서 토폴로지 설계 의도와 지면 반사 노이즈를 고려한 16mm 수직 오프셋 설정이 전체 도킹 시스템 내에서 어떻게 상호작용하는지 공학적으로 분석하시오.",
            "실제 도킹 포인트 진입 시 물리적 감지는 성공했으나 ACS IO 탭에서 신호가 미전환되는 상황 발생 시 시스템의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 52,
        "preprocessed_group": "V-marker ASSY는 V-marker, 오버런 스토퍼, 도그플레이트 ASSY, 자동충전기 브라켓으로 구성된다.\n\nV-marker의 위치나 각도가 틀어져 AMR이 도킹 위치를 찾지 못하는 경우, 작업자는 V-marker의 정렬 상태를 점검하고 재조립 또는 교체를 실시한다.\n\nV-marker의 파손을 방지하기 위해 작업자가 V-marker를 밟거나 발로 차지 않도록 안전 교육을 실시해야 한다.\n\n도그플레이트의 각도가 틀어져 도킹 완료 후 '센서 미감지' 에러(10015)가 발생하는 경우, 작업자는 도그플레이트의 위치를 교정하거나 파손 시 부품을 교체한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 정밀 도킹 유도 시스템 및 물리적 인터페이스 아키텍처\n**(Technical Whitepaper: Precision Docking Guidance System and Physical Interface Architecture)**\n\n---\n\n## 1. 서론: V-marker ASSY의 시스템적 정의 및 구성\n현대자동차그룹 BMA(Battery Module Assembly) 공정 내에서 AMR(Autonomous Mobile Robot)의 자율 주행은 크게 두 가지 단계로 구분됩니다. 공장 전체를 이동하는 '글로벌 내비게이션(Global Navigation)' 단계와, 작업 스테이션에 정밀하게 접안하는 '로컬 도킹(Local Docking)' 단계입니다. 여기서 **V-marker ASSY**는 로컬 도킹 단계에서 AMR에게 물리적 좌표의 기준점(Ground Truth)을 제공하는 핵심적인 **수동형 유도 인터페이스(Passive Guidance Interface)** 역할을 수행합니다.\n\n시스템 아키텍처 관점에서 V-marker ASSY는 단순한 기구물이 아니라, AMR의 센서 시스템과 물리적 환경을 매개하는 **아날로그-디지털 변환의 기준점**입니다. 이 어셈블리는 다음과 같은 4가지 핵심 모듈로 구성되어 상호보완적인 기능을 수행합니다.\n\n1.  **V-marker:** AMR의 LiDAR 또는 비전 센서가 기하학적 형상을 인식하여 상대 좌표($x, y, \\theta$)를 산출하기 위한 광학적/형상적 기준점.\n2.  **오버런 스토퍼(Overrun Stopper):** 제어 시스템의 오작동이나 관성으로 인한 AMR의 과진입을 물리적으로 차단하여 설비와 배터리 모듈을 보호하는 최종 안전 장치(Fail-safe Mechanical Barrier).\n3.  **도그플레이트 ASSY(Dog Plate ASSY):** 도킹 완료 시점의 물리적 접촉 또는 근접 센서 트리거링을 통해 전기적 신호(Digital Input)를 생성하는 신호 매개체.\n4.  **자동충전기 브라켓:** 전력 공급 인터페이스를 지지하며, 충전 단자의 정밀한 체결을 보조하는 구조적 프레임.\n\n---\n\n## 2. 광학적 유도 메커니즘과 정렬 오차의 인과관계 (V-marker)\n\n### 2.1. 형상 인식 및 포즈 추정 알고리즘 (Pose Estimation)\nAMR이 도킹 모드에 진입하면, 주행 알고리즘은 SLAM(Simultaneous Localization and Mapping) 기반의 위치 추정에서 **피처 기반(Feature-based) 위치 보정**으로 전환됩니다. 이때 AMR 전방에 장착된 2D/3D LiDAR 센서는 V-marker의 고유한 'V'자 형상(오목한 각도 및 깊이 정보)을 스캔하여 포인트 클라우드(Point Cloud) 데이터를 생성합니다.\n\n시스템은 스캔된 데이터와 메모리에 저장된 V-marker의 이상적인 CAD 모델을 실시간으로 비교(Pattern Matching)합니다. 이 과정에서 AMR은 현재 자신의 위치와 목표 도킹 지점 간의 편차($\\Delta x, \\Delta y, \\Delta \\theta$)를 계산하고, 이를 0으로 수렴시키기 위해 구동 모터의 속도와 조향각을 미세 제어합니다.\n\n### 2.2. 정렬 불량에 의한 인식 실패 메커니즘\n입력된 팩트에서 언급된 **\"V-marker의 위치나 각도가 틀어져 도킹 위치를 찾지 못하는 현상\"**은 센서 데이터 처리 레이어에서 발생하는 **임계값 초과(Threshold Exceeded)** 오류로 해석할 수 있습니다.\n\n*   **기하학적 불일치:** V-marker가 물리적 충격이나 진동으로 인해 설계된 각도에서 벗어나면, LiDAR가 스캔한 형상은 알고리즘이 정의한 'V-marker'의 특징(Feature)과 일치하지 않게 됩니다.\n*   **알고리즘의 거부(Rejection):** 노이즈 필터링 로직은 왜곡된 V-marker 형상을 유효한 타겟이 아닌 환경 노이즈(장애물 등)로 분류하여 무시합니다.\n*   **결과:** AMR은 타겟을 소실(Target Lost)하게 되며, 도킹 시퀀스를 중단하거나 무한 탐색 루프에 빠지게 됩니다.\n\n따라서 작업자에 의한 **정렬 상태 점검 및 재조립/교체**는 단순한 수리가 아니라, 센서 시스템이 인식 가능한 **기하학적 무결성(Geometric Integrity)을 복원**하는 엔지니어링 조치입니다.\n\n---\n\n## 3. 물리적 계층의 무결성 유지와 인적 요인 (Human Factors)\n\n### 3.1. 소성 변형과 센서 오차의 상관관계\nV-marker ASSY는 바닥에 설치되는 특성상 작업자의 동선과 겹칠 수 있습니다. 텍스트에서 강조된 **\"작업자가 밟거나 발로 차지 않도록 하는 안전 교육\"**은 시스템의 **가용성(Availability)** 유지를 위한 필수적인 예방 정비 활동입니다.\n\n공학적으로 볼 때, V-marker는 정밀하게 가공된 금속 또는 반사 재질로 이루어져 있습니다. 작업자의 체중이나 발차기에 의한 충격은 마커에 미세한 **소성 변형(Plastic Deformation)**을 유발할 수 있습니다. 육안으로는 식별하기 어려운 수 밀리미터(mm) 또는 수 도($^\\circ$)의 변형이라도, 고정밀 LiDAR 센서 입장에서는 심각한 데이터 왜곡을 초래합니다. 이는 AMR의 도킹 정밀도를 떨어뜨려 충전 단자 접촉 불량이나 설비 충돌과 같은 2차 사고로 이어질 수 있습니다.\n\n---\n\n## 4. 도킹 완료 신호 처리와 에러 코드 10015 분석 (Dog Plate)\n\n### 4.1. 도그플레이트의 기능: 물리적 상태의 디지털 신호화\n**도그플레이트(Dog Plate)**는 AMR이 물리적으로 도킹 위치에 도달했음을 시스템에 알리는 **트리거(Trigger) 장치**입니다. 일반적으로 스테이션 측에는 근접 센서(Proximity Sensor)나 리미트 스위치가 설치되어 있고, AMR 측의 도그플레이트가 이 센서의 감지 범위(Sensing Range) 내로 진입하면 회로가 닫히며(Close) 'Docking Complete' 신호가 PLC(Programmable Logic Controller)로 전송됩니다.\n\n### 4.2. 에러 코드 10015 (센서 미감지)의 논리적 인과 사슬\n**에러 코드 10015**는 AMR이 주행 알고리즘 상으로는 도킹 위치에 도달했다고 판단했으나, 물리적 검증 단계에서 실패했을 때 발생하는 **불일치(Discrepancy) 알람**입니다.\n\n1.  **전제 조건:** AMR은 V-marker를 추종하여 목표 좌표에 정지합니다.\n2.  **기대 동작:** AMR의 도그플레이트가 스테이션 센서의 감지 영역(예: 센서 전방 5mm $\\pm$ 1mm) 내에 위치해야 합니다.\n3.  **오류 발생 원인 (Why):** 도그플레이트의 각도가 틀어지거나 파손되어 센서와의 거리가 감지 한계(Sensing Distance)를 벗어난 경우입니다.\n4.  **시스템 로직 (How it works):**\n    *   PLC는 AMR 도착 신호를 수신한 후, 일정 시간(Time Window) 내에 도그플레이트 감지 센서의 입력(Input)이 High 상태가 되기를 기다립니다.\n    *   만약 도그플레이트의 변형으로 인해 센서가 금속체를 감지하지 못하면(Input = Low), PLC는 이를 **\"비정상 도킹\"**으로 간주합니다.\n    *   결과적으로 시스템은 안전을 위해 후속 공정(충전 시작, 모듈 이재 등)을 차단하고 **10015 에러**를 송출합니다.\n\n### 4.3. 교정 및 유지보수 전략\n작업자가 수행하는 **\"도그플레이트 위치 교정\"**은 센서와 플레이트 간의 간극(Gap)을 센서의 **히스테리시스(Hysteresis) 구간** 내로 재설정하는 과정입니다. 이는 물리적 위치를 조정하여 전기적 신호의 신뢰성을 확보하는 작업이며, 교정이 불가능할 정도로 파손된 경우 부품 교체를 통해 시스템의 **I/O 무결성**을 회복해야 합니다.",
        "questions": [
            "BMA 자동화 시스템의 'V-marker ASSY' 구성 요소와 정밀 도킹 유도 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "AMR의 LiDAR 센서 기반 포즈 추정 알고리즘과 V-marker의 기하학적 형상 정보가 전체 도킹 시스템 내에서 어떻게 상호작용하는지 그 공학적 원리를 분석하시오.",
            "도킹 과정 중 에러 코드 10015가 발생하는 물리적 변형 상황과 이에 따른 PLC의 논리적 판단 과정 및 시스템 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 53,
        "preprocessed_group": "MCS(Material Control System)는 부품 재고를 관리하고 작업 할당을 내리는 최상위 제어 시스템으로서, PLC(Programmable Logic Controller) 신호를 통해 부품 보충 요청을 ACS(AMR Control System)에 전달한다.\n\nPLC(Programmable Logic Controller)는 공장 자동화 시스템에서 센서의 입력 신호를 받아 프로그래밍된 로직에 따라 연산을 수행하고 모터나 밸브 등의 외부 장치를 제어하는 산업용 컴퓨터이다.\n\nWMS(Warehouse Management System)는 창고 내 재고, 입출고 및 보관 위치를 효율적으로 관리하는 시스템이다.\n\nBMA(Battery Module Assembly)는 배터리 셀들을 결합하여 하나의 모듈로 제작하는 배터리 모듈 조립 공정을 의미한다.\n\nBSA(Battery System Assembly)는 BMA 공정에서 제작된 배터리 모듈들을 차량 장착용 최종 시스템으로 조립하는 배터리 시스템 조립 공정을 의미한다.\n\nCELL은 에너지를 저장하고 방출하는 배터리의 가장 기본적인 단위인 배터리 셀을 의미한다.\n\nL/C(Lower Case)는 배터리 시스템의 하단부를 구성하는 부품인 하부 케이스를 의미한다.\n\nLWR CASE(LL)는 배터리 시스템의 하부 케이스를 지칭하며, 문서 내에서는 LL이라는 약어로 사용된다.\n\nSKID RETURN(RC)은 물품 운반용 스키드(Skid)를 회수하거나 재활용하는 라인 또는 구역을 의미하며, 문서 내에서는 RC라는 약어로 사용된다.\n\nMS(Material Storage)는 BMA 또는 BSA 공정에 필요한 다양한 부품들을 보관하는 부품 창고를 의미한다.\n\nCS(BMA CELL)는 배터리 셀이 BMA 공정으로 공급되거나 처리되는 구역인 BMA CELL 공정을 의미한다.\n\nMC(BMA)는 배터리 모듈이 조립되는 핵심 공정 구역인 BMA 공정을 의미한다.\n\nMW(Module Warehouse)는 BMA 공정에서 사용되거나 생산된 모듈을 자동으로 보관하고 관리하는 BMA 자동 창고를 의미한다.\n\nBP(BSA)는 배터리 시스템이 조립되는 핵심 공정 구역인 BSA 공정을 의미한다.\n\nSL(BSA)은 BSA 공정 내의 특정 라인이나 로드 지점을 나타내는 BSA 공정 관련 명칭이다.\n\nSP(BSA)은 BSA 공정 내의 특정 생산 지점을 나타내는 BSA 공정 관련 명칭이다.\n\nSC(System Complete)는 최종 조립이 완료된 배터리 시스템을 보관하는 완제품 창고를 의미한다.\n\nEQP(Equipment)는 물건을 가공하거나 조립하는 하드웨어 및 PLC 기반의 물리적인 장비 본체를 의미한다.\n\nEQP HMI(Human-Machine Interface)는 작업자가 물리적인 생산 장비를 제어, 모니터링 및 관리할 수 있도록 지원하는 소프트웨어 및 터치 패널 하드웨어 기반의 사용자 인터페이스이다.\n\nAMR(Autonomous Mobile Robot)은 부품을 실어 나르는 자율주행 운반 로봇을 의미한다.\n\nWeb ACS(AMR Control System)는 AMR의 경로 지정, 작업 할당 및 실시간 모니터링을 수행하는 웹 기반의 중앙 통제 시스템이다.\n\nPLT(Pallet)는 물품을 적재하고 운반하는 데 사용되는 운반대인 팔렛트를 의미한다.\n\nOK(Good)는 정상품 또는 장비의 정상적인 상태를 의미한다.\n\nNG(Not Good)는 불량품 또는 장비의 비정상적인 상태를 의미한다.",
        "textbook": "# 배터리 모듈 조립(BMA) 및 시스템 조립(BSA) 공정의 통합 제어 아키텍처와 물류 역학\n**Integrated Control Architecture and Material Flow Dynamics in Battery Module Assembly Systems**\n\n---\n\n## 1. 서론: 자동화 생태계의 개요\n현대자동차그룹의 배터리 생산 공정은 단순한 기계적 조립을 넘어, 데이터(Data)와 물리적 자재(Material)가 실시간으로 동기화되는 거대한 사이버-물리 시스템(CPS, Cyber-Physical System)입니다. 본 백서는 신입 엔지니어가 BMA(Battery Module Assembly)와 BSA(Battery System Assembly) 공정 내에서 이종(Heterogeneous) 시스템들이 어떻게 상호작용하며, 어떠한 논리적 인과관계를 통해 자율주행 로봇(AMR)과 설비(EQP)를 제어하는지 그 심층적인 메커니즘을 기술합니다.\n\n---\n\n## 2. 최상위 제어 논리와 데이터 흐름 (Control Hierarchy & Data Flow)\n\n공정의 '두뇌'에 해당하는 제어 시스템은 계층적 구조를 가지며, 각 레이어는 명확한 역할과 통신 프로토콜을 통해 연결됩니다.\n\n### 2.1. MCS와 ACS의 전략적 연동 (Orchestration)\n**MCS(Material Control System)**는 공정 전체의 자재 흐름을 관장하는 최상위 지휘관입니다. MCS는 단순히 \"자재를 옮기라\"는 명령을 내리는 것이 아니라, **WMS(Warehouse Management System)**와 연동하여 실시간 재고(Inventory) 상태와 생산 계획(Production Plan)을 대조합니다.\n\n*   **작동 메커니즘:** 특정 공정에서 부품 소진이 예측되면, MCS는 작업 할당(Task Assignment) 로직을 생성합니다. 그러나 MCS는 물리적인 로봇을 직접 제어하지 않습니다. 대신, 이 논리적 명령을 **PLC(Programmable Logic Controller)**라는 실시간 제어기(Real-time Controller)를 통해 전기적 신호(Signal) 형태로 변환하거나, 네트워크 프로토콜을 통해 **Web ACS(AMR Control System)**에 전달합니다.\n*   **Web ACS의 역할:** MCS가 \"무엇을(What)\" 옮길지 결정한다면, Web ACS는 \"어떻게(How)\" 옮길지를 결정합니다. 웹 기반의 중앙 통제 시스템인 ACS는 다수의 **AMR(Autonomous Mobile Robot)**에 대한 경로 계획(Path Planning), 트래픽 관리(Traffic Control), 배터리 충전 상태 모니터링을 수행합니다. 이는 교착 상태(Deadlock)를 방지하고 최적의 이동 효율을 보장하는 알고리즘 연산의 집약체입니다.\n\n### 2.2. PLC: 결정론적 제어와 물리적 인터페이스\n**PLC(Programmable Logic Controller)**는 공장 자동화의 척수(Spinal Cord) 역할을 수행합니다. 이는 일반 PC와 달리, 엄격한 실시간성(Real-time)과 내구성(Ruggedness)을 보장하는 산업용 컴퓨터입니다.\n\n*   **논리적 인과관계:** 센서로부터 입력 신호(Input)가 들어오면, PLC는 밀리초(ms) 단위의 스캔 타임(Scan Time) 내에 프로그래밍된 래더 로직(Ladder Logic)을 연산하고, 그 결과에 따라 모터, 밸브, 실린더 등의 액추에이터(Output)를 제어합니다.\n*   **시스템 통합:** MCS가 부품 보충 요청을 보낼 때, 이 데이터는 PLC의 메모리 영역(Register)에 비트(Bit) 단위 신호로 기록됩니다. ACS는 이 PLC 신호를 트리거(Trigger)로 인식하여 AMR을 발진시킵니다. 즉, PLC는 IT 시스템(MCS)과 물리적 로봇(AMR) 사이의 '통역사'이자 '신호 동기화 장치'입니다.\n\n---\n\n## 3. 공정 토폴로지(Topology)와 자재의 생애주기\n\n배터리 생산 라인은 자재의 물리적 특성과 조립 단계에 따라 엄격하게 구획화되어 있습니다. 엔지니어는 각 구역(Zone)의 목적과 자재의 변환 과정을 이해해야 합니다.\n\n### 3.1. BMA(Battery Module Assembly) 공정: 셀에서 모듈로\n**BMA**는 에너지의 최소 단위인 **CELL**을 결합하여 하나의 모듈(Module)로 재탄생시키는 핵심 공정입니다.\n\n1.  **자재 투입 (MS & CS):** **MS(Material Storage)**에 보관된 부품들은 **CS(BMA CELL)** 공정으로 투입됩니다. 여기서 배터리 셀은 전압 측정, 표면 검사 등의 전처리 과정을 거칩니다.\n2.  **모듈 조립 (MC):** **MC(BMA)** 구역에서는 전처리된 셀들이 적층되고, 버스바(Busbar) 용접 등을 통해 전기적으로 연결되어 모듈 형태를 갖춥니다.\n3.  **보관 및 버퍼 (MW):** 완성된 모듈은 **MW(Module Warehouse)**라는 자동 창고로 이동합니다. MW는 단순한 보관소가 아니라, 후행 공정인 BSA와의 속도 차이를 조절하는 **버퍼(Buffer)** 역할을 수행하여 라인 밸런싱(Line Balancing)을 유지합니다.\n\n### 3.2. BSA(Battery System Assembly) 공정: 모듈에서 시스템으로\n**BSA**는 BMA에서 넘어온 모듈들을 차량에 장착 가능한 최종 형태(Pack)로 조립하는 공정입니다.\n\n*   **하부 케이스 투입 (L/C):** 배터리 시스템의 뼈대가 되는 **LWR CASE(LL)**, 즉 **L/C(Lower Case)**가 라인에 투입됩니다. 이는 배터리 모듈을 외부 충격으로부터 보호하고 열 관리를 돕는 구조물입니다.\n*   **시스템 조립 (BP, SL, SP):** **BP(BSA)** 구역을 중심으로, **SL(BSA)** 및 **SP(BSA)**와 같은 특정 생산 지점(Station)을 거치며 모듈 안착, BMS(Battery Management System) 연결, 상부 커버 체결 등이 이루어집니다.\n*   **완제품 출하 (SC):** 모든 조립과 테스트를 통과한 배터리 시스템은 **SC(System Complete)** 구역, 즉 완제품 창고로 이송되어 출하를 대기합니다.\n\n---\n\n## 4. 자동화 설비와 로보틱스 메커니즘 (Automation & Robotics)\n\n이 모든 물류 흐름은 사람의 개입 없이 자동화 장비들에 의해 수행됩니다.\n\n### 4.1. AMR과 물류 운송의 물리학\n**AMR(Autonomous Mobile Robot)**은 바닥에 부착된 QR코드나 SLAM(Simultaneous Localization and Mapping) 기술을 이용해 자기 위치를 인식하고 자율 주행합니다.\n\n*   **적재 메커니즘:** AMR은 자재를 직접 들고 다니지 않고, **PLT(Pallet)**라는 운반대 위에 자재(CELL, Module, L/C 등)를 적재한 후, 이 PLT를 들어 올리거나 견인하여 이동합니다.\n*   **순환 루프 (Skid Return):** 공정이 완료되어 빈 상태가 된 스키드(Skid)나 PLT는 **SKID RETURN(RC)** 라인을 통해 다시 공정의 시작점으로 회수됩니다. 이 회수 로직이 지연되면 전체 생산 라인에 자재 공급이 중단되는 병목(Bottleneck) 현상이 발생하므로, RC 라인의 제어는 생산 라인만큼이나 중요합니다.\n\n### 4.2. EQP와 HMI의 상호작용\n**EQP(Equipment)**는 물리적인 조립, 용접, 검사를 수행하는 장비 본체를 의미하며, 그 내부는 PLC와 서보 모터, 로봇 암 등으로 구성됩니다.\n\n*   **인간-기계 인터페이스 (EQP HMI):** 작업자는 **EQP HMI(Human-Machine Interface)**를 통해 장비 내부의 보이지 않는 데이터에 접근합니다. HMI는 PLC의 메모리 주소를 시각화하여 터치 패널에 표시합니다. 작업자가 HMI에서 'Start' 버튼을 누르면, 이는 PLC의 특정 비트를 '1'로 변경(Write)하는 통신 행위이며, PLC는 이 변화를 감지하여 물리적 구동을 시작합니다.\n\n---\n\n## 5. 품질 관리 로직: OK와 NG의 결정론\n\n자동화 시스템에서 품질 판정은 모호함이 없는 이진(Binary) 논리를 따릅니다.\n\n*   **상태 판정 알고리즘:** 센서 데이터나 비전 검사 결과가 사전에 설정된 임계값(Threshold) 범위 내에 들어오면 시스템은 해당 제품이나 장비 상태를 **OK(Good)**로 마킹합니다. 반면, 범위를 벗어나면 즉시 **NG(Not Good)** 플래그를 세웁니다.\n*   **인과적 대응:**\n    *   **OK 신호:** 다음 공정으로의 이송 컨베이어를 가동하거나, AMR에게 이송 명령을 하달합니다.\n    *   **NG 신호:** 즉시 라인을 정지시키거나(Interlock), 불량품을 별도의 배출구(Reject Station)로 분기시키는 로직을 수행합니다. 이는 불량품이 후속 공정으로 유입되어 더 큰 비용 손실을 초래하는 것을 방지하는 **Fail-Safe** 설계의 일환입니다.\n\n---\n\n**결론적으로**, BMA/BSA 공정은 MCS의 계획, ACS의 물류 제어, PLC의 실시간 연산, 그리고 AMR과 EQP의 물리적 구동이 유기적으로 결합된 시스템입니다. 엔지니어는 단순한 에러 코드의 확인을 넘어, 이러한 데이터의 흐름과 물리적 인과관계를 입체적으로 파악하여 시스템을 운영해야 합니다.",
        "questions": [
            "BMA(배터리 모듈 조립) 및 BSA(배터리 시스템 Assembly) 공정의 통합 제어 아키텍처와 물류 역학 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "MCS의 전략적 의사결정이 PLC의 결정론적 제어를 거쳐 AMR 및 EQP의 물리적 구동으로 이어지는 데이터 흐름의 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "공정 내 품질 판정 결과가 NG(Not Good)로 도출될 경우, Fail-Safe 설계를 바탕으로 한 안전 인터락(Interlock) 발동 및 불량품 배출 로직의 논리적 판단 과정과 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 54,
        "preprocessed_group": "도킹 전 트래픽 발생 시 창고(Warehouse) 문제로 인해 AMR이 이동 중 멈추거나 경로가 막힌 경우, 수동 조작이 필요한 상황에서 작업자는 AMR의 Job Cancel을 실행하고 AMR을 주행 경로 밖으로 이동시킨 후, 창고 문제가 해결되면 다시 AMR을 주행 경로 안으로 복귀시켜 상태를 Before Docking으로 변경한다.",
        "textbook": "BMA 공정 자동화 시스템 기술 백서 (Technical Whitepaper)\n\n---\n\n### **교착 상태(Deadlock) 회피 및 예외적 트래픽 제어 메커니즘: 도킹 전 단계(Pre-Docking Phase)를 중심으로**\n\n**개요 (Overview)**\n\nBMA(Battery Module Assembly) 공정 내 물류 흐름은 고도로 정밀한 시공간적 동기화(Spatio-temporal Synchronization)를 전제로 설계된다. 특히 AMR(Autonomous Mobile Robot)이 목표 스테이션에 진입하여 물리적 결합을 시도하는 '도킹(Docking)' 단계 직전은 시스템의 병목 현상이 발생하기 가장 쉬운 임계 구간이다. 본 절에서는 창고(Warehouse) 시스템의 비정상적 상태나 물리적 장애물로 인해 AMR의 주행 경로(Path planning)가 차단되었을 때 발생하는 트래픽 혼잡(Traffic Congestion) 상황을 공학적으로 분석하고, 이를 해소하기 위한 수동 개입(Manual Intervention) 및 시스템 복구 프로토콜의 논리적 타당성을 서술한다.\n\n#### **1. 트래픽 발생의 인과 관계 및 시스템적 영향 (Causality of Traffic Congestion)**\n\nAMR의 자율 주행 알고리즘은 기본적으로 동적 장애물 회피(Dynamic Obstacle Avoidance) 기능을 포함하고 있으나, 공정 내 도킹 구역은 협소한 공간 특성상 회피 기동이 제한되는 '단일 경로(Single Path)' 구간이 많다.\n\n*   **창고(Warehouse) 시스템과의 연동성:** AMR은 상위 관제 시스템(ACS/MCS)으로부터 지령을 받아 창고 입출고 포트로 이동한다. 이때 창고 설비의 기계적 오류나 재고 데이터 불일치로 인해 입고 대기열(Queue)이 해소되지 않을 경우, 후속 AMR들은 목표 지점에 도달하지 못한 채 주행 경로 상에서 정지하게 된다.\n*   **교착 상태(Deadlock)의 형성:** 다수의 AMR이 좁은 통로에서 연쇄적으로 정지하면, 로컬 경로 계획(Local Path Planning) 알고리즘만으로는 해결 불가능한 교착 상태에 빠진다. 이는 단순히 로봇이 멈추는 것을 넘어, 전체 공정의 사이클 타임(Cycle Time)을 지연시키는 치명적인 결과를 초래한다. 따라서 시스템은 자동 복구가 불가능하다고 판단될 때, 운영자의 개입을 요청하는 예외 처리 루틴(Exception Handling Routine)으로 전환된다.\n\n#### **2. 작업 취소(Job Cancel) 및 물리적 격리 (Physical Isolation)**\n\n교착 상태를 해소하기 위한 첫 번째 단계는 시스템의 논리적 연결을 끊고 물리적 공간을 확보하는 것이다.\n\n*   **Job Cancel의 논리적 의미:** 운영자가 실행하는 'Job Cancel' 명령은 단순한 정지가 아니다. 이는 상위 관제 시스템(ACS)과 해당 AMR 간에 맺어진 '작업 할당 세션(Task Assignment Session)'을 강제로 종료(Terminate)하는 행위다. 이 명령이 수행되면 AMR은 현재 수행 중이던 미션 데이터(목표 좌표, 적재 정보 등)를 초기화하고, 관제 시스템은 해당 로봇을 '유휴(Idle)' 상태로 인식하여 트래픽 계산에서 제외한다.\n*   **경로 이탈(Off-Path)의 필요성:** 논리적 연결이 끊긴 AMR은 여전히 물리적으로 주행 경로를 점유하고 있다. 후속 차량의 통행을 보장하고 창고 문제 해결을 위한 작업 공간을 확보하기 위해, 운영자는 수동 조작(Manual Control)을 통해 AMR을 주행 경로 밖의 안전 구역(Safety Zone)으로 이동시켜야 한다. 이는 네트워크상의 데이터 흐름을 정리함과 동시에 물리적 병목을 해소하는 이중적 조치이다.\n\n#### **3. 시스템 복구 및 상태 재동기화 (System Recovery & Resynchronization)**\n\n창고 측의 문제가 해결(예: 설비 리셋, 장애물 제거)된 후, AMR을 다시 자동화 공정에 투입하기 위해서는 정교한 상태 복구 절차가 요구된다.\n\n*   **물리적 복귀(Physical Return):** AMR을 다시 주행 경로 안으로 진입시키는 과정이다. 이때 중요한 것은 AMR의 위치 인식 센서(Lidar/Camera)가 자신의 위치를 정확히 파악할 수 있는 '특징점(Feature Point)'이 풍부한 구역으로 복귀시켜야 한다는 점이다. 이는 SLAM(Simultaneous Localization and Mapping) 알고리즘이 로봇의 전역 좌표(Global Coordinate)를 신속하게 재계산하도록 돕는다.\n*   **상태 변경(State Transition) - Before Docking:** 물리적 복귀만으로는 시스템이 자동으로 작업을 재개하지 않는다. 운영자는 AMR의 상태를 명시적으로 **'Before Docking'**으로 변경해야 한다.\n    *   **Why 'Before Docking'?** 이 상태 값은 AMR의 제어권이 수동 모드에서 다시 시스템의 자동 제어 모드로 넘어갔음을 알리는 트리거(Trigger) 역할을 한다. 또한, 시스템에게 \"이 로봇은 도킹 직전 단계까지의 미션을 이미 수행했거나, 수행할 준비가 되었으므로 즉시 도킹 시퀀스를 시작하라\"는 논리적 플래그(Flag)를 전달한다.\n    *   **재진입 로직:** 'Before Docking' 상태가 입력되면, AMR은 현재 위치에서 도킹 스테이션까지의 잔여 경로를 재계산하고, 관제 시스템은 해당 로봇을 다시 트래픽 관리 네트워크에 등록하여 작업을 재개한다.\n\n**결론 (Conclusion)**\n\n도킹 전 트래픽 발생 시 수행되는 일련의 수동 조작 절차는 단순한 임시방편이 아니다. 이는 **[논리적 세션 종료(Job Cancel)] -> [물리적 공간 확보(Move Out)] -> [환경 정상화] -> [물리적 복귀(Move In)] -> [논리적 상태 재설정(Set to Before Docking)]**으로 이어지는 체계적인 '장애 복구 알고리즘(Failover Algorithm)'의 인간 개입 버전이다. 엔지니어는 이 절차를 통해 자동화 시스템의 한계를 보완하고, 공정의 연속성을 유지할 수 있다.",
        "questions": [
            "BMA 공정 자동화 시스템 내 도킹 전 단계(Pre-Docking Phase)에서 발생하는 교착 상태 회피 및 예외적 트래픽 제어 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "창고 시스템의 기계적 오류가 AMR의 주행 경로 점유 및 교착 상태(Deadlock)를 유발하는 공학적 메커니즘과, 이를 해소하기 위한 상위 관제 시스템(ACS)의 작업 취소(Job Cancel) 및 물리적 격리 과정의 상호작용을 분석하시오.",
            "시스템 장애 복구 시 AMR의 상태를 'Before Docking'으로 명시적으로 재설정해야 하는 논리적 근거와, 해당 상태 값이 자동화 시퀀스 재개 및 SLAM 알고리즘의 전역 좌표 재계산에 미치는 인과관계를 서술하시오."
        ]
    },
    {
        "id": 55,
        "preprocessed_group": "0.3T AMR(Box Conveyor)이 도킹 후 에러를 발생시켰으나 도킹 상태가 정상(Docking OK)인 경우, 작업자는 0.3T AMR HMI 메인 화면에서 RESUME 버튼을 클릭하여 복구를 시도한다.\n\n자동 복구 실패 시, 0.3T AMR의 1차 초기화를 위해 설비의 Work Reset을 수행한 후 AMR의 Job Cancel, Error Reset, Door Close를 순차적으로 진행하고 상태를 After Docking으로 변경한다.\n\n1차 초기화 후에도 문제가 해결되지 않을 경우, 0.3T AMR의 2차 완전 초기화를 위해 설비의 Call Create Pause를 ON으로 설정하고 Call Cancel 및 Work Reset을 수행하며, AMR의 Job Cancel과 Error Reset을 실행한다.\n\n2차 완전 초기화 후 작업 전 단계(Before Work)에서 수동 조작이 필요한 경우, 0.3T AMR의 상태를 After Docking으로 설정하고 공급 미션은 MS25(회수 포트)로, 회수 미션은 복귀(Go back)로 지정한 뒤 설비 라인을 점검하고 Call Create Pause를 OFF로 전환한다.\n\n2차 완전 초기화 후 작업 중 단계(In Work)에서 수동 조작이 필요한 경우, 0.3T AMR의 박스 위치 점검과 도어 닫기를 수행한 후 Payload 값을 수동으로 설정한다.\n\n작업 중 단계에서 0.3T AMR에 적재된 박스가 빈 박스(Empty Box)인 경우, MS25 Unload를 수행하고 Auto 모드로 전환하여 복귀 절차를 진행한다.\n\n작업 중 단계에서 0.3T AMR에 실물 박스가 적재되어 있거나 박스가 없는 경우(Full Box or Nothing), 즉시 창고 복귀(Go Back)를 수행하고 설비의 Call Create Pause를 OFF로 변경하여 라인을 재개한다.",
        "textbook": "# BMA 공정 내 0.3T AMR 도킹 시퀀스 및 예외 상황 복구 메커니즘에 관한 심층 분석\n**Deep Analysis on Docking Sequence and Exception Recovery Mechanism of 0.3T AMR in BMA Process**\n\n---\n\n## 1. 서론: 이종 시스템 간 핸드쉐이킹(Handshaking)과 비동기적 오류의 본질\n\n현대자동차그룹 BMA(Battery Module Assembly) 공정의 물류 자동화 핵심인 0.3T AMR(Box Conveyor Type)은 물리적 공간에서의 이동뿐만 아니라, 상위 관제 시스템(ACS/MCS) 및 설비 PLC와의 끊임없는 데이터 교환을 통해 작동한다. 특히 AMR이 설비와 물리적으로 결합하는 **도킹(Docking)** 단계는 기구적 정밀도와 통신 프로토콜의 정합성(Integrity)이 동시에 요구되는 임계 구역(Critical Section)이다.\n\n본 챕터에서는 0.3T AMR이 도킹 프로세스 중 겪을 수 있는 논리적 교착 상태(Deadlock)와 이를 해소하기 위한 단계별 복구 전략(Resume, 1st/2nd Initialization)의 공학적 원리를 규명한다. 단순한 에러 소거가 아닌, 시스템의 **상태 머신(State Machine) 동기화** 관점에서 복구 절차를 재해석한다.\n\n---\n\n## 2. 과도 응답 오류와 상태 재동기화 (Transient Error & Resynchronization)\n\n### 2.1. 현상 분석: 물리적 도킹 성공과 논리적 에러의 괴리\n0.3T AMR이 설비와 도킹을 완료하여 물리적 정렬(Alignment)이 완벽하고 센서(Lidar 또는 Magnetic Guide) 상으로도 `Docking OK` 신호가 확인되었음에도 불구하고, 시스템이 에러를 송출하는 현상은 주로 **통신 레이턴시(Latency)**나 **신호 디바운싱(Debouncing)** 실패에 기인한다.\n\n*   **발생 원리:** AMR과 설비 PLC 간의 핸드쉐이킹 과정에서, 설비의 `Ready` 신호와 AMR의 `In-Position` 신호가 교차 검증되어야 하는 타임 윈도우(Time Window) 내에 패킷 손실이나 일시적 노이즈가 발생할 경우, 안전 로직(Safety Logic)은 이를 '불확실한 상태'로 간주하여 에러를 트리거한다.\n*   **복구 메커니즘 (RESUME):** 운영자가 HMI의 `RESUME` 버튼을 클릭하는 행위는 단순한 재시작이 아니다. 이는 PLC와 AMR의 통신 버퍼를 플러시(Flush)하지 않고, 현재의 센서 값을 기반으로 **상태 검증 로직(State Validation Logic)을 재수행(Re-polling)**하도록 강제하는 인터럽트 신호다. 즉, 물리적 상태가 정상이므로 논리적 상태를 물리적 상태에 맞춰 동기화시키는 과정이다.\n\n---\n\n## 3. 1차 초기화: 로컬 제어권 회수 및 강제 상태 천이 (Local Reset & State Transition)\n\n`RESUME`을 통한 재동기화가 실패했다는 것은 일시적 통신 오류를 넘어, AMR 내부의 태스크 매니저(Task Manager)와 설비 PLC의 시퀀스가 서로 다른 단계(Step)를 가리키고 있는 **시퀀스 불일치(Sequence Mismatch)** 상태임을 의미한다. 이때는 `1차 초기화`를 통해 양측의 시퀀스를 강제로 정렬해야 한다.\n\n### 3.1. 설비와 로봇의 순차적 리셋 (Sequential Reset)\n*   **설비 Work Reset:** 우선적으로 설비 측의 작업을 리셋한다. 이는 설비가 AMR에게 자재를 이재(Transfer)하거나 신호를 보내려는 시도를 중단시켜, AMR이 독립적으로 제어 가능한 상태(Idle)가 되도록 **인터락(Interlock)을 해제**하는 과정이다.\n*   **AMR Job Cancel & Error Reset:** 이후 AMR의 잔여 작업(Job)을 취소하여 메모리 상의 주행 경로 및 작업 큐(Queue)를 소거한다. 이는 로봇을 논리적인 '무부하(No Operation)' 상태로 만든다.\n\n### 3.2. 물리적 안전 확보와 상태 강제 할당\n*   **Door Close:** 에러 상태에서 개방되었을 수 있는 도어를 닫는 것은 단순한 정리가 아니다. 이는 AMR의 주행 안전 회로(Safety Circuit)를 폐쇄(Close)하여, 다음 명령 시 즉각적인 모터 구동이 가능하도록 **하드웨어적 준비(Ready)**를 마치는 단계다.\n*   **State: After Docking:** 시스템은 AMR의 상태를 강제로 `After Docking`으로 변경한다. 이는 도킹 진입(Docking In)이나 작업 중(In Work) 단계에서 꼬여버린 로직을 건너뛰고, \"이미 도킹 후 작업이 끝난 상태\"라고 시스템에 선언함으로써, 다음 시퀀스(출차 또는 복귀)로 넘어가기 위한 **논리적 바이패스(Logical Bypass)** 기법이다.\n\n---\n\n## 4. 2차 완전 초기화: 글로벌 트래픽 격리 및 미션 재할당 (Global Isolation & Mission Reassignment)\n\n1차 초기화로도 해결되지 않는 경우, 이는 해당 AMR뿐만 아니라 상위 관제 시스템(ACS)의 할당 로직까지 얽혀있는 심각한 교착 상태다. 따라서 `2차 완전 초기화`는 개별 로봇을 넘어 **전체 라인의 트래픽 흐름(Traffic Flow)** 관점에서 접근해야 한다.\n\n### 4.1. 호출 생성 차단 (Call Create Pause ON)의 중요성\n이 단계의 핵심은 `Call Create Pause`를 `ON`으로 설정하는 것이다.\n*   **Why?** 문제가 발생한 AMR을 초기화하는 동안, ACS가 해당 설비나 로봇에게 새로운 작업(Call)을 지속적으로 할당하려 하면 **경쟁 상태(Race Condition)**가 발생한다.\n*   **Mechanism:** 신규 호출 생성을 차단함으로써, 해당 구역을 논리적으로 **격리(Isolation)**시킨다. 이는 네트워크상의 '방화벽'과 유사한 역할로, 오류가 전파되거나 복구 중인 로봇에 중복 명령이 하달되는 것을 원천 봉쇄한다.\n\n### 4.2. 완전 소거 (Call Cancel & Work Reset)\n격리된 상태에서 `Call Cancel`과 `Work Reset`을 수행하는 것은, 상위 시스템(MCS/ACS)에 등록된 해당 로봇의 모든 트랜잭션 ID를 삭제하는 **하드 리셋(Hard Reset)**이다. 이는 데이터베이스 상에서 해당 작업 건을 완전히 들어내어, 시스템이 해당 로봇을 '새로운 가용 자원'으로 인식하게 만든다.\n\n---\n\n## 5. 수동 조작 시나리오별 동역학적/논리적 대응 전략\n\n2차 초기화 후, AMR은 자신의 위치나 적재 상태에 대한 정보(Context)를 소실한 상태일 수 있다. 따라서 엔지니어는 현재의 물리적 상황(작업 전/중, 박스 유무)에 따라 AMR의 **페이로드(Payload) 파라미터**와 **목적지 노드(Node)**를 재설정해야 한다.\n\n### 5.1. 작업 전(Before Work) 단계의 경로 최적화\n작업을 수행하기 전 에러가 발생했다면, 자재의 흐름을 결정해야 한다.\n*   **MS25 (회수 포트) vs. Go Back:**\n    *   시스템은 수동 조작 시 `After Docking` 상태를 부여하여 로봇이 즉시 이동 가능하게 한다.\n    *   이때 공급 미션은 `MS25`로 지정되는데, 이는 공정 라인에 투입되지 못한 자재를 회수 포트로 보내는 **예외 처리 경로(Exception Path)**다.\n    *   회수 미션은 `Go Back`으로 지정하여, 불필요한 자재 이동 없이 대기 장소로 복귀시켜 가동률(Availability)을 확보한다.\n*   **라인 재개:** 모든 조치 후 `Call Create Pause`를 `OFF`로 전환하여, 격리되었던 트래픽 제어권을 다시 활성화한다.\n\n### 5.2. 작업 중(In Work) 단계와 페이로드(Payload) 데이터 무결성\n작업 도중 에러가 발생했다면, 가장 중요한 것은 **'AMR이 현재 무엇을 들고 있는가?'**를 시스템에 알리는 것이다.\n*   **Payload 수동 설정의 공학적 의미:** AMR의 주행 알고리즘은 적재 중량에 따라 가감속 프로파일(Acceleration Profile)과 제동 거리(Braking Distance)를 다르게 계산한다. 초기화로 인해 Payload 값이 `0` 또는 `Null`이 된 상태에서 실물 박스를 싣고 주행하면, 관성 모멘트(Moment of Inertia) 불일치로 인해 정지 정확도가 떨어지거나 전복 사고가 발생할 수 있다. 따라서 박스 유무를 육안 확인 후 Payload 값을 수동 입력하여 **데이터 무결성(Data Integrity)**을 복구해야 한다.\n\n### 5.3. 적재 상태에 따른 분기 로직 (Branching Logic)\n*   **Empty Box (빈 박스)인 경우:**\n    *   빈 박스는 공정상 가치가 없거나 회수 용기일 가능성이 높다. 따라서 `MS25 Unload`를 수행하여 라인 밖으로 배출하고, `Auto` 모드로 전환하여 스스로 복귀하도록 한다. 이는 **폐루프(Closed Loop) 자재 순환**을 유지하기 위함이다.\n*   **Full Box or Nothing (실물 박스 또는 없음)인 경우:**\n    *   실물 박스가 있거나 아예 없는 경우, 불확실성을 제거하기 위해 즉시 `Go Back`을 수행한다.\n    *   실물 박스가 있는 상태에서의 `Go Back`은 자재의 재투입이나 품질 검사를 위한 창고 복귀를 의미하며, 박스가 없는 경우의 `Go Back`은 다음 작업을 위한 빠른 가용성 확보를 의미한다.\n    *   이 과정은 설비의 `Call Create Pause`를 `OFF`로 변경하여 전체 라인의 **택트 타임(Takt Time)** 손실을 최소화하는 것으로 마무리된다.\n\n---\n\n## 6. 결론\n\n0.3T AMR의 에러 복구 절차는 단순한 버튼 조작의 나열이 아니다. 이는 **(1) 센서와 로직의 재동기화(Resume), (2) 로컬 제어기의 상태 강제 천이(1st Init), (3) 글로벌 트래픽 격리 및 트랜잭션 소거(2nd Init)**로 이어지는 계층적 방어 전략(Layered Defense Strategy)이다. 엔지니어는 각 단계에서 발생하는 데이터의 흐름과 물리적 기구부의 상태 변화를 정확히 이해함으로써, 시스템의 가동 중단(Downtime)을 최소화하고 BMA 공정의 연속성을 보장할 수 있다.",
        "questions": [
            "BMA 공정 내 0.3T AMR의 도킹 시퀀스 정밀 분석 및 예외 상황 발생 시의 단계별 복구 메커니즘에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "도킹 과정에서 발생하는 통신 레이턴시 및 신호 디바운싱 오류가 시스템의 상태 머신(State Machine) 동기화에 미치는 영향과, RESUME 및 1차 초기화 과정을 통한 로컬 제어권 회수의 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "2차 완전 초기화 단계에서 'Call Create Pause'를 통한 글로벌 트래픽 격리가 필요한 논리적 근거를 제시하고, 작업 중(In Work) 에러 발생 시 페이로드(Payload) 데이터 무결성 확보가 주행 동역학 및 안전 로직에 미치는 인과관계와 대응 메커니즘을 서술하시오."
        ]
    },
    {
        "id": 56,
        "preprocessed_group": "1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 있는 상태에서 트러블 슈팅이 해결되지 않을 경우, 설비 PLC 및 센서를 점검하고 1T AMR의 리프트를 작업 전 상태로 상하 구동하여 초기화한 뒤 설비 Work Reset과 AMR의 Job Cancel, Error Reset, After Docking 설정을 순차적으로 수행한다.\n\n1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 없는 상태에서 설비(Product Line) 측 문제로 에러가 발생한 경우, 설비의 Call Create Pause를 활성화하고 Call Cancel과 Work Reset을 수행한 뒤 AMR의 Job Cancel, Error Reset, After Docking 처리를 거쳐 라인 점검 후 Call Create Pause를 해제한다.\n\n1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 없는 상태에서 창고(Warehouse) 측 문제로 에러가 발생한 경우, 수동 조작이 필요한 상황으로 간주하여 보전반을 호출한다.\n\n1T AMR(Pallet Lift)의 도킹 상태 확인 결과 도킹에 실패한 경우, [4.1. 도킹 실패 및 센서 에러] 섹션에 명시된 조치 절차를 수행한다.\n\n1T AMR(Pallet Lift)의 도킹 성공 후 제품(SKID)이 감지되었으나 자동 복구에 실패하여 AMR 센서 이상이 확인된 경우, [5.2 센서 점검] 가이드에 따라 조치한다.",
        "textbook": "# BMA 자동화 시스템 기술 백서: 1T AMR(Pallet Lift) 예외 처리 및 복구 메커니즘\n\n## 1. 서론: 이종 시스템 간의 핸드쉐이킹(Handshaking)과 상태 동기화\n\nBMA(Battery Module Assembly) 공정의 효율성은 물류의 혈관 역할을 하는 AMR(Autonomous Mobile Robot)과 각 공정 설비(Equipment) 간의 정밀한 협업에 달려 있습니다. 특히 1T급 고하중 Pallet Lift AMR은 물리적인 리프팅(Lifting) 동작과 논리적인 작업 지시(Job Order)가 결합된 복합 시스템입니다.\n\n본 챕터에서는 AMR이 설비와 도킹(Docking)을 성공적으로 수행한 시점, 즉 **'물리적 결합'이 완료된 상태에서 발생하는 예외 상황(Exception)**들을 다룹니다. 이때 발생하는 에러는 단순한 기계적 고장이 아니라, 상위 관제 시스템(ACS/MCS), 설비 PLC, 그리고 AMR 내부 컨트롤러 간의 **상태 불일치(State Mismatch)**에서 기인하는 경우가 많습니다. 따라서 복구 절차는 물리적 기구의 초기화와 논리적 신호의 동기화를 순차적으로 수행하여 시스템의 무결성을 확보하는 데 목적이 있습니다.\n\n---\n\n## 2. 적재 상태(Loaded State)에서의 교착 상태(Deadlock) 해결 알고리즘\n\n### 2.1. 물리적/논리적 복합 에러의 발생 메커니즘\n1T AMR이 도킹에 성공하고 제품(SKID)을 적재하고 있는 상황은 시스템적으로 가장 민감한 상태입니다. AMR은 수백 kg에 달하는 배터리 모듈을 리프트 상부에 얹고 있으며, 이는 AMR의 무게 중심(Center of Gravity)과 관성 모멘트에 변화를 줍니다.\n\n이 상태에서 트러블 슈팅이 실패한다는 것은, AMR 내부의 주행 제어기(Navigation Controller)와 리프트 제어기(Lift Controller) 간의 통신이 두절되었거나, 설비 PLC와의 인터락(Interlock) 신호가 'High' 상태로 고착(Latching)되었음을 의미합니다.\n\n### 2.2. 리프트 구동을 통한 센서 재보정 (Sensor Recalibration)\n복구의 첫 단계로 **'리프트를 작업 전 상태로 상하 구동하여 초기화'**하는 과정이 필수적입니다. 이는 단순한 기계적 움직임이 아닙니다.\n*   **엔코더(Encoder) 영점 보정:** 리프트 모터의 위치 제어 엔코더 값이 노이즈로 인해 틀어졌을 가능성을 배제하기 위해, 물리적 리미트 스위치(Limit Switch)를 다시 트리거하여 Z축의 절대 좌표를 재설정합니다.\n*   **하중 분산 확인:** 리프트를 상하로 구동함으로써 SKID가 AMR의 상판에 올바르게 안착되었는지, 편하중(Unbalanced Load)으로 인한 모터 과부하가 없는지 전류 센서 값을 통해 간접적으로 검증합니다.\n\n### 2.3. 순차적 논리 리셋 (Sequential Logical Reset)\n물리적 초기화 후에는 **[설비 Work Reset] → [AMR Job Cancel] → [Error Reset] → [After Docking]**의 순서로 논리적 복구를 수행합니다. 이 순서는 데이터 흐름의 인과관계에 기반합니다.\n1.  **설비 Work Reset:** 설비 PLC가 가지고 있는 '작업 중' 상태를 해제하여, 설비가 AMR을 붙잡고 있는 논리적 족쇄(Interlock)를 풉니다.\n2.  **AMR Job Cancel:** 상위 시스템(MCS)으로부터 할당받은 작업 ID(Task ID)를 소거하여, AMR이 더 이상 잘못된 명령을 수행하려 시도하지 않도록 합니다.\n3.  **Error Reset & After Docking:** 내부 에러 레지스터를 비우고(Clear), AMR의 상태를 '도킹 완료 직후'의 대기 상태로 강제 천이(State Transition)시킵니다.\n\n> **Note:** 만약 제품이 감지되었으나 자동 복구에 실패하고, AMR 자체 센서(예: 포토 센서, 근접 센서)의 하드웨어적 이상이 확인될 경우, 소프트웨어 리셋은 무의미합니다. 이 경우 **[5.2 센서 점검]** 가이드에 따라 하드웨어 교체 또는 배선 점검을 수행해야 합니다.\n\n---\n\n## 3. 공(Empty) 상태에서의 설비 및 창고 측 에러 처리 프로토콜\n\nAMR이 도킹에 성공했으나 제품(SKID)이 없는 상태, 즉 '픽업(Pick-up) 직전' 또는 '언로딩(Unloading) 직후'의 에러는 발생 원인이 **설비(Product Line)**냐 **창고(Warehouse)**냐에 따라 대응 로직이 완전히 분리됩니다.\n\n### 3.1. 설비(Product Line) 측 문제: 호출 신호 제어 (Call Signal Throttling)\n설비 라인에서 에러가 발생한 경우, 가장 큰 위험은 고장 난 설비가 계속해서 AMR을 호출(Call)하는 **'좀비 콜(Zombie Call)'** 현상입니다. 이를 방지하기 위해 다음과 같은 방어 로직이 작동합니다.\n\n1.  **Call Create Pause 활성화:** 이는 네트워크 레벨에서의 '차단(Blocking)' 동작입니다. 설비 PLC가 ACS/MCS로 보내는 작업 요청 신호 생성을 일시적으로 중단시켜, 불필요한 트래픽과 추가적인 AMR 배차를 막습니다.\n2.  **Call Cancel & Work Reset:** 이미 생성된 잘못된 호출을 취소하고 설비의 상태를 초기화합니다.\n3.  **AMR 복구 (Job Cancel -> Error Reset -> After Docking):** AMR을 대기 상태로 되돌립니다.\n4.  **라인 점검 후 Pause 해제:** 설비의 물리적/소프트웨어적 문제가 완전히 해결된 것이 확인된 후에만 `Call Create Pause`를 해제하여 정상적인 물류 흐름을 재개합니다.\n\n### 3.2. 창고(Warehouse) 측 문제: 인적 개입(Human-in-the-loop)의 필요성\n반면, 창고 측에서 발생한 에러는 자동 복구를 시도하지 않고 **'보전반 호출(Manual Intervention)'**을 원칙으로 합니다. 그 이유는 다음과 같습니다.\n*   **WMS 데이터 무결성:** 창고는 WMS(Warehouse Management System)와 연동되어 재고(Inventory) 데이터를 관리합니다. 현장에서 임의로 리셋을 수행할 경우, 실물은 없는데 전산상에는 재고가 존재하는 **'유령 재고(Phantom Inventory)'** 문제가 발생할 수 있습니다.\n*   **비정형 환경:** 창고는 라인 설비보다 환경 변화(적재물의 틀어짐, 파렛트 파손 등)가 심해, 센서만으로는 상황을 완벽히 인지하기 어렵습니다. 따라서 엔지니어의 인지적 판단이 필요한 영역으로 분류됩니다.\n\n---\n\n## 4. 도킹 실패 및 정밀 주행(Navigation) 오류\n\nAMR이 도킹 위치에 도달했으나, 최종적으로 **도킹 실패(Docking Failure)** 판정을 받는 경우는 주로 위치 인식(Localization)의 오차에서 기인합니다.\n\n*   **원인 분석:** 1T AMR은 라이다(LiDAR)와 바닥의 QR/V-Marker 등을 융합하여 위치를 추정합니다. 도킹 실패는 AMR의 실제 위치와 맵(Map) 상의 좌표 간 오차가 허용 공차(Tolerance, 통상 ±10mm 이내)를 벗어났음을 의미합니다.\n*   **대응:** 이 경우 무리한 재진입은 설비와의 충돌을 유발할 수 있으므로, 즉시 정지 후 **[4.1. 도킹 실패 및 센서 에러]** 섹션의 절차를 따릅니다. 이는 주로 주변 환경의 변화(장애물 등)로 인한 라이다 매칭률 저하를 점검하는 과정을 포함합니다.\n\n---\n\n## 5. 결론\n\n1T AMR의 에러 조치 프로세스는 단순한 '재부팅'이 아닙니다. 이는 **물리적 기구의 안전 확보(Safety)**, **상위 시스템과의 데이터 동기화(Synchronization)**, 그리고 **공정 전체의 흐름 제어(Flow Control)**가 유기적으로 연결된 공학적 알고리즘입니다. 엔지니어는 각 조치 단계가 시스템 아키텍처 내에서 어떤 레이어(Layer)를 건드리고 있는지 명확히 이해하고 작업을 수행해야 합니다.",
        "questions": [
            "BMA 자동화 시스템 내 1T AMR(Pallet Lift)의 예외 처리 및 복구 메커니즘 전반에 대해 기술 백서 형식으로 상세히 서술하시오.",
            "적재 상태(Loaded State)에서 발생하는 교착 상태 해결을 위해 리프트 구동을 통한 센서 재보정 과정과 설비 PLC 및 상위 시스템(ACS/MCS) 간의 순차적 논리 리셋이 이루어지는 작동 원리와 시스템적 상호작용을 공학적으로 분석하시오.",
            "설비(Product Line) 측의 에러로 인한 '좀비 콜(Zombie Call)' 현상 발생 시, Call Create Pause 활성화를 포함한 단계별 방어 로직의 판단 과정과 시스템의 대응 메커니즘을 서술하시오."
        ]
    }
]